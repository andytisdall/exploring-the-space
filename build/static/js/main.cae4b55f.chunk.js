(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{237:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(37),c=n.n(i),s=n(7),o=n(15),u=n(107),l=n(2),d=n(14),p=n(4),b=n.n(p),j=n(10),f=n(108),O=n.n(f).a.create({baseURL:"http://exploring-the-space.com/api"});O.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)}));var h=O,m="SIGN_IN",v="SIGN_OUT",y="ERROR",x="FETCH_TIERS",g="FETCH_PLAYLISTSONGS",N="FETCH_PLAYLIST",S="FETCH_PLAYLISTS",k="FETCH_BAND",w="FETCH_BANDS",E="FETCH_TITLES",B="FETCH_VERSIONS",T="FETCH_BOUNCES",I="CREATE_TIER",V="CREATE_PLAYLISTSONG",C="CREATE_TITLE",A="CREATE_PLAYLIST",D="CREATE_VERSION",L="CREATE_BOUNCE",P="CREATE_BAND",_="EDIT_TIER",F="EDIT_PLAYLIST",q="EDIT_PLAYLISTSONG",U="EDIT_TITLE",R="EDIT_VERSION",M="EDIT_BOUNCE",z="EDIT_BAND",Y="DELETE_TIER",H="DELETE_PLAYLIST",K="DELETE_PLAYLISTSONG",G="DELETE_TITLE",W="DELETE_VERSION",X="DELETE_BOUNCE",J="DELETE_BAND",Q="PLAY_AUDIO",Z="PAUSE_AUDIO",$="QUEUE_SONGS",ee="NEXT_SONG",te="CHANGE_VOLUME",ne="SELECT_VERSION",ae="SELECT_BOUNCE",re=n(18),ie=Object(re.a)(),ce=n(8),se=n.n(ce),oe=function(e){var t;return t=e.response?e.response.data.error:e.message,{type:y,payload:t}},ue=function(){return localStorage.removeItem("token"),ie.push("/"),{type:v}},le=function(e){return{type:y,payload:e}},de=function(){return function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("/bands");case 3:n=e.sent,t({type:w,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(oe(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},pe=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.get("/versions/".concat(e));case 3:a=t.sent,n({type:B,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(oe(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},be=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.get("/bounces/".concat(e));case 3:a=t.sent,n({type:T,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(oe(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},je=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=a().bands.currentBand,t.next=4,h.post("/tiers",Object(l.a)(Object(l.a)({},e),{},{currentBand:r.id}));case 4:i=t.sent,n({type:I,payload:i.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(oe(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()},fe=function e(t,n,a){return function(){var r=Object(j.a)(b.a.mark((function r(i,c){var s,o,u,d,p,j;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=c().bands.currentBand,(o=c().versions[n]).current&&(t.current=!0),r.next=6,h.patch("/versions/".concat(n),Object(l.a)(Object(l.a)({},t),{},{currentBand:s.id}));case 6:(u=r.sent).data.current&&!o.current&&(d=c().titles[a],p=d.versions.map((function(e){return c().versions[e]})),(j=p.find((function(e){return e.current}))).current=!1,i(e(se.a.pick(j,"name","notes","current"),j.id,a))),i({type:R,payload:u.data}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),i(oe(r.t0));case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e,t){return r.apply(this,arguments)}}()},Oe=function e(t,n,a){return function(){var r=Object(j.a)(b.a.mark((function r(i,c){var s,o,u,d;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s=c().bands.currentBand,(o=c().bounces[n]).latest&&(t.latest=!0),!t.file){r.next=12;break}t.file=t.file[0],(u=new FileReader).onload=function(r){(new(window.AudioContext||window.webkitAudioContext)).decodeAudioData(r.target.result,function(){var r=Object(j.a)(b.a.mark((function r(u){var d,p,j,f,O,m,v,y;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(f in d=parseInt(u.duration),p=Object(l.a)(Object(l.a)({},t),{},{currentBand:s.id,duration:d}),j=new FormData,p)j.append(f,p[f]);return r.next=6,h.post("/bounces".concat(n),j,{headers:{"Content-Type":"multipart/form-data"}});case 6:(O=r.sent).data.latest&&!o.latest&&(m=c().versions[a],v=m.bounces.map((function(e){return c().bounces[e]})),(y=v.find((function(e){return e.latest}))).latest=!1,i(e(se.a.pick(y,"date","comments","latest"),y.id,a))),i({type:M,payload:O.data});case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},u.onerror=function(e){console.error("An error ocurred reading the file: ",e)},u.readAsArrayBuffer(t.file),r.next=16;break;case 12:return r.next=14,h.patch("/bounces/".concat(n),Object(l.a)(Object(l.a)({},t),{},{currentBand:s.id}));case 14:d=r.sent,i({type:M,payload:d.data});case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(0),i(oe(r.t0));case 21:case"end":return r.stop()}}),r,null,[[0,18]])})));return function(e,t){return r.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().bands.currentBand,t.prev=1,t.next=4,h.post("/tiers/delete",{tierId:e,currentBand:r.id});case 4:(i=t.sent).data.trackList.forEach((function(e){n(me(e,i.data.id))})),n({type:Y,payload:i.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(oe(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()},me=function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r().bands.currentBand,n.prev=1,n.next=4,h.post("/titles/delete",{titleId:e,tierId:t,currentBand:i.id});case 4:(c=n.sent).data.versions.forEach((function(e){a(ve(e,c.data.id))})),s=Object.values(r().playlists),Object.values(r().playlistSongs).filter((function(t){return t.title===e})).forEach((function(e){var t=s.find((function(t){return t.songs.includes(e.id)}));a(xe(e.id,t.id))})),a({type:G,payload:{title:c.data,tier:t}}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a(oe(n.t0));case 15:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e,t){return n.apply(this,arguments)}}()},ve=function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c,s,o,u;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r().bands.currentBand,n.prev=1,n.next=4,h.post("/versions/delete",{versionId:e,titleId:t,currentBand:i.id});case 4:(c=n.sent).data.current&&(s=r().titles[t])&&((o=s.versions.filter((function(t){return t!==e}))).length?((u=r().versions[o[o.length-1]]).current=!0,a(Ne(u.id,t)),a(fe(se.a.pick(u,"name","notes","current"),u.id,t))):a(Ne(null,t))),c.data.bounces.forEach((function(e){a(ye(e,c.data.id,t))})),a({type:W,payload:{version:c.data,title:t}}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),a(oe(n.t0));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e,t){return n.apply(this,arguments)}}()},ye=function(e,t,n){return function(){var a=Object(j.a)(b.a.mark((function a(r,i){var c,s,o,u,l;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=i().bands.currentBand,a.prev=1,a.next=4,h.post("/bounces/delete",{bounceId:e,versionId:t,currentBand:c.id});case 4:(s=a.sent).data.latest&&(o=i().versions[t])&&((u=o.bounces.filter((function(t){return t!==e}))).length?((l=i().bounces[u[u.length-1]]).latest=!0,r(Se(l.id,n)),r(Oe(se.a.pick(l,"date","comments","latest"),l.id,t))):r(Se(null,n))),r({type:X,payload:{bounce:s.data,version:t}}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),r(oe(a.t0));case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e,t){return a.apply(this,arguments)}}()},xe=function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r().bands.currentBand,n.prev=1,n.next=4,h.post("/playlistsongs/delete",{playlistSongId:e,playlistId:t,currentBand:i.id});case 4:c=n.sent,a({type:K,payload:{playlistsong:c.data,playlist:t}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a(oe(n.t0));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}()},ge=function(){return{type:Q}},Ne=function(e,t){return{type:ne,payload:{version:e,titleId:t}}},Se=function(e,t){return{type:ae,payload:{bounce:e,titleId:t}}},ke=n(0),we=Object(s.b)((function(e){return{error:e.error.error}}),{throwError:le})((function(e){var t=e.error,n=e.throwError;return t?Object(ke.jsx)("div",{className:"error",onClick:function(){return n(null)},children:t}):null})),Ee=n(27),Be=n(13),Te=n(6),Ie=n(30),Ve=n.n(Ie),Ce=n(22),Ae=n(23),De=n(25),Le=n(24),Pe=n(239),_e=n(238),Fe=function(e){Object(De.a)(n,e);var t=Object(Le.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={boxVisible:!1,selectedOption:null},a.blockSpaceBarPress=function(e){e.stopPropagation()},a.bodyClick=function(e){a.ref.current&&a.ref.current.contains(e.target)||a.state.boxVisible&&a.setState({boxVisible:!1})},a.showOptions=function(e){return e.options.map((function(e){return Object(ke.jsx)("option",{value:e.value,children:e.display},e.value)}))},a.onFileInput=function(e,t){e.preventDefault(),(0,t.onChange)(e.target.files[0])},a.input=function(e){var t="";return"date"===e.type&&(t="calendar"),"file"===e.type?(delete e.input.value,Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("div",{className:"form-errors",children:e.meta.touched&&e.meta.error&&Object(ke.jsxs)("p",{children:[e.meta.error,Object(ke.jsx)("span",{children:"\u2193"})]})}),Object(ke.jsx)("input",Object(l.a)(Object(l.a)({},e.input),{},{type:"file",className:"inputfile",onChange:function(t){return a.onFileInput(t,e.input)}}))]})):"select"===e.type?Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("div",{className:"form-errors",children:e.meta.touched&&e.meta.error&&Object(ke.jsxs)("p",{children:[e.meta.error,Object(ke.jsx)("span",{children:"\u2193"})]})}),Object(ke.jsx)("select",Object(l.a)(Object(l.a)({},e.input),{},{autoFocus:e.autoFocus,type:e.type,children:e.options?a.showOptions(e):null}))]}):Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("div",{className:"form-errors",children:e.meta.touched&&e.meta.error&&Object(ke.jsxs)("p",{children:[e.meta.error,Object(ke.jsx)("span",{children:"\u2193"})]})}),Object(ke.jsx)("input",Object(l.a)(Object(l.a)({},e.input),{},{autoFocus:e.autoFocus,type:e.type,className:"text-input ".concat(t)}))]})},a.required=function(e){return e?void 0:"Required"},a.showFields=function(){return a.props.fields.map((function(e,t){var n=0===t,r=a.input;return Object(ke.jsxs)("div",{children:[Object(ke.jsxs)("label",{children:[e.label,": "]}),Object(ke.jsx)(Pe.a,{name:e.name,component:r,autoFocus:n,type:e.type,validate:e.required?a.required:null,options:e.options,children:e.options?a.showOptions(e):null})]},e.label)}))},a.submitForm=function(e){a.props.onSubmit(e),a.setState({boxVisible:!1}),a.props.reset()},a.showBox=function(){if(a.state.boxVisible)return Object(ke.jsx)(ke.Fragment,{children:Object(ke.jsxs)("div",{className:"addbox",onClick:function(e){return e.stopPropagation()},children:[Object(ke.jsx)("h3",{className:"addbox-title",children:a.props.title}),Object(ke.jsxs)("form",{onSubmit:a.props.handleSubmit(a.submitForm),children:[a.showFields(),Object(ke.jsx)("div",{className:"submit-button-centered",children:Object(ke.jsx)("button",{className:"submit-button",type:"submit",children:"OK"})})]})]})})},a.click=function(e){e.stopPropagation(),a.ref.current&&a.ref.current===e.target||(a.state.boxVisible?a.setState({boxVisible:!1}):a.setState({boxVisible:!0}))},a.ref=r.a.createRef(),a}return Object(Ae.a)(n,[{key:"componentDidUpdate",value:function(e,t){!1===t.boxVisible&&!0===this.state.boxVisible?(document.addEventListener("click",this.bodyClick,{capture:!0}),document.addEventListener("keydown",this.blockSpaceBarPress,{capture:!0})):!0===t.boxVisible&&!1===this.state.boxVisible&&(document.removeEventListener("click",this.bodyClick,{capture:!0}),document.removeEventListener("keydown",this.blockSpaceBarPress,{capture:!0}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.bodyClick,{capture:!0}),document.removeEventListener("keydown",this.blockSpaceBarPress,{capture:!0})}},{key:"render",value:function(){return Object(ke.jsx)(ke.Fragment,{children:Object(ke.jsxs)("div",{className:"add",onClick:this.click,ref:this.ref,children:[Object(ke.jsx)("img",{src:this.props.image}),this.showBox()]})})}}]),n}(r.a.Component),qe=Object(_e.a)({form:"form"})(Fe),Ue=function(e){Object(De.a)(n,e);var t=Object(Le.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"componentDidMount",value:function(){document.querySelector(".container").classList.add("modal-active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".container").classList.remove("modal-active")}},{key:"render",value:function(){return c.a.createPortal(Object(ke.jsx)("div",{onClick:this.props.onDismiss,className:"dimmer",children:Object(ke.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"modal-box",children:[Object(ke.jsx)("div",{children:this.props.content}),Object(ke.jsx)("div",{children:this.props.actions})]})}),document.querySelector("#modal"))}}]),n}(r.a.Component),Re=function(e){var t=e.onSubmit,n=e.displayName,r=Object(a.useState)(!1),i=Object(Be.a)(r,2),c=i[0],s=i[1];return Object(ke.jsxs)("div",{children:[Object(ke.jsx)("img",{src:"/images/delete.png",className:"delete",onClick:function(e){e.stopPropagation(),s(!0)}}),c&&Object(ke.jsx)(Ue,{content:"Seriously delete ".concat(n,"?"),actions:Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("button",{className:"modal-button",onClick:function(){t(),s(!1)},children:"Delete"}),Object(ke.jsx)("button",{className:"modal-button",onClick:function(){return s(!1)},children:"No Wait"})]}),onDismiss:function(){return s(!1)}})]})},Me=function(e){var t=function(t){Object(De.a)(a,t);var n=Object(Le.a)(a);function a(e){var t;return Object(Ce.a)(this,a),(t=n.call(this,e)).state={authorized:!1},t.handleUpdate=function(){t.checkAuth()},t}return Object(Ae.a)(a,[{key:"componentDidMount",value:function(){this.checkAuth()}},{key:"checkAuth",value:function(){this.props.user&&this.props.currentBand&&this.props.user.bands.includes(this.props.currentBand.id)&&this.setState({authorized:!0})}},{key:"render",value:function(){return Object(ke.jsx)(e,Object(l.a)(Object(l.a)({},this.props),{},{authorized:this.state.authorized,handleUpdate:this.handleUpdate}))}}]),a}(r.a.Component);return Object(s.b)((function(e){return{user:e.auth.user,currentBand:e.bands.currentBand}}))(t)},ze=Object(s.b)(null,{selectBounce:Se,createBounce:function(e,t,n){return function(){var a=Object(j.a)(b.a.mark((function a(r,i){var c,s,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{c=i().bands.currentBand,(s=i().versions[t]).bounces.length||(e.latest=!0),e.file=e.file[0],(o=new FileReader).onload=function(a){(new(window.AudioContext||window.webkitAudioContext)).decodeAudioData(a.target.result,function(){var a=Object(j.a)(b.a.mark((function a(o){var u,d,p,j,f,O,m;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(j in u=parseInt(o.duration),d=Object(l.a)(Object(l.a)({},e),{},{currentBand:c.id,version:t,duration:u}),p=new FormData,d)p.append(j,d[j]);return a.next=6,h.post("/bounces",p,{headers:{"Content-Type":"multipart/form-data"}});case 6:(f=a.sent).data.latest&&(s.bounces.length&&(O=s.bounces.map((function(e){return i().bounces[e]})),(m=O.find((function(e){return e.latest}))).latest=!1,r(Oe(se.a.pick(m,"date","comments","latest"),m.id,t))),r({type:ae,payload:{titleId:n,bounce:f.data}})),r({type:L,payload:{bounce:f.data,version:t}});case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},o.onerror=function(e){console.error("An error ocurred reading the file: ",e)},o.readAsArrayBuffer(e.file)}catch(u){r(oe(u))}case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},editBounce:Oe,deleteBounce:ye})(Me((function(e){var t=e.bounces,n=e.selectBounce,r=e.title,i=e.authorized,c=e.version,s=e.createBounce,o=e.editBounce,u=e.deleteBounce,d=Object(a.useState)(r.selectedBounce),p=Object(Be.a)(d,2),b=p[0],j=p[1],f=Object(a.useState)(!1),O=Object(Be.a)(f,2),h=O[0],m=O[1];Object(a.useEffect)((function(){b&&b!==r.selectedBounce&&n(b,r.id)}),[b,r.selectedBounce]),Object(a.useEffect)((function(){j(r.selectedBounce),m(!1)}),[t]);var v=function(e){return Ve.a.utc(e).format("MM/DD/yy")},y=function(){if(t[0]){var e=t.filter((function(e){return e.id!==b.id}));return e.sort((function(e,t){return e.date<t.date?1:-1})),e.map((function(e){var t=e.latest?Object(ke.jsx)("span",{className:"list-current",children:" * current"}):null;return Object(ke.jsxs)("div",{className:"dropdown-link change-song",onClick:function(){return j(e)},children:[v(e.date),t]},e.id)}))}},x=function(){if(b.latest)return Object(ke.jsx)("div",{className:"latest",children:"Current Bounce"})};return h?Object(ke.jsx)(Ue,{content:Object(ke.jsxs)("div",{className:"upload-image",children:[Object(ke.jsx)("p",{children:"Uploading..."}),Object(ke.jsx)("img",{className:"windmill",src:"/images/windmill.gif"})]}),actions:null,onDismiss:function(){return null}}):c?Object(ke.jsxs)("div",{className:"detail-box bounce",children:[b?Object(ke.jsxs)("div",{className:"detail-content",children:[Object(ke.jsxs)("div",{className:"detail-header",children:[Object(ke.jsx)("h5",{children:"Date:"}),Object(ke.jsxs)("div",{className:"dropdown",children:[Object(ke.jsx)("button",{className:"dropbtn",children:v(b.date)}),Object(ke.jsx)("div",{className:"dropdown-content",children:y()})]}),Object(ke.jsx)("div",{children:x()})]}),Object(ke.jsx)("div",{className:"detail-notes",children:b.comments})]}):Object(ke.jsx)("div",{className:"detail-content",children:Object(ke.jsx)("div",{className:"detail-header",children:Object(ke.jsx)("h5",{children:"No Bounces for this Version"})})}),Object(ke.jsxs)("div",{className:"detail-buttons",children:[function(){if(i)return Object(ke.jsx)(qe,{title:"Add a Bounce of ".concat(c.name),image:"images/add.png",fields:[{label:"File",name:"file",type:"file",required:!0},{label:"Date",name:"date",type:"date",required:!0},{label:"Comments",name:"comments",type:"textarea"},{label:"Latest Bounce?",name:"latest",type:"checkbox"}],onSubmit:function(e){return function(e){s(e,c.id,r.id),m(!0)}(e)},form:"add-bounce-".concat(r.id),initialValues:{latest:!0}})}(),b&&function(){if(i)return Object(ke.jsx)(qe,{title:"Edit this Bounce",image:"images/edit.png",fields:[{label:"File",name:"file",type:"file"},{label:"Date",name:"date",type:"date"},{label:"Comments",name:"comments",type:"textarea"},{label:"Current Bounce?",name:"latest",type:"checkbox"}],onSubmit:function(e){return o(e,b.id,c.id)},initialValues:Object(l.a)(Object(l.a)({},se.a.pick(b,"comments","latest")),{},{date:Ve.a.utc(b.date).format("YYYY-MM-DD")}),form:"edit-bounce-".concat(r.id),enableReinitialize:!0})}(),b&&Object(ke.jsx)(Re,{onSubmit:function(){return u(b.id,c.id,r.id)},displayName:v(b.date)})]})]}):null}))),Ye=Object(s.b)((function(e){return{bounces:e.bounces}}),{fetchBounces:be,selectVersion:Ne,createVersion:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c,s,o,u;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,(c=r().titles[t]).versions.length||(e.current=!0),n.next=6,h.post("/versions",Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id,title:t}));case 6:(s=n.sent).data.current&&(c.versions.length&&(o=c.versions.map((function(e){return r().versions[e]})),(u=o.find((function(e){return e.current}))).current=!1,a(fe(se.a.pick(u,"name","notes","current"),u.id,t))),a({type:ne,payload:{titleId:t,version:s.data}})),a({type:D,payload:{version:s.data,title:t}}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a(oe(n.t0));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},editVersion:fe,deleteVersion:ve})(Me((function(e){var t=e.versions,n=e.bounces,r=e.fetchBounces,i=e.selectVersion,c=e.title,s=e.createVersion,o=e.authorized,u=e.editVersion,l=e.deleteVersion,d=Object(a.useState)(c.selectedVersion),p=Object(Be.a)(d,2),b=p[0],j=p[1],f=Object(a.useState)(null),O=Object(Be.a)(f,2),h=O[0],m=O[1];Object(a.useEffect)((function(){b&&(r(b.id),i(b,c.id),m(b.bounces.map((function(e){return n[e]}))))}),[b]),Object(a.useEffect)((function(){b&&m(b.bounces.map((function(e){return n[e]})))}),[n]),Object(a.useEffect)((function(){b!==c.selectedVersion&&j(c.selectedVersion)}),[t,c.selectedVersion]);var v=function(){if(b.current)return Object(ke.jsx)("div",{className:"current",children:"Current Version"})};return Object(ke.jsxs)("div",{className:"version-container",children:[Object(ke.jsxs)("div",{className:"detail-box",children:[b?Object(ke.jsxs)("div",{className:"detail-content",children:[Object(ke.jsxs)("div",{className:"detail-header",children:[Object(ke.jsx)("h5",{children:"Version:"}),Object(ke.jsxs)("div",{className:"dropdown",children:[Object(ke.jsx)("button",{className:"dropbtn",children:b.name}),Object(ke.jsx)("div",{className:"dropdown-content",children:t.filter((function(e){return e.id!==b.id})).map((function(e){var t=e.current?Object(ke.jsx)("span",{className:"list-current",children:" * current"}):null;return Object(ke.jsxs)("div",{className:"dropdown-link change-version",onClick:function(){return j(e)},children:[e.name,t]},e.id)}))})]}),v()]}),Object(ke.jsx)("div",{className:"detail-notes",children:b.notes})]}):Object(ke.jsx)("div",{className:"detail-content",children:Object(ke.jsx)("div",{className:"detail-header",children:Object(ke.jsx)("h5",{children:"No Versions for this Song Yet"})})}),Object(ke.jsxs)("div",{className:"detail-buttons",children:[function(){if(o)return Object(ke.jsx)(qe,{title:"Add a Version of ".concat(c.title),image:"images/add.png",fields:[{label:"Name",name:"name",type:"input",required:!0},{label:"Notes",name:"notes",type:"textarea"},{label:"Current Version?",name:"current",type:"checkbox"}],onSubmit:function(e){return s(e,c.id)},form:"add-version-".concat(c.id),initialValues:{current:!0},enableReinitialize:!0})}(),b&&function(){if(o)return Object(ke.jsx)(qe,{title:"Edit ".concat(b.name),image:"images/edit.png",fields:[{label:"Name",name:"name",type:"input"},{label:"Notes",name:"notes",type:"textarea"},{label:"Current Version?",name:"current",type:"checkbox"}],onSubmit:function(e){return u(e,b.id,c.id)},initialValues:se.a.pick(b,"name","notes","current"),form:"edit-version-".concat(c.id),enableReinitialize:!0})}(),b&&Object(ke.jsx)(Re,{onSubmit:function(){return l(b.id,c.id)},displayName:b.name})]})]}),function(){if(h)return Object(ke.jsx)(ze,{bounces:h,title:c,version:b})}()]})}))),He=Object(s.b)(null,{queueSongs:function(e){return function(t,n){var a=e.tier.trackList.map((function(e){return n().titles[e]})),r=a.splice(a.indexOf(e.title)),i=[];r.forEach((function(e){if(e.selectedVersion&&e.selectedBounce){var t=n().versions[e.selectedVersion.id],a=n().bounces[e.selectedBounce.id];i.push({title:e.title,version:t.name,date:a.date,duration:a.duration,audio:a.id})}})),t({type:$,payload:i})}},queuePlaylistSongs:function(e){return function(t,n){var a=e.playlist.songs.map((function(e){return n().playlistSongs[e]})),r=a.splice(a.indexOf(e.self)).map((function(e){var t=n().versions[e.version],a=n().bounces[e.bounce];return{title:n().titles[e.title].title,version:t.name,date:a.date,duration:a.duration,audio:a.id}}));t({type:$,payload:r})}},playAudio:ge})((function(e){var t,n=e.song,a=e.queueSongs,r=e.parentType,i=e.queuePlaylistSongs;return Object(ke.jsxs)("div",{className:"playcontainer",children:[Object(ke.jsx)("div",{className:"songtime",children:function(e){var t=Math.floor(e/60),n=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return"".concat(t,":").concat(n)}(n.bounce.duration)}),Object(ke.jsx)("div",{className:"playbutton",children:Object(ke.jsx)("img",{src:"/images/play.svg",className:"playicon",onClick:function(e){e.stopPropagation(),"tier"===r?a(n):"playlist"===r&&i(n)}})}),Object(ke.jsxs)("div",{className:"title-display",children:[Object(ke.jsx)("p",{children:n.version.name}),Object(ke.jsx)("p",{children:(t=n.bounce.date,Ve.a.utc(t).format("MM/DD/YY"))})]})]})})),Ke=Object(s.b)((function(e){return{versions:e.versions,bounces:e.bounces,band:e.bands.currentBand,playlists:e.playlists,titles:e.titles}}),{fetchVersions:pe,fetchBounces:be,selectVersion:Ne,selectBounce:Se,createPlaylistSong:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,n.next=4,h.post("/playlistsongs",Object(l.a)(Object(l.a)({},e),{},{playlist:t,currentBand:i.id}));case 4:c=n.sent,a({type:V,payload:{playlistsong:c.data,playlist:t}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(oe(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},editTitle:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,n.next=4,h.patch("/titles/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id}));case 4:c=n.sent,a({type:U,payload:c.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(oe(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteTitle:me})(Me((function(e){var t=e.tier,n=e.title,r=e.titles,i=e.fetchVersions,c=e.versions,s=e.bounces,o=e.fetchBounces,u=e.authorized,d=e.band,p=e.playlists,b=e.selectVersion,j=e.selectBounce,f=e.createPlaylistSong,O=e.editTitle,h=e.deleteTitle,m=e.getTime,v=Object(a.useState)(!1),y=Object(Be.a)(v,2),x=y[0],g=y[1],N=Object(a.useState)(null),S=Object(Be.a)(N,2),k=S[0],w=S[1],E=Object(a.useState)(null),B=Object(Be.a)(E,2),T=B[0],I=B[1],V=Object(a.useState)(null),C=Object(Be.a)(V,2),A=C[0],D=C[1];Object(a.useEffect)((function(){i(n.id)}),[]),Object(a.useEffect)((function(){w(n.versions.map((function(e){return c[e]})))}),[c,n]),Object(a.useEffect)((function(){if(k&&k[0]){var e,t=k.map((function(e){return e.id}));n.selectedVersion&&t.includes(n.selectedVersion.id)?n.selectedVersion&&(e=k.includes(n.selectedVersion)?n.selectedVersion:k.find((function(e){return e.id===n.selectedVersion.id}))):e=k.find((function(e){return e.current})),b(e,n.id)}n.selectedVersion&&o(n.selectedVersion.id)}),[k]),Object(a.useEffect)((function(){n.selectedVersion&&(n.selectedVersion.bounces[0]?I(n.selectedVersion.bounces.map((function(e){return s[e]}))):(I(null),j(null,n.id)))}),[s]),Object(a.useEffect)((function(){var e;T&&T[0]?(e=n.selectedBounce&&T.includes(n.selectedBounce)?n.selectedBounce:T.find((function(e){return e.latest})))&&j(e,n.id):A&&D(null)}),[T]),Object(a.useEffect)((function(){n.selectedBounce&&n.selectedVersion?(D({tier:t,title:n,version:n.selectedVersion,bounce:n.selectedBounce}),m({id:n.id,duration:n.selectedBounce.duration})):A&&!n.selectedBounce&&(D(null),m({id:n.id,duration:0}))}),[r]);var L=x?"down-arrow":"";return Object(ke.jsxs)("div",{className:"title-margin",children:[Object(ke.jsx)("div",{className:"row title",children:Object(ke.jsxs)("div",{className:"marqee",onClick:function(){return g(!x)},children:[Object(ke.jsxs)("div",{className:"row-name",children:[Object(ke.jsx)("img",{className:"arrow ".concat(L),src:"/images/right-arrow.svg"}),Object(ke.jsx)("div",{className:"name-spot",children:Object(ke.jsx)("h3",{children:n.title})})]}),function(){if(A)return Object(ke.jsx)(He,{song:A,parentType:"tier"})}(),function(){if(u){var e=d.playlists.map((function(e){return p[e]})).map((function(e){if(e)return{value:e.id,display:e.name}}));return Object(ke.jsxs)("div",{className:"tier-display",children:[A&&Object(ke.jsx)(qe,{title:"Add to a Playlist",onSubmit:function(e){return function(e){f(Object(l.a)(Object(l.a)({},e),{},{bounce:n.selectedBounce.id,version:n.selectedVersion.id,title:n.id}),e.playlistId)}(e)},image:"images/playlist.png",fields:[{type:"select",options:e,name:"playlistId",label:"Playlist"}],form:"add-to-playlist-".concat(n.id),enableReinitialize:!0}),Object(ke.jsx)(qe,{title:"Edit ".concat(n.title),image:"images/edit.png",fields:[{label:"Title",name:"title",type:"input",required:!0}],onSubmit:function(e){return O(e,n.id)},initialValues:se.a.pick(n,"title"),form:"edit-title-".concat(n.id),enableReinitialize:!0}),Object(ke.jsx)(Re,{onSubmit:function(){return h(n.id,t.id)},displayName:n.title})]})}}()]})}),x&&Object(ke.jsx)(Ye,{versions:k,title:n})]})}))),Ge=Object(s.b)((function(e){return{titles:e.titles,band:e.bands.currentBand,tiers:e.tiers}}),{createTier:je,fetchTitles:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.get("/titles/".concat(e));case 3:a=t.sent,n({type:E,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(oe(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},editTier:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,n.next=4,h.patch("/tiers/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id}));case 4:c=n.sent,a({type:_,payload:c.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(oe(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},createTitle:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r().bands.currentBand,n.prev=1,n.next=4,h.post("/titles",Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id,tier:t}));case 4:c=n.sent,a({type:C,payload:{title:c.data,tier:t}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a(oe(n.t0));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteTier:he})(Me((function(e){var t=e.tier,n=e.titles,r=e.fetchTitles,i=e.authorized,c=e.band,s=e.tiers,o=e.editTier,u=e.createTitle,d=e.deleteTier,p=Object(a.useState)(!1),b=Object(Be.a)(p,2),j=b[0],f=b[1],O=Object(a.useState)(null),h=Object(Be.a)(O,2),m=h[0],v=h[1],y=Object(a.useState)([]),x=Object(Be.a)(y,2),g=x[0],N=x[1],S=Object(a.useState)({}),k=Object(Be.a)(S,2),w=k[0],E=k[1];Object(a.useEffect)((function(){r(t.id)}),[]),Object(a.useEffect)((function(){v(t.trackList.map((function(e){return n[e]})))}),[n,t]),Object(a.useEffect)((function(){if(c.tiers.length){var e=c.tiers.map((function(e){return s[e]})).sort((function(e,t){return e.position<t.position?-1:1}));N(e.map((function(e){if(e)return{value:e.position,display:e.position}})))}}),[s]);var B=function(e){E(Object(l.a)(Object(l.a)({},w),{},Object(Te.a)({},e.id,e.duration)))},T=j?"down-arrow":"",I=j?"open":"";return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsxs)("div",{className:"row tier",onClick:function(){return f(!j)},children:[Object(ke.jsxs)("div",{className:"marqee",children:[Object(ke.jsxs)("div",{className:"tier-name",children:[Object(ke.jsx)("img",{className:"arrow ".concat(T),src:"images/right-arrow.svg"}),Object(ke.jsx)("h2",{children:t.name})]}),Object(ke.jsxs)("div",{className:"tier-count",children:[function(){if(i)return Object(ke.jsx)(qe,{title:"Add a Title to ".concat(t.name),image:"images/add.png",fields:[{label:"Title",name:"title",type:"input",required:!0}],onSubmit:function(e){u(e,t.id),f(!0)},form:"add-title-".concat(t.id)})}(),Object(ke.jsxs)("div",{className:"song-count",children:[t.trackList.length," songs"]}),Object(ke.jsx)("div",{className:"song-count",children:function(){var e=Object.values(w).reduce((function(e,t){return e+t}),0);if(!e)return null;var t=Math.floor(e/60),n=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return Object(ke.jsx)("div",{children:"".concat(t,":").concat(n)})}()})]}),Object(ke.jsxs)("div",{className:"tier-display",children:[function(){if(i)return Object(ke.jsx)(qe,{title:"Edit ".concat(t.name),image:"images/edit.png",fields:[{label:"Tier Name",name:"name",type:"input",required:!0},{label:"Tier Position",name:"position",type:"select",options:g}],onSubmit:function(e){return o(e,t.id)},initialValues:se.a.pick(t,"name","position"),form:"edit-tier-".concat(t.id),enableReinitialize:!0})}(),function(){if(i)return Object(ke.jsx)(Re,{onSubmit:function(){return d(t.id)},displayName:t.name})}()]})]}),Object(ke.jsx)("hr",{})]}),Object(ke.jsx)("div",{className:I,children:j&&m&&m.map((function(e){if(e)return Object(ke.jsx)(Ke,{title:e,tier:t,getTime:B},e.id)}))})]})}))),We=Object(s.b)((function(e){return{playlistSongs:e.playlistSongs,bands:e.bands,playlists:e.playlists,versions:e.versions,bounces:e.bounces,titles:e.titles}}),{fetchBounces:be,fetchVersions:pe,editPlaylistSong:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,n.next=4,h.patch("/playlistsongs/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id}));case 4:c=n.sent,a({type:q,payload:c.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(oe(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},deletePlaylistSong:xe})(Me((function(e){var t=e.playlist,n=e.song,r=e.playlistSongs,i=e.authorized,c=e.versions,s=e.bounces,o=e.titles,u=e.fetchBounces,d=e.fetchVersions,p=e.editPlaylistSong,b=e.deletePlaylistSong,j=Object(a.useState)(null),f=Object(Be.a)(j,2),O=f[0],h=f[1];Object(a.useEffect)((function(){d(n.title),o[n.title].versions.forEach((function(e){u(e)}))}),[]),Object(a.useEffect)((function(){o[n.title]&&h({playlist:t,title:o[n.title],version:c[n.version],bounce:s[n.bounce],self:n})}),[r[n.id],s[n.bounce],o[n.title],c[n.version]]);return Object(ke.jsx)("div",{className:"title-margin",children:Object(ke.jsx)("div",{className:"row title",children:Object(ke.jsxs)("div",{className:"marqee",children:[Object(ke.jsxs)("div",{className:"row-name",children:[Object(ke.jsx)("div",{className:"song-position",children:n.position}),Object(ke.jsx)("div",{className:"name-spot",children:Object(ke.jsx)("h3",{children:n&&o[n.title]&&o[n.title].title})})]}),O&&O.bounce&&O.version?Object(ke.jsx)(He,{song:O,parentType:"playlist"}):Object(ke.jsxs)("div",{className:"playlistsong-no-bounce",children:[Object(ke.jsx)("p",{children:c[n.version]?"".concat(c[n.version].name):"No Version Selected"}),Object(ke.jsx)("p",{children:"No Bounce Selected"})]}),Object(ke.jsxs)("div",{className:"tier-display",children:[function(){if(i&&o[n.title]){var e=Object.values(r).filter((function(e){return t.songs.includes(e.id)})).map((function(e){return{value:e.position,display:e.position}})),a=o[n.title].versions.map((function(e){return c[e]})),u=a.map((function(e){if(e)return e.bounces.map((function(e){return s[e]}))})),d=[];return a.forEach((function(e,t){u[t]&&u[t].forEach((function(t){if(t){var n="";e.current&&t.latest&&(n=" * current"),d.push({value:t.id,display:"".concat(e.name," -- ").concat(Ve.a.utc(t.date).format("MM/DD/YY")).concat(n)})}}))})),Object(ke.jsx)(qe,{image:"/images/edit.png",title:"Edit ".concat(o[n.title].title),onSubmit:function(e){return function(e){var a=Object.values(c).find((function(t){return t.bounces.includes(e.bounce)}));p(Object(l.a)(Object(l.a)({},e),{},{version:a.id,playlistId:t.id}),n.id)}(e)},fields:[{name:"position",label:"Position",type:"select",options:e},{name:"bounce",label:"Bounce",type:"select",options:d,required:!0}],initialValues:n.bounce?se.a.pick(n,"position","bounce"):se.a.pick(n,"position"),form:"edit-playlistsong-".concat(n.id),enableReinitialize:!0})}}(),function(){if(i)return Object(ke.jsx)(Re,{onSubmit:function(){return b(n.id,t.id)},displayName:n.title.title})}()]})]})})})}))),Xe=Object(s.b)((function(e){return{playlists:e.playlists,playlistSongs:e.playlistSongs,band:e.bands.currentBand}}),{fetchPlaylistSongs:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.get("/playlistsongs/".concat(e));case 3:a=t.sent,n({type:g,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(oe(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},deletePlaylist:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().bands.currentBand,t.prev=1,t.next=4,h.post("/playlists/delete",{playlistId:e,currentBand:r.id});case 4:(i=t.sent).data.songs.forEach((function(e){n(xe(e,i.data.id))})),n({type:H,payload:i.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(oe(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()}})(Me((function(e){var t=e.playlist,n=e.playlists,r=e.fetchPlaylistSongs,i=e.playlistSongs,c=e.authorized,s=e.deletePlaylist,o=e.band,u=Object(a.useState)(!1),d=Object(Be.a)(u,2),p=d[0],f=d[1],O=Object(a.useState)([]),m=Object(Be.a)(O,2),v=m[0],y=m[1],x=Object(a.useState)(null),g=Object(Be.a)(x,2),N=g[0],S=g[1];Object(a.useEffect)((function(){r(t.id)}),[]),Object(a.useEffect)((function(){S(t.songs.map((function(e){return i[e]})))}),[i,t.songs]);Object(a.useEffect)((function(){if(o.playlists.length){var e=o.playlists.map((function(e){return n[e]})).sort((function(e,t){return e.position<t.position?-1:t.position<e.position?1:void 0}));y(e.map((function(e){if(e)return{value:e.position,display:e.position}})))}}),[n]);var k=p?"down-arrow":"",w=p?"open":"";return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsxs)("div",{className:"row tier",onClick:function(){return f(!p)},children:[Object(ke.jsxs)("div",{className:"marqee tier-info",children:[Object(ke.jsxs)("div",{className:"tier-name",children:[Object(ke.jsx)("img",{className:"arrow ".concat(k),src:"/images/right-arrow.svg"}),Object(ke.jsx)("h2",{children:t.name})]}),Object(ke.jsx)("div",{className:"tier-count",children:Object(ke.jsxs)("div",{className:"song-count",children:[t.songs.length," songs"]})}),Object(ke.jsxs)("div",{className:"tier-display",children:[function(){if(c)return Object(ke.jsx)(qe,{title:"Edit ".concat(t.name),image:"images/edit.png",fields:[{label:"Playlist Name",name:"name",type:"input"},{label:"Playlist Position",name:"position",type:"select",options:v}],onSubmit:function(e){return function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,n.next=4,h.patch("/playlists/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id}));case 4:c=n.sent,a({type:F,payload:c.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(oe(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t.id)},initialValues:se.a.pick(t,"name","position"),form:"edit-".concat(t.id),enableReinitialize:!0})}(),function(){if(c)return Object(ke.jsx)(Re,{onSubmit:function(){return s(t.id)},displayName:t.name})}()]})]}),Object(ke.jsx)("hr",{})]}),Object(ke.jsx)("div",{className:w,children:p&&(N.sort((function(e,t){return e.position<t.position?-1:1})),N.map((function(e){if(e)return Object(ke.jsx)(We,{song:e,playlist:t},e.id)})))})]})}))),Je=Object(s.b)((function(e){return{tiers:e.tiers,playlists:e.playlists,currentSong:e.audio.currentSong}}),{fetchTiers:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.get("/tiers/".concat(e));case 3:a=t.sent,n({type:x,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(oe(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchPlaylists:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.get("/playlists/".concat(e));case 3:a=t.sent,n({type:S,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(oe(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},createTier:je,createPlaylist:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=a().bands.currentBand,t.next=4,h.post("/playlists",Object(l.a)(Object(l.a)({},e),{},{currentBand:r.id}));case 4:i=t.sent,n({type:A,payload:i.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(oe(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()}})(Me((function(e){var t=e.fetchPlaylists,n=e.createTier,r=e.fetchTiers,i=e.tiers,c=e.playlists,s=e.band,o=e.authorized,u=e.createPlaylist,l=e.currentSong,d=Object(a.useState)([]),p=Object(Be.a)(d,2),b=p[0],j=p[1],f=Object(a.useState)([]),O=Object(Be.a)(f,2),h=O[0],m=O[1];Object(a.useEffect)((function(){r(s.id),t(s.id)}),[]),Object(a.useEffect)((function(){j(s.tiers.map((function(e){return i[e]})).sort((function(e,t){return e.position<t.position?-1:t.position<e.position?1:void 0})))}),[i]),Object(a.useEffect)((function(){m(s.playlists.map((function(e){return c[e]})).sort((function(e,t){return e.position<t.position?-1:t.position<e.position?1:void 0})))}),[c]);var v=l?"playbar-active":"";return Object(ke.jsxs)("div",{className:"body-container ".concat(v),children:[Object(ke.jsx)("h2",{className:"section-title",children:"Tiers"}),Object(ke.jsx)("hr",{}),i&&b.map((function(e){if(e)return Object(ke.jsx)(Ge,{tier:e},e.id)})),function(){if(o)return Object(ke.jsx)("div",{className:"centered-button",children:Object(ke.jsx)(qe,{onSubmit:function(e){return n(e)},title:"Add a Tier",image:"/images/add.png",fields:[{label:"Tier Name",name:"tierName",type:"input",required:!0}]})})}(),Object(ke.jsxs)("div",{className:"playlists",children:[Object(ke.jsx)("h2",{className:"section-title",children:"Playlists"}),Object(ke.jsx)("hr",{}),c&&h.map((function(e){if(e)return Object(ke.jsx)(Xe,{playlist:e},e.id)})),function(){if(o)return Object(ke.jsx)("div",{className:"centered-button",children:Object(ke.jsx)(qe,{onSubmit:function(e){return u(e)},title:"Add a Playlist",image:"/images/add.png",fields:[{label:"Playlist Name",name:"playlistName",type:"input",required:!0}]})})}()]})]})}))),Qe=function(e){Object(De.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(Ce.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={volume:50,sliderPosition:0},e.displayDate=function(e){return Ve.a.utc(e).format("MM/DD/yy")},e.updateSlider=function(){var t=e.audio.currentTime/e.audio.duration*1e3;e.time=e.formatTime(e.audio.currentTime),isNaN(t)||e.setState({sliderPosition:t})},e.nextSong=function(){setTimeout((function(){e.props.queue.length&&e.props.nextSong()}),400)},e.play=function(){e.props.playAudio()},e.pause=function(){e.props.pauseAudio()},e.onSliderChange=function(t){var n=t.target.value/1e3*e.audio.duration;e.audio.currentTime=n},e.onPauseButton=function(){e.props.play?e.pause():e.play()},e}return Object(Ae.a)(n,[{key:"formatTime",value:function(e){var t=e<600?"0".concat(Math.floor(e/60)):Math.floor(e/60),n=e%60<10?"0".concat(Math.floor(e%60)):Math.floor(e%60);return"".concat(t,":").concat(n)}},{key:"wrapUrl",value:function(e){return"http://exploring-the-space.com/api/audio/".concat(e,".mp3")}},{key:"componentDidMount",value:function(){var e=this;this.audio=new Audio,this.audio.addEventListener("timeupdate",this.updateSlider),this.audio.addEventListener("error",(function(){e.props.throwError("The audio player had an error, probably can't connect to server.")})),this.audio.addEventListener("ended",this.nextSong),document.addEventListener("keydown",(function(t){"Space"===t.code&&(t.preventDefault(),e.props.pause?e.play():e.pause())}))}},{key:"componentDidUpdate",value:function(e){this.props.song?(this.props.song!==e.song?(this.audio.src=this.wrapUrl(this.props.song.audio),this.audio.volume=this.props.volume/120,this.audio.play()):this.props.play&&e.pause?this.audio.play():this.props.pause&&e.play&&this.audio.pause(),this.props.volume!==e.volume&&(this.audio.volume=this.props.volume/120)):this.audio.pause()}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("keydown",(function(t){"Space"===t.code&&(t.preventDefault(),e.props.pause?e.play():e.pause())}))}},{key:"render",value:function(){return this.props.song?Object(ke.jsxs)("div",{className:"playbar",children:[Object(ke.jsxs)("div",{className:"playbar-header",children:[Object(ke.jsx)("div",{className:"playbar-title",children:Object(ke.jsx)("p",{children:this.props.song.title})}),Object(ke.jsx)("div",{className:"pause-container",onClick:this.onPauseButton,children:Object(ke.jsx)("img",{className:"big-play-btn",src:this.props.play?"/images/pause.svg":"/images/play.svg"})}),Object(ke.jsxs)("div",{className:"playbar-info",children:[Object(ke.jsxs)("div",{className:"playbar-detail",children:[Object(ke.jsx)("p",{children:"Version:"}),Object(ke.jsx)("p",{children:this.props.song.version})]}),Object(ke.jsxs)("div",{className:"playbar-detail",children:[Object(ke.jsx)("p",{children:"Date:"}),Object(ke.jsx)("p",{children:this.displayDate(this.props.song.date)})]})]})]}),Object(ke.jsxs)("div",{className:"playslidercontainer",children:[Object(ke.jsx)("div",{className:"playslidertime",children:this.time}),Object(ke.jsx)("input",{type:"range",min:"0",max:"1000",value:this.state.sliderPosition,className:"playslider",onInput:this.onSliderChange}),Object(ke.jsx)("div",{className:"playslidertime",children:this.formatTime(this.props.song.duration)})]})]}):null}}]),n}(r.a.Component),Ze=Object(s.b)((function(e){return{song:e.audio.currentSong,play:e.audio.play,pause:e.audio.pause,queue:e.audio.queue,volume:e.audio.volume}}),{playAudio:ge,pauseAudio:function(){return{type:Z}},nextSong:function(){return function(e){e({type:ee})}},throwError:le})(Qe),$e=Object(s.b)((function(e){return{band:e.bands.currentBand,user:e.auth.currentUser,signedIn:e.auth.isSignedIn,volume:e.audio.volume}}),{fetchBand:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.get("/bands/".concat(e));case 3:a=t.sent,n({type:k,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(oe(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},signOut:ue,changeVolume:function(e){return{type:te,payload:e}}})(Me((function(e){var t=e.fetchBand,n=e.band,r=e.match,i=e.authorized,c=e.handleUpdate,s=e.user,o=e.signedIn,u=e.signOut,l=e.volume,d=e.changeVolume;Object(a.useEffect)((function(){t(r.params.bandName)}),[]),Object(a.useEffect)((function(){c()}),[n,s]);return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsxs)("div",{className:"header",children:[Object(ke.jsx)(Ze,{}),Object(ke.jsxs)("div",{className:"band-header",children:[Object(ke.jsxs)("div",{className:"band-name",children:[Object(ke.jsx)("h1",{children:n&&n.name}),i?Object(ke.jsxs)("div",{className:"menu-button",children:[Object(ke.jsx)("img",{src:"images/dots.png"}),Object(ke.jsxs)("div",{className:"menu",children:[Object(ke.jsx)(Ee.a,{className:"menu-item",to:"/user",children:"User Home"}),Object(ke.jsx)("div",{className:"menu-item",onClick:u,children:"Sign Out"})]})]}):Object(ke.jsxs)("div",{className:"menu-button",children:[Object(ke.jsx)("img",{src:"images/dots.png"}),Object(ke.jsxs)("div",{className:"menu",children:[Object(ke.jsx)(Ee.a,{className:"menu-item",to:"/",children:"Home"}),Object(ke.jsx)(Ee.a,{className:"menu-item",to:"/signin",children:"Sign In"})]})]})]}),Object(ke.jsxs)("div",{className:"slidecontainer",children:[Object(ke.jsx)("input",{type:"range",min:"0",max:"100",className:"master-volume",value:l,onInput:function(e){return d(e.target.value)}}),Object(ke.jsx)("img",{src:"/images/volume.svg"})]})]})]}),n?o&&!s?null:Object(ke.jsx)(Je,{band:n}):null]})}))),et=Object(s.b)((function(e){return{user:e.auth.user,bands:e.bands}}),{createBand:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.post("/bands",e);case 3:a=t.sent,n({type:P,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(oe(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchBands:de,editBand:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.patch("/bands",Object(l.a)(Object(l.a)({},e),{},{currentBand:t}));case 3:r=n.sent,a({type:z,payload:r.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a(oe(n.t0));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},deleteBand:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.post("/bands/delete",{currentBand:e});case 3:(a=t.sent).data.tiers.forEach((function(e){n(he(e,a.data.id))})),n({type:J,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(oe(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},signOut:ue})((function(e){var t=e.user,n=e.bands,r=e.createBand,i=e.fetchBands,c=e.editBand,s=e.deleteBand,o=e.signOut;Object(a.useEffect)((function(){i()}),[]);return t?Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsxs)("div",{className:"user-header",children:[Object(ke.jsxs)("h1",{className:"user-title",children:[t.username,"'s bands"]}),Object(ke.jsx)("div",{onClick:o,children:"Sign Out"})]}),Object(ke.jsx)("hr",{}),Object(ke.jsx)("div",{className:"row band-list",children:function(){var e=t.bands.map((function(e){return n[e]}));return e.length&&e[0]?e.map((function(e){if(e)return Object(ke.jsxs)("div",{className:"band-item",children:[Object(ke.jsx)(Ee.a,{to:"/".concat(e.url),children:Object(ke.jsx)("h2",{children:e.name})}),Object(ke.jsxs)("div",{className:"band-buttons",children:[Object(ke.jsx)(qe,{onSubmit:function(t){return c(t,e.id)},title:"Edit ".concat(e.name),image:"images/edit.png",fields:[{label:"Band Name",name:"name",type:"input"}],initialValues:{name:e.name},enableReinitialize:!0,form:"edit-band-".concat(e.id)}),Object(ke.jsx)(Re,{onSubmit:function(){return s(e.id)},displayName:e.name})]})]},e.id)})):Object(ke.jsx)("h3",{children:"No bands belong to this user"})}()}),Object(ke.jsx)("div",{className:"centered-button",children:Object(ke.jsx)(qe,{onSubmit:function(e){return r(e)},title:"Create a Band",image:"images/add.png",fields:[{label:"Band Name",name:"bandName",type:"input"}]})})]}):null})),tt=function(e){Object(De.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(Ce.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderInput=function(e){var t=e.input,n=e.label,a=(e.meta,e.type),r=e.autoComplete;e.defaultValue;return Object(ke.jsxs)("div",{children:[Object(ke.jsx)("label",{children:n}),Object(ke.jsx)("input",Object(l.a)({type:a,autoComplete:r},t))]})},e.submitForm=function(t){e.props.onSubmit(t)},e}return Object(Ae.a)(n,[{key:"render",value:function(){return Object(ke.jsxs)("form",{className:"signin",onSubmit:this.props.handleSubmit(this.submitForm),children:[Object(ke.jsx)(Pe.a,{name:"username",component:this.renderInput,label:"Username: ",type:"text",autoComplete:"username"}),Object(ke.jsx)(Pe.a,{name:"password",component:this.renderInput,label:"Passwyrd: ",type:"password",autoComplete:"current-password"}),Object(ke.jsx)("button",{className:"signin-submit",children:"Submit"})]})}}]),n}(r.a.Component),nt=Object(_e.a)({form:"userForm"})(tt),at=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.post("/signin",e);case 3:a=t.sent,localStorage.setItem("token",a.data.token),n({type:m,payload:a.data.user}),ie.push("/user"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(oe(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.signIn,n=e.isSignedIn;return Object(a.useEffect)((function(){n&&ie.push("/user")}),[]),Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("h1",{children:"Sign In"}),Object(ke.jsx)(nt,{onSubmit:function(e){return t(e)}})]})})),rt=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signUp:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.post("/signup",e);case 3:a=t.sent,localStorage.setItem("token",a.data.token),n({type:m,payload:a.data.user}),ie.push("/user"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(oe(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.signUp,n=e.isSignedIn;return Object(a.useEffect)((function(){n&&ie.push("/user")}),[]),Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("h1",{children:"Sign Up"}),Object(ke.jsx)(nt,{onSubmit:function(e){return t(e)}})]})})),it=function(e){Object(De.a)(n,e);var t=Object(Le.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchBands()}},{key:"renderBands",value:function(){return delete this.props.bands.currentBand,Object.values(this.props.bands).map((function(e){return Object(ke.jsx)("div",{className:"band-item",children:Object(ke.jsx)(Ee.a,{to:"/".concat(e.url),children:Object(ke.jsx)("h2",{children:e.name})})},e.id)}))}},{key:"render",value:function(){return Object(ke.jsxs)("div",{className:"container",children:[Object(ke.jsx)("h1",{className:"home-header",children:"Exploring the Space"}),Object(ke.jsxs)("div",{className:"home-buttons",children:[Object(ke.jsx)(Ee.a,{to:"/signin",children:"Sign In"}),Object(ke.jsx)(Ee.a,{to:"/signup",children:"Sign Up"})]}),Object(ke.jsx)("h1",{children:"All Bands:"}),Object(ke.jsx)("div",{className:"band-list",children:this.props.bands&&this.renderBands()})]})}}]),n}(r.a.Component),ct=Object(s.b)((function(e){return{bands:e.bands}}),{fetchBands:de})(it),st=Object(s.b)((function(e){return{signedIn:e.auth.isSignedIn}}),{fetchUser:function(){return function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("/user");case 3:(n=e.sent).data?t({type:m,payload:n.data}):t(ue()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(oe(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.signedIn,n=e.fetchUser;return Object(a.useEffect)((function(){t&&n()}),[]),Object(ke.jsx)("div",{className:"container",children:Object(ke.jsxs)(d.b,{history:ie,children:[Object(ke.jsx)(we,{}),Object(ke.jsxs)(d.c,{children:[Object(ke.jsx)(d.a,{path:"/",exact:!0,component:ct}),Object(ke.jsx)(d.a,{path:"/signin",exact:!0,component:at}),";",Object(ke.jsx)(d.a,{path:"/signup",exact:!0,component:rt}),";",Object(ke.jsx)(d.a,{path:"/user",exact:!0,render:function(e){return t?Object(ke.jsx)(et,Object(l.a)({},e)):(ie.push("/signin"),null)}}),Object(ke.jsx)(d.a,{path:"/:bandName",component:$e})]})]})})})),ot=n(240),ut={isSignedIn:!1,user:null},lt={play:!1,volume:75,queue:[],currentSong:null},dt=Object(o.c)({form:ot.a,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(l.a)(Object(l.a)({},e),{},{isSignedIn:!0,user:t.payload});case v:return Object(l.a)(Object(l.a)({},e),{},{isSignedIn:!1,user:null});case P:var n=e.user;return n.bands.push(t.payload.id),Object(l.a)(Object(l.a)({},e),{},{user:n});default:return e}},tiers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(l.a)(Object(l.a)({},e),se.a.mapKeys(t.payload,"id"));case I:return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.id,t.payload));case _:var n=e[t.payload.id].position,a=t.payload.position,r={};if(n>a)for(var i=0,c=Object.values(e);i<c.length;i++){var s=c[i];if(s.position>=a&&s.position<n){var o=s.position;r[s.id]=Object(l.a)(Object(l.a)({},s),{},{position:o+1})}}if(n<a)for(var u=0,d=Object.values(e);u<d.length;u++){var p=d[u];if(p.position>n&&p.position<=a){var b=p.position;r[p.id]=Object(l.a)(Object(l.a)({},p),{},{position:b-1})}}return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.id,t.payload),r);case Y:var j=Object.values(se.a.omit(e,e.currentBand)).filter((function(e){return e.position>t.payload.position}));return j.forEach((function(e){e.position=e.position-1})),delete e[t.payload.id],Object(l.a)(Object(l.a)({},e),se.a.mapKeys(j,"id"));case C:var f=e[t.payload.tier];return f.trackList.push(t.payload.title.id),Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},f.id,f));case G:var O=e[t.payload.tier];if(O){var h=O.trackList.filter((function(e){return e!==t.payload.title.id}));return O.trackList=h,Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},O.id,O))}default:return e}},titles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(l.a)(Object(l.a)({},e),se.a.mapKeys(t.payload,"id"));case C:return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.title.id,t.payload.title));case U:return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.id,t.payload));case G:return delete e[t.payload.title.id],Object(l.a)({},e);case ne:var n=e[t.payload.titleId];return n.selectedVersion=t.payload.version,Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},n.id,n));case ae:var a=e[t.payload.titleId];return a.selectedBounce=t.payload.bounce,Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},a.id,a));case D:var r=e[t.payload.title];return r.versions.push(t.payload.version.id),Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},r.id,r));case W:var i=e[t.payload.title];if(i){var c=i.versions.filter((function(e){return e!==t.payload.version.id}));return i.versions=c,Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},i.id,i))}default:return e}},versions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(l.a)(Object(l.a)({},e),se.a.mapKeys(t.payload,"id"));case D:return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.version.id,t.payload.version));case R:return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.id,t.payload));case W:return delete e[t.payload.version.id],Object(l.a)({},e);case L:var n=e[t.payload.version];return n.bounces.push(t.payload.bounce.id),Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},n.id,n));case X:var a=e[t.payload.version];if(a){var r=a.bounces.filter((function(e){return e!==t.payload.bounce.id}));return a.bounces=r,Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},a.id,a))}default:return e}},bounces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(l.a)(Object(l.a)({},e),se.a.mapKeys(t.payload,"id"));case L:return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.bounce.id,t.payload.bounce));case M:return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.id,t.payload));case X:return delete e[t.payload.bounce.id],Object(l.a)({},e);default:return e}},playlists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(l.a)(Object(l.a)({},e),se.a.mapKeys(t.payload,"id"));case N:case A:return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.id,t.payload));case F:var n=e[t.payload.id].position,a=t.payload.position,r={};if(n>a)for(var i=0,c=Object.values(e);i<c.length;i++){var s=c[i];if(s.position>=a&&s.position<n){var o=s.position;r[s.id]=Object(l.a)(Object(l.a)({},s),{},{position:o+1})}}if(n<a)for(var u=0,d=Object.values(e);u<d.length;u++){var p=d[u];if(p.position>n&&p.position<=a){var b=p.position;r[p.id]=Object(l.a)(Object(l.a)({},p),{},{position:b-1})}}return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.id,t.payload),r);case H:delete e.currentBand;var j=Object.values(e).filter((function(e){return e.position>t.payload.position}));return j.forEach((function(e){e.position=e.position-1})),delete e[t.payload.id],Object(l.a)(Object(l.a)({},e),se.a.mapKeys(j,"id"));case V:var f=e[t.payload.playlist];return f.songs.push(t.payload.playlistsong.id),Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},f.id,f));case K:var O=e[t.payload.playlist];if(O){var h=O.songs.filter((function(e){return e!==t.payload.playlistsong.id}));return O.songs=h,Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},O.id,O))}default:return e}},playlistSongs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(l.a)(Object(l.a)({},e),se.a.mapKeys(t.payload,"id"));case V:return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.playlistsong.id,t.payload.playlistsong));case q:var n=e[t.payload.id].position,a=t.payload.position,r={};if(n>a)for(var i=0,c=Object.values(e);i<c.length;i++){var s=c[i];if(s.position>=a&&s.position<n){var o=s.position;r[s.id]=Object(l.a)(Object(l.a)({},s),{},{position:o+1})}}if(n<a)for(var u=0,d=Object.values(e);u<d.length;u++){var p=d[u];if(p.position>n&&p.position<=a){var b=p.position;r[p.id]=Object(l.a)(Object(l.a)({},p),{},{position:b-1})}}return Object(l.a)(Object(l.a)({},e),{},Object(Te.a)({},t.payload.id,t.payload),r);case K:var j=Object.values(e).filter((function(e){return e.position>t.payload.position}));return j.forEach((function(e){e.position=e.position-1})),delete e[t.payload.playlistsong.id],Object(l.a)({},e);case W:for(var f in e)e[f].version===t.payload.version.id&&(e[f].version=null,e[f].bounce=null);return Object(l.a)({},e);case X:for(var O in e)e[O].bounce===t.payload.bounce.id&&(e[O].bounce=null);return Object(l.a)({},e);default:return e}},bands:function(){var e,t,n,a,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;switch(c.type){case k:return Object(l.a)(Object(l.a)({},i),{},(e={},Object(Te.a)(e,c.payload.id,c.payload),Object(Te.a)(e,"currentBand",c.payload),e));case w:return Object(l.a)(Object(l.a)({},i),se.a.mapKeys(c.payload,"id"));case P:case z:return Object(l.a)(Object(l.a)({},i),{},Object(Te.a)({},c.payload.id,c.payload));case J:return delete i[c.payload.id],Object(l.a)({},i);case I:var s=i.currentBand;return s.tiers.push(c.payload.id),Object(l.a)(Object(l.a)({},i),{},(t={},Object(Te.a)(t,s.id,s),Object(Te.a)(t,"currentBand",s),t));case Y:var o=i.currentBand,u=o.tiers.filter((function(e){return e!==c.payload.id}));return o.tiers=u,Object(l.a)(Object(l.a)({},i),{},(n={},Object(Te.a)(n,o.id,o),Object(Te.a)(n,"currentBand",o),n));case A:var d=i.currentBand;return d.playlists.push(c.payload.id),Object(l.a)(Object(l.a)({},i),{},(a={},Object(Te.a)(a,d.id,d),Object(Te.a)(a,"currentBand",d),a));case H:var p=i.currentBand,b=p.playlists.filter((function(e){return e!==c.payload.id}));return p.playlists=b,Object(l.a)(Object(l.a)({},i),{},(r={},Object(Te.a)(r,p.id,p),Object(Te.a)(r,"currentBand",p),r));case v:return se.a.omit(i,i.currentBand);default:return i}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.payload&&console.log(t.payload),{error:t.payload};default:return e}},audio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(l.a)(Object(l.a)({},e),{},{play:!0,pause:!1});case Z:return Object(l.a)(Object(l.a)({},e),{},{play:!1,pause:!0});case $:var n=t.payload.shift();return Object(l.a)(Object(l.a)({},e),{},{queue:t.payload,currentSong:n,play:!0});case ee:var a=e.queue,r=a.shift();return Object(l.a)(Object(l.a)({},e),{},{queue:a,currentSong:r});case X:if(t.payload.bounce.id===e.currentSong.audio)return console.log("ok"),Object(l.a)(Object(l.a)({},e),{},{play:!1,pause:!0,queue:[],currentSong:null});if(e.queue.length)return e.queue=e.queue.filter((function(e){return e.audio!==t.payload.bounce.id})),Object(l.a)({},e);case te:return Object(l.a)(Object(l.a)({},e),{},{volume:t.payload});default:return e}}}),pt={};localStorage.getItem("token")&&(pt.auth={isSignedIn:!0});var bt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,jt=Object(o.e)(dt,pt,bt(Object(o.a)(u.a)));c.a.render(Object(ke.jsx)(s.a,{store:jt,children:Object(ke.jsx)(st,{})}),document.querySelector("#root"))}},[[237,1,2]]]);
//# sourceMappingURL=main.cae4b55f.chunk.js.map