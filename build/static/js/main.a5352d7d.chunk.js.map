{"version":3,"sources":["apis/greenhouse.js","actions/types.js","history.js","actions/index.js","components/Error.js","components/AddButton.js","components/Modal.js","components/DeleteButton.js","components/requireAuth.js","components/Bounce.js","components/Version.js","components/PlayContainer.js","components/Title.js","components/Tier.js","components/PlaylistSong.js","components/Playlist.js","components/BodyContainer.js","components/AudioHeader.js","components/BandHeader.js","components/User.js","components/UserForm.js","components/SignIn.js","components/SignUp.js","components/Home.js","components/App.js","reducers/authReducer.js","reducers/audioReducer.js","reducers/index.js","reducers/tierReducer.js","reducers/titleReducer.js","reducers/versionReducer.js","reducers/bounceReducer.js","reducers/playlistReducer.js","reducers/playlistSongReducer.js","reducers/bandReducer.js","reducers/errorReducer.js","index.js"],"names":["instance","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","err","Promise","reject","SIGN_IN","SIGN_OUT","ERROR","FETCH_TIERS","FETCH_PLAYLISTSONGS","FETCH_PLAYLIST","FETCH_PLAYLISTS","FETCH_BAND","FETCH_BANDS","FETCH_TITLES","FETCH_VERSIONS","FETCH_BOUNCES","CREATE_TIER","CREATE_PLAYLISTSONG","CREATE_TITLE","CREATE_PLAYLIST","CREATE_VERSION","CREATE_BOUNCE","CREATE_BAND","EDIT_TIER","EDIT_PLAYLIST","EDIT_PLAYLISTSONG","EDIT_TITLE","EDIT_VERSION","EDIT_BOUNCE","EDIT_BAND","DELETE_TIER","DELETE_PLAYLIST","DELETE_PLAYLISTSONG","DELETE_TITLE","DELETE_VERSION","DELETE_BOUNCE","DELETE_BAND","PLAY_AUDIO","PAUSE_AUDIO","QUEUE_SONGS","NEXT_SONG","CHANGE_VOLUME","SELECT_VERSION","SELECT_BOUNCE","createBrowserHistory","errorHandler","message","response","data","error","type","payload","signOut","removeItem","history","push","throwError","fetchBands","dispatch","a","greenhouse","get","fetchVersions","titleId","fetchBounces","versionId","createTier","formValues","getState","currentBand","bands","post","id","editVersion","thisVersion","versions","current","patch","parentTitle","titles","versionList","map","oldCurrent","find","v","_","pick","editBounce","bounceId","thisBounce","bounces","latest","file","reader","FileReader","onload","event","window","AudioContext","webkitAudioContext","decodeAudioData","target","result","buffer","key","duration","parseInt","formObject","formData","FormData","append","parentVersion","bounceList","oldLatest","b","onerror","console","readAsArrayBuffer","deleteTier","tierId","trackList","forEach","deleteTitle","deleteVersion","playlists","Object","values","playlistSongs","filter","pls","title","playlist","pl","songs","includes","deletePlaylistSong","tier","remainingVersions","length","newCurrent","selectVersion","deleteBounce","version","remainingBounces","newLatest","selectBounce","bounce","playlistSongId","playlistId","playlistsong","playAudio","connect","state","className","onClick","AddButton","props","boxVisible","selectedOption","blockSpaceBarPress","e","stopPropagation","bodyClick","ref","contains","setState","showOptions","field","options","option","value","display","onFileInput","input","preventDefault","onChange","files","addClass","meta","touched","autoFocus","required","undefined","showFields","fields","i","comp","label","Field","name","component","validate","submitForm","onSubmit","reset","showBox","handleSubmit","click","React","createRef","prevProps","prevState","this","document","addEventListener","capture","removeEventListener","src","image","Component","reduxForm","form","Modal","querySelector","classList","add","remove","ReactDOM","createPortal","onDismiss","content","actions","DeleteButton","displayName","useState","visible","setVisible","ChildComponent","ComposedComponent","authorized","handleUpdate","checkAuth","user","auth","createBounce","requireAuth","selectedBounce","setSelectedBounce","modalActive","setModalActive","useEffect","displayDate","date","moment","utc","format","renderBounceList","sort","latestTag","comments","onAddSubmit","initialValues","renderAddButton","enableReinitialize","renderEditButton","createVersion","selectedVersion","setSelectedVersion","setBounceList","notes","renderBounces","queueSongs","song","allTitles","titleList","splice","indexOf","queue","audio","queuePlaylistSongs","allSongs","self","parentType","time","minutes","Math","floor","seconds","displayTime","band","createPlaylistSong","editTitle","getTime","expand","setExpand","setVersionList","setSong","versionToSelect","versionIds","bounceToSelect","arrow","renderPlayContainer","playlistOptions","onAddToPlaylist","renderButtons","tiers","fetchTitles","editTier","createTitle","titlesToRender","setTitlesToRender","tierList","setTierList","times","setTimes","tiersToShow","position","t","track","open","total","reduce","prev","cur","renderTotalTime","renderDeleteButton","editPlaylistSong","playSong","setPlaySong","otherSongs","s","otherVersions","otherBounces","editOptions","onEditSubmit","fetchPlaylistSongs","deletePlaylist","playlistList","setPlaylistList","songsToRender","setSongsToRender","playlistsToShow","editPlaylist","currentSong","fetchTiers","bandId","fetchPlaylists","createPlaylist","playbarActive","renderTierAddButton","renderPlaylistAddButton","AudioHeader","volume","sliderPosition","updateSlider","currentTime","formatTime","isNaN","nextSong","setTimeout","play","pause","pauseAudio","onSliderChange","onPauseButton","Audio","code","wrapUrl","min","max","onInput","currentUser","signedIn","isSignedIn","fetchBand","bandName","changeVolume","match","params","to","createBand","editBand","deleteBand","username","bandList","url","renderBands","UserForm","renderInput","autoComplete","defaultValue","signIn","setItem","signUp","Home","fetchUser","path","exact","SignIn","SignUp","render","routeProps","BandHeader","INITIAL_STATE","initialState","combineReducers","formReducer","action","mapKeys","oldPosition","newPosition","changedPositions","item","pos","changePosition","omit","addToTier","deleteFromTier","newTrackList","versionTitle","bounceTitle","addToTitle","deleteFromTitle","newVersionList","addToVersion","deleteFromVersion","newBounceList","p","addToPlaylist","deleteFromPlaylist","newSongList","newTiers","currentBandP","bandP","newPlaylists","log","shift","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk"],"mappings":"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","file":"static/js/main.a5352d7d.chunk.js","sourcesContent":["import axios from 'axios';\n\n\nconst instance = axios.create({\n    baseURL: 'https://exploring-the-space.com/api',\n});\n\ninstance.interceptors.request.use(\n    (config) => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            config.headers.Authorization = token;\n        }\n        return config;\n    },\n    (err) => {\n        return Promise.reject(err);\n    }\n);\n\n\n\nexport default instance;","export const SIGN_IN = 'SIGN_IN';\nexport const SIGN_OUT = 'SIGN_OUT';\n\nexport const ERROR = 'ERROR';\n\nexport const FETCH_TIERS = 'FETCH_TIERS';\nexport const FETCH_PLAYLISTSONGS = 'FETCH_PLAYLISTSONGS';\nexport const FETCH_PLAYLIST = 'FETCH_PLAYLIST';\nexport const FETCH_PLAYLISTS = 'FETCH_PLAYLISTS';\nexport const FETCH_BAND = 'FETCH_BAND';\nexport const FETCH_BANDS = 'FETCH_BANDS';\nexport const FETCH_TITLES = 'FETCH_TITLES';\nexport const FETCH_VERSIONS = 'FETCH_VERSIONS';\nexport const FETCH_BOUNCES = 'FETCH_BOUNCES';\n\nexport const FETCH_TITLE = 'FETCH_TITLE';\nexport const FETCH_VERSION = 'FETCH_VERSION';\nexport const FETCH_BOUNCE = 'FETCH_BOUNCE';\n\nexport const CREATE_TIER = 'CREATE_TIER';\nexport const CREATE_PLAYLISTSONG = 'CREATE_PLAYLISTSONG';\nexport const CREATE_TITLE = 'CREATE_TITLE';\nexport const CREATE_PLAYLIST = 'CREATE_PLAYLIST';\nexport const CREATE_VERSION = 'CREATE_VERSION';\nexport const CREATE_BOUNCE = 'CREATE_BOUNCE';\nexport const CREATE_BAND = 'CREATE_BAND';\n\nexport const EDIT_TIER = 'EDIT_TIER';\nexport const EDIT_PLAYLIST = 'EDIT_PLAYLIST';\nexport const EDIT_PLAYLISTSONG = 'EDIT_PLAYLISTSONG';\nexport const EDIT_TITLE = 'EDIT_TITLE';\nexport const EDIT_VERSION = 'EDIT_VERSION';\nexport const EDIT_BOUNCE = 'EDIT_BOUNCE';\nexport const EDIT_BAND = 'EDIT_BAND';\n\nexport const DELETE_TIER = 'DELETE_TIER';\nexport const DELETE_PLAYLIST = 'DELETE_PLAYLIST';\nexport const DELETE_PLAYLISTSONG = 'DELETE_PLAYLISTSONG';\nexport const DELETE_TITLE = 'DELETE_TITLE';\nexport const DELETE_VERSION = 'DELETE_VERSION';\nexport const DELETE_BOUNCE = 'DELETE_BOUNCE';\nexport const DELETE_BAND = 'DELETE_BAND';\n\nexport const PLAY_AUDIO = 'PLAY_AUDIO';\nexport const PAUSE_AUDIO = 'PAUSE_AUDIO';\nexport const QUEUE_SONGS = 'QUEUE_SONGS';\nexport const NEXT_SONG = 'NEXT_SONG';\nexport const CHANGE_VOLUME = 'CHANGE_VOLUME';\n\nexport const SELECT_VERSION = 'SELECT_VERSION';\nexport const SELECT_BOUNCE = 'SELECT_BOUNCE';","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();","import greenhouse from '../apis/greenhouse';\nimport {\n    SIGN_IN,\n    SIGN_OUT,\n    ERROR,\n    FETCH_BAND,\n    FETCH_BANDS,\n    FETCH_TIERS,\n    FETCH_TITLES,\n    FETCH_VERSIONS,\n    FETCH_BOUNCES,\n    FETCH_PLAYLISTS,\n    FETCH_PLAYLISTSONGS,\n    CREATE_BAND,\n    CREATE_TIER,\n    CREATE_TITLE,\n    CREATE_VERSION,\n    CREATE_BOUNCE,\n    CREATE_PLAYLIST,\n    CREATE_PLAYLISTSONG,\n    EDIT_BAND,\n    EDIT_TIER,\n    EDIT_TITLE,\n    EDIT_VERSION,\n    EDIT_BOUNCE,\n    EDIT_PLAYLIST,\n    EDIT_PLAYLISTSONG,\n    DELETE_BAND,\n    DELETE_TIER,\n    DELETE_TITLE,\n    DELETE_VERSION,\n    DELETE_BOUNCE,\n    DELETE_PLAYLIST,\n    DELETE_PLAYLISTSONG,\n    PLAY_AUDIO,\n    PAUSE_AUDIO,\n    QUEUE_SONGS,\n    NEXT_SONG,\n    SELECT_VERSION,\n    SELECT_BOUNCE,\n    CHANGE_VOLUME\n} from './types';\nimport history from '../history';\nimport _ from 'lodash';\n\nconst errorHandler = err => {\n    let message;\n    if (err.response) {\n        message = err.response.data.error\n    } else {\n        message = err.message;\n    }\n    return { type: ERROR, payload: message };\n};\n\n\nexport const signIn = formValues => async (dispatch) => {\n    try {\n        const response = await greenhouse.post('/signin', formValues);\n        localStorage.setItem('token', response.data.token );\n        dispatch({ type: SIGN_IN, payload: response.data.user });\n        history.push('/user');\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const signOut = () => {\n    localStorage.removeItem('token');\n    history.push('/');\n    return { type: SIGN_OUT };\n};\n\nexport const signUp = formValues => async (dispatch) => {\n    try {\n        const response = await greenhouse.post('/signup', formValues);\n        localStorage.setItem('token', response.data.token );\n        dispatch({ type: SIGN_IN, payload: response.data.user });\n        history.push('/user');\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const throwError = message => {\n    return { type: ERROR, payload: message };\n};\n\nexport const fetchUser = () => async dispatch => {\n    try {\n        const response = await greenhouse.get('/user');\n        if (response.data) {\n            dispatch({ type: SIGN_IN, payload: response.data });\n        } else {\n            dispatch(signOut());\n        }\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const fetchBand = bandName => async (dispatch) => {\n    try {\n        const response = await greenhouse.get(`/bands/${bandName}`);    \n        dispatch({ type: FETCH_BAND, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const fetchBands = () => async (dispatch) => {\n    try {\n        const response = await greenhouse.get(`/bands`);\n        dispatch({ type: FETCH_BANDS, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const fetchTiers = bandId => async (dispatch) => {\n    try {\n        const response = await greenhouse.get(`/tiers/${bandId}`);\n        dispatch({ type: FETCH_TIERS, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const fetchTitles = tierId => async (dispatch) => {\n    try {\n        const response = await greenhouse.get(`/titles/${tierId}`);\n        dispatch({ type: FETCH_TITLES, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const fetchVersions = titleId => async (dispatch) => {\n    try {\n        const response = await greenhouse.get(`/versions/${titleId}`);\n        dispatch({ type: FETCH_VERSIONS, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const fetchBounces = versionId => async (dispatch) => {\n    try {\n        const response = await greenhouse.get(`/bounces/${versionId}`);\n        dispatch({ type: FETCH_BOUNCES, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const fetchPlaylists = bandId => async (dispatch) => {\n    try {\n        const response = await greenhouse.get(`/playlists/${bandId}`);\n        dispatch({ type: FETCH_PLAYLISTS, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const fetchPlaylistSongs = playlistId => async (dispatch) => {\n    try {\n        const response = await greenhouse.get(`/playlistsongs/${playlistId}`);\n        dispatch({ type: FETCH_PLAYLISTSONGS, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\n\n\nexport const createBand = formValues => async (dispatch) => {\n    try {\n        const response = await greenhouse.post('/bands', formValues);\n        dispatch({ type: CREATE_BAND, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const createTier = formValues => async (dispatch, getState) => {\n    try {\n        const { currentBand } = getState().bands;\n        const response = await greenhouse.post(\n            '/tiers',\n            { ...formValues, currentBand: currentBand.id }\n        );\n        dispatch({ type: CREATE_TIER, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const createTitle = (formValues, tierId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n        const response = await greenhouse.post(\n            '/titles',\n            { ...formValues, currentBand: currentBand.id, tier: tierId }\n        );\n        dispatch({ type: CREATE_TITLE, payload: { title: response.data, tier: tierId } });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const createVersion = (formValues, titleId) => async (dispatch, getState) => {\n    try {\n\n        const { currentBand } = getState().bands;\n        const parentTitle = getState().titles[titleId];\n\n        if (!parentTitle.versions.length) {\n            formValues.current = true;\n        }\n        \n        const response = await greenhouse.post(\n            '/versions',\n            { ...formValues, currentBand: currentBand.id, title: titleId }\n        );    \n\n        if (response.data.current) {\n            if (parentTitle.versions.length) {\n                const versionList = parentTitle.versions.map(id => getState().versions[id]);\n                const oldCurrent = versionList.find(v => v.current);\n                oldCurrent.current = false;\n                dispatch(editVersion(\n                    _.pick(oldCurrent, 'name', 'notes', 'current'), oldCurrent.id, titleId\n                ));\n            }\n            dispatch({ type: SELECT_VERSION, payload: { titleId, version: response.data } });\n        }\n\n        dispatch({ type: CREATE_VERSION, payload: { version: response.data, title: titleId } });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const createBounce = (formValues, versionId, titleId) => async (dispatch, getState) => {\n\n    try {\n        const { currentBand } = getState().bands;\n        const parentVersion = getState().versions[versionId];\n\n        if (!parentVersion.bounces.length) {\n            formValues.latest = true;\n        }\n\n        formValues.file = formValues.file[0];\n        \n        // Create instance of FileReader\n        const reader = new FileReader();\n\n        // When the file has been succesfully read\n        reader.onload = event => {\n\n            // Create an instance of AudioContext\n            const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n\n            // Asynchronously decode audio file data contained in an ArrayBuffer.\n            audioContext.decodeAudioData(event.target.result, async (buffer) => {\n\n                // Obtain the duration in seconds of the audio file (with milliseconds as well, a float value)\n                const duration = parseInt(buffer.duration);\n\n                const formObject = {\n                    ...formValues,\n                    currentBand: currentBand.id,\n                    version: versionId,\n                    duration\n                }\n\n                const formData = new FormData();\n\n                for ( let key in formObject ) {\n                    formData.append(key, formObject[key]);\n                }\n\n                const response = await greenhouse.post(\n                    '/bounces', \n                    formData,\n                    {\n                        headers: { 'Content-Type': 'multipart/form-data'}\n                    }\n                );\n\n                if (response.data.latest) {\n                    \n                    if (parentVersion.bounces.length) {\n                        const bounceList = parentVersion.bounces.map(id => getState().bounces[id]);\n                        const oldLatest = bounceList.find(b => b.latest);\n                        oldLatest.latest = false;\n                        dispatch(editBounce(\n                            _.pick(oldLatest, 'date', 'comments', 'latest'), oldLatest.id, versionId\n                        ));\n                    }\n                    dispatch({ type: SELECT_BOUNCE, payload: { titleId, bounce: response.data } });\n                }\n\n                dispatch({ type: CREATE_BOUNCE, payload: { bounce: response.data, version: versionId } });\n            });\n        };\n\n        // In case the file couldn't be read\n        reader.onerror =  event => {\n            console.error(\"An error ocurred reading the file: \", event);\n        };\n\n        // Read file as an ArrayBuffer, important !\n        reader.readAsArrayBuffer(formValues.file);\n\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const createPlaylist = formValues => async (dispatch, getState) => {\n    try {\n        const { currentBand } = getState().bands;\n        const response = await greenhouse.post(\n            '/playlists',\n            { ...formValues, currentBand: currentBand.id }\n        );\n        dispatch({ type: CREATE_PLAYLIST, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const createPlaylistSong = (formValues, playlistId) => async (dispatch, getState) => {\n    try {\n        const { currentBand } = getState().bands;\n        const response = await greenhouse.post(\n            '/playlistsongs',\n            { \n                ...formValues,\n                playlist: playlistId,\n                currentBand: currentBand.id\n            }\n        );\n        dispatch({ type: CREATE_PLAYLISTSONG, payload: { playlistsong: response.data, playlist: playlistId } });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const editBand = (formValues, bandId) => async dispatch => {\n    try {\n        const response = await greenhouse.patch('/bands', { ...formValues, currentBand: bandId});\n        dispatch({ type: EDIT_BAND, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const editTier = (formValues, tierId) => async (dispatch, getState) => {\n    try {\n        const { currentBand } = getState().bands;\n        const response = await greenhouse.patch(\n            `/tiers/${tierId}`,\n            { ...formValues, currentBand: currentBand.id }\n        );\n        dispatch({ type: EDIT_TIER, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const editTitle = (formValues, titleId) => async (dispatch, getState) => {\n    try {\n        const { currentBand } = getState().bands;\n        const response = await greenhouse.patch(\n            `/titles/${titleId}`,\n            { ...formValues, currentBand: currentBand.id }\n        );\n        dispatch({ type: EDIT_TITLE, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const editVersion = (formValues, versionId, titleId) => async (dispatch, getState) => {\n    try {\n        const { currentBand } = getState().bands;\n        const thisVersion = getState().versions[versionId];\n        if (thisVersion.current) {\n            formValues.current = true;\n        }\n        const response = await greenhouse.patch(\n            `/versions/${versionId}`,\n            { ...formValues, currentBand: currentBand.id }\n        );\n        if (response.data.current && !thisVersion.current) {\n            const parentTitle = getState().titles[titleId];\n            const versionList = parentTitle.versions.map(id => getState().versions[id]);\n            const oldCurrent = versionList.find(v => v.current);\n            oldCurrent.current = false;\n            dispatch(editVersion(\n                _.pick(oldCurrent, 'name', 'notes', 'current'), oldCurrent.id, titleId\n            ));   \n        }\n        dispatch({ type: EDIT_VERSION, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const editBounce = (formValues, bounceId, versionId) => async (dispatch, getState) => {\n    try {\n        const { currentBand } = getState().bands;\n        const thisBounce = getState().bounces[bounceId];\n        if (thisBounce.latest) {\n            formValues.latest = true;\n        }\n        if (formValues.file) {\n            formValues.file = formValues.file[0];\n \n            // Create instance of FileReader\n            const reader = new FileReader();\n    \n            // When the file has been succesfully read\n            reader.onload = event => {\n    \n                // Create an instance of AudioContext\n                const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n    \n                // Asynchronously decode audio file data contained in an ArrayBuffer.\n                audioContext.decodeAudioData(event.target.result, async (buffer) => {\n    \n                    // Obtain the duration in seconds of the audio file (with milliseconds as well, a float value)\n                    const duration = parseInt(buffer.duration);\n    \n                    const formObject = {\n                        ...formValues,\n                        currentBand: currentBand.id,\n                        duration\n                    }\n    \n                    const formData = new FormData();\n    \n                    for ( let key in formObject ) {\n                        formData.append(key, formObject[key]);\n                    }\n    \n                    const response = await greenhouse.post(\n                        `/bounces${bounceId}`, \n                        formData,\n                        {\n                            headers: { 'Content-Type': 'multipart/form-data'}\n                        }\n                    );\n\n                    if (response.data.latest && !thisBounce.latest) {\n                        const parentVersion = getState().versions[versionId];\n                        const bounceList = parentVersion.bounces.map(id => getState().bounces[id]);\n                        const oldLatest = bounceList.find(b => b.latest);\n                        oldLatest.latest = false;\n                        dispatch(editBounce(\n                            _.pick(oldLatest, 'date', 'comments', 'latest'), oldLatest.id, versionId\n                        ));\n                    }\n    \n                    dispatch({ type: EDIT_BOUNCE, payload: response.data });\n    \n                });\n            };\n    \n            // In case the file couldn't be read\n            reader.onerror =  event => {\n                console.error(\"An error ocurred reading the file: \", event);\n            };\n    \n            // Read file as an ArrayBuffer, important !\n            reader.readAsArrayBuffer(formValues.file);\n        } else {\n            const response = await greenhouse.patch(\n                `/bounces/${bounceId}`,\n                { ...formValues, currentBand: currentBand.id }\n            );\n            dispatch({ type: EDIT_BOUNCE, payload: response.data });\n        }\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const editPlaylist = (formValues, playlistId) => async (dispatch, getState) => {\n    try {\n        const { currentBand } = getState().bands;\n        const response = await greenhouse.patch(\n            `/playlists/${playlistId}`,\n            { ...formValues, currentBand: currentBand.id }\n        );\n        dispatch({ type: EDIT_PLAYLIST, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const editPlaylistSong = (formValues, playlistSongId) => async (dispatch, getState) => {\n    try {\n        const { currentBand } = getState().bands;\n        const response = await greenhouse.patch(\n            `/playlistsongs/${playlistSongId}`,\n            { ...formValues, currentBand: currentBand.id }\n        );\n        dispatch({ type: EDIT_PLAYLISTSONG, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\n\n\n\n\nexport const deleteBand = bandId => async dispatch => {\n    try {\n        const response = await greenhouse.post(\n            '/bands/delete',\n            { currentBand: bandId }\n        );\n        response.data.tiers.forEach(tierId => {\n            dispatch(deleteTier(tierId, response.data.id));\n        });\n        dispatch({ type: DELETE_BAND, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const deleteTier = tierId => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n        const response = await greenhouse.post(\n            '/tiers/delete',\n            {\n                tierId,\n                currentBand: currentBand.id\n            }\n        );\n        response.data.trackList.forEach(titleId => {\n            dispatch(deleteTitle(titleId, response.data.id));\n        });\n        dispatch({ type: DELETE_TIER, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const deleteTitle = (titleId, tierId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n        const response = await greenhouse.post(\n            '/titles/delete',\n            {\n                titleId,\n                tierId,\n                currentBand: currentBand.id\n            }\n        );\n        response.data.versions.forEach(versionId => {\n            dispatch(deleteVersion(versionId, response.data.id));\n        });\n        const playlists = Object.values(getState().playlists);\n        const playlistSongs = Object.values(getState().playlistSongs).filter(pls => pls.title === titleId);\n        playlistSongs.forEach(pls => {\n            const playlist = playlists.find(pl => pl.songs.includes(pls.id));\n            dispatch(deletePlaylistSong(pls.id, playlist.id));\n        });\n        dispatch({ type: DELETE_TITLE, payload: { title: response.data, tier: tierId } });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const deleteVersion = (versionId, titleId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n        const response = await greenhouse.post(\n            '/versions/delete',\n            {\n                versionId,\n                titleId,\n                currentBand: currentBand.id\n            }\n        );\n        if (response.data.current) {\n            const parentTitle = getState().titles[titleId];\n            if (parentTitle) {\n                const remainingVersions = parentTitle.versions.filter(id => id !== versionId);\n                if (remainingVersions.length) {\n                    const newCurrent = getState().versions[remainingVersions[remainingVersions.length-1]];\n                    newCurrent.current = true;\n                    dispatch(selectVersion(newCurrent.id, titleId));\n                    dispatch(editVersion(\n                        _.pick(newCurrent, 'name', 'notes', 'current'), newCurrent.id, titleId\n                    ));\n                } else {\n                    dispatch(selectVersion(null, titleId));     \n                }   \n            }\n        }\n        response.data.bounces.forEach(bounceId => {\n            dispatch(deleteBounce(bounceId, response.data.id, titleId));\n        });\n        dispatch({ type: DELETE_VERSION, payload: { version: response.data, title: titleId } });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const deleteBounce = (bounceId, versionId, titleId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n        const response = await greenhouse.post(\n            '/bounces/delete',\n            {\n                bounceId,\n                versionId,\n                currentBand: currentBand.id\n            }\n        );\n        if (response.data.latest) {\n            const parentVersion = getState().versions[versionId];\n            if (parentVersion) {\n                const remainingBounces = parentVersion.bounces.filter(id => id !== bounceId);\n                if (remainingBounces.length) {\n                    const newLatest = getState().bounces[remainingBounces[remainingBounces.length -1]];\n                    newLatest.latest = true;\n                    dispatch(selectBounce(newLatest.id, titleId));\n                    dispatch(editBounce(\n                        _.pick(newLatest, 'date', 'comments', 'latest'), newLatest.id, versionId\n                    ));\n                } else {\n                    dispatch(selectBounce(null, titleId));\n                }  \n            }\n        }\n        dispatch({ type: DELETE_BOUNCE, payload: { bounce: response.data, version: versionId } });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const deletePlaylist = playlistId => async (dispatch, getState) => {\n\n    const { currentBand } = getState().bands;\n    try {\n        const response = await greenhouse.post(\n            '/playlists/delete',\n            {\n                playlistId,\n                currentBand: currentBand.id\n            }\n        );\n        response.data.songs.forEach(playlistSongId => {\n            dispatch(deletePlaylistSong(playlistSongId, response.data.id));\n        });\n        dispatch({ type: DELETE_PLAYLIST, payload: response.data });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const deletePlaylistSong = (playlistSongId, playlistId) => async (dispatch, getState) => {\n\n    const { currentBand } = getState().bands;\n    try {\n        const response = await greenhouse.post(\n            '/playlistsongs/delete',\n            {\n                playlistSongId,\n                playlistId,\n                currentBand: currentBand.id\n            }\n        );\n        dispatch({ type: DELETE_PLAYLISTSONG, payload: { playlistsong: response.data, playlist: playlistId } });\n    } catch (err) {\n        dispatch(errorHandler(err));\n    }\n};\n\nexport const playAudio = () => {\n    return { type: PLAY_AUDIO };\n};\n\nexport const pauseAudio = () => {\n    return { type: PAUSE_AUDIO };\n};\n\nexport const queueSongs = (song) => (dispatch, getState) => {\n\n    const allTitles = song.tier.trackList.map(id => getState().titles[id]);\n    const titleList = allTitles.splice(allTitles.indexOf(song.title));\n    const queue = [];\n    titleList.forEach(title => {\n        if (title.selectedVersion && title.selectedBounce) {\n            const version = getState().versions[title.selectedVersion.id];\n            const bounce = getState().bounces[title.selectedBounce.id];\n            queue.push({\n                title: title.title,\n                version: version.name,\n                date: bounce.date,\n                duration: bounce.duration,\n                audio: bounce.id\n            });\n        }\n    });\n    dispatch({ type: QUEUE_SONGS, payload: queue });\n};\n\nexport const queuePlaylistSongs = (song) => (dispatch, getState) => {\n\n    const allSongs = song.playlist.songs.map(id => getState().playlistSongs[id]);\n    const songList = allSongs.splice(allSongs.indexOf(song.self));\n    const queue = songList.map(song => {\n        const version = getState().versions[song.version];\n        const bounce = getState().bounces[song.bounce];\n        const title = getState().titles[song.title];\n        return {\n            title: title.title,\n            version: version.name,\n            date: bounce.date,\n            duration: bounce.duration,\n            audio: bounce.id\n        };\n    });\n    dispatch({ type: QUEUE_SONGS, payload: queue });\n};\n\n\nexport const nextSong = () => dispatch => {\n    dispatch({ type: NEXT_SONG });\n}\n\nexport const changeVolume = value => {\n    return { type: CHANGE_VOLUME, payload: value };\n}\n\n\nexport const selectVersion = (version, titleId) => {\n    return { type: SELECT_VERSION, payload: { version, titleId } };\n}\n\nexport const selectBounce = (bounce, titleId) => {\n    return { type: SELECT_BOUNCE, payload: { bounce, titleId } };\n}","\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { throwError } from '../actions';\n\nconst Error = ({ error, throwError }) => {\n\n    if (!error) {\n        return null;\n    }\n\n    return (\n        <div className=\"error\" onClick={() => throwError(null)}>\n            {error}\n        </div>\n    );\n\n};\n\nconst mapStateToProps = state => {\n    return {\n        error: state.error.error\n    }\n}\n\nexport default connect(mapStateToProps, { throwError })(Error);","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\n\n\n\nclass AddButton extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.ref = React.createRef();\n    }\n\n    state = { boxVisible: false, selectedOption: null };\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.boxVisible === false && this.state.boxVisible === true) {\n            document.addEventListener('click', this.bodyClick, {capture: true});\n            document.addEventListener('keydown', this.blockSpaceBarPress, {capture: true});\n        } else if (prevState.boxVisible === true && this.state.boxVisible === false) {\n            document.removeEventListener('click', this.bodyClick, {capture: true});\n            document.removeEventListener('keydown', this.blockSpaceBarPress, {capture: true});\n        }\n        \n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.bodyClick, {capture: true});\n        document.removeEventListener('keydown', this.blockSpaceBarPress, {capture: true});\n    }\n\n    blockSpaceBarPress = (e) => {\n        e.stopPropagation();\n    }\n\n    bodyClick = (e) => {\n        if (this.ref.current && this.ref.current.contains(e.target)) {\n            return;\n        }\n        if (this.state.boxVisible) {\n            this.setState({ boxVisible: false });\n        }\n    }\n\n    showOptions = (field) => {\n        return field.options.map(option => {\n            return (\n                <option\n                    key={option.value}\n                    value={option.value}\n                >\n                    {option.display}\n                </option>\n            );\n        });\n    };\n\n    onFileInput = (e, input) => {\n        e.preventDefault();\n        const { onChange } = input;\n        onChange(e.target.files[0]);\n    }\n\n    input = (field) => {\n        let addClass = '';\n        if (field.type === 'date') {\n            addClass = 'calendar';\n        }\n\n        if (field.type === 'file') {\n            delete field.input.value;\n\n            return <>\n                <div className=\"form-errors\">\n                    {field.meta.touched && (field.meta.error && <p>{field.meta.error}<span>&darr;</span></p>)}\n                </div>\n                <input\n                    {...field.input}\n                    type='file'\n                    className='inputfile'\n                    onChange={(e) => this.onFileInput(e, field.input)}    \n                />\n            </>;\n        } else if (field.type === 'select') {\n            return <>\n                <div className=\"form-errors\">\n                    {field.meta.touched && (field.meta.error && <p>{field.meta.error}<span>&darr;</span></p>)}\n                </div>\n                <select\n                    {...field.input}\n                    autoFocus={field.autoFocus}\n                    type={field.type}\n                >\n                    {field.options ? this.showOptions(field) : null}\n                </select>\n            </>;\n        } else {\n            return <>\n                <div className=\"form-errors\">\n                    {field.meta.touched && (field.meta.error && <p>{field.meta.error}<span>&darr;</span></p>)}\n                </div>\n                <input\n                    {...field.input}\n                    autoFocus={field.autoFocus}\n                    type={field.type}\n                    className={`text-input ${addClass}`}\n                />\n            </>;\n        }\n    }\n\n    required = value => {\n        return value ? undefined : 'Required';\n    }\n\n    showFields = () => {\n\n        return this.props.fields.map((field, i) => {\n            const autoFocus = i === 0 ? true : false;\n            let comp = this.input;\n            // if (field.type === 'select') {\n            //     comp = 'select'\n            // }\n            return <div key={field.label}>\n                <label>{field.label}: </label>\n                <Field\n                    name={field.name}\n                    component={comp}\n                    autoFocus={autoFocus}\n                    type={field.type}\n                    validate={field.required ? this.required : null}\n                    options={field.options}\n                >\n                    {field.options ? this.showOptions(field) : null}\n                </Field>\n            </div>\n        });\n \n    };\n\n    submitForm = (formValues) => {\n        this.props.onSubmit(formValues);\n        this.setState({ boxVisible: false });\n        this.props.reset();\n    }\n\n    showBox = () => {\n        if (this.state.boxVisible) {\n            return <>    \n                <div className='addbox' onClick={e => e.stopPropagation()}>\n                    <h3 className=\"addbox-title\">{this.props.title}</h3>\n                    <form onSubmit = {this.props.handleSubmit(this.submitForm)}>\n                        {this.showFields()}\n                        <div className=\"submit-button-centered\">\n                            <button className=\"submit-button\"type='submit'>OK</button>\n                        </div>\n                    </form>\n                </div>\n            </>\n        }\n    }\n\n    click = (e) => {\n        e.stopPropagation();\n        if (this.ref.current && this.ref.current === e.target) {\n            return;\n        }\n        if (this.state.boxVisible) {\n            this.setState({ boxVisible: false });\n        } else {\n            this.setState({ boxVisible: true });\n        }\n\n    }\n    \n    render() {\n\n        return <>\n            <div className=\"add\" onClick={this.click} ref={this.ref}>\n                <img src={this.props.image} />\n                {this.showBox()}\n            </div>\n        </>;\n    }\n\n}\n\nexport default reduxForm({ form: 'form' })(AddButton);","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n\nclass Modal extends React.Component {\n\n    componentDidMount() {\n        document.querySelector('.container').classList.add('modal-active');\n    }\n    componentWillUnmount() {\n        document.querySelector('.container').classList.remove('modal-active');\n    }\n\n    render() {\n        return ReactDOM.createPortal(\n            <div onClick={this.props.onDismiss} className=\"dimmer\">\n                <div \n                    onClick={e => e.stopPropagation()}\n                    className=\"modal-box\"\n                >\n                    <div>\n                        {this.props.content}\n                    </div>\n                    <div>\n                        {this.props.actions}\n                    </div>\n                </div>\n            </div>,\n            document.querySelector('#modal')\n        );\n    }\n};\n\nexport default Modal;","import React, { useState } from 'react';\nimport Modal from './Modal';\n\nconst DeleteButton = ({ onSubmit, displayName }) => {\n\n    const [visible, setVisible] = useState(false);\n\n    const renderContent = () => {\n        return `Seriously delete ${displayName}?`;\n    };\n\n    const renderActions = () => {\n        return (\n            <>\n                <button\n                    className=\"modal-button\"\n                    onClick={() => {\n                        onSubmit();\n                        setVisible(false);\n                    }}\n                >\n                    Delete\n                </button>\n                <button\n                    className=\"modal-button\"\n                    onClick={() => setVisible(false)}\n                >\n                    No Wait\n                </button>\n            </>\n        );\n    };\n\n    const showModal = () => {\n\n        return (\n            <Modal \n                content={renderContent()}\n                actions={renderActions()}\n                onDismiss={() => setVisible(false)}\n            />\n        );\n    };\n\n\n\n    const onClick = (e) => {\n        e.stopPropagation();\n        setVisible(true);\n    };\n\n\n    return (\n        <div>\n            <img src=\"/images/delete.png\" className=\"delete\" onClick={onClick} />\n            {visible && showModal()}\n        </div>\n    );\n\n};\n\nexport default DeleteButton;","import React from 'react';\nimport { connect } from 'react-redux';\n\nexport default ChildComponent => {\n\n    class ComposedComponent extends React.Component {\n\n        constructor(props) {\n            super(props);\n        }\n\n        state = { authorized: false };\n\n        componentDidMount() {\n            this.checkAuth();\n        }\n\n\n        // componentDidUpdate() {\n        //     this.checkAuth();\n        // }\n\n        handleUpdate = () => {\n            this.checkAuth();\n        }\n\n        checkAuth() {\n            if (this.props.user && this.props.currentBand && this.props.user.bands.includes(this.props.currentBand.id)) {\n                this.setState({ authorized: true });\n            }\n        }\n\n        render() {\n\n            return <ChildComponent {...this.props} authorized={this.state.authorized} handleUpdate={this.handleUpdate} />;\n\n        }\n\n    }\n\n    const mapStateToProps = state => {\n        return {\n            user: state.auth.user,\n            currentBand: state.bands.currentBand\n        }\n    };\n\n    return connect(mapStateToProps)(ComposedComponent);\n\n};\n\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\nimport requireAuth from './requireAuth';\nimport { selectBounce, createBounce, editBounce, deleteBounce } from '../actions';\nimport Modal from './Modal';\n\nconst Bounce = ({ bounces, selectBounce, title, authorized, version, createBounce, editBounce, deleteBounce }) => {\n\n    const [selectedBounce, setSelectedBounce] = useState(title.selectedBounce);\n\n    const [modalActive, setModalActive] = useState(false);\n\n    useEffect(() => {\n        if (selectedBounce && selectedBounce !== title.selectedBounce) {\n            selectBounce(selectedBounce, title.id);\n        }\n    }, [selectedBounce, title.selectedBounce]);\n\n    useEffect(() => {\n        setSelectedBounce(title.selectedBounce);\n        setModalActive(false);\n    }, [bounces]);\n\n    const displayDate = date => {\n        return moment.utc(date).format('MM/DD/yy');\n    }\n\n    const renderBounceList = () => {\n\n        if (bounces[0]) {\n\n            const bounceList = bounces.filter(b => b.id !== selectedBounce.id);\n            bounceList.sort((a, b) => a.date < b.date ? 1 : -1);\n\n            return bounceList.map(b => {\n                const current = b.latest ? <span className=\"list-current\"> * current</span> : null;\n                return <div\n                    className=\"dropdown-link change-song\"\n                    onClick={() => setSelectedBounce(b)}\n                    key={b.id}\n                >\n                    {displayDate(b.date)}\n                    {current}\n                </div>\n            });\n        }\n    };\n\n    const onAddSubmit = (formValues) => {\n\n        createBounce(formValues, version.id, title.id);\n        setModalActive(true);\n\n    };\n\n    const modalContent = () => {\n        return (\n\n                <div className='upload-image'>\n                    <p>Uploading...</p>\n                    <img className='windmill' src='/images/windmill.gif' />\n                </div>\n\n        );\n    };\n\n    const renderAddButton = () => {\n        if (authorized) {\n            return (\n                <AddButton\n                    title={`Add a Bounce of ${version.name}`}\n                    image=\"images/add.png\"\n                    fields={[\n                        {\n                            label: 'File',\n                            name: 'file',\n                            type: 'file',\n                            required: true\n                        },\n                        {\n                            label: 'Date',\n                            name: 'date',\n                            type: 'date',\n                            required: true         \n                        },\n                        {\n                            label: 'Comments',\n                            name: 'comments',\n                            type: 'textarea',          \n                        },\n                        {\n                            label: 'Latest Bounce?',\n                            name: 'latest',\n                            type: 'checkbox',        \n                        },\n                    ]}\n                    onSubmit={formValues => onAddSubmit(formValues)}\n                    form={`add-bounce-${title.id}`}\n                    initialValues={{ latest: true }}\n                />\n            );\n        }\n    };\n\n    const renderEditButton = () => {\n        if (authorized) {\n            return <AddButton\n                title={'Edit this Bounce'}\n                image=\"images/edit.png\"\n                fields={[\n                    {\n                        label: 'File',\n                        name: 'file',\n                        type: 'file', \n                    },\n                    {\n                        label: 'Date',\n                        name: 'date',\n                        type: 'date',          \n                    },\n                    {\n                        label: 'Comments',\n                        name: 'comments',\n                        type: 'textarea',          \n                    },\n                    {\n                        label: 'Current Bounce?',\n                        name: 'latest',\n                        type: 'checkbox',        \n                    },\n                ]}\n                onSubmit={formValues => editBounce(formValues, selectedBounce.id, version.id)}\n                initialValues={\n                    { ..._.pick(selectedBounce, 'comments', 'latest'), date: moment.utc(selectedBounce.date).format('YYYY-MM-DD') }\n                }\n                form={`edit-bounce-${title.id}`}\n                enableReinitialize={true}\n            />;\n        }\n    };\n\n    const renderDeleteButton = () => {\n        return <DeleteButton\n            onSubmit={() => deleteBounce(selectedBounce.id, version.id, title.id)}\n            displayName={displayDate(selectedBounce.date)}\n        />;\n    };\n\n    const latestTag = () => {\n        if (selectedBounce.latest) {\n            return (\n                <div className=\"latest\">\n                    Current Bounce\n                </div>\n            );\n        }\n    };\n    \n\n    const renderBounceDetail = () => {\n        if (selectedBounce) {\n            return (\n                <div className='detail-content'>\n                    <div className='detail-header'>\n                        <h5>Date:</h5>\n                        <div className='dropdown'>\n                            <button className='dropbtn'>\n                                {displayDate(selectedBounce.date)}\n                            </button>\n                            <div className='dropdown-content'>\n                                {renderBounceList()}\n                            </div>\n                        </div>\n                        <div>\n                            {latestTag()}\n                        </div>\n                    </div>\n                    <div className='detail-notes'>\n                        {selectedBounce.comments}\n                    </div>                         \n                </div>\n            );\n        } else {\n            return (\n                <div className=\"detail-content\">\n                    <div className=\"detail-header\">\n                        <h5>No Bounces for this Version</h5>\n                    </div>\n                </div>\n            );\n        }\n    };\n    \n\n    if (modalActive) {\n        return <Modal\n            content={modalContent()}\n            actions={null}\n            onDismiss={() => null}\n        />\n    } else {\n        if (version) {\n            return (\n                <div className=\"detail-box bounce\">   \n                    {renderBounceDetail()}                                            \n                    <div className=\"detail-buttons\">\n                        {renderAddButton()}\n                        {selectedBounce && renderEditButton()}\n                        {selectedBounce && renderDeleteButton()}\n                    </div>\n                </div>\n            );\n        } else {\n            return null;\n        }\n    }\n};\n\nexport default connect(null, { selectBounce, createBounce, editBounce, deleteBounce })(requireAuth(Bounce));","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport { fetchBounces, selectVersion, createVersion, editVersion, deleteVersion } from '../actions';\nimport Bounce from './Bounce';\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\nimport requireAuth from './requireAuth';\n\nconst Version = ({ versions, bounces, fetchBounces, selectVersion, title, createVersion, authorized, editVersion, deleteVersion }) => {\n\n    const [selectedVersion, setSelectedVersion] = useState(title.selectedVersion);\n    const [bounceList, setBounceList] = useState(null);\n\n    useEffect(() => {\n        // console.log(selectedVersion);\n        if (selectedVersion) {\n            fetchBounces(selectedVersion.id);\n            selectVersion(selectedVersion, title.id);\n            setBounceList(selectedVersion.bounces.map(id => bounces[id]));\n        }\n    }, [selectedVersion]);\n\n    useEffect(() => {\n        if (selectedVersion) {\n            setBounceList(selectedVersion.bounces.map(id => bounces[id]));\n        }\n    }, [bounces]);\n\n    useEffect(() => {\n        if (selectedVersion !== title.selectedVersion) {\n            setSelectedVersion(title.selectedVersion);\n        }\n    }, [versions, title.selectedVersion]);\n\n    const renderVersionList = () => {\n        const versionList = versions.filter(v => v.id !== selectedVersion.id);\n\n        return versionList.map(v => {\n            const current = v.current ? <span className=\"list-current\"> * current</span> : null;\n            return <div\n                className=\"dropdown-link change-version\"\n                onClick={() => setSelectedVersion(v)}\n                key={v.id}\n            >\n                    {v.name}\n                    {current}\n            </div>\n        });\n    };\n    \n    const renderBounces = () => {\n\n        if (bounceList) {\n\n            return (\n                <Bounce bounces={bounceList} title={title} version={selectedVersion} />\n            );\n        \n            \n        }\n    };\n\n    const renderAddButton = () => {\n        if (authorized) {\n            return (\n                <AddButton\n                    title={`Add a Version of ${title.title}`}\n                    image=\"images/add.png\"\n                    fields={[\n                        {\n                            label: 'Name',\n                            name: 'name',\n                            type: 'input',\n                            required: true         \n                        },\n                        {\n                            label: 'Notes',\n                            name: 'notes',\n                            type: 'textarea',          \n                        },\n                        {\n                            label: 'Current Version?',\n                            name: 'current',\n                            type: 'checkbox',      \n                        },\n                    ]}\n                    onSubmit={(formValues) => createVersion(formValues, title.id)}\n                    form={`add-version-${title.id}`}\n                    initialValues={{ current: true }}\n                    enableReinitialize={true}\n                />\n            );\n        }\n    };\n\n    const renderEditButton = () => {\n        if (authorized) {\n            return <AddButton\n                title={`Edit ${selectedVersion.name}`}\n                image=\"images/edit.png\"\n                fields={[\n                    {\n                        label: 'Name',\n                        name: 'name',\n                        type: 'input', \n                    },\n                    {\n                        label: 'Notes',\n                        name: 'notes',\n                        type: 'textarea',          \n                    },\n                    {\n                        label: 'Current Version?',\n                        name: 'current',\n                        type: 'checkbox',        \n                    },\n                ]}\n                onSubmit={formValues => editVersion(formValues, selectedVersion.id, title.id)}\n                initialValues={_.pick(selectedVersion, 'name', 'notes', 'current')}\n                form={`edit-version-${title.id}`}\n                enableReinitialize={true}\n            />;\n        }\n    };\n\n    const renderDeleteButton = () => {\n        return <DeleteButton\n            onSubmit={() => deleteVersion(selectedVersion.id, title.id)}\n            displayName={selectedVersion.name}\n        />;\n    };\n\n    const latestTag = () => {\n        if (selectedVersion.current) {\n            return (\n                <div className=\"current\">\n                    Current Version\n                </div>\n            );\n        }\n    };\n\n    const renderVersionDetail = () => {\n        if (selectedVersion) {\n            return (\n                <div className=\"detail-content\">\n                    <div className=\"detail-header\">\n                        <h5>Version:</h5>\n                        <div className=\"dropdown\">\n                            <button className=\"dropbtn\">\n                                {selectedVersion.name}\n                            </button>\n                            <div className=\"dropdown-content\">\n                                {renderVersionList()}\n                            </div>\n                        </div>\n                        {latestTag()}\n                    </div>\n                    <div className=\"detail-notes\">\n                        {selectedVersion.notes}\n                    </div>\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"detail-content\">\n                    <div className=\"detail-header\">\n                        <h5>No Versions for this Song Yet</h5>\n                    </div>\n                </div>\n            );\n        }\n    };\n\n\n\n    \n    return (\n        <div className=\"version-container\">\n            <div className=\"detail-box\">\n                {renderVersionDetail()}      \n                <div className=\"detail-buttons\">\n                    {renderAddButton()}\n                    {selectedVersion && renderEditButton()}\n                    {selectedVersion && renderDeleteButton()}\n                </div>\n            </div>\n            {renderBounces()}          \n        </div>\n    );\n};\n\nconst mapStateToProps = state => {\n    return {\n        bounces: state.bounces\n    };\n}\n\nexport default connect(mapStateToProps, { fetchBounces, selectVersion, createVersion, editVersion, deleteVersion })(requireAuth(Version));","import React from 'react';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\n\nimport { queueSongs, queuePlaylistSongs, playAudio } from '../actions';\n\nconst PlayContainer = ({ song, queueSongs, parentType, queuePlaylistSongs }) => {\n\n    const displayDate = (date) => {\n        return moment.utc(date).format('MM/DD/YY');\n    }\n\n    const displayTime = (time) => {\n        const minutes = Math.floor(time / 60);\n        const seconds = Math.floor(time % 60) < 10 ? '0' + Math.floor(time % 60) : Math.floor(time % 60);\n        return `${minutes}:${seconds}`;\n    }\n\n    const onPlay = (e) => {\n        e.stopPropagation();\n        if (parentType === \"tier\") {\n            queueSongs(song);\n        } else if (parentType === \"playlist\") {\n            queuePlaylistSongs(song);\n        }\n    };\n\n\n    return (\n        <div className='playcontainer'>\n            <div className='songtime'>{displayTime(song.bounce.duration)}</div>\n            <div className='playbutton'>\n                <img\n                    src='/images/play.svg' className='playicon'\n                    onClick={onPlay}\n                />\n            </div>\n            <div className='title-display'>\n                <p>{song.version.name}</p>\n                <p>{displayDate(song.bounce.date)}</p>\n            </div>\n        </div>\n    );\n};\n\nexport default connect(null, { queueSongs, queuePlaylistSongs, playAudio })(PlayContainer);\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport Version from './Version';\nimport AddButton from './AddButton';\nimport { fetchVersions, fetchBounces, selectBounce, selectVersion, createPlaylistSong, editTitle, deleteTitle } from '../actions';\nimport PlayContainer from './PlayContainer';\nimport requireAuth from './requireAuth';\nimport DeleteButton from './DeleteButton';\n\nconst Title = ({ tier, title, titles, fetchVersions, versions, bounces, fetchBounces, authorized, band, playlists, selectVersion, selectBounce, createPlaylistSong, editTitle, deleteTitle, getTime }) => {\n\n    const [expand, setExpand] = useState(false);\n    const [versionList, setVersionList] = useState(null);\n    const [bounceList, setBounceList] = useState(null);\n    const [song, setSong] = useState(null);\n\n    useEffect(() => {\n        fetchVersions(title.id);\n    }, []);\n\n    useEffect(() => {\n\n        setVersionList(title.versions.map(id => versions[id]));\n        // console.log('set version list')\n        \n    }, [versions, title]);\n\n    useEffect(() => {\n        if (versionList && versionList[0]) {\n            \n            let versionToSelect;\n\n            const allVersions = versionList.filter(v => v);\n\n            const versionIds = allVersions.map(v => v.id);\n\n            if (!title.selectedVersion || !versionIds.includes(title.selectedVersion.id)) {\n                versionToSelect = versionList.find(v => v.current);\n            } else if (title.selectedVersion) {\n                if (!versionList.includes(title.selectedVersion)) {\n                    versionToSelect = versionList.find(v => v.id === title.selectedVersion.id);\n                } else {\n                    versionToSelect = title.selectedVersion;\n                }\n            }\n            selectVersion(versionToSelect, title.id);\n            // console.log('select version')\n        }\n        if (title.selectedVersion) {\n            fetchBounces(title.selectedVersion.id);\n            // console.log('fetch bounces')\n        }\n    }, [versionList]);\n\n    useEffect(() => {\n        if (title.selectedVersion) {\n            if (title.selectedVersion.bounces[0]) {\n                setBounceList(title.selectedVersion.bounces.map(id => bounces[id]));\n                // console.log('set bounce list')\n            } else {\n                // console.log('set bounce list null')\n                setBounceList(null);\n                selectBounce(null, title.id);\n            }\n        }\n    }, [bounces]);\n\n    useEffect(() => {\n        if (bounceList && bounceList[0]) {\n\n            let bounceToSelect;\n\n            if (title.selectedBounce && bounceList.includes(title.selectedBounce)) {\n                bounceToSelect = title.selectedBounce;\n            } else {\n                bounceToSelect = bounceList.find(b => b.latest);\n            }\n\n            if (bounceToSelect) {\n                \n                selectBounce(bounceToSelect, title.id);\n                // console.log('select bounce');\n                \n            }\n        } else if (song) {\n            setSong(null);\n        }\n\n    }, [bounceList]);\n\n\n    useEffect(() => {\n\n        if (title.selectedBounce && title.selectedVersion) {\n\n            setSong({\n                tier,\n                title,\n                version: title.selectedVersion,\n                bounce: title.selectedBounce\n            });\n            // console.log('title update')\n            getTime({ id: title.id, duration: title.selectedBounce.duration });\n        } else if (song && !title.selectedBounce) {\n            setSong(null);\n            getTime({ id: title.id, duration: 0 })\n        }\n        \n    }, [titles]);\n\n\n    const renderPlayContainer = () => {\n\n        if (song) {\n            return <PlayContainer song={song} parentType=\"tier\" />;\n        }\n    }\n\n    const renderVersion = () => {\n\n   \n        return (\n            <Version versions={versionList} title={title} />\n        )\n    }\n\n    const onAddToPlaylist = formValues => {\n        createPlaylistSong({\n            ...formValues,\n            bounce: title.selectedBounce.id,\n            version: title.selectedVersion.id,\n            title: title.id\n        }, formValues.playlistId);\n    }\n\n    const renderButtons = () => {\n        if (authorized) {\n            const bandPlaylists = band.playlists.map(id => playlists[id]);\n            const playlistOptions = bandPlaylists.map(pl => {\n                if (pl) {\n                    return { value: pl.id, display: pl.name};\n                }\n            });\n            return (\n                <div className='tier-display'>\n                    {song && <AddButton\n                        title=\"Add to a Playlist\"\n                        onSubmit={formValues => onAddToPlaylist(formValues)}\n                        image=\"images/playlist.png\"\n                        fields={[\n                            {\n                                type: 'select',\n                                options: playlistOptions,\n                                name: 'playlistId',\n                                label: 'Playlist'\n                            }\n                        ]}\n                        form={`add-to-playlist-${title.id}`}\n                        enableReinitialize={true}\n                    />}\n                    <AddButton\n                        title={`Edit ${title.title}`}\n                        image=\"images/edit.png\"\n                        fields={[\n                            {\n                                label: 'Title',\n                                name: 'title',\n                                type: 'input',\n                                required: true\n                            }\n                        ]}\n                        onSubmit={formValues => editTitle(formValues, title.id)}\n                        initialValues={_.pick(title, 'title')}\n                        form={`edit-title-${title.id}`}\n                        enableReinitialize={true}\n                    />\n                    <DeleteButton\n                        onSubmit={() => deleteTitle(title.id, tier.id)}\n                        displayName={title.title}\n                    />\n                </div>\n            )\n        }\n    }\n\n    const arrow = expand ? 'down-arrow' : '';\n\n    return (\n        <div className=\"title-margin\">\n            <div className=\"row title\">\n                <div className=\"marqee\" onClick={() => setExpand(!expand)}>\n                    <div className=\"row-name\"   >\n                        <img className={`arrow ${arrow}`} src={`/images/right-arrow.svg`} />\n                        <div className=\"name-spot\">\n                            <h3>{title.title}</h3>\n                        </div>\n                    </div>\n                    {renderPlayContainer()}\n                    {renderButtons()}\n                    {/* {download} */}\n                </div>\n            </div>\n            {expand && renderVersion()}\n        </div>\n    );\n};\n\nconst mapStateToProps = state => {\n    return {\n        versions: state.versions,\n        bounces: state.bounces,\n        band: state.bands.currentBand,\n        playlists: state.playlists,\n        titles: state.titles\n    }\n}\n\nexport default connect(mapStateToProps, { fetchVersions, fetchBounces, selectVersion, selectBounce, createPlaylistSong, editTitle, deleteTitle })(requireAuth(Title));","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport { createTier, editTier, fetchTitles, createTitle, deleteTier } from '../actions';\nimport Title from './Title';\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\nimport requireAuth from './requireAuth';\n\n\nconst Tier = ({ tier, titles, fetchTitles, authorized, band, tiers, editTier, createTitle, deleteTier }) => {\n\n    const [expand, setExpand] = useState(false);\n\n    const [titlesToRender, setTitlesToRender] = useState(null);\n\n    const [tierList, setTierList] = useState([]);\n\n    const [times, setTimes] = useState({});\n\n    \n\n    useEffect(() => {\n        fetchTitles(tier.id);\n    }, []);\n\n\n    useEffect(() => {\n\n        setTitlesToRender(tier.trackList.map(id => titles[id]));\n        \n    }, [titles, tier]);\n\n    useEffect(() => {\n        if (band.tiers.length) {\n            const tiersToShow = band.tiers\n                .map(id => tiers[id])\n                .sort((a, b) => a.position < b.position ? -1 : 1);\n\n            setTierList(tiersToShow.map(t => {\n                if (t) {\n                    return { value: t.position, display: t.position };\n                }\n            }));\n        }\n    }, [tiers]);\n\n    const renderTitles = () => {\n        return titlesToRender.map(title => {\n            if (title) {\n                return (\n                    <Title title={title} tier={tier} key={title.id} getTime={getTime} />\n                );\n            }\n        });\n    };\n\n\n    const renderAddButton = () => {\n        if (authorized) {\n            return (\n                <AddButton\n                    title={`Add a Title to ${tier.name}`}\n                    image=\"images/add.png\"\n                    fields={[\n                        {\n                            label: 'Title',\n                            name: 'title',\n                            type: 'input',\n                            required: true\n                        }\n                    ]}\n                    onSubmit={(formValues) => {\n                        createTitle(formValues, tier.id);\n                        setExpand(true);\n                    }}\n                    form={`add-title-${tier.id}`}\n                />\n            )\n        }\n    }\n\n    const renderEditButton = () => {\n        if (authorized) {\n\n            return (\n                <AddButton\n                    title={`Edit ${tier.name}`}\n                    image=\"images/edit.png\"\n                    fields={[\n                        {\n                            label: 'Tier Name',\n                            name: 'name',\n                            type: 'input',\n                            required: true        \n                        }, {\n                            label: 'Tier Position',\n                            name: 'position',\n                            type: 'select',\n                            options: tierList,\n                        }\n                    ]}\n                    onSubmit={(formValues) => editTier(formValues, tier.id)}\n                    initialValues={_.pick(tier, 'name', 'position')}\n                    form={`edit-tier-${tier.id}`}\n                    enableReinitialize={true}\n                />\n            );\n        }\n    };\n\n    const renderDeleteButton = () => {\n        if (authorized) {\n            return (\n                <DeleteButton\n                    onSubmit={() => deleteTier(tier.id)}\n                    displayName={tier.name}\n                />\n            );\n        }\n    };\n\n    const renderTotalTime = () => {\n\n        const total = Object.values(times).reduce((prev, cur) => {\n            return prev + cur;\n        }, 0);\n\n        if (!total) {\n            return null;\n        }\n\n        const minutes = Math.floor(total / 60);\n        const seconds = Math.floor(total % 60) < 10 ? '0' + Math.floor(total % 60) : Math.floor(total % 60);\n        return (\n            <div>\n                {`${minutes}:${seconds}`}\n            </div>\n        );\n        \n    };\n\n    const getTime = (track) => {\n        setTimes({ ...times, [track.id]: track.duration });\n    };\n\n    const arrow = expand ? 'down-arrow' : '';\n    const open = expand ? 'open' : ''\n\n    return (\n        <>\n            <div className=\"row tier\" onClick={() => setExpand(!expand)}>\n                <div className=\"marqee\">\n                    <div className=\"tier-name\">\n                        <img className={`arrow ${arrow}`} src={`images/right-arrow.svg`} />\n                        <h2>{tier.name}</h2>\n                    </div>\n                    <div className=\"tier-count\">\n                        {renderAddButton()}\n                        <div className=\"song-count\">{tier.trackList.length} songs</div>\n                        <div className=\"song-count\">{renderTotalTime()}</div>\n                    </div>\n                    <div className=\"tier-display\">\n                        {renderEditButton()}\n                        {renderDeleteButton()}\n                    </div>\n                </div>\n                <hr />\n            </div>\n            <div className={open}>\n                {expand && titlesToRender && renderTitles()}\n            </div>\n        </>\n    );\n};\n\nconst mapStateToProps = state => {\n    return {\n        titles: state.titles,\n        band: state.bands.currentBand,\n        tiers: state.tiers\n    }\n};\n\n\nexport default connect(mapStateToProps, { createTier, fetchTitles, editTier, createTitle, deleteTier })(requireAuth(Tier));","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\nimport { editPlaylistSong, fetchVersions, fetchBounces, deletePlaylistSong } from '../actions';\nimport PlayContainer from './PlayContainer';\nimport requireAuth from './requireAuth';\n\nconst PlaylistSong = ({ playlist, song, playlistSongs, authorized, versions, bounces, titles, fetchBounces, fetchVersions, editPlaylistSong, deletePlaylistSong }) => {\n\n    const [playSong, setPlaySong] = useState(null);\n\n    useEffect(() => {\n        fetchVersions(song.title);\n        titles[song.title].versions.forEach(id => {\n            fetchBounces(id);\n        });\n    }, []);\n    \n    useEffect(() => {\n        if (titles[song.title]) {\n            setPlaySong({\n                    playlist,\n                    title: titles[song.title],\n                    version: versions[song.version],\n                    bounce: bounces[song.bounce],\n                    self: song\n                });\n        }\n    }, [playlistSongs[song.id], bounces[song.bounce], titles[song.title], versions[song.version]]);\n\n    const renderPlayContainer = () => {\n\n        if (playSong && playSong.bounce && playSong.version) {\n            return <PlayContainer song={playSong} parentType=\"playlist\" />;\n        } else {\n            return (\n                <div className=\"playlistsong-no-bounce\">\n                    <p>\n                        {versions[song.version] ? `${versions[song.version].name}` : 'No Version Selected'}\n                    </p>\n                    <p>\n                        No Bounce Selected\n                    </p>\n                </div>\n            );\n        }\n    };\n\n    const onEditSubmit = formValues => {\n        const thisVersion = Object.values(versions).find(v => v.bounces.includes(formValues.bounce));\n        editPlaylistSong({\n            ...formValues,\n            version: thisVersion.id,\n            playlistId: playlist.id\n        }, song.id);\n    };\n\n    const renderEditButton = () => {\n        if (authorized && titles[song.title]) {\n\n            const otherSongs = Object.values(playlistSongs)\n                .filter(s => playlist.songs.includes(s.id))\n                .map(s => {\n                    return { value: s.position, display: s.position };\n            });\n\n            const thisTitle = titles[song.title];\n\n            const otherVersions = thisTitle.versions.map(id => versions[id]);\n\n            const otherBounces = otherVersions.map(v => {\n                if (v) {\n                    return v.bounces.map(id => bounces[id]);\n                }\n            });\n\n\n            const editOptions = [];\n            \n            otherVersions.forEach((v, i) => {\n                if (otherBounces[i]) {\n                    otherBounces[i].forEach(b => {\n                        if (b) {\n                            let current = '';\n                            if (v.current && b.latest) {\n                                current =' * current';\n                            }\n                            editOptions.push({\n                                value: b.id,\n                                display: `${v.name} -- ${moment.utc(b.date).format('MM/DD/YY')}${current}`\n                            });\n                        }\n                    });\n                }\n            });\n\n            return (\n                <AddButton\n                    image='/images/edit.png'\n                    title={`Edit ${titles[song.title].title}`}\n                    onSubmit={formValues => onEditSubmit(formValues)}\n                    fields={[\n                        {\n                            name: 'position',\n                            label: 'Position',\n                            type: 'select',\n                            options: otherSongs\n                        },\n                        {\n                            name: 'bounce',\n                            label: 'Bounce',\n                            type: 'select',\n                            options: editOptions,\n                            required: true\n                        }\n                    ]}\n                    initialValues={song.bounce ? _.pick(song, 'position', 'bounce') : _.pick(song, 'position')}\n                    form={`edit-playlistsong-${song.id}`}\n                    enableReinitialize={true}\n                />\n            );\n        }\n    };\n\n    const renderDeleteButton = () => {\n        if (authorized) {\n            return (\n                <DeleteButton\n                    onSubmit={() => deletePlaylistSong(song.id, playlist.id)}\n                    displayName={song.title.title}\n                />\n            );\n        }\n    };\n\n\n    return (\n        <div className='title-margin'>\n            <div className=\"row title\">                    \n                <div className=\"marqee\">\n                    <div className='row-name'>\n                        <div className=\"song-position\">{song.position}</div>\n                        <div className='name-spot'>\n                            <h3>{song && titles[song.title] && titles[song.title].title}</h3>\n                        </div>\n                    </div>      \n\n                    {renderPlayContainer()}\n                    <div className=\"tier-display\">\n                        {renderEditButton()}\n                        {renderDeleteButton()}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n\n};\n\n\n\nconst mapStateToProps = state => {\n\n    return {\n        playlistSongs: state.playlistSongs,\n        bands: state.bands,\n        playlists: state.playlists,\n        versions: state.versions,\n        bounces: state.bounces,\n        titles: state.titles\n    }\n\n}\n\nexport default connect(mapStateToProps, { fetchBounces, fetchVersions, editPlaylistSong, deletePlaylistSong })(requireAuth(PlaylistSong));","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport { fetchPlaylistSongs, deletePlaylist, editPlaylist } from '../actions';\nimport PlaylistSong from './PlaylistSong';\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\nimport requireAuth from './requireAuth';\n\nconst Playlist = ({ playlist, playlists, fetchPlaylistSongs, playlistSongs, authorized, deletePlaylist, band }) => {\n\n    const [expand, setExpand] = useState(false);\n    const [playlistList, setPlaylistList] = useState([]);\n\n    const [songsToRender, setSongsToRender] = useState(null);\n\n\n    useEffect(() => {\n        fetchPlaylistSongs(playlist.id);\n    }, []);\n\n    useEffect(() => {\n        setSongsToRender(playlist.songs.map(id => playlistSongs[id]));\n    }, [playlistSongs, playlist.songs]);\n\n    const renderPlaylistSongs = () => {\n\n        songsToRender.sort((a, b) => a.position < b.position ? -1 : 1);\n\n        return songsToRender.map(song => {\n            if (song) {\n                return (\n                <PlaylistSong song={song} playlist={playlist} key={song.id} />\n                );\n            }\n        });\n    };\n\n    useEffect(() => {\n        if (band.playlists.length) {\n            const playlistsToShow = band.playlists.map(id => playlists[id]).sort((a, b) => {\n                if (a.position < b.position) {\n                    return -1;\n                }\n                if (b.position < a.position) {\n                    return 1;\n                }\n            });\n            setPlaylistList(playlistsToShow.map(t => {\n                if (t) {\n                    return { value: t.position, display: t.position };\n                }\n            }));\n        }\n    }, [playlists]);\n\n    const renderEditButton = () => {\n        if (authorized) {\n\n            return (\n                <AddButton\n                    title={`Edit ${playlist.name}`}\n                    image=\"images/edit.png\"\n                    fields={[\n                        {\n                            label: 'Playlist Name',\n                            name: 'name',\n                            type: 'input',          \n                        }, {\n                            label: 'Playlist Position',\n                            name: 'position',\n                            type: 'select',\n                            options: playlistList,\n                        }\n                    ]}\n                    onSubmit={(formValues) => editPlaylist(formValues, playlist.id)}\n                    initialValues={_.pick(playlist, 'name', 'position')}\n                    form={`edit-${playlist.id}`}\n                    enableReinitialize={true}\n                />\n            );\n        }\n    };\n\n    const renderDeleteButton = () => {\n        if (authorized) {\n            return (\n                <DeleteButton\n                    onSubmit={() => deletePlaylist(playlist.id)}\n                    displayName={playlist.name}\n                />\n            );\n        }\n    };\n\n\n    const arrow = expand ? 'down-arrow' : '';\n    const open = expand ? 'open' : '';\n\n    return (\n        <>\n            <div className=\"row tier\" onClick={() => setExpand(!expand)} >\n                <div className=\"marqee tier-info\">\n                    <div className=\"tier-name\"  >\n                        <img className={`arrow ${arrow}`} src={`/images/right-arrow.svg`}/>\n                        <h2>{playlist.name}</h2>\n                    </div>\n                    <div className=\"tier-count\">\n                        <div className=\"song-count\">{playlist.songs.length} songs</div>\n                        {/* <div className=\"song-count\">{playlist.totalTime}</div> */}\n                    </div>\n                    <div className=\"tier-display\">\n                            {renderEditButton()}\n                            {renderDeleteButton()}\n                    </div>\n                </div>\n                <hr />\n            </div>\n            <div className={open}>\n                {expand && renderPlaylistSongs()}\n            </div>\n        </>\n    );\n};\n\nconst mapStateToProps = state => {\n    return {\n        playlists: state.playlists,\n        playlistSongs: state.playlistSongs,\n        band: state.bands.currentBand\n    }\n}\n\nexport default connect(mapStateToProps, { fetchPlaylistSongs, deletePlaylist })(requireAuth(Playlist));","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport { fetchTiers, fetchPlaylists, createTier, createPlaylist } from '../actions';\nimport Tier from './Tier';\nimport Playlist from './Playlist';\nimport AddButton from './AddButton';\nimport requireAuth from './requireAuth';\n\nconst BodyContainer = ({ fetchPlaylists, createTier, fetchTiers, tiers, playlists, band, authorized, createPlaylist, currentSong }) => {\n\n    const [tierList, setTierList] = useState([]);\n    const [playlistList, setPlaylistList] = useState([]);\n\n    useEffect(() => {\n        fetchTiers(band.id);\n        fetchPlaylists(band.id);\n    }, []);\n\n    useEffect(() => {\n        setTierList(band.tiers.map(id => tiers[id]).sort((a, b) => {\n            if (a.position < b.position) {\n                return -1;\n            }\n            if (b.position < a.position) {\n                return 1;\n            }\n        }));\n    }, [tiers]);\n\n    useEffect(() => {\n        setPlaylistList(band.playlists.map(id => playlists[id]).sort((a, b) => {\n            if (a.position < b.position) {\n                return -1;\n            }\n            if (b.position < a.position) {\n                return 1;\n            }\n        }));\n    }, [playlists]);\n\n    const renderTiers = () => {\n\n        return tierList.map(tier => {\n            if (tier) {\n                return (\n                    <Tier tier={tier} key={tier.id} />\n                );\n            }\n        });\n    };\n\n\n    const renderTierAddButton = () => {\n        if (authorized) {\n            return (\n                <div className=\"centered-button\">\n                    <AddButton\n                        onSubmit={formValues => createTier(formValues)}\n                        title='Add a Tier'\n                        image=\"/images/add.png\"\n                        fields={[{\n                            label: 'Tier Name',\n                            name: 'tierName',\n                            type: 'input',\n                            required: true          \n                        }]}\n                    />\n                </div>\n            );\n        }\n    };\n\n    const renderPlaylistAddButton = () => {\n        if (authorized) {\n            return (\n                <div className=\"centered-button\">\n                    <AddButton\n                        onSubmit={formValues => createPlaylist(formValues)}\n                        title='Add a Playlist'\n                        image=\"/images/add.png\"\n                        fields={[{\n                            label: 'Playlist Name',\n                            name: 'playlistName',\n                            type: 'input',\n                            required: true             \n                        }]}\n                    />\n                </div>\n            );\n        }\n    };\n\n    const renderPlaylists = () => {\n\n        return playlistList.map(playlist => {\n            if (playlist) {\n                return (\n                    <Playlist playlist={playlist} key={playlist.id} />               \n                );\n            }\n        });\n    };\n\n    const playbarActive = currentSong ? 'playbar-active' : ''\n\n    return (\n        <div className={`body-container ${playbarActive}`}>\n            <h2 className=\"section-title\">Tiers</h2>\n            <hr />\n            {tiers && renderTiers()}\n            {renderTierAddButton()}\n            <div className=\"playlists\">\n                <h2 className=\"section-title\">Playlists</h2>\n                <hr />\n                {playlists && renderPlaylists()}\n                {renderPlaylistAddButton()}\n            </div>\n        </div>\n\n\n    );\n\n\n};\n\nconst mapStateToProps = state => {\n    return {\n        tiers: state.tiers,\n        playlists: state.playlists,\n        currentSong: state.audio.currentSong\n    };\n};\n\nexport default connect(mapStateToProps, { fetchTiers, fetchPlaylists, createTier, createPlaylist })(requireAuth(BodyContainer));","import React from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nimport { playAudio, pauseAudio, nextSong, throwError } from '../actions';\n\n\nclass AudioHeader extends React.Component {\n\n\n    state = { volume: 50, sliderPosition: 0 };\n\n    formatTime(time) {\n\n        let minutes = time < 600 ? `0${Math.floor(time/60)}` : Math.floor(time/60);\n        let seconds = time % 60 < 10 ? `0${Math.floor(time % 60)}` : Math.floor(time % 60);\n        return `${minutes}:${seconds}`;\n    }\n\n    displayDate = date => {\n        return moment.utc(date).format('MM/DD/yy');\n    }\n\n    wrapUrl(id) {\n        return `https://exploring-the-space.com/api/audio/${id}.mp3`\n    }\n\n    updateSlider = () => {\n        const position = (this.audio.currentTime / this.audio.duration) * 1000;\n        this.time = this.formatTime(this.audio.currentTime);\n        if (!isNaN(position)) {\n            this.setState({\n                sliderPosition: position\n            });\n        }\n    }\n\n    componentDidMount() {\n\n        // if there's no audio element created, create one with the current song\n        // add event listener to link the slider position to the time of the song\n        \n        this.audio = new Audio();\n\n        this.audio.addEventListener('timeupdate', this.updateSlider);\n\n        this.audio.addEventListener('error', () => {\n            const message = \"The audio player had an error, probably can't connect to server.\"\n            this.props.throwError(message);\n        });\n\n        // if there's a queue, load next song\n\n        this.audio.addEventListener('ended', this.nextSong);\n\n        // space bar stop/start\n\n        document.addEventListener('keydown', (e) => {\n            if (e.code === 'Space') {\n                e.preventDefault();\n                if (this.props.pause) {\n                    this.play();\n                } else {\n                    this.pause();\n                }\n            }\n        });\n        \n    }\n\n    componentDidUpdate(prevProps) {\n        \n        if (this.props.song) {\n            // if the current song is changed to something other than what is already loaded, change the src url and play the audio\n                        // if redux gets a signal to play, play if not already\n            // reverse for pause\n            if (this.props.song !== prevProps.song) {\n                this.audio.src=this.wrapUrl(this.props.song.audio);\n                this.audio.volume = this.props.volume / 120;\n                this.audio.play();\n            } else if (this.props.play && prevProps.pause) {\n                this.audio.play();\n            } else if (this.props.pause && prevProps.play) {\n                this.audio.pause();\n            }\n            if (this.props.volume !== prevProps.volume) {\n                this.audio.volume = this.props.volume / 120;\n\n            }\n        } else {\n            this.audio.pause();\n        }\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', (e) => {\n            if (e.code === 'Space') {\n                e.preventDefault();\n                if (this.props.pause) {\n                    this.play();\n                } else {\n                    this.pause();\n                }\n            }\n        });\n    }\n\n    nextSong = () => {\n        setTimeout(() => {\n            if (this.props.queue.length) {\n                this.props.nextSong();\n            }\n        }, 400);\n    }\n\n    play = () => {\n        this.props.playAudio();\n    }\n\n    pause = () => {\n        this.props.pauseAudio();\n    }\n\n    onSliderChange = (e) => {\n        const position = (e.target.value / 1000) * this.audio.duration;\n        this.audio.currentTime = position;\n    }\n\n    onPauseButton = () => {\n\n        if (this.props.play) {\n            this.pause();\n        } else {\n            this.play();\n        }\n\n    }\n\n    render() {\n\n        if (this.props.song) {\n\n            return (\n                <div className=\"playbar\">\n                    <div className=\"playbar-header\">\n                        <div className=\"playbar-title\">\n                            <p>{this.props.song.title}</p>\n                        </div>\n                        <div className=\"pause-container\" onClick={this.onPauseButton}>\n                            <img className=\"big-play-btn\" src={this.props.play ? \"/images/pause.svg\" : \"/images/play.svg\"} />\n                        </div>\n                        <div className=\"playbar-info\">\n                            <div className=\"playbar-detail\">\n                                <p>Version:</p>\n                                <p>{this.props.song.version}</p>\n                            </div>\n                            <div className=\"playbar-detail\">\n                                <p>Date:</p>\n                                <p>{this.displayDate(this.props.song.date)}</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"playslidercontainer\">\n                        <div className=\"playslidertime\">\n                            {this.time}\n                        </div>\n                        <input\n                            type=\"range\"\n                            min=\"0\"\n                            max=\"1000\"\n                            value={this.state.sliderPosition}\n                            className='playslider'\n                            onInput={this.onSliderChange}\n                        />\n                        <div className=\"playslidertime\">\n                            {this.formatTime(this.props.song.duration)}\n                        </div>\n                    </div>\n                </div>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        song: state.audio.currentSong,\n        play: state.audio.play,\n        pause: state.audio.pause,\n        queue: state.audio.queue,\n        volume: state.audio.volume\n    };\n};\n\nexport default connect(mapStateToProps, { playAudio, pauseAudio, nextSong, throwError })(AudioHeader);","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport { fetchBand, signOut, changeVolume } from '../actions';\nimport BodyContainer from './BodyContainer';\nimport AudioHeader from './AudioHeader';\nimport requireAuth from './requireAuth';\n\nconst BandHeader = ({ fetchBand, band, match, authorized, handleUpdate, user, signedIn, signOut, volume, changeVolume }) => {\n\n    useEffect(() => {\n        fetchBand(match.params.bandName);\n    }, []);\n\n    useEffect(() => {\n        handleUpdate();\n    }, [band, user]);\n\n    const renderAdmin = () => {\n        return (\n            <div className=\"menu-button\">\n                <img src=\"images/dots.png\" />\n                <div className=\"menu\">\n                    <Link className=\"menu-item\" to=\"/user\">User Home</Link>\n                    <div className=\"menu-item\" onClick={signOut}>Sign Out</div>\n                </div>\n            </div>\n        );\n    };\n\n    const renderHomeLink = () => {\n        return (\n            <div className=\"menu-button\">\n                <img src=\"images/dots.png\" />\n                <div className=\"menu\">\n                    <Link className=\"menu-item\" to=\"/\">Home</Link>\n                    <Link className=\"menu-item\" to=\"/signin\">Sign In</Link>\n                </div>\n            </div>\n        );\n    };\n\n    const showBody = () => {\n        if (!band) {\n            return null\n        }\n        if (signedIn && !user) {\n            return null\n        }\n        return <BodyContainer band={band}/>\n    }\n\n    return <>\n        \n        <div className=\"header\">\n            <AudioHeader />\n            <div className=\"band-header\">\n                <div className=\"band-name\">\n                    <h1>{band && band.name}</h1>\n                    {authorized ? renderAdmin() : renderHomeLink()}\n                </div>\n                <div className=\"slidecontainer\">\n                    <input\n                        type=\"range\"\n                        min=\"0\" max=\"100\"\n                        className=\"master-volume\"\n                        value={volume}\n                        onInput={e => changeVolume(e.target.value)}\n                    />\n                    <img src=\"/images/volume.svg\" />\n                </div>\n            </div>\n        </div>\n\n        {showBody()}\n\n    </>;\n\n};\n\nconst mapStateToProps = state => {\n    return {\n        band: state.bands.currentBand,\n        user: state.auth.currentUser,\n        signedIn: state.auth.isSignedIn,\n        volume: state.audio.volume\n    }\n}\n\nexport default connect(mapStateToProps, { fetchBand, signOut, changeVolume })(requireAuth(BandHeader));","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport { createBand, fetchBands, editBand, deleteBand, signOut } from '../actions';\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\n\nconst User = ({ user, bands, createBand, fetchBands, editBand, deleteBand, signOut }) => {\n\n    useEffect(() => {\n        fetchBands();\n    }, []);\n\n    const renderBands = () => {\n        const bandList = user.bands.map(id => bands[id]);\n        if (!bandList.length || !bandList[0]) {\n            return <h3>No bands belong to this user</h3>\n        }\n        return bandList.map(band => {\n            if (band) {\n                return (\n                    <div className=\"band-item\" key={band.id}>\n                        <Link to={`/${band.url}`}>\n                            <h2>{band.name}</h2>\n                        </Link>\n                        <div className=\"band-buttons\">\n                            <AddButton\n                                onSubmit={formValues => editBand(formValues, band.id)}\n                                title={`Edit ${band.name}`}\n                                image=\"images/edit.png\"\n                                fields={[{\n                                    label: 'Band Name',\n                                    name: 'name',\n                                    type: 'input'\n                                }]}\n                                initialValues={{ name: band.name }}\n                                enableReinitialize={true}\n                                form={`edit-band-${band.id}`}\n                            />\n                            <DeleteButton\n                                onSubmit={() => deleteBand(band.id)}\n                                displayName={band.name}\n                            />\n                        </div>\n                    </div>                   \n                );\n            }\n        });\n    };\n\n    if (user) {\n        return <>\n            <div className=\"user-header\">\n                <h1 className=\"user-title\">{user.username}'s bands</h1>\n                <div onClick={signOut}>Sign Out</div>\n            </div>\n            <hr />\n            <div className=\"row band-list\">\n                {renderBands()}\n            </div>\n            \n            <div className=\"centered-button\">\n                <AddButton\n                    onSubmit={formValues => createBand(formValues)}\n                    title='Create a Band'\n                    image=\"images/add.png\"\n                    fields={[{\n                        label: 'Band Name',\n                        name: 'bandName',\n                        type: 'input'\n                    }]}\n                />\n            </div>\n        </>;\n    } else {\n        return null;\n    }\n\n};\n\nconst mapStateToProps = state => {\n    return {\n        user: state.auth.user,\n        bands: state.bands\n    };\n};\n\nexport default connect(mapStateToProps, { createBand, fetchBands, editBand, deleteBand, signOut })(User);","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\n\nclass UserForm extends React.Component {\n    \n    renderInput = ({ input, label, meta, type, autoComplete, defaultValue }) => {\n\n        return (\n            <div>\n                <label>{label}</label>\n                <input\n                    type={type}\n                    autoComplete={autoComplete} \n                    {...input}\n                /> \n            </div>\n        );\n    };\n\n    submitForm = formValues => {\n        this.props.onSubmit(formValues);\n    };\n\n\n    render() {\n        return (\n            <form className='signin' onSubmit={this.props.handleSubmit(this.submitForm)}>\n                <Field\n                    name=\"username\"\n                    component={this.renderInput}\n                    label=\"Username: \"\n                    type=\"text\"\n                    autoComplete=\"username\"\n    \n                />\n                <Field\n                    name=\"password\"\n                    component={this.renderInput}\n                    label=\"Passwyrd: \"\n                    type=\"password\"\n                    autoComplete=\"current-password\"\n                />\n                <button className=\"signin-submit\">Submit</button>\n            </form>\n        );\n    }\n\n\n}\n\nexport default reduxForm({\n    form: 'userForm'\n})(UserForm);","import { connect } from 'react-redux';\nimport React, { useEffect } from 'react';\n\nimport history from '../history';\nimport { signIn } from '../actions';\nimport UserForm from './UserForm';\n\n\nconst SignIn = ({ signIn, isSignedIn }) => {\n\n    useEffect(() => {\n        if (isSignedIn) {\n            history.push('/user')\n        }\n    }, []);\n\n    return <>\n        <h1>Sign In</h1>\n        <UserForm onSubmit={formValues => signIn(formValues)}/>\n    </>;\n};\n\nconst mapStateToProps = state => {\n    return { isSignedIn: state.auth.isSignedIn };\n}\n\nexport default connect(mapStateToProps, { signIn })(SignIn);","import { connect } from 'react-redux';\nimport React, { useEffect } from 'react';\n\nimport history from '../history';\nimport { signUp } from '../actions';\nimport UserForm from './UserForm';\n\n\nconst SignUp = ({ signUp, isSignedIn }) => {\n\n    useEffect(() => {\n        if (isSignedIn) {\n            history.push('/user')\n        }\n    }, []);\n\n    return <>\n        <h1>Sign Up</h1>\n        <UserForm onSubmit={formValues => signUp(formValues)}/>\n    </>;\n};\n\nconst mapStateToProps = state => {\n    return { isSignedIn: state.auth.isSignedIn };\n}\n\nexport default connect(mapStateToProps, { signUp })(SignUp);","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport _ from 'lodash';\n\nimport { fetchBands } from '../actions';\n\nclass Home extends React.Component {\n\n\n    componentDidMount() {\n        this.props.fetchBands();\n    }\n\n    renderBands() {\n\n        delete this.props.bands.currentBand;\n\n        const bands = Object.values(this.props.bands);\n\n        return bands.map(band => {\n            return (\n                <div className=\"band-item\" key={band.id}>\n                    <Link to={`/${band.url}`}>\n                        <h2>{band.name}</h2>\n                    </Link>\n                </div>\n            );\n        });\n\n    }\n\n\n    render() {\n        return (\n            <div className=\"container\">\n                <h1 className=\"home-header\">Exploring the Space</h1>\n                <div className=\"home-buttons\">\n                    <Link to=\"/signin\">\n                        Sign In\n                    </Link>\n                    <Link to=\"/signup\">\n                        Sign Up\n                    </Link>\n                </div>\n                <h1>All Bands:</h1>\n                <div className=\"band-list\">\n                    {this.props.bands && this.renderBands()}\n                </div>\n            </div>\n        );\n    }\n\n\n}\n\nconst mapStateToProps = state => {\n    return {\n        bands: state.bands\n    };\n};\n\nexport default connect(mapStateToProps, { fetchBands })(Home);","import React, { useEffect } from 'react';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\n\nimport Error from './Error';\nimport BandHeader from './BandHeader';\nimport User from './User';\nimport SignIn from './SignIn';\nimport SignUp from './SignUp';\nimport Home from './Home';\nimport { fetchUser } from '../actions';\n\n\nimport history from '../history';\n\nconst App = ({ signedIn, fetchUser }) => {\n\n    useEffect(() => {\n        if (signedIn) {\n            fetchUser();\n        }\n    }, []);\n\n    return (\n        <div className=\"container\">\n            <Router history={history}>\n                <Error />\n                <Switch>    \n                    <Route path=\"/\" exact component={Home} />\n                    <Route path=\"/signin\" exact component={SignIn} />;\n                    <Route path=\"/signup\" exact component={SignUp} />;  \n                    <Route path=\"/user\" exact render={routeProps => {\n                        if (!signedIn) {\n                            history.push('/signin');\n                            return null;\n                        }\n                        return <User {...routeProps} />;\n                    }} />\n                    <Route path=\"/:bandName\" component={BandHeader} />\n                </Switch>\n            </Router>\n        </div>\n\n    );\n};\n\nconst mapStateToProps = state => {\n    return {\n        signedIn: state.auth.isSignedIn,\n    };\n};\n\nexport default connect(mapStateToProps, { fetchUser })(App);","import { SIGN_IN, SIGN_OUT, CREATE_BAND } from '../actions/types';\n\nconst INITIAL_STATE = {\n    isSignedIn: false,\n    user: null\n};\n\nexport default (state = INITIAL_STATE, action) => {\n    switch (action.type) {\n        case SIGN_IN:\n            return { ...state, isSignedIn: true, user: action.payload };\n        case SIGN_OUT:\n            return { ...state, isSignedIn: false, user: null };\n        case CREATE_BAND:\n            const { user } = state;\n            user.bands.push(action.payload.id);\n            return { ...state, user };\n        default:\n            return state;  \n    } \n};\n","import { PLAY_AUDIO, PAUSE_AUDIO, QUEUE_SONGS, NEXT_SONG, DELETE_BOUNCE, CHANGE_VOLUME } from \"../actions/types\";\n\nconst initialState = {\n    play: false,\n    volume: 75,\n    queue: [],\n    currentSong: null\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case PLAY_AUDIO:\n            return { ...state, play: true, pause: false };\n        case PAUSE_AUDIO:\n            return { ...state, play: false, pause: true };\n        case QUEUE_SONGS:\n            const currentSong = action.payload.shift();\n            return { ...state, queue: action.payload, currentSong, play: true };\n        case NEXT_SONG:\n            const queue = state.queue;\n            const nextSong = queue.shift();\n            return { ...state, queue, currentSong: nextSong };\n        case DELETE_BOUNCE:\n            if (action.payload.bounce.id === state.currentSong.audio) {\n                console.log('ok')\n                return { ...state, play: false, pause: true, queue: [], currentSong: null };\n            }\n            if (state.queue.length) {\n                state.queue = state.queue.filter(song => song.audio !== action.payload.bounce.id);\n                return { ...state };\n            }\n        case CHANGE_VOLUME:\n            return { ...state, volume: action.payload };\n        default:\n            return state;\n    }\n};","import { combineReducers } from 'redux';\nimport { reducer as formReducer } from 'redux-form';\nimport authReducer from './authReducer';\nimport tierReducer from './tierReducer';\nimport titleReducer from './titleReducer';\nimport versionReducer from './versionReducer';\nimport bounceReducer from './bounceReducer';\nimport playlistReducer from './playlistReducer';\nimport playlistSongReducer from './playlistSongReducer';\nimport bandReducer from './bandReducer';\nimport errorReducer from './errorReducer';\nimport audioReducer from './audioReducer';\n\nexport default combineReducers({\n    form: formReducer,\n    auth: authReducer,\n    tiers: tierReducer,\n    titles: titleReducer,\n    versions: versionReducer,\n    bounces: bounceReducer,\n    playlists: playlistReducer,\n    playlistSongs: playlistSongReducer,\n    bands: bandReducer,\n    error: errorReducer,\n    audio: audioReducer\n});","import { FETCH_TIERS, CREATE_TIER, EDIT_TIER, DELETE_TIER, CREATE_TITLE, DELETE_TITLE } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_TIERS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_TIER:\n            return { ...state, [action.payload.id]: action.payload };\n        case EDIT_TIER:\n            const oldPosition = state[action.payload.id]['position'];\n            const newPosition = action.payload.position;\n            let changedPositions = {};\n            if (oldPosition > newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position >= newPosition && item.position < oldPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos + 1};\n                    }\n                }\n            }\n            if (oldPosition < newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position > oldPosition && item.position <= newPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos - 1};\n                    }\n                }\n            }\n            return { ...state, [action.payload.id]: action.payload, ...changedPositions };\n        case DELETE_TIER:\n\n            const changePosition = Object.values(_.omit(state, state.currentBand)).filter(t => t.position > action.payload.position);\n            changePosition.forEach((tier) => {\n                tier.position = tier.position - 1;\n            });\n            delete state[action.payload.id];\n            return { ...state, ..._.mapKeys(changePosition, 'id') };\n        case CREATE_TITLE:\n            const addToTier = state[action.payload.tier];\n            addToTier.trackList.push(action.payload.title.id);\n            return { ...state, [addToTier.id]: addToTier };\n        case DELETE_TITLE:\n            const deleteFromTier = state[action.payload.tier];\n            if (deleteFromTier) {\n                const newTrackList = deleteFromTier.trackList.filter(id => id !== action.payload.title.id);\n                deleteFromTier.trackList = newTrackList;\n                return { ...state, [deleteFromTier.id]: deleteFromTier };\n            }\n        default:\n            return state;\n\n    }\n\n};","import { FETCH_TITLES, CREATE_TITLE, EDIT_TITLE, DELETE_TITLE, SELECT_VERSION, SELECT_BOUNCE, CREATE_VERSION, DELETE_VERSION } from '../actions/types';\nimport _ from 'lodash';\n\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_TITLES:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_TITLE:\n            return { ...state, [action.payload.title.id]: action.payload.title };\n        case EDIT_TITLE:\n            return { ...state, [action.payload.id]: action.payload };\n        case DELETE_TITLE:\n            delete state[action.payload.title.id];\n            return { ...state };\n        case SELECT_VERSION:\n            const versionTitle = state[action.payload.titleId];\n            versionTitle.selectedVersion = action.payload.version;\n            return { ...state, [versionTitle.id]: versionTitle };\n        case SELECT_BOUNCE:\n            const bounceTitle = state[action.payload.titleId];\n            bounceTitle.selectedBounce = action.payload.bounce;\n            return { ...state, [bounceTitle.id]: bounceTitle }\n        case CREATE_VERSION:\n            const addToTitle = state[action.payload.title];\n            addToTitle.versions.push(action.payload.version.id);\n            return { ...state, [addToTitle.id]: addToTitle};\n        case DELETE_VERSION:\n            const deleteFromTitle = state[action.payload.title];\n            if (deleteFromTitle) {\n                const newVersionList = deleteFromTitle.versions.filter(id => id !== action.payload.version.id);\n                deleteFromTitle.versions = newVersionList;\n                return { ...state, [deleteFromTitle.id]: deleteFromTitle };\n            }   \n        default:\n            return state;\n\n    }\n\n};","import { FETCH_VERSIONS, CREATE_VERSION, EDIT_VERSION, DELETE_VERSION, CREATE_BOUNCE, DELETE_BOUNCE } from '../actions/types';\nimport { selectVersion } from '../actions';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_VERSIONS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_VERSION:\n            return { ...state, [action.payload.version.id]: action.payload.version };\n        case EDIT_VERSION:\n            return { ...state, [action.payload.id]: action.payload };\n        case DELETE_VERSION:\n            delete state[action.payload.version.id];\n            return { ...state };\n        case CREATE_BOUNCE:\n            const addToVersion = state[action.payload.version];\n            addToVersion.bounces.push(action.payload.bounce.id);\n            return { ...state, [addToVersion.id]: addToVersion};\n        case DELETE_BOUNCE:\n            const deleteFromVersion = state[action.payload.version];\n            if (deleteFromVersion) {\n                const newBounceList = deleteFromVersion.bounces.filter(id => id !== action.payload.bounce.id);\n                deleteFromVersion.bounces = newBounceList;\n                return { ...state, [deleteFromVersion.id]: deleteFromVersion };\n            }\n        default:\n            return state;\n\n    }\n\n};","import { FETCH_BOUNCES, CREATE_BOUNCE, EDIT_BOUNCE, DELETE_BOUNCE } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_BOUNCES:\n            return { ...state, ..._.mapKeys(action.payload, 'id')};\n        case CREATE_BOUNCE:\n            return { ...state, [action.payload.bounce.id]: action.payload.bounce };\n        case EDIT_BOUNCE:\n            return { ...state, [action.payload.id]: action.payload };\n        case DELETE_BOUNCE:\n            delete state[action.payload.bounce.id];\n            return { ...state };\n        default:\n            return state;\n\n    }\n\n};","import { FETCH_PLAYLISTS, FETCH_PLAYLIST, CREATE_PLAYLIST, EDIT_PLAYLIST, DELETE_PLAYLIST, CREATE_PLAYLISTSONG, DELETE_PLAYLISTSONG } from '../actions/types';\nimport _ from 'lodash';\nimport { deletePlaylistSong } from '../actions';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_PLAYLISTS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case FETCH_PLAYLIST:\n            return { ...state, [action.payload.id]: action.payload };\n        case CREATE_PLAYLIST:\n            return { ...state, [action.payload.id]: action.payload };\n        case EDIT_PLAYLIST:\n            const oldPosition = state[action.payload.id]['position'];\n            const newPosition = action.payload.position;\n            let changedPositions = {};\n            if (oldPosition > newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position >= newPosition && item.position < oldPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos + 1};\n                    }\n                }\n            }\n            if (oldPosition < newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position > oldPosition && item.position <= newPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos - 1};\n                    }\n                }\n            }\n            return { ...state, [action.payload.id]: action.payload, ...changedPositions };\n        case DELETE_PLAYLIST:\n            delete state.currentBand;\n            const changePosition = Object.values(state).filter(p => p.position > action.payload.position);\n            changePosition.forEach((playlist) => {\n                playlist.position = playlist.position - 1;\n            });\n            delete state[action.payload.id]\n            return { ...state, ..._.mapKeys(changePosition, 'id')};\n        case CREATE_PLAYLISTSONG:\n            const addToPlaylist = state[action.payload.playlist];\n            addToPlaylist.songs.push(action.payload.playlistsong.id);\n            return { ...state, [addToPlaylist.id]: addToPlaylist};\n        case DELETE_PLAYLISTSONG:\n            const deleteFromPlaylist = state[action.payload.playlist];\n            if (deleteFromPlaylist) {\n                const newSongList = deleteFromPlaylist.songs.filter(id => id !== action.payload.playlistsong.id);\n                deleteFromPlaylist.songs = newSongList;\n                return { ...state, [deleteFromPlaylist.id]: deleteFromPlaylist };\n            }\n        default:\n            return state;\n\n    }\n\n};","import { FETCH_PLAYLISTSONGS, CREATE_PLAYLISTSONG, EDIT_PLAYLISTSONG, DELETE_PLAYLISTSONG, DELETE_VERSION, DELETE_BOUNCE } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_PLAYLISTSONGS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_PLAYLISTSONG:\n            return { ...state, [action.payload.playlistsong.id]: action.payload.playlistsong };\n        case EDIT_PLAYLISTSONG:\n            const oldPosition = state[action.payload.id]['position'];\n            const newPosition = action.payload.position;\n            let changedPositions = {};\n            if (oldPosition > newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position >= newPosition && item.position < oldPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos + 1};\n                    }\n                }\n            }\n            if (oldPosition < newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position > oldPosition && item.position <= newPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos - 1};\n                    }\n                }\n            }\n            return { ...state, [action.payload.id]: action.payload, ...changedPositions };\n        case DELETE_PLAYLISTSONG:\n            const changePosition = Object.values(state).filter(p => p.position > action.payload.position);\n            changePosition.forEach((song) => {\n                song.position = song.position - 1;\n            });\n            delete state[action.payload.playlistsong.id];\n            return { ...state };\n        case DELETE_VERSION:\n            for (const id in state) {\n                if (state[id].version === action.payload.version.id) {\n                    state[id].version = null;\n                    state[id].bounce = null;\n                }\n            }\n            return { ...state };\n        case DELETE_BOUNCE:\n            for (const id in state) {\n                if (state[id].bounce === action.payload.bounce.id) {\n                    state[id].bounce = null;\n                }\n            }\n            return { ...state };\n        default:\n            return state;\n\n    }\n\n};","import { FETCH_BAND, FETCH_BANDS, EDIT_BAND, DELETE_BAND, CREATE_BAND, CREATE_TIER, DELETE_TIER, CREATE_PLAYLIST, DELETE_PLAYLIST, SIGN_OUT } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n        case FETCH_BAND:\n            return { ...state, [action.payload.id]: action.payload, currentBand: action.payload };\n        case FETCH_BANDS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_BAND:\n            return { ...state, [action.payload.id]: action.payload };\n        case EDIT_BAND:\n            return { ...state, [action.payload.id]: action.payload };\n        case DELETE_BAND:\n            delete state[action.payload.id];\n            return { ...state };\n        case CREATE_TIER:\n            const { currentBand } = state;\n            currentBand.tiers.push(action.payload.id);\n            return { ...state, [currentBand.id]: currentBand, currentBand };\n        case DELETE_TIER:\n            const band = state.currentBand;\n            const newTiers = band.tiers.filter(id => id !== action.payload.id);\n            band.tiers = newTiers;\n            return { ...state, [band.id]: band, currentBand: band };\n        case CREATE_PLAYLIST:\n            const currentBandP = state.currentBand;\n            currentBandP.playlists.push(action.payload.id);\n            return { ...state, [currentBandP.id]: currentBandP, currentBand: currentBandP };\n        case DELETE_PLAYLIST:\n            const bandP = state.currentBand;\n            const newPlaylists = bandP.playlists.filter(id => id !== action.payload.id);\n            bandP.playlists = newPlaylists;\n            return { ...state, [bandP.id]: bandP, currentBand: bandP };\n        case SIGN_OUT:\n            return _.omit(state, state.currentBand);\n        default:\n            return state;\n\n    }\n\n};","import { ERROR } from '../actions/types';\n\n\nexport default (state = {}, action) => {\n    switch (action.type) {\n        case ERROR:\n            if (action.payload) {\n                console.log(action.payload);\n            }\n            return { error: action.payload }\n        default:\n            return state;\n    }\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport reduxThunk from 'redux-thunk';\n\n\nimport App from './components/App';\nimport reducers from './reducers';\n\n\n\n\nconst initialState = {};\n\nconst token = localStorage.getItem('token');\n\nif (token) {\n    initialState.auth = { isSignedIn: true };\n}\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n    reducers,\n    initialState,\n    composeEnhancers(applyMiddleware(reduxThunk))\n);\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.querySelector('#root')\n);\n\n\n"],"sourceRoot":""}