(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{237:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(37),c=n.n(i),s=n(8),o=n(16),u=n(107),l=n(2),d=n(15),p=n(4),b=n.n(p),j=n(10),f=n(108),h={baseURL:"https://exploring-the-space.com/api"},O=n.n(f).a.create(h);O.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)}));var m=O,v="SIGN_IN",y="SIGN_OUT",x="ERROR",g="FETCH_TIERS",N="FETCH_PLAYLISTSONGS",w="FETCH_PLAYLIST",S="FETCH_PLAYLISTS",k="FETCH_BAND",E="FETCH_BANDS",B="FETCH_TITLES",T="FETCH_VERSIONS",I="FETCH_BOUNCES",C="CREATE_TIER",V="CREATE_PLAYLISTSONG",L="CREATE_TITLE",P="CREATE_PLAYLIST",A="CREATE_VERSION",D="CREATE_BOUNCE",_="CREATE_BAND",F="EDIT_TIER",R="EDIT_PLAYLIST",U="EDIT_PLAYLISTSONG",M="EDIT_TITLE",q="EDIT_VERSION",z="EDIT_BOUNCE",H="EDIT_BAND",Y="DELETE_TIER",G="DELETE_PLAYLIST",K="DELETE_PLAYLISTSONG",W="DELETE_TITLE",X="DELETE_VERSION",J="DELETE_BOUNCE",Q="DELETE_BAND",Z="PLAY_AUDIO",$="PAUSE_AUDIO",ee="QUEUE_SONGS",te="NEXT_SONG",ne="CHANGE_VOLUME",ae="INITIALIZE_AUDIO",re="SELECT_VERSION",ie="SELECT_BOUNCE",ce=n(19),se=Object(ce.a)(),oe=n(7),ue=n.n(oe),le=function(e){var t;return t=e.response?e.response.data.error:e.message,{type:x,payload:t}},de=function(){return localStorage.removeItem("token"),se.push("/"),{type:y}},pe=function(e){return{type:x,payload:e}},be=function(){return function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.get("/bands");case 3:n=e.sent,t({type:E,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(le(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},je=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get("/versions/".concat(e));case 3:a=t.sent,n({type:T,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(le(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},fe=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get("/bounces/".concat(e));case 3:a=t.sent,n({type:I,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(le(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=a().bands.currentBand,t.next=4,m.post("/tiers",Object(l.a)(Object(l.a)({},e),{},{currentBand:r.id}));case 4:i=t.sent,n({type:C,payload:i.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(le(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()},Oe=function e(t,n,a){return function(){var r=Object(j.a)(b.a.mark((function r(i,c){var s,o,u,d,p,j;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=c().bands.currentBand,(o=c().versions[n]).current&&(t.current=!0),r.next=6,m.patch("/versions/".concat(n),Object(l.a)(Object(l.a)({},t),{},{currentBand:s.id}));case 6:(u=r.sent).data.current&&!o.current&&(d=c().titles[a],p=d.versions.map((function(e){return c().versions[e]})),(j=p.find((function(e){return e.current}))).current=!1,i(e(ue.a.pick(j,"name","notes","current"),j.id,a))),i({type:q,payload:u.data}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),i(le(r.t0));case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e,t){return r.apply(this,arguments)}}()},me=function e(t,n,a){return function(){var r=Object(j.a)(b.a.mark((function r(i,c){var s,o,u,d,p,f,h;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s=c().bands.currentBand,(o=c().bounces[n]).latest&&(t.latest=!0),!t.file||!t.file.length){r.next=12;break}t.file=t.file[0],(u=new FileReader).onload=function(r){(new(window.AudioContext||window.webkitAudioContext)).decodeAudioData(r.target.result,function(){var r=Object(j.a)(b.a.mark((function r(u){var d,p,j,f,h,O,v,y;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(f in d=parseInt(u.duration),p=Object(l.a)(Object(l.a)({},t),{},{currentBand:s.id,duration:d}),j=new FormData,p)j.append(f,p[f]);return r.next=6,m.patch("/bounces/".concat(n),j,{headers:{"Content-Type":"multipart/form-data"}});case 6:(h=r.sent).data.latest&&!o.latest&&(console.log("hahahaha"),O=c().versions[a],v=O.bounces.map((function(e){return c().bounces[e]})),(y=v.find((function(e){return e.latest}))).latest=!1,i(e(ue.a.pick(y,"date","comments","latest"),y.id,a))),i({type:z,payload:h.data});case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},u.onerror=function(e){console.error("An error ocurred reading the file: ",e)},u.readAsArrayBuffer(t.file),r.next=17;break;case 12:return r.next=14,m.patch("/bounces/".concat(n),Object(l.a)(Object(l.a)({},t),{},{currentBand:s.id}));case 14:(d=r.sent).data.latest&&!o.latest&&(p=c().versions[a],f=p.bounces.map((function(e){return c().bounces[e]})),(h=f.find((function(e){return e.latest}))).latest=!1,i(e(ue.a.pick(h,"date","comments","latest"),h.id,a))),i({type:z,payload:d.data});case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(0),i(le(r.t0));case 22:case"end":return r.stop()}}),r,null,[[0,19]])})));return function(e,t){return r.apply(this,arguments)}}()},ve=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().bands.currentBand,t.prev=1,t.next=4,m.post("/tiers/delete",{tierId:e,currentBand:r.id});case 4:(i=t.sent).data.trackList.forEach((function(e){n(ye(e,i.data.id))})),n({type:Y,payload:i.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(le(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()},ye=function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r().bands.currentBand,n.prev=1,n.next=4,m.post("/titles/delete",{titleId:e,tierId:t,currentBand:i.id});case 4:(c=n.sent).data.versions.forEach((function(e){a(xe(e,c.data.id))})),s=Object.values(r().playlists),Object.values(r().playlistSongs).filter((function(t){return t.title===e})).forEach((function(e){var t=s.find((function(t){return t.songs.includes(e.id)}));a(Ne(e.id,t.id))})),a({type:W,payload:{title:c.data,tier:t}}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a(le(n.t0));case 15:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e,t){return n.apply(this,arguments)}}()},xe=function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c,s,o,u;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r().bands.currentBand,n.prev=1,n.next=4,m.post("/versions/delete",{versionId:e,titleId:t,currentBand:i.id});case 4:(c=n.sent).data.current&&(s=r().titles[t])&&((o=s.versions.filter((function(t){return t!==e}))).length?((u=r().versions[o[o.length-1]]).current=!0,a(Se(u.id,t)),a(Oe(ue.a.pick(u,"name","notes","current"),u.id,t))):a(Se(null,t))),c.data.bounces.forEach((function(e){a(ge(e,c.data.id,t))})),a({type:X,payload:{version:c.data,title:t}}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),a(le(n.t0));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e,t){return n.apply(this,arguments)}}()},ge=function(e,t,n){return function(){var a=Object(j.a)(b.a.mark((function a(r,i){var c,s,o,u,l;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=i().bands.currentBand,a.prev=1,a.next=4,m.post("/bounces/delete",{bounceId:e,versionId:t,currentBand:c.id});case 4:(s=a.sent).data.latest&&(o=i().versions[t])&&((u=o.bounces.filter((function(t){return t!==e}))).length?((l=i().bounces[u[u.length-1]]).latest=!0,r(ke(l.id,n)),r(me(ue.a.pick(l,"date","comments","latest"),l.id,t))):r(ke(null,n))),r({type:J,payload:{bounce:s.data,version:t}}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),r(le(a.t0));case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e,t){return a.apply(this,arguments)}}()},Ne=function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r().bands.currentBand,n.prev=1,n.next=4,m.post("/playlistsongs/delete",{playlistSongId:e,playlistId:t,currentBand:i.id});case 4:c=n.sent,a({type:K,payload:{playlistsong:c.data,playlist:t}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a(le(n.t0));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}()},we=function(){return{type:Z}},Se=function(e,t){return{type:re,payload:{version:e,titleId:t}}},ke=function(e,t){return{type:ie,payload:{bounce:e,titleId:t}}},Ee=n(0),Be=Object(s.b)((function(e){return{error:e.error.error}}),{throwError:pe})((function(e){var t=e.error,n=e.throwError;return t?Object(Ee.jsx)("div",{className:"error",onClick:function(){return n(null)},children:t}):null})),Te=n(11),Ie=n(14),Ce=n(6),Ve=n(30),Le=n.n(Ve),Pe=n(23),Ae=n(24),De=n(26),_e=n(25),Fe=n(239),Re=n(238),Ue=function(e){Object(De.a)(n,e);var t=Object(_e.a)(n);function n(e){var a;return Object(Pe.a)(this,n),(a=t.call(this,e)).state={boxVisible:!1,selectedOption:null},a.blockSpaceBarPress=function(e){e.stopPropagation()},a.bodyClick=function(e){a.ref.current&&a.ref.current.contains(e.target)||a.state.boxVisible&&a.setState({boxVisible:!1})},a.showOptions=function(e){return e.options.map((function(e){return Object(Ee.jsx)("option",{value:e.value,children:e.display},e.value)}))},a.onDrop=function(e,t){var n=e.target.files[0];(0,t.onChange)(n)},a.input=function(e){var t="";return"date"===e.type&&(t="calendar"),"file"===e.type?(delete e.input.value,Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)("div",{className:"form-errors",children:e.meta.touched&&e.meta.error&&Object(Ee.jsxs)("p",{children:[e.meta.error,Object(Ee.jsx)("span",{children:"\u2193"})]})}),Object(Ee.jsx)("input",Object(l.a)(Object(l.a)({},e.input),{},{type:"file",className:"inputfile",onDrop:function(t){return a.onDrop(t,e.input)}}))]})):"select"===e.type?Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)("div",{className:"form-errors",children:e.meta.touched&&e.meta.error&&Object(Ee.jsxs)("p",{children:[e.meta.error,Object(Ee.jsx)("span",{children:"\u2193"})]})}),Object(Ee.jsx)("select",Object(l.a)(Object(l.a)({},e.input),{},{autoFocus:e.autoFocus,type:e.type,children:e.options?a.showOptions(e):null}))]}):Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)("div",{className:"form-errors",children:e.meta.touched&&e.meta.error&&Object(Ee.jsxs)("p",{children:[e.meta.error,Object(Ee.jsx)("span",{children:"\u2193"})]})}),Object(Ee.jsx)("input",Object(l.a)(Object(l.a)({},e.input),{},{autoFocus:e.autoFocus,type:e.type,className:"text-input ".concat(t)}))]})},a.required=function(e){return e?void 0:"Required"},a.showFields=function(){return a.props.fields.map((function(e,t){var n=0===t,r=a.input;return Object(Ee.jsxs)("div",{children:[Object(Ee.jsxs)("label",{children:[e.label,": "]}),Object(Ee.jsx)(Fe.a,{name:e.name,component:r,autoFocus:n,type:e.type,validate:e.required?a.required:null,options:e.options,children:e.options?a.showOptions(e):null})]},e.label)}))},a.submitForm=function(e){a.props.onSubmit(e),a.setState({boxVisible:!1}),a.props.reset()},a.showBox=function(){if(a.state.boxVisible){a.props.addClass&&"addbox add-bounce";var e=a.props.addClass?"add-bounce":"";return Object(Ee.jsx)(Ee.Fragment,{children:Object(Ee.jsxs)("div",{className:"addbox ".concat(e),onClick:function(e){return e.stopPropagation()},children:[Object(Ee.jsx)("h3",{className:"addbox-title",children:a.props.title}),Object(Ee.jsxs)("form",{onSubmit:a.props.handleSubmit(a.submitForm),children:[a.showFields(),Object(Ee.jsx)("div",{className:"submit-button-centered",children:Object(Ee.jsx)("button",{className:"submit-button",type:"submit",children:"OK"})})]})]})})}},a.click=function(e){e.stopPropagation(),a.ref.current&&a.ref.current===e.target||(a.state.boxVisible?a.setState({boxVisible:!1}):a.setState({boxVisible:!0}))},a.ref=r.a.createRef(),a}return Object(Ae.a)(n,[{key:"componentDidUpdate",value:function(e,t){!1===t.boxVisible&&!0===this.state.boxVisible?(document.addEventListener("click",this.bodyClick,{capture:!0}),document.addEventListener("keydown",this.blockSpaceBarPress,{capture:!0})):!0===t.boxVisible&&!1===this.state.boxVisible&&(document.removeEventListener("click",this.bodyClick,{capture:!0}),document.removeEventListener("keydown",this.blockSpaceBarPress,{capture:!0}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.bodyClick,{capture:!0}),document.removeEventListener("keydown",this.blockSpaceBarPress,{capture:!0})}},{key:"render",value:function(){return Object(Ee.jsx)(Ee.Fragment,{children:Object(Ee.jsxs)("div",{className:"add",onClick:this.click,ref:this.ref,children:[Object(Ee.jsx)("img",{src:this.props.image}),this.showBox()]})})}}]),n}(r.a.Component),Me=Object(Re.a)({form:"form"})(Ue),qe=function(e){Object(De.a)(n,e);var t=Object(_e.a)(n);function n(){return Object(Pe.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"componentDidMount",value:function(){document.querySelector(".container").classList.add("modal-active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".container").classList.remove("modal-active")}},{key:"render",value:function(){return c.a.createPortal(Object(Ee.jsx)("div",{onClick:this.props.onDismiss,className:"dimmer",children:Object(Ee.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"modal-box",children:[Object(Ee.jsx)("div",{children:this.props.content}),Object(Ee.jsx)("div",{children:this.props.actions})]})}),document.querySelector("#modal"))}}]),n}(r.a.Component),ze=function(e){var t=e.onSubmit,n=e.displayName,r=Object(a.useState)(!1),i=Object(Te.a)(r,2),c=i[0],s=i[1];return Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)("img",{src:"/images/delete.png",className:"delete",onClick:function(e){e.stopPropagation(),s(!0)}}),c&&Object(Ee.jsx)(qe,{content:"Seriously delete ".concat(n,"?"),actions:Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)("button",{className:"modal-button",onClick:function(){t(),s(!1)},children:"Delete"}),Object(Ee.jsx)("button",{className:"modal-button",onClick:function(){return s(!1)},children:"No Wait"})]}),onDismiss:function(){return s(!1)}})]})},He=function(e){var t=function(t){Object(De.a)(a,t);var n=Object(_e.a)(a);function a(e){var t;return Object(Pe.a)(this,a),(t=n.call(this,e)).state={authorized:!1},t.handleUpdate=function(){t.checkAuth()},t}return Object(Ae.a)(a,[{key:"componentDidMount",value:function(){this.checkAuth()}},{key:"checkAuth",value:function(){this.props.user&&this.props.currentBand&&this.props.user.bands.includes(this.props.currentBand.id)&&this.setState({authorized:!0})}},{key:"render",value:function(){return Object(Ee.jsx)(e,Object(l.a)(Object(l.a)({},this.props),{},{authorized:this.state.authorized,handleUpdate:this.handleUpdate}))}}]),a}(r.a.Component);return Object(s.b)((function(e){return{user:e.auth.user,currentBand:e.bands.currentBand}}))(t)},Ye=Object(s.b)(null,{selectBounce:ke,createBounce:function(e,t,n){return function(){var a=Object(j.a)(b.a.mark((function a(r,i){var c,s,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{c=i().bands.currentBand,(s=i().versions[t]).bounces.length||(e.latest=!0),e.file=e.file[0],(o=new FileReader).onload=function(a){(new(window.AudioContext||window.webkitAudioContext)).decodeAudioData(a.target.result,function(){var a=Object(j.a)(b.a.mark((function a(o){var u,d,p,j,f,h,O;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(j in u=parseInt(o.duration),d=Object(l.a)(Object(l.a)({},e),{},{currentBand:c.id,version:t,duration:u}),p=new FormData,d)p.append(j,d[j]);return a.next=6,m.post("/bounces",p,{headers:{"Content-Type":"multipart/form-data"}});case 6:(f=a.sent).data.latest&&(s.bounces.length&&(h=s.bounces.map((function(e){return i().bounces[e]})),(O=h.find((function(e){return e.latest}))).latest=!1,r(me(ue.a.pick(O,"date","comments","latest"),O.id,t))),r({type:ie,payload:{titleId:n,bounce:f.data}})),r({type:D,payload:{bounce:f.data,version:t}});case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},o.onerror=function(e){console.error("An error ocurred reading the file: ",e)},o.readAsArrayBuffer(e.file)}catch(u){r(le(u))}case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},editBounce:me,deleteBounce:ge})(He((function(e){var t=e.bounces,n=e.selectBounce,r=e.title,i=e.authorized,c=e.version,s=e.createBounce,o=e.editBounce,u=e.deleteBounce,d=Object(a.useState)(r.selectedBounce),p=Object(Te.a)(d,2),b=p[0],j=p[1],f=Object(a.useState)(!1),h=Object(Te.a)(f,2),O=h[0],m=h[1];Object(a.useEffect)((function(){b&&b!==r.selectedBounce&&n(b,r.id)}),[b]),Object(a.useEffect)((function(){b&&b!==r.selectedBounce&&n(r.selectedBounce,r.id)}),[r.selectedBounce]),Object(a.useEffect)((function(){j(r.selectedBounce),m(!1)}),[r.selectedBounce]);var v=function(e){return Le.a.utc(e).format("MM/DD/yy")},y=function(){if(t[0]){var e=t.filter((function(e){return e.id!==b.id}));return e.sort((function(e,t){return e.date<t.date?1:-1})),e.map((function(e){var t=e.latest?Object(Ee.jsx)("span",{className:"list-current",children:" * current"}):null;return Object(Ee.jsxs)("div",{className:"dropdown-link change-song",onClick:function(){return j(e)},children:[v(e.date),t]},e.id)}))}},x=function(e){o(e,b.id,c.id),m(!0)},g=function(){if(b.latest)return Object(Ee.jsx)("div",{className:"latest",children:"Current Bounce"})},N=function(){var e;return e=1===t.length?"1 Bounce:":"".concat(t.length," Bounces:"),Object(Ee.jsx)("h5",{children:e})};return O?Object(Ee.jsx)("div",{className:"detail-box bounce",children:Object(Ee.jsxs)("div",{className:"upload-image",children:[Object(Ee.jsx)("p",{children:"Uploading..."}),Object(Ee.jsx)("img",{className:"windmill",src:"/images/windmill.gif"})]})}):c?Object(Ee.jsxs)("div",{className:"detail-box bounce",children:[b?Object(Ee.jsxs)("div",{className:"detail-content",children:[Object(Ee.jsxs)("div",{className:"detail-header",children:[N(),Object(Ee.jsxs)("div",{className:"dropdown",children:[Object(Ee.jsx)("button",{className:"dropbtn",children:v(b.date)}),Object(Ee.jsx)("div",{className:"dropdown-content",children:y()})]}),Object(Ee.jsx)("div",{children:g()})]}),Object(Ee.jsxs)("div",{className:"detail-notes",children:[Object(Ee.jsx)("div",{className:"detail-notes-title",children:"Notes:"}),Object(Ee.jsx)("p",{children:b.comments})]})]}):Object(Ee.jsx)("div",{className:"detail-content",children:Object(Ee.jsx)("div",{className:"detail-header",children:Object(Ee.jsx)("h5",{children:"No Bounces for this Version"})})}),Object(Ee.jsxs)("div",{className:"detail-buttons",children:[function(){if(i)return Object(Ee.jsx)(Me,{title:"Add a Bounce of ".concat(c.name),image:"images/add.png",fields:[{label:"File",name:"file",type:"file",required:!0},{label:"Date",name:"date",type:"date",required:!0},{label:"Comments",name:"comments",type:"textarea"},{label:"Latest Bounce?",name:"latest",type:"checkbox"}],onSubmit:function(e){return function(e){s(e,c.id,r.id),m(!0)}(e)},form:"add-bounce-".concat(r.id),initialValues:{latest:!0},addClass:!0})}(),b&&function(){if(i)return Object(Ee.jsx)(Me,{title:"Edit this Bounce",image:"images/edit.png",fields:[{label:"File",name:"file",type:"file"},{label:"Date",name:"date",type:"date"},{label:"Comments",name:"comments",type:"textarea"},{label:"Current Bounce?",name:"latest",type:"checkbox"}],onSubmit:x,initialValues:Object(l.a)(Object(l.a)({},ue.a.pick(b,"comments","latest")),{},{date:Le.a.utc(b.date).format("YYYY-MM-DD")}),form:"edit-bounce-".concat(r.id),enableReinitialize:!0,addClass:!0})}(),b&&function(){if(i)return Object(Ee.jsx)(ze,{onSubmit:function(){return u(b.id,c.id,r.id)},displayName:v(b.date)})}()]})]}):null}))),Ge=Object(s.b)((function(e){return{bounces:e.bounces}}),{fetchBounces:fe,selectVersion:Se,createVersion:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c,s,o,u;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,(c=r().titles[t]).versions.length||(e.current=!0),n.next=6,m.post("/versions",Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id,title:t}));case 6:(s=n.sent).data.current&&(c.versions.length&&(o=c.versions.map((function(e){return r().versions[e]})),(u=o.find((function(e){return e.current}))).current=!1,a(Oe(ue.a.pick(u,"name","notes","current"),u.id,t))),a({type:re,payload:{titleId:t,version:s.data}})),a({type:A,payload:{version:s.data,title:t}}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a(le(n.t0));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},editVersion:Oe,deleteVersion:xe})(He((function(e){var t=e.versions,n=e.bounces,r=e.fetchBounces,i=e.selectVersion,c=e.title,s=e.createVersion,o=e.authorized,u=e.editVersion,l=e.deleteVersion,d=Object(a.useState)(c.selectedVersion),p=Object(Te.a)(d,2),b=p[0],j=p[1],f=Object(a.useState)(null),h=Object(Te.a)(f,2),O=h[0],m=h[1];Object(a.useEffect)((function(){b&&(r(b.id),i(b,c.id),m(b.bounces.map((function(e){return n[e]}))))}),[b]),Object(a.useEffect)((function(){b&&m(b.bounces.map((function(e){return n[e]})))}),[n]),Object(a.useEffect)((function(){b!==c.selectedVersion&&j(c.selectedVersion)}),[t,c.selectedVersion]);var v=function(){var e;return e=1===t.length?"1 Version:":"".concat(t.length," Versions:"),Object(Ee.jsx)("h5",{children:e})},y=function(){if(b.current)return Object(Ee.jsx)("div",{className:"current",children:"Current Version"})};return Object(Ee.jsxs)("div",{className:"version-container",children:[Object(Ee.jsxs)("div",{className:"detail-box",children:[b?Object(Ee.jsxs)("div",{className:"detail-content",children:[Object(Ee.jsxs)("div",{className:"detail-header",children:[v(),Object(Ee.jsxs)("div",{className:"dropdown",children:[Object(Ee.jsx)("button",{className:"dropbtn",children:b.name}),Object(Ee.jsx)("div",{className:"dropdown-content",children:t.filter((function(e){return e.id!==b.id})).map((function(e){var t=e.current?Object(Ee.jsx)("span",{className:"list-current",children:" * current"}):null;return Object(Ee.jsxs)("div",{className:"dropdown-link change-version",onClick:function(){return j(e)},children:[e.name,t]},e.id)}))})]}),y()]}),Object(Ee.jsxs)("div",{className:"detail-notes",children:[Object(Ee.jsx)("div",{className:"detail-notes-title",children:"Notes:"}),Object(Ee.jsx)("p",{children:b.notes})]})]}):Object(Ee.jsx)("div",{className:"detail-content",children:Object(Ee.jsx)("div",{className:"detail-header",children:Object(Ee.jsx)("h5",{children:"No Versions for this Song Yet"})})}),Object(Ee.jsxs)("div",{className:"detail-buttons",children:[function(){if(o)return Object(Ee.jsx)(Me,{title:"Add a Version of ".concat(c.title),image:"images/add.png",fields:[{label:"Name",name:"name",type:"input",required:!0},{label:"Notes",name:"notes",type:"textarea"},{label:"Current Version?",name:"current",type:"checkbox"}],onSubmit:function(e){return s(e,c.id)},form:"add-version-".concat(c.id),initialValues:{current:!0},enableReinitialize:!0,addClass:!0})}(),b&&function(){if(o)return Object(Ee.jsx)(Me,{title:"Edit ".concat(b.name),image:"images/edit.png",fields:[{label:"Name",name:"name",type:"input"},{label:"Notes",name:"notes",type:"textarea"},{label:"Current Version?",name:"current",type:"checkbox"}],onSubmit:function(e){return u(e,b.id,c.id)},initialValues:ue.a.pick(b,"name","notes","current"),form:"edit-version-".concat(c.id),enableReinitialize:!0,addClass:!0})}(),b&&function(){if(o)return Object(Ee.jsx)(ze,{onSubmit:function(){return l(b.id,c.id)},displayName:b.name})}()]})]}),function(){if(O)return Object(Ee.jsx)(Ye,{bounces:O,title:c,version:b})}()]})}))),Ke=Object(s.b)(null,{queueSongs:function(e){return function(t,n){var a={title:e.title,version:e.version.name,date:e.bounce.date,duration:e.bounce.duration,audio:e.bounce.id};t({type:ee,payload:{song:a,parent:e.tier}})}},queuePlaylistSongs:function(e){return function(t,n){var a={title:e.title,version:e.version.name,date:e.bounce.date,duration:e.bounce.duration,audio:e.bounce.id,position:e.position};t({type:ee,payload:{song:a,parent:e.playlist}})}},playAudio:we,throwError:pe})((function(e){var t,n,a=e.song,r=e.queueSongs,i=e.parentType,c=e.queuePlaylistSongs;e.throwError;return t="https://exploring-the-space.com",Object(Ee.jsxs)("div",{className:"playcontainer",children:[Object(Ee.jsx)("div",{className:"songtime",children:function(e){var t=Math.floor(e/60),n=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return"".concat(t,":").concat(n)}(a.bounce.duration)}),Object(Ee.jsx)("div",{className:"playbutton",children:Object(Ee.jsx)("img",{src:"/images/play.svg",className:"playicon",onClick:function(e){e.stopPropagation(),"tier"===i?r(a):"playlist"===i&&c(a)}})}),Object(Ee.jsxs)("div",{className:"title-display",children:[Object(Ee.jsx)("p",{children:a.version.name}),Object(Ee.jsx)("p",{children:(n=a.bounce.date,Le.a.utc(n).format("MM/DD/YY"))})]}),Object(Ee.jsx)("a",{className:"download",onClick:function(e){return e.stopPropagation()},href:"".concat(t,"/api/audio/download/").concat(a.title.title,"/").concat(a.bounce.id,".mp3"),download:!0,children:Object(Ee.jsx)("img",{src:"/images/download.svg"})})]})})),We=Object(s.b)((function(e){return{versions:e.versions,bounces:e.bounces,band:e.bands.currentBand,playlists:e.playlists,titles:e.titles,audio:e.audio}}),{fetchVersions:je,fetchBounces:fe,selectVersion:Se,selectBounce:ke,createPlaylistSong:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,n.next=4,m.post("/playlistsongs",Object(l.a)(Object(l.a)({},e),{},{playlist:t,currentBand:i.id}));case 4:c=n.sent,a({type:V,payload:{playlistsong:c.data,playlist:t}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(le(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},editTitle:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,n.next=4,m.patch("/titles/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id}));case 4:c=n.sent,a({type:M,payload:c.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(le(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteTitle:ye})(He((function(e){var t=e.tier,n=e.title,r=e.titles,i=e.fetchVersions,c=e.versions,s=e.bounces,o=e.fetchBounces,u=e.authorized,d=e.band,p=e.playlists,b=e.selectVersion,j=e.selectBounce,f=e.createPlaylistSong,h=e.editTitle,O=e.deleteTitle,m=e.getTime,v=e.audio,y=e.findLatest,x=Object(a.useState)(!1),g=Object(Te.a)(x,2),N=g[0],w=g[1],S=Object(a.useState)(null),k=Object(Te.a)(S,2),E=k[0],B=k[1],T=Object(a.useState)(null),I=Object(Te.a)(T,2),C=I[0],V=I[1],L=Object(a.useState)(null),P=Object(Te.a)(L,2),A=P[0],D=P[1];Object(a.useEffect)((function(){i(n.id)}),[]),Object(a.useEffect)((function(){B(n.versions.map((function(e){return c[e]})))}),[c,n]),Object(a.useEffect)((function(){if(E&&E[0]){var e,t=E.map((function(e){return e.id}));n.selectedVersion&&t.includes(n.selectedVersion.id)?n.selectedVersion&&(e=E.includes(n.selectedVersion)?n.selectedVersion:E.find((function(e){return e.id===n.selectedVersion.id}))):e=E.find((function(e){return e.current})),b(e,n.id)}n.selectedVersion&&o(n.selectedVersion.id)}),[E]),Object(a.useEffect)((function(){n.selectedVersion&&(n.selectedVersion.bounces[0]?V(n.selectedVersion.bounces.map((function(e){return s[e]}))):(console.log("set bounce list null"),V(null),j(null,n.id)))}),[s]),Object(a.useEffect)((function(){var e;C&&C[0]?(n.selectedBounce&&C.includes(n.selectedBounce)?e=n.selectedBounce:(e=C.find((function(e){return e.latest})),y(n,e)),e!==n.selectedBounce&&j(e,n.id)):A&&D(null)}),[C]),Object(a.useEffect)((function(){n.selectedBounce&&n.selectedVersion?A&&A.selectedVersion===A.version&&A.selectedBounce===A.bounce||(D({tier:t,title:n,version:n.selectedVersion,bounce:n.selectedBounce}),m({id:n.id,duration:n.selectedBounce.duration})):A&&!n.selectedBounce&&(D(null),m({id:n.id,duration:0}))}),[r]);var _=N?"down-arrow":"",F=v.currentSong?v.currentSong.audio:null,R=v.parent?v.parent.id:null,U="";return F&&n.selectedBounce&&(U=R===t.id&&F===n.selectedBounce.id?"current-song":""),Object(Ee.jsxs)("div",{className:"title-margin",children:[Object(Ee.jsx)("div",{className:"row title ".concat(U),children:Object(Ee.jsxs)("div",{className:"marqee",onClick:function(){return w(!N)},children:[Object(Ee.jsxs)("div",{className:"row-name",children:[Object(Ee.jsx)("img",{className:"arrow ".concat(_),src:"/images/right-arrow.svg"}),Object(Ee.jsx)("div",{className:"name-spot",children:Object(Ee.jsx)("h3",{children:n.title})})]}),function(){if(A)return Object(Ee.jsx)(Ke,{song:A,parentType:"tier"})}(),function(){if(u){var e=d.playlists.map((function(e){return p[e]})).map((function(e){if(e)return{value:e.id,display:e.name}}));return Object(Ee.jsxs)("div",{className:"tier-display",children:[A&&Object(Ee.jsx)(Me,{title:"Add to a Playlist",onSubmit:function(e){return function(e){f(Object(l.a)(Object(l.a)({},e),{},{bounce:n.selectedBounce.id,version:n.selectedVersion.id,title:n.id}),e.playlistId)}(e)},image:"images/playlist.png",fields:[{type:"select",options:e,name:"playlistId",label:"Playlist"}],form:"add-to-playlist-".concat(n.id),enableReinitialize:!0}),Object(Ee.jsx)(Me,{title:"Edit ".concat(n.title),image:"images/edit.png",fields:[{label:"Title",name:"title",type:"input",required:!0}],onSubmit:function(e){return h(e,n.id)},initialValues:ue.a.pick(n,"title"),form:"edit-title-".concat(n.id),enableReinitialize:!0}),Object(Ee.jsx)(ze,{onSubmit:function(){return O(n.id,t.id)},displayName:n.title})]})}}()]})}),N&&Object(Ee.jsx)(Ge,{versions:E,title:n})]})}))),Xe=Object(s.b)((function(e){return{titles:e.titles,band:e.bands.currentBand,tiers:e.tiers}}),{createTier:he,fetchTitles:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get("/titles/".concat(e));case 3:a=t.sent,n({type:B,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(le(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},editTier:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,n.next=4,m.patch("/tiers/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id}));case 4:c=n.sent,a({type:F,payload:c.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(le(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},createTitle:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r().bands.currentBand,n.prev=1,n.next=4,m.post("/titles",Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id,tier:t}));case 4:c=n.sent,a({type:L,payload:{title:c.data,tier:t}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a(le(n.t0));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteTier:ve})(He((function(e){var t=e.tier,n=e.titles,r=e.fetchTitles,i=e.authorized,c=e.band,s=e.tiers,o=e.editTier,u=e.createTitle,d=e.deleteTier,p=Object(a.useState)(!1),b=Object(Te.a)(p,2),j=b[0],f=b[1],h=Object(a.useState)(null),O=Object(Te.a)(h,2),m=O[0],v=O[1],y=Object(a.useState)([]),x=Object(Te.a)(y,2),g=x[0],N=x[1],w=Object(a.useState)({}),S=Object(Te.a)(w,2),k=S[0],E=S[1],B=Object(a.useRef)({});Object(a.useEffect)((function(){r(t.id)}),[]),Object(a.useEffect)((function(){v(t.trackList.map((function(e){return n[e]})))}),[n,t]),Object(a.useEffect)((function(){if(c.tiers.length){var e=c.tiers.map((function(e){return s[e]})).sort((function(e,t){return e.position<t.position?-1:1}));N(e.map((function(e){if(e)return{value:e.position,display:e.position}})))}}),[s]);var T=function(e,t){B.current[e.id]||(B.current[e.id]=new Date(t.date))},I=function(e){k[e.id]||E(Object(l.a)(Object(l.a)({},k),{},Object(Ce.a)({},e.id,e.duration)))},C=j?"down-arrow":"",V=j?"open":"";return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)("div",{className:"row tier",onClick:function(){return f(!j)},children:[Object(Ee.jsxs)("div",{className:"marqee",children:[Object(Ee.jsxs)("div",{className:"tier-name",children:[Object(Ee.jsx)("img",{className:"arrow ".concat(C),src:"images/right-arrow.svg"}),Object(Ee.jsx)("h2",{children:t.name}),function(){if(i)return Object(Ee.jsx)(Me,{title:"Add a Title to ".concat(t.name),image:"images/add.png",fields:[{label:"Title",name:"title",type:"input",required:!0}],onSubmit:function(e){u(e,t.id),f(!0)},form:"add-title-".concat(t.id)})}()]}),Object(Ee.jsxs)("div",{className:"tier-count",children:[Object(Ee.jsxs)("div",{className:"song-count",children:[t.trackList.length," songs"]}),Object(Ee.jsx)("div",{className:"song-count",children:function(){var e=Object.values(k).reduce((function(e,t){return e+t}),0);if(!e)return null;var t=Math.floor(e/60),n=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return Object(Ee.jsx)("div",{children:"".concat(t,":").concat(n)})}()})]}),Object(Ee.jsxs)("div",{className:"tier-display",children:[function(){if(i)return Object(Ee.jsx)(Me,{title:"Edit ".concat(t.name),image:"images/edit.png",fields:[{label:"Tier Name",name:"name",type:"input",required:!0},{label:"Tier Position",name:"position",type:"select",options:g}],onSubmit:function(e){return o(e,t.id)},initialValues:ue.a.pick(t,"name","position"),form:"edit-tier-".concat(t.id),enableReinitialize:!0})}(),function(){if(i)return Object(Ee.jsx)(ze,{onSubmit:function(){return d(t.id)},displayName:t.name})}()]})]}),Object(Ee.jsx)("hr",{})]}),Object(Ee.jsx)("div",{className:V,children:j&&m&&m.sort((function(e,t){return B.current[e.id]&&B.current[t.id]?B.current[e.id]>B.current[t.id]?-1:1:B.current[e.id]?-1:B.current[t.id]?1:void 0})).map((function(e){if(e)return Object(Ee.jsx)(We,{title:e,tier:t,getTime:I,findLatest:T},e.id)}))})]})}))),Je=Object(s.b)((function(e){return{playlistSongs:e.playlistSongs,bands:e.bands,playlists:e.playlists,versions:e.versions,bounces:e.bounces,titles:e.titles,audio:e.audio}}),{fetchBounces:fe,fetchVersions:je,editPlaylistSong:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,n.next=4,m.patch("/playlistsongs/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id}));case 4:c=n.sent,a({type:U,payload:c.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(le(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},deletePlaylistSong:Ne})(He((function(e){var t=e.playlist,n=e.song,r=e.playlistSongs,i=e.authorized,c=e.versions,s=e.bounces,o=e.titles,u=e.fetchBounces,d=e.fetchVersions,p=e.editPlaylistSong,b=e.deletePlaylistSong,j=e.audio,f=e.getTime,h=Object(a.useState)(null),O=Object(Te.a)(h,2),m=O[0],v=O[1];Object(a.useEffect)((function(){d(n.title),o[n.title].versions.forEach((function(e){u(e)}))}),[]),Object(a.useEffect)((function(){o[n.title]&&v({playlist:t,title:o[n.title],version:c[n.version],bounce:s[n.bounce],position:n.position}),s[n.bounce]&&f({id:n.id,duration:s[n.bounce].duration})}),[r[n.id],s[n.bounce],o[n.title],c[n.version]]);var y=j.currentSong?j.currentSong.audio:null,x=j.parent?j.parent.id:null,g="";return y&&n.bounce&&(g=x===t.id&&y===n.bounce?"current-song":""),Object(Ee.jsx)("div",{className:"title-margin",children:Object(Ee.jsx)("div",{className:"row title ".concat(g),children:Object(Ee.jsxs)("div",{className:"marqee",children:[Object(Ee.jsxs)("div",{className:"row-name",children:[Object(Ee.jsx)("div",{className:"song-position",children:n.position}),Object(Ee.jsx)("div",{className:"name-spot",children:Object(Ee.jsx)("h3",{children:n&&o[n.title]&&o[n.title].title})})]}),m&&m.bounce&&m.version?Object(Ee.jsx)(Ke,{song:m,parentType:"playlist"}):Object(Ee.jsxs)("div",{className:"playlistsong-no-bounce",children:[Object(Ee.jsx)("p",{children:c[n.version]?"".concat(c[n.version].name):"No Version Selected"}),Object(Ee.jsx)("p",{children:"No Bounce Selected"})]}),Object(Ee.jsxs)("div",{className:"tier-display",children:[function(){if(i&&o[n.title]){var e=Object.values(r).filter((function(e){return t.songs.includes(e.id)})).sort((function(e,t){return e.position<t.position?-1:1})).map((function(e){return{value:e.position,display:e.position}})),a=o[n.title].versions.map((function(e){return c[e]})),u=a.map((function(e){if(e)return e.bounces.map((function(e){return s[e]}))})),d=[];return a.forEach((function(e,t){u[t]&&u[t].forEach((function(t){if(t){var n="";e.current&&t.latest&&(n=" * current"),d.push({value:t.id,display:"".concat(e.name," -- ").concat(Le.a.utc(t.date).format("MM/DD/YY")).concat(n)})}}))})),Object(Ee.jsx)(Me,{image:"/images/edit.png",title:"Edit ".concat(o[n.title].title),onSubmit:function(e){return function(e){var a=Object.values(c).find((function(t){return t.bounces.includes(e.bounce)}));p(Object(l.a)(Object(l.a)({},e),{},{version:a.id,playlistId:t.id}),n.id)}(e)},fields:[{name:"position",label:"Position",type:"select",options:e},{name:"bounce",label:"Bounce",type:"select",options:d,required:!0}],initialValues:n.bounce?ue.a.pick(n,"position","bounce"):ue.a.pick(n,"position"),form:"edit-playlistsong-".concat(n.id),enableReinitialize:!0})}}(),function(){if(i)return Object(Ee.jsx)(ze,{onSubmit:function(){return b(n.id,t.id)},displayName:o[n.title].title})}()]})]})})})}))),Qe=Object(s.b)((function(e){return{playlists:e.playlists,playlistSongs:e.playlistSongs,band:e.bands.currentBand}}),{fetchPlaylistSongs:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get("/playlistsongs/".concat(e));case 3:a=t.sent,n({type:N,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(le(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},deletePlaylist:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().bands.currentBand,t.prev=1,t.next=4,m.post("/playlists/delete",{playlistId:e,currentBand:r.id});case 4:(i=t.sent).data.songs.forEach((function(e){n(Ne(e,i.data.id))})),n({type:G,payload:i.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(le(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()}})(He((function(e){var t=e.playlist,n=e.playlists,r=e.fetchPlaylistSongs,i=e.playlistSongs,c=e.authorized,s=e.deletePlaylist,o=e.band,u=Object(a.useState)(!1),d=Object(Te.a)(u,2),p=d[0],f=d[1],h=Object(a.useState)([]),O=Object(Te.a)(h,2),v=O[0],y=O[1],x=Object(a.useState)({}),g=Object(Te.a)(x,2),N=g[0],w=g[1],S=Object(a.useState)(null),k=Object(Te.a)(S,2),E=k[0],B=k[1];Object(a.useEffect)((function(){r(t.id)}),[]),Object(a.useEffect)((function(){B(t.songs.map((function(e){return i[e]})))}),[i,t.songs]);Object(a.useEffect)((function(){if(o.playlists.length){var e=o.playlists.map((function(e){return n[e]})).sort((function(e,t){return e.position<t.position?-1:t.position<e.position?1:void 0}));y(e.map((function(e){if(e)return{value:e.position,display:e.position}})))}}),[n]);var T=function(e){N[e.id]||w(Object(l.a)(Object(l.a)({},N),{},Object(Ce.a)({},e.id,e.duration)))},I=p?"down-arrow":"",C=p?"open":"";return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)("div",{className:"row tier",onClick:function(){return f(!p)},children:[Object(Ee.jsxs)("div",{className:"marqee tier-info",children:[Object(Ee.jsxs)("div",{className:"tier-name",children:[Object(Ee.jsx)("img",{className:"arrow ".concat(I),src:"/images/right-arrow.svg"}),Object(Ee.jsx)("h2",{children:t.name})]}),Object(Ee.jsxs)("div",{className:"tier-count",children:[Object(Ee.jsxs)("div",{className:"song-count",children:[t.songs.length," songs"]}),Object(Ee.jsx)("div",{className:"song-count",children:function(){var e=Object.values(N).reduce((function(e,t){return e+t}),0);if(!e)return null;var t=Math.floor(e/60),n=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return Object(Ee.jsx)("div",{children:"".concat(t,":").concat(n)})}()})]}),Object(Ee.jsxs)("div",{className:"tier-display",children:[function(){if(c)return Object(Ee.jsx)(Me,{title:"Edit ".concat(t.name),image:"images/edit.png",fields:[{label:"Playlist Name",name:"name",type:"input"},{label:"Playlist Position",name:"position",type:"select",options:v}],onSubmit:function(e){return function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r().bands.currentBand,n.next=4,m.patch("/playlists/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id}));case 4:c=n.sent,a({type:R,payload:c.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(le(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t.id)},initialValues:ue.a.pick(t,"name","position"),form:"edit-".concat(t.id),enableReinitialize:!0})}(),function(){if(c)return Object(Ee.jsx)(ze,{onSubmit:function(){return s(t.id)},displayName:t.name})}()]})]}),Object(Ee.jsx)("hr",{})]}),Object(Ee.jsx)("div",{className:C,children:p&&(E.sort((function(e,t){return e.position<t.position?-1:1})),E.map((function(e){if(e)return Object(Ee.jsx)(Je,{song:e,playlist:t,getTime:T},e.id)})))})]})}))),Ze=Object(s.b)((function(e){return{tiers:e.tiers,playlists:e.playlists,currentSong:e.audio.currentSong}}),{fetchTiers:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get("/tiers/".concat(e));case 3:a=t.sent,n({type:g,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(le(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchPlaylists:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get("/playlists/".concat(e));case 3:a=t.sent,n({type:S,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(le(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},createTier:he,createPlaylist:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=a().bands.currentBand,t.next=4,m.post("/playlists",Object(l.a)(Object(l.a)({},e),{},{currentBand:r.id}));case 4:i=t.sent,n({type:P,payload:i.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(le(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()}})(He((function(e){var t=e.fetchPlaylists,n=e.createTier,r=e.fetchTiers,i=e.tiers,c=e.playlists,s=e.band,o=e.authorized,u=e.createPlaylist,l=e.currentSong,d=Object(a.useState)([]),p=Object(Te.a)(d,2),b=p[0],j=p[1],f=Object(a.useState)([]),h=Object(Te.a)(f,2),O=h[0],m=h[1];Object(a.useEffect)((function(){r(s.id),t(s.id)}),[]),Object(a.useEffect)((function(){j(s.tiers.map((function(e){return i[e]})).sort((function(e,t){return e.position<t.position?-1:t.position<e.position?1:void 0})))}),[i]),Object(a.useEffect)((function(){m(s.playlists.map((function(e){return c[e]})).sort((function(e,t){return e.position<t.position?-1:t.position<e.position?1:void 0})))}),[c]);var v=l?"playbar-active":"";return Object(Ee.jsxs)("div",{className:"body-container ".concat(v),children:[Object(Ee.jsxs)("div",{className:"section-header",children:[Object(Ee.jsx)("h2",{className:"section-title",children:"Tiers"}),Object(Ee.jsx)("div",{className:"section-add",children:function(){if(o)return Object(Ee.jsx)(Me,{onSubmit:function(e){return n(e)},title:"Add a Tier",image:"/images/add.png",fields:[{label:"Tier Name",name:"tierName",type:"input",required:!0}]})}()})]}),Object(Ee.jsx)("hr",{}),i&&b.map((function(e){if(e)return Object(Ee.jsx)(Xe,{tier:e},e.id)})),Object(Ee.jsxs)("div",{className:"playlists",children:[Object(Ee.jsxs)("div",{className:"section-header",children:[Object(Ee.jsx)("h2",{className:"section-title",children:"Playlists"}),Object(Ee.jsx)("div",{className:"section-add",children:function(){if(o)return Object(Ee.jsx)(Me,{onSubmit:function(e){return u(e)},title:"Add a Playlist",image:"/images/add.png",fields:[{label:"Playlist Name",name:"playlistName",type:"input",required:!0}]})}()})]}),Object(Ee.jsx)("hr",{}),c&&O.map((function(e){if(e)return Object(Ee.jsx)(Qe,{playlist:e},e.id)}))]})]})}))),$e=function(e){Object(De.a)(n,e);var t=Object(_e.a)(n);function n(e){var a;return Object(Pe.a)(this,n),(a=t.call(this,e)).state={volume:50,sliderPosition:0},a.displayDate=function(e){return Le.a.utc(e).format("MM/DD/yy")},a.updateSlider=function(){var e=a.audio.current.currentTime/a.audio.current.duration*1e3;a.time=a.formatTime(a.audio.current.currentTime),isNaN(e)||a.setState({sliderPosition:e})},a.setSpaceBarToPlay=function(e){"Space"===e.code&&(e.preventDefault(),a.props.pause?a.play():a.pause())},a.audioError=function(){a.props.throwError("The audio player had an error, probably can't connect to server.")},a.nextSong=function(){a.props.nextSong()},a.play=function(){a.props.playAudio()},a.pause=function(){a.props.pauseAudio()},a.onSliderChange=function(e){var t=e.target.value/1e3*a.audio.current.duration;a.audio.current.currentTime=t},a.onPauseButton=function(){a.props.play?a.pause():a.play()},a.url="https://exploring-the-space.com",a.audio=r.a.createRef(),a}return Object(Ae.a)(n,[{key:"formatTime",value:function(e){var t=e<600?"0".concat(Math.floor(e/60)):Math.floor(e/60),n=e%60<10?"0".concat(Math.floor(e%60)):Math.floor(e%60);return"".concat(t,":").concat(n)}},{key:"wrapUrl",value:function(e){return"".concat(this.url,"/api/audio/").concat(e,".mp3")}},{key:"componentDidMount",value:function(){this.audio.current=new Audio,this.audio.current.addEventListener("timeupdate",this.updateSlider),this.audio.current.addEventListener("error",this.audioError),this.audio.current.addEventListener("ended",this.nextSong),document.addEventListener("keydown",this.setSpaceBarToPlay),this.audio.current.addEventListener("loadedmetadata",this.audio.current.play)}},{key:"componentDidUpdate",value:function(e){this.scrolled||(window.scroll(window.scrollX,window.scrollY+96),this.scrolled=!0),this.props.song?(this.props.song!==e.song?(this.audio.current.src=this.wrapUrl(this.props.song.audio),this.audio.current.volume=this.props.volume/120):this.props.play&&e.pause?this.audio.current.play():this.props.pause&&e.play&&this.audio.current.pause(),this.props.volume!==e.volume&&(this.audio.current.volume=this.props.volume/120)):this.audio.current.pause()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.setSpaceBarToPlay),this.audio.current.src="",this.audio.current.removeEventListener("timeupdate",this.updateSlider),this.audio.current.removeEventListener("error",this.audioError),this.audio.current.removeEventListener("ended",this.nextSong),this.audio.current.removeEventListener("loadedmetadata",this.audio.current.play),this.props.initializeAudio()}},{key:"render",value:function(){return this.props.song?Object(Ee.jsxs)("div",{className:"playbar",children:[Object(Ee.jsxs)("div",{className:"playbar-header",children:[Object(Ee.jsx)("div",{className:"playbar-title",children:Object(Ee.jsx)("p",{children:this.props.song.title.title})}),Object(Ee.jsx)("div",{className:"pause-container",onClick:this.onPauseButton,children:Object(Ee.jsx)("img",{className:"big-play-btn",src:this.props.play?"/images/pause.svg":"/images/play.svg"})}),Object(Ee.jsxs)("div",{className:"playbar-info",children:[Object(Ee.jsxs)("div",{className:"playbar-detail",children:[Object(Ee.jsx)("p",{children:"Version:"}),Object(Ee.jsx)("p",{children:this.props.song.version})]}),Object(Ee.jsxs)("div",{className:"playbar-detail",children:[Object(Ee.jsx)("p",{children:"Date:"}),Object(Ee.jsx)("p",{children:this.displayDate(this.props.song.date)})]})]})]}),Object(Ee.jsxs)("div",{className:"playslidercontainer",children:[Object(Ee.jsx)("div",{className:"playslidertime",children:this.time}),Object(Ee.jsx)("input",{type:"range",min:"0",max:"1000",value:this.state.sliderPosition,className:"playslider",onInput:this.onSliderChange}),Object(Ee.jsx)("div",{className:"playslidertime",children:this.formatTime(this.props.song.duration)})]})]}):null}}]),n}(r.a.Component),et=Object(s.b)((function(e){return{song:e.audio.currentSong,play:e.audio.play,pause:e.audio.pause,volume:e.audio.volume}}),{playAudio:we,pauseAudio:function(){return{type:$}},nextSong:function(){return function(e,t){var n=t().audio,a=n.parent,r=n.currentSong;if(a.trackList){var i=a.trackList.map((function(e){return t().titles[e]})).sort((function(e,t){return e.selectedBounce&&t.selectedBounce?new Date(e.selectedBounce.date)>new Date(t.selectedBounce.date)?-1:1:e.selectedBounce?-1:t.selectedBounce?1:void 0})),c=i[i.indexOf(r.title)+1];if(c&&c.selectedVersion&&c.selectedBounce){var s=t().versions[c.selectedVersion.id],o=t().bounces[c.selectedBounce.id],u={title:c,version:s.name,date:o.date,duration:o.duration,audio:o.id};e({type:te,payload:u})}else e({type:ae})}if(a.songs){for(var l,d=a.songs.map((function(e){return t().playlistSongs[e]})).sort((function(e,t){return e.position<t.position?-1:1})),p=r.position;p<d.length;){if(null!==d[p].bounce){l=d[p];break}p++}if(!l)return e({type:ae});var b=t().versions[l.version],j=t().bounces[l.bounce],f={title:t().titles[l.title],version:b.name,date:j.date,duration:j.duration,audio:j.id,position:l.position};e({type:te,payload:f})}}},throwError:pe,initializeAudio:function(){return{type:ae}}})($e),tt=Object(s.b)((function(e){return{band:e.bands.currentBand,user:e.auth.currentUser,signedIn:e.auth.isSignedIn,volume:e.audio.volume}}),{fetchBand:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get("/bands/".concat(e));case 3:a=t.sent,n({type:k,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(le(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},signOut:de,changeVolume:function(e){return{type:ne,payload:e}}})(He((function(e){var t=e.fetchBand,n=e.band,r=e.match,i=e.authorized,c=e.handleUpdate,s=e.user,o=e.signedIn,u=e.signOut,l=e.volume,d=e.changeVolume,p=Object(a.useState)(!1),b=Object(Te.a)(p,2),j=b[0],f=b[1],h=Object(a.useRef)(null);Object(a.useEffect)((function(){return t(r.params.bandName),document.addEventListener("click",O,{capture:!0}),function(){document.removeEventListener("click",O,{capture:!0})}}),[]),Object(a.useEffect)((function(){c()}),[n,s]);var O=function(e){h.current&&h.current.contains(e.target)||f(!1)};return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)("div",{className:"header",children:[Object(Ee.jsx)(et,{}),Object(Ee.jsxs)("div",{className:"band-header",children:[Object(Ee.jsxs)("div",{className:"band-name",children:[Object(Ee.jsx)("h1",{children:n&&n.name}),Object(Ee.jsxs)("div",{className:"menu-button",ref:h,onClick:function(){return f(!j)},children:[Object(Ee.jsx)("img",{src:"images/dots.png"}),j&&(i?Object(Ee.jsxs)("div",{className:"menu",children:[Object(Ee.jsx)(Ie.a,{className:"menu-item",to:"/user",children:"User Home"}),Object(Ee.jsx)(Ie.a,{className:"menu-item",to:"/help",children:"Help"}),Object(Ee.jsx)("div",{className:"menu-item",onClick:u,children:"Sign Out"})]}):Object(Ee.jsxs)("div",{className:"menu",children:[Object(Ee.jsx)(Ie.a,{className:"menu-item",to:"/",children:"Home"}),Object(Ee.jsx)(Ie.a,{className:"menu-item",to:"/help",children:"Help"}),Object(Ee.jsx)(Ie.a,{className:"menu-item",to:"/signin",children:"Sign In"})]}))]})]}),Object(Ee.jsxs)("div",{className:"slidecontainer",children:[Object(Ee.jsx)("input",{type:"range",min:"0",max:"100",className:"master-volume",value:l,onInput:function(e){return d(e.target.value)}}),Object(Ee.jsx)("img",{src:"/images/volume.svg"})]})]})]}),n?o&&!s?null:Object(Ee.jsx)(Ze,{band:n}):null]})}))),nt=Object(s.b)((function(e){return{user:e.auth.user,bands:e.bands}}),{createBand:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.post("/bands",e);case 3:a=t.sent,n({type:_,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(le(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchBands:be,editBand:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.patch("/bands",Object(l.a)(Object(l.a)({},e),{},{currentBand:t}));case 3:r=n.sent,a({type:H,payload:r.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a(le(n.t0));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},deleteBand:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.post("/bands/delete",{currentBand:e});case 3:(a=t.sent).data.tiers.forEach((function(e){n(ve(e,a.data.id))})),n({type:Q,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(le(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},signOut:de})((function(e){var t=e.user,n=e.bands,r=e.createBand,i=e.fetchBands,c=e.editBand,s=e.deleteBand,o=e.signOut;Object(a.useEffect)((function(){i()}),[]);return t?Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)("div",{className:"user-header",children:[Object(Ee.jsxs)("div",{className:"user-header-sub",children:[Object(Ee.jsxs)("h1",{className:"user-title",children:[t.username,"'s bands"]}),Object(Ee.jsx)(Me,{onSubmit:function(e){return r(e)},title:"Create a Band",image:"images/add.png",fields:[{label:"Band Name",name:"bandName",type:"input"}]})]}),Object(Ee.jsxs)("div",{className:"user-header-sub",children:[Object(Ee.jsx)(Ie.a,{className:"user-link",to:"/",children:"Home"}),Object(Ee.jsx)("div",{className:"user-link",onClick:o,children:"Sign Out"})]})]}),Object(Ee.jsx)("hr",{}),Object(Ee.jsx)("div",{className:"row band-list",children:function(){var e=t.bands.map((function(e){return n[e]}));return e.length&&e[0]?e.map((function(e){if(e)return Object(Ee.jsxs)("div",{className:"band-item",children:[Object(Ee.jsx)(Ie.a,{to:"/".concat(e.url),children:Object(Ee.jsx)("h2",{children:e.name})}),Object(Ee.jsxs)("div",{className:"band-buttons",children:[Object(Ee.jsx)(Me,{onSubmit:function(t){return c(t,e.id)},title:"Edit ".concat(e.name),image:"images/edit.png",fields:[{label:"Band Name",name:"name",type:"input"}],initialValues:{name:e.name},enableReinitialize:!0,form:"edit-band-".concat(e.id)}),Object(Ee.jsx)(ze,{onSubmit:function(){return s(e.id)},displayName:e.name})]})]},e.id)})):Object(Ee.jsx)("h3",{children:"No bands belong to this user"})}()})]}):null})),at=function(e){Object(De.a)(n,e);var t=Object(_e.a)(n);function n(){var e;Object(Pe.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderInput=function(e){var t=e.input,n=e.label,a=(e.meta,e.type),r=e.autoComplete;e.defaultValue;return Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)("label",{children:n}),Object(Ee.jsx)("input",Object(l.a)({type:a,autoComplete:r},t))]})},e.submitForm=function(t){e.props.onSubmit(t)},e}return Object(Ae.a)(n,[{key:"render",value:function(){return Object(Ee.jsxs)("form",{className:"signin",onSubmit:this.props.handleSubmit(this.submitForm),children:[Object(Ee.jsx)(Fe.a,{name:"username",component:this.renderInput,label:"Username: ",type:"text",autoComplete:"username"}),Object(Ee.jsx)(Fe.a,{name:"password",component:this.renderInput,label:"Passwyrd: ",type:"password",autoComplete:"current-password"}),Object(Ee.jsx)("button",{className:"signin-submit",children:"Submit"})]})}}]),n}(r.a.Component),rt=Object(Re.a)({form:"userForm"})(at),it=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.post("/signin",e);case 3:a=t.sent,localStorage.setItem("token",a.data.token),n({type:v,payload:a.data.user}),se.push("/user"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(le(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.signIn,n=e.isSignedIn;return Object(a.useEffect)((function(){n&&se.push("/user")}),[]),Object(Ee.jsxs)("div",{className:"auth",children:[Object(Ee.jsx)("div",{className:"help-header",children:"Exploring the Space"}),Object(Ee.jsx)("h1",{children:"Sign In"}),Object(Ee.jsx)(rt,{onSubmit:function(e){return t(e)}}),Object(Ee.jsxs)("div",{className:"home-buttons",children:[Object(Ee.jsx)(Ie.a,{to:"/",children:"Home"}),Object(Ee.jsx)(Ie.a,{to:"signup",children:"Sign Up"})]})]})})),ct=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signUp:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.post("/signup",e);case 3:a=t.sent,localStorage.setItem("token",a.data.token),n({type:v,payload:a.data.user}),se.push("/user"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(le(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.signUp,n=e.isSignedIn;return Object(a.useEffect)((function(){n&&se.push("/user")}),[]),Object(Ee.jsxs)("div",{className:"auth",children:[Object(Ee.jsx)("div",{className:"help-header",children:"Exploring the Space"}),Object(Ee.jsx)("h1",{children:"Sign Up"}),Object(Ee.jsx)(rt,{onSubmit:function(e){return t(e)}}),Object(Ee.jsxs)("div",{className:"home-buttons",children:[Object(Ee.jsx)(Ie.a,{to:"/",children:"Home"}),Object(Ee.jsx)(Ie.a,{to:"signin",children:"Sign In"})]})]})})),st=function(e){Object(De.a)(n,e);var t=Object(_e.a)(n);function n(){return Object(Pe.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchBands()}},{key:"renderBands",value:function(){return delete this.props.bands.currentBand,Object.values(this.props.bands).map((function(e){return Object(Ee.jsx)("div",{className:"band-item",children:Object(Ee.jsx)(Ie.a,{to:"/".concat(e.url),children:Object(Ee.jsx)("h2",{children:e.name})})},e.id)}))}},{key:"render",value:function(){return Object(Ee.jsxs)("div",{className:"container",children:[Object(Ee.jsx)("h1",{className:"home-header",children:"Exploring the Space"}),Object(Ee.jsxs)("div",{className:"home-buttons",children:[Object(Ee.jsx)(Ie.a,{to:"/signin",children:"Sign In"}),Object(Ee.jsx)(Ie.a,{to:"/signup",children:"Sign Up"}),Object(Ee.jsx)(Ie.a,{to:"/help",children:"What Is It?"})]}),Object(Ee.jsx)("h1",{children:"All Bands:"}),Object(Ee.jsx)("div",{className:"band-list",children:this.props.bands&&this.renderBands()})]})}}]),n}(r.a.Component),ot=Object(s.b)((function(e){return{bands:e.bands}}),{fetchBands:be})(st),ut=function(){return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)("div",{className:"home-buttons",children:[Object(Ee.jsx)(Ie.a,{to:"/",children:"Home"}),Object(Ee.jsx)(Ie.a,{to:"signin",children:"Sign In"}),Object(Ee.jsx)(Ie.a,{to:"signin",children:"Sign Up"})]}),Object(Ee.jsxs)("div",{className:"help",children:[Object(Ee.jsx)("div",{className:"help-header",children:"Exploring the Space allows you to keep track of your musical recordings in an easy to navigate catalogue."}),Object(Ee.jsx)("h1",{children:"Here's How This Works"}),Object(Ee.jsx)("div",{className:"tldr",children:"TL;DR: Bands contain Tiers, which contain Titles, which contain different versions, each of which can have one or more recordings. Bands also have Playlists which are collections of particular recordings."}),Object(Ee.jsx)("p",{children:"Each user can have 1 or more bands.  Each band has their own page."}),Object(Ee.jsx)("h2",{children:"The Band Page"}),Object(Ee.jsx)("p",{children:'The band page has a "Tiers" sections and a "Playlists" section. The tiers are used to catalogue your songs, and the playlists are used to combine different songs into a certain order.'}),Object(Ee.jsx)("h3",{children:"Tiers"}),Object(Ee.jsx)("p",{children:'A tier is a collection of songs. Tiers can be separated by different genres, songs that you\'re currently rehearsing versus songs that are still being written, or any other criteria.  Within the band page, these songs are called "Titles." Click on a tier to reveal its titles.'}),Object(Ee.jsx)("h3",{children:"Titles"}),Object(Ee.jsx)("p",{children:"Titles contain all the various versions and recordings of a particular song. On the title display, you will see the recording that is most up-to-date for this title, and a button to play it or download it. Click on the title to reveal the different versions it contains."}),Object(Ee.jsx)("h3",{children:"Versions"}),Object(Ee.jsx)("p",{children:'A version categorizes groups of recordings, and again you can use whatever criteria you want.  Maybe one version is band practice, and the other is a recording you\'re working on.  Each version contains one or more recordings, or "Bounces." One and only one version for each title is the "current" version.'}),Object(Ee.jsx)("h3",{children:"Bounces"}),Object(Ee.jsx)("p",{children:'Bounces are the root component of a song, and they represent a particular recording.  They are represented by a date. Like versions, one bounce per version is designated "current."'}),Object(Ee.jsx)("h3",{children:"Playlists"}),Object(Ee.jsx)("p",{children:"Playlists are where you can make ordered lists of particular bounces.  Each title has a display of its currently selected version and bounce, along with a button to add that recording to a playlist (you have to create the playlist first)."}),Object(Ee.jsx)("p",{children:"If you change the version or bounce you're listening to, the song in the playlist will remain the same one you originally added. If you want to change which version and/or bounce a song in a playlist represents, you can change that by editing it within the playlist."}),Object(Ee.jsx)("h2",{children:"Controls"}),Object(Ee.jsx)("p",{children:"If you are on a band page of a band you own, you will see additional buttons where you can modify the catalogue and upload new recordings."}),Object(Ee.jsx)("p",{className:"danger",children:"If you delete an element, everything contained within that element will be deleted!"}),Object(Ee.jsx)("a",{href:"https://github.com/andytisdall/greenhouse",children:"Github for this project"})]})]})},lt=Object(s.b)((function(e){return{signedIn:e.auth.isSignedIn,error:e.error.error}}),{fetchUser:function(){return function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.get("/user");case 3:(n=e.sent).data?t({type:v,payload:n.data}):t(de()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(le(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.signedIn,n=e.fetchUser,r=e.error;Object(a.useEffect)((function(){t&&n()}),[]);var i=r?"error-margin":"";return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(Be,{}),Object(Ee.jsx)("div",{className:"container ".concat(i),children:Object(Ee.jsx)(d.b,{history:se,children:Object(Ee.jsxs)(d.c,{children:[Object(Ee.jsx)(d.a,{path:"/",exact:!0,component:ot}),Object(Ee.jsx)(d.a,{path:"/signin",exact:!0,component:it}),";",Object(Ee.jsx)(d.a,{path:"/signup",exact:!0,component:ct}),";",Object(Ee.jsx)(d.a,{path:"/user",exact:!0,render:function(e){return t?Object(Ee.jsx)(nt,Object(l.a)({},e)):(se.push("/signin"),null)}}),Object(Ee.jsx)(d.a,{path:"/help",exact:!0,component:ut}),Object(Ee.jsx)(d.a,{path:"/:bandName",component:tt})]})})})]})})),dt=n(240),pt={isSignedIn:!1,user:null},bt={play:!1,volume:75,currentSong:null},jt=Object(o.c)({form:dt.a,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(l.a)(Object(l.a)({},e),{},{isSignedIn:!0,user:t.payload});case y:return Object(l.a)(Object(l.a)({},e),{},{isSignedIn:!1,user:null});case _:var n=e.user;return n.bands.push(t.payload.id),Object(l.a)(Object(l.a)({},e),{},{user:n});default:return e}},tiers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(l.a)(Object(l.a)({},e),ue.a.mapKeys(t.payload,"id"));case C:return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.id,t.payload));case F:var n=e[t.payload.id].position,a=t.payload.position,r={};if(n>a)for(var i=0,c=Object.values(e);i<c.length;i++){var s=c[i];if(s.position>=a&&s.position<n){var o=s.position;r[s.id]=Object(l.a)(Object(l.a)({},s),{},{position:o+1})}}if(n<a)for(var u=0,d=Object.values(e);u<d.length;u++){var p=d[u];if(p.position>n&&p.position<=a){var b=p.position;r[p.id]=Object(l.a)(Object(l.a)({},p),{},{position:b-1})}}return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.id,t.payload),r);case Y:var j=Object.values(ue.a.omit(e,e.currentBand)).filter((function(e){return e.position>t.payload.position}));return j.forEach((function(e){e.position=e.position-1})),delete e[t.payload.id],Object(l.a)(Object(l.a)({},e),ue.a.mapKeys(j,"id"));case L:var f=e[t.payload.tier];return f.trackList.push(t.payload.title.id),Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},f.id,f));case W:var h=e[t.payload.tier];if(h){var O=h.trackList.filter((function(e){return e!==t.payload.title.id}));return h.trackList=O,Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},h.id,h))}default:return e}},titles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(l.a)(Object(l.a)({},e),ue.a.mapKeys(t.payload,"id"));case L:return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.title.id,t.payload.title));case M:return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.id,t.payload));case W:return delete e[t.payload.title.id],Object(l.a)({},e);case re:var n=e[t.payload.titleId];return n.selectedVersion=t.payload.version,Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},n.id,n));case ie:var a=e[t.payload.titleId];return a.selectedBounce=t.payload.bounce,Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},a.id,a));case A:var r=e[t.payload.title];return r.versions.push(t.payload.version.id),Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},r.id,r));case X:var i=e[t.payload.title];if(i){var c=i.versions.filter((function(e){return e!==t.payload.version.id}));return i.versions=c,Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},i.id,i))}default:return e}},versions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(l.a)(Object(l.a)({},e),ue.a.mapKeys(t.payload,"id"));case A:return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.version.id,t.payload.version));case q:return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.id,t.payload));case X:return delete e[t.payload.version.id],Object(l.a)({},e);case D:var n=e[t.payload.version];return n.bounces.push(t.payload.bounce.id),Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},n.id,n));case J:var a=e[t.payload.version];if(a){var r=a.bounces.filter((function(e){return e!==t.payload.bounce.id}));return a.bounces=r,Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},a.id,a))}default:return e}},bounces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(l.a)(Object(l.a)({},e),ue.a.mapKeys(t.payload,"id"));case D:return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.bounce.id,t.payload.bounce));case z:return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.id,t.payload));case J:return delete e[t.payload.bounce.id],Object(l.a)({},e);default:return e}},playlists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(l.a)(Object(l.a)({},e),ue.a.mapKeys(t.payload,"id"));case w:case P:return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.id,t.payload));case R:var n=e[t.payload.id].position,a=t.payload.position,r={};if(n>a)for(var i=0,c=Object.values(e);i<c.length;i++){var s=c[i];if(s.position>=a&&s.position<n){var o=s.position;r[s.id]=Object(l.a)(Object(l.a)({},s),{},{position:o+1})}}if(n<a)for(var u=0,d=Object.values(e);u<d.length;u++){var p=d[u];if(p.position>n&&p.position<=a){var b=p.position;r[p.id]=Object(l.a)(Object(l.a)({},p),{},{position:b-1})}}return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.id,t.payload),r);case G:delete e.currentBand;var j=Object.values(e).filter((function(e){return e.position>t.payload.position}));return j.forEach((function(e){e.position=e.position-1})),delete e[t.payload.id],Object(l.a)(Object(l.a)({},e),ue.a.mapKeys(j,"id"));case V:var f=e[t.payload.playlist];return f.songs.push(t.payload.playlistsong.id),Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},f.id,f));case K:var h=e[t.payload.playlist];if(h){var O=h.songs.filter((function(e){return e!==t.payload.playlistsong.id}));return h.songs=O,Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},h.id,h))}default:return e}},playlistSongs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(l.a)(Object(l.a)({},e),ue.a.mapKeys(t.payload,"id"));case V:return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.playlistsong.id,t.payload.playlistsong));case U:var n=e[t.payload.id].position,a=t.payload.position,r={};if(n>a)for(var i=0,c=Object.values(e);i<c.length;i++){var s=c[i];if(s.position>=a&&s.position<n){var o=s.position;r[s.id]=Object(l.a)(Object(l.a)({},s),{},{position:o+1})}}if(n<a)for(var u=0,d=Object.values(e);u<d.length;u++){var p=d[u];if(p.position>n&&p.position<=a){var b=p.position;r[p.id]=Object(l.a)(Object(l.a)({},p),{},{position:b-1})}}return Object(l.a)(Object(l.a)({},e),{},Object(Ce.a)({},t.payload.id,t.payload),r);case K:var j=Object.values(e).filter((function(e){return e.position>t.payload.playlistsong.position}));return j.forEach((function(e){e.position=e.position-1})),delete e[t.payload.playlistsong.id],Object(l.a)({},e);case X:for(var f in e)e[f].version===t.payload.version.id&&(e[f].version=null,e[f].bounce=null);return Object(l.a)({},e);case J:for(var h in e)e[h].bounce===t.payload.bounce.id&&(e[h].bounce=null);return Object(l.a)({},e);default:return e}},bands:function(){var e,t,n,a,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;switch(c.type){case k:return Object(l.a)(Object(l.a)({},i),{},(e={},Object(Ce.a)(e,c.payload.id,c.payload),Object(Ce.a)(e,"currentBand",c.payload),e));case E:return Object(l.a)(Object(l.a)({},i),ue.a.mapKeys(c.payload,"id"));case _:case H:return Object(l.a)(Object(l.a)({},i),{},Object(Ce.a)({},c.payload.id,c.payload));case Q:return delete i[c.payload.id],Object(l.a)({},i);case C:var s=i.currentBand;return s.tiers.push(c.payload.id),Object(l.a)(Object(l.a)({},i),{},(t={},Object(Ce.a)(t,s.id,s),Object(Ce.a)(t,"currentBand",s),t));case Y:var o=i.currentBand,u=o.tiers.filter((function(e){return e!==c.payload.id}));return o.tiers=u,Object(l.a)(Object(l.a)({},i),{},(n={},Object(Ce.a)(n,o.id,o),Object(Ce.a)(n,"currentBand",o),n));case P:var d=i.currentBand;return d.playlists.push(c.payload.id),Object(l.a)(Object(l.a)({},i),{},(a={},Object(Ce.a)(a,d.id,d),Object(Ce.a)(a,"currentBand",d),a));case G:var p=i.currentBand,b=p.playlists.filter((function(e){return e!==c.payload.id}));return p.playlists=b,Object(l.a)(Object(l.a)({},i),{},(r={},Object(Ce.a)(r,p.id,p),Object(Ce.a)(r,"currentBand",p),r));case y:return ue.a.omit(i,i.currentBand);default:return i}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.payload&&console.log(t.payload),{error:t.payload};default:return e}},audio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return Object(l.a)(Object(l.a)({},e),{},{play:!0,pause:!1});case $:return Object(l.a)(Object(l.a)({},e),{},{play:!1,pause:!0});case ee:var n=t.payload,a=n.song,r=n.parent;return Object(l.a)(Object(l.a)({},e),{},{currentSong:a,play:!0,parent:r});case te:return Object(l.a)(Object(l.a)({},e),{},{currentSong:t.payload});case J:return e.currentSong&&t.payload.bounce.id===e.currentSong.audio?Object(l.a)({},bt):e;case ne:return Object(l.a)(Object(l.a)({},e),{},{volume:t.payload});case ae:return Object(l.a)({},bt);default:return e}}}),ft={};localStorage.getItem("token")&&(ft.auth={isSignedIn:!0});var ht=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,Ot=Object(o.e)(jt,ft,ht(Object(o.a)(u.a)));c.a.render(Object(Ee.jsx)(s.a,{store:Ot,children:Object(Ee.jsx)(lt,{})}),document.querySelector("#root"))}},[[237,1,2]]]);
//# sourceMappingURL=main.f54733db.chunk.js.map