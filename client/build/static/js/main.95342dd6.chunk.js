(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{238:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(37),i=n.n(c),s=n(7),o=n(15),u=n(108),l=n(2),d=n(14),p=n(4),b=n.n(p),j=n(10),f=n(56),O=n.n(f),h={baseURL:"https://exploring-the-space.com/api"},m=O.a.create(h);m.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)}));var v=m,y="SIGN_IN",x="SIGN_OUT",g="ERROR",N="FETCH_TIERS",S="FETCH_PLAYLISTSONGS",k="FETCH_PLAYLIST",w="FETCH_PLAYLISTS",E="FETCH_BAND",B="FETCH_BANDS",T="FETCH_TITLES",I="FETCH_VERSIONS",C="FETCH_BOUNCES",V="CREATE_TIER",A="CREATE_PLAYLISTSONG",L="CREATE_TITLE",P="CREATE_PLAYLIST",D="CREATE_VERSION",_="CREATE_BOUNCE",F="CREATE_BAND",q="EDIT_TIER",U="EDIT_PLAYLIST",R="EDIT_PLAYLISTSONG",M="EDIT_TITLE",z="EDIT_VERSION",Y="EDIT_BOUNCE",H="EDIT_BAND",K="DELETE_TIER",G="DELETE_PLAYLIST",W="DELETE_PLAYLISTSONG",X="DELETE_TITLE",J="DELETE_VERSION",Q="DELETE_BOUNCE",Z="DELETE_BAND",$="PLAY_AUDIO",ee="PAUSE_AUDIO",te="QUEUE_SONGS",ne="NEXT_SONG",ae="CHANGE_VOLUME",re="INITIALIZE_AUDIO",ce="SELECT_VERSION",ie="SELECT_BOUNCE",se=n(18),oe=Object(se.a)(),ue=n(8),le=n.n(ue),de=function(e){var t;return t=e.response?e.response.data.error:e.message,{type:g,payload:t}},pe=function(){return localStorage.removeItem("token"),oe.push("/"),{type:x}},be=function(e){return{type:g,payload:e}},je=function(){return function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.get("/bands");case 3:n=e.sent,t({type:B,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(de(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},fe=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.get("/versions/".concat(e));case 3:a=t.sent,n({type:I,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(de(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Oe=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.get("/bounces/".concat(e));case 3:a=t.sent,n({type:C,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(de(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=a().bands.currentBand,t.next=4,v.post("/tiers",Object(l.a)(Object(l.a)({},e),{},{currentBand:r.id}));case 4:c=t.sent,n({type:V,payload:c.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(de(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()},me=function e(t,n,a){return function(){var r=Object(j.a)(b.a.mark((function r(c,i){var s,o,u,d,p,j;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=i().bands.currentBand,(o=i().versions[n]).current&&(t.current=!0),r.next=6,v.patch("/versions/".concat(n),Object(l.a)(Object(l.a)({},t),{},{currentBand:s.id}));case 6:(u=r.sent).data.current&&!o.current&&(d=i().titles[a],p=d.versions.map((function(e){return i().versions[e]})),(j=p.find((function(e){return e.current}))).current=!1,c(e(le.a.pick(j,"name","notes","current"),j.id,a))),c({type:z,payload:u.data}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),c(de(r.t0));case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e,t){return r.apply(this,arguments)}}()},ve=function e(t,n,a){return function(){var r=Object(j.a)(b.a.mark((function r(c,i){var s,o,u,d;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s=i().bands.currentBand,(o=i().bounces[n]).latest&&(t.latest=!0),!t.file){r.next=12;break}t.file=t.file[0],(u=new FileReader).onload=function(r){(new(window.AudioContext||window.webkitAudioContext)).decodeAudioData(r.target.result,function(){var r=Object(j.a)(b.a.mark((function r(u){var d,p,j,f,O,h,m,y;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(f in d=parseInt(u.duration),p=Object(l.a)(Object(l.a)({},t),{},{currentBand:s.id,duration:d}),j=new FormData,p)j.append(f,p[f]);return r.next=6,v.post("/bounces".concat(n),j,{headers:{"Content-Type":"multipart/form-data"}});case 6:(O=r.sent).data.latest&&!o.latest&&(h=i().versions[a],m=h.bounces.map((function(e){return i().bounces[e]})),(y=m.find((function(e){return e.latest}))).latest=!1,c(e(le.a.pick(y,"date","comments","latest"),y.id,a))),c({type:Y,payload:O.data});case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},u.onerror=function(e){console.error("An error ocurred reading the file: ",e)},u.readAsArrayBuffer(t.file),r.next=16;break;case 12:return r.next=14,v.patch("/bounces/".concat(n),Object(l.a)(Object(l.a)({},t),{},{currentBand:s.id}));case 14:d=r.sent,c({type:Y,payload:d.data});case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(0),c(de(r.t0));case 21:case"end":return r.stop()}}),r,null,[[0,18]])})));return function(e,t){return r.apply(this,arguments)}}()},ye=function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().bands.currentBand,t.prev=1,t.next=4,v.post("/tiers/delete",{tierId:e,currentBand:r.id});case 4:(c=t.sent).data.trackList.forEach((function(e){n(xe(e,c.data.id))})),n({type:K,payload:c.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(de(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()},xe=function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var c,i,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r().bands.currentBand,n.prev=1,n.next=4,v.post("/titles/delete",{titleId:e,tierId:t,currentBand:c.id});case 4:(i=n.sent).data.versions.forEach((function(e){a(ge(e,i.data.id))})),s=Object.values(r().playlists),Object.values(r().playlistSongs).filter((function(t){return t.title===e})).forEach((function(e){var t=s.find((function(t){return t.songs.includes(e.id)}));a(Se(e.id,t.id))})),a({type:X,payload:{title:i.data,tier:t}}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a(de(n.t0));case 15:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e,t){return n.apply(this,arguments)}}()},ge=function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var c,i,s,o,u;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r().bands.currentBand,n.prev=1,n.next=4,v.post("/versions/delete",{versionId:e,titleId:t,currentBand:c.id});case 4:(i=n.sent).data.current&&(s=r().titles[t])&&((o=s.versions.filter((function(t){return t!==e}))).length?((u=r().versions[o[o.length-1]]).current=!0,a(we(u.id,t)),a(me(le.a.pick(u,"name","notes","current"),u.id,t))):a(we(null,t))),i.data.bounces.forEach((function(e){a(Ne(e,i.data.id,t))})),a({type:J,payload:{version:i.data,title:t}}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),a(de(n.t0));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e,t){return n.apply(this,arguments)}}()},Ne=function(e,t,n){return function(){var a=Object(j.a)(b.a.mark((function a(r,c){var i,s,o,u,l;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=c().bands.currentBand,a.prev=1,a.next=4,v.post("/bounces/delete",{bounceId:e,versionId:t,currentBand:i.id});case 4:(s=a.sent).data.latest&&(o=c().versions[t])&&((u=o.bounces.filter((function(t){return t!==e}))).length?((l=c().bounces[u[u.length-1]]).latest=!0,r(Ee(l.id,n)),r(ve(le.a.pick(l,"date","comments","latest"),l.id,t))):r(Ee(null,n))),r({type:Q,payload:{bounce:s.data,version:t}}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),r(de(a.t0));case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e,t){return a.apply(this,arguments)}}()},Se=function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var c,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r().bands.currentBand,n.prev=1,n.next=4,v.post("/playlistsongs/delete",{playlistSongId:e,playlistId:t,currentBand:c.id});case 4:i=n.sent,a({type:W,payload:{playlistsong:i.data,playlist:t}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a(de(n.t0));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}()},ke=function(){return{type:$}},we=function(e,t){return{type:ce,payload:{version:e,titleId:t}}},Ee=function(e,t){return{type:ie,payload:{bounce:e,titleId:t}}},Be=n(0),Te=Object(s.b)((function(e){return{error:e.error.error}}),{throwError:be})((function(e){var t=e.error,n=e.throwError;return t?Object(Be.jsx)("div",{className:"error",onClick:function(){return n(null)},children:t}):null})),Ie=n(11),Ce=n(27),Ve=n(6),Ae=n(30),Le=n.n(Ae),Pe=n(22),De=n(23),_e=n(25),Fe=n(24),qe=n(240),Ue=n(239),Re=function(e){Object(_e.a)(n,e);var t=Object(Fe.a)(n);function n(e){var a;return Object(Pe.a)(this,n),(a=t.call(this,e)).state={boxVisible:!1,selectedOption:null},a.blockSpaceBarPress=function(e){e.stopPropagation()},a.bodyClick=function(e){a.ref.current&&a.ref.current.contains(e.target)||a.state.boxVisible&&a.setState({boxVisible:!1})},a.showOptions=function(e){return e.options.map((function(e){return Object(Be.jsx)("option",{value:e.value,children:e.display},e.value)}))},a.onDrop=function(e,t){var n=e.target.files[0];(0,t.onChange)(n)},a.input=function(e){var t="";return"date"===e.type&&(t="calendar"),"file"===e.type?(delete e.input.value,Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsx)("div",{className:"form-errors",children:e.meta.touched&&e.meta.error&&Object(Be.jsxs)("p",{children:[e.meta.error,Object(Be.jsx)("span",{children:"\u2193"})]})}),Object(Be.jsx)("input",Object(l.a)(Object(l.a)({},e.input),{},{type:"file",className:"inputfile",onDrop:function(t){return a.onDrop(t,e.input)}}))]})):"select"===e.type?Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsx)("div",{className:"form-errors",children:e.meta.touched&&e.meta.error&&Object(Be.jsxs)("p",{children:[e.meta.error,Object(Be.jsx)("span",{children:"\u2193"})]})}),Object(Be.jsx)("select",Object(l.a)(Object(l.a)({},e.input),{},{autoFocus:e.autoFocus,type:e.type,children:e.options?a.showOptions(e):null}))]}):Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsx)("div",{className:"form-errors",children:e.meta.touched&&e.meta.error&&Object(Be.jsxs)("p",{children:[e.meta.error,Object(Be.jsx)("span",{children:"\u2193"})]})}),Object(Be.jsx)("input",Object(l.a)(Object(l.a)({},e.input),{},{autoFocus:e.autoFocus,type:e.type,className:"text-input ".concat(t)}))]})},a.required=function(e){return e?void 0:"Required"},a.showFields=function(){return a.props.fields.map((function(e,t){var n=0===t,r=a.input;return Object(Be.jsxs)("div",{children:[Object(Be.jsxs)("label",{children:[e.label,": "]}),Object(Be.jsx)(qe.a,{name:e.name,component:r,autoFocus:n,type:e.type,validate:e.required?a.required:null,options:e.options,children:e.options?a.showOptions(e):null})]},e.label)}))},a.submitForm=function(e){a.props.onSubmit(e),a.setState({boxVisible:!1}),a.props.reset()},a.showBox=function(){if(a.state.boxVisible){a.props.addClass&&"addbox add-bounce";var e=a.props.addClass?"add-bounce":"";return Object(Be.jsx)(Be.Fragment,{children:Object(Be.jsxs)("div",{className:"addbox ".concat(e),onClick:function(e){return e.stopPropagation()},children:[Object(Be.jsx)("h3",{className:"addbox-title",children:a.props.title}),Object(Be.jsxs)("form",{onSubmit:a.props.handleSubmit(a.submitForm),children:[a.showFields(),Object(Be.jsx)("div",{className:"submit-button-centered",children:Object(Be.jsx)("button",{className:"submit-button",type:"submit",children:"OK"})})]})]})})}},a.click=function(e){e.stopPropagation(),a.ref.current&&a.ref.current===e.target||(a.state.boxVisible?a.setState({boxVisible:!1}):a.setState({boxVisible:!0}))},a.ref=r.a.createRef(),a}return Object(De.a)(n,[{key:"componentDidUpdate",value:function(e,t){!1===t.boxVisible&&!0===this.state.boxVisible?(document.addEventListener("click",this.bodyClick,{capture:!0}),document.addEventListener("keydown",this.blockSpaceBarPress,{capture:!0})):!0===t.boxVisible&&!1===this.state.boxVisible&&(document.removeEventListener("click",this.bodyClick,{capture:!0}),document.removeEventListener("keydown",this.blockSpaceBarPress,{capture:!0}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.bodyClick,{capture:!0}),document.removeEventListener("keydown",this.blockSpaceBarPress,{capture:!0})}},{key:"render",value:function(){return Object(Be.jsx)(Be.Fragment,{children:Object(Be.jsxs)("div",{className:"add",onClick:this.click,ref:this.ref,children:[Object(Be.jsx)("img",{src:this.props.image}),this.showBox()]})})}}]),n}(r.a.Component),Me=Object(Ue.a)({form:"form"})(Re),ze=function(e){Object(_e.a)(n,e);var t=Object(Fe.a)(n);function n(){return Object(Pe.a)(this,n),t.apply(this,arguments)}return Object(De.a)(n,[{key:"componentDidMount",value:function(){document.querySelector(".container").classList.add("modal-active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".container").classList.remove("modal-active")}},{key:"render",value:function(){return i.a.createPortal(Object(Be.jsx)("div",{onClick:this.props.onDismiss,className:"dimmer",children:Object(Be.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"modal-box",children:[Object(Be.jsx)("div",{children:this.props.content}),Object(Be.jsx)("div",{children:this.props.actions})]})}),document.querySelector("#modal"))}}]),n}(r.a.Component),Ye=function(e){var t=e.onSubmit,n=e.displayName,r=Object(a.useState)(!1),c=Object(Ie.a)(r,2),i=c[0],s=c[1];return Object(Be.jsxs)("div",{children:[Object(Be.jsx)("img",{src:"/images/delete.png",className:"delete",onClick:function(e){e.stopPropagation(),s(!0)}}),i&&Object(Be.jsx)(ze,{content:"Seriously delete ".concat(n,"?"),actions:Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsx)("button",{className:"modal-button",onClick:function(){t(),s(!1)},children:"Delete"}),Object(Be.jsx)("button",{className:"modal-button",onClick:function(){return s(!1)},children:"No Wait"})]}),onDismiss:function(){return s(!1)}})]})},He=function(e){var t=function(t){Object(_e.a)(a,t);var n=Object(Fe.a)(a);function a(e){var t;return Object(Pe.a)(this,a),(t=n.call(this,e)).state={authorized:!1},t.handleUpdate=function(){t.checkAuth()},t}return Object(De.a)(a,[{key:"componentDidMount",value:function(){this.checkAuth()}},{key:"checkAuth",value:function(){this.props.user&&this.props.currentBand&&this.props.user.bands.includes(this.props.currentBand.id)&&this.setState({authorized:!0})}},{key:"render",value:function(){return Object(Be.jsx)(e,Object(l.a)(Object(l.a)({},this.props),{},{authorized:this.state.authorized,handleUpdate:this.handleUpdate}))}}]),a}(r.a.Component);return Object(s.b)((function(e){return{user:e.auth.user,currentBand:e.bands.currentBand}}))(t)},Ke=Object(s.b)(null,{selectBounce:Ee,createBounce:function(e,t,n){return function(){var a=Object(j.a)(b.a.mark((function a(r,c){var i,s,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{i=c().bands.currentBand,(s=c().versions[t]).bounces.length||(e.latest=!0),e.file=e.file[0],(o=new FileReader).onload=function(a){(new(window.AudioContext||window.webkitAudioContext)).decodeAudioData(a.target.result,function(){var a=Object(j.a)(b.a.mark((function a(o){var u,d,p,j,f,O,h;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(j in u=parseInt(o.duration),d=Object(l.a)(Object(l.a)({},e),{},{currentBand:i.id,version:t,duration:u}),p=new FormData,d)p.append(j,d[j]);return a.next=6,v.post("/bounces",p,{headers:{"Content-Type":"multipart/form-data"}});case 6:(f=a.sent).data.latest&&(s.bounces.length&&(O=s.bounces.map((function(e){return c().bounces[e]})),(h=O.find((function(e){return e.latest}))).latest=!1,r(ve(le.a.pick(h,"date","comments","latest"),h.id,t))),r({type:ie,payload:{titleId:n,bounce:f.data}})),r({type:_,payload:{bounce:f.data,version:t}});case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},o.onerror=function(e){console.error("An error ocurred reading the file: ",e)},o.readAsArrayBuffer(e.file)}catch(u){r(de(u))}case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},editBounce:ve,deleteBounce:Ne})(He((function(e){var t=e.bounces,n=e.selectBounce,r=e.title,c=e.authorized,i=e.version,s=e.createBounce,o=e.editBounce,u=e.deleteBounce,d=Object(a.useState)(r.selectedBounce),p=Object(Ie.a)(d,2),b=p[0],j=p[1],f=Object(a.useState)(!1),O=Object(Ie.a)(f,2),h=O[0],m=O[1];Object(a.useEffect)((function(){b&&b!==r.selectedBounce&&n(b,r.id)}),[b]),Object(a.useEffect)((function(){b&&b!==r.selectedBounce&&n(r.selectedBounce,r.id)}),[r.selectedBounce]),Object(a.useEffect)((function(){j(r.selectedBounce),m(!1)}),[t]);var v=function(e){return Le.a.utc(e).format("MM/DD/yy")},y=function(){if(t[0]){var e=t.filter((function(e){return e.id!==b.id}));return e.sort((function(e,t){return e.date<t.date?1:-1})),e.map((function(e){var t=e.latest?Object(Be.jsx)("span",{className:"list-current",children:" * current"}):null;return Object(Be.jsxs)("div",{className:"dropdown-link change-song",onClick:function(){return j(e)},children:[v(e.date),t]},e.id)}))}},x=function(){if(b.latest)return Object(Be.jsx)("div",{className:"latest",children:"Current Bounce"})},g=function(){var e;return e=1===t.length?"1 Bounce:":"".concat(t.length," Bounces:"),Object(Be.jsx)("h5",{children:e})};return h?Object(Be.jsx)("div",{className:"detail-box bounce",children:Object(Be.jsxs)("div",{className:"upload-image",children:[Object(Be.jsx)("p",{children:"Uploading..."}),Object(Be.jsx)("img",{className:"windmill",src:"/images/windmill.gif"})]})}):i?Object(Be.jsxs)("div",{className:"detail-box bounce",children:[b?Object(Be.jsxs)("div",{className:"detail-content",children:[Object(Be.jsxs)("div",{className:"detail-header",children:[g(),Object(Be.jsxs)("div",{className:"dropdown",children:[Object(Be.jsx)("button",{className:"dropbtn",children:v(b.date)}),Object(Be.jsx)("div",{className:"dropdown-content",children:y()})]}),Object(Be.jsx)("div",{children:x()})]}),Object(Be.jsx)("div",{className:"detail-notes",children:b.comments})]}):Object(Be.jsx)("div",{className:"detail-content",children:Object(Be.jsx)("div",{className:"detail-header",children:Object(Be.jsx)("h5",{children:"No Bounces for this Version"})})}),Object(Be.jsxs)("div",{className:"detail-buttons",children:[function(){if(c)return Object(Be.jsx)(Me,{title:"Add a Bounce of ".concat(i.name),image:"images/add.png",fields:[{label:"File",name:"file",type:"file",required:!0},{label:"Date",name:"date",type:"date",required:!0},{label:"Comments",name:"comments",type:"textarea"},{label:"Latest Bounce?",name:"latest",type:"checkbox"}],onSubmit:function(e){return function(e){s(e,i.id,r.id),m(!0)}(e)},form:"add-bounce-".concat(r.id),initialValues:{latest:!0},addClass:!0})}(),b&&function(){if(c)return Object(Be.jsx)(Me,{title:"Edit this Bounce",image:"images/edit.png",fields:[{label:"File",name:"file",type:"file"},{label:"Date",name:"date",type:"date"},{label:"Comments",name:"comments",type:"textarea"},{label:"Current Bounce?",name:"latest",type:"checkbox"}],onSubmit:function(e){return o(e,b.id,i.id)},initialValues:Object(l.a)(Object(l.a)({},le.a.pick(b,"comments","latest")),{},{date:Le.a.utc(b.date).format("YYYY-MM-DD")}),form:"edit-bounce-".concat(r.id),enableReinitialize:!0,addClass:!0})}(),b&&function(){if(c)return Object(Be.jsx)(Ye,{onSubmit:function(){return u(b.id,i.id,r.id)},displayName:v(b.date)})}()]})]}):null}))),Ge=Object(s.b)((function(e){return{bounces:e.bounces}}),{fetchBounces:Oe,selectVersion:we,createVersion:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var c,i,s,o,u;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=r().bands.currentBand,(i=r().titles[t]).versions.length||(e.current=!0),n.next=6,v.post("/versions",Object(l.a)(Object(l.a)({},e),{},{currentBand:c.id,title:t}));case 6:(s=n.sent).data.current&&(i.versions.length&&(o=i.versions.map((function(e){return r().versions[e]})),(u=o.find((function(e){return e.current}))).current=!1,a(me(le.a.pick(u,"name","notes","current"),u.id,t))),a({type:ce,payload:{titleId:t,version:s.data}})),a({type:D,payload:{version:s.data,title:t}}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a(de(n.t0));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},editVersion:me,deleteVersion:ge})(He((function(e){var t=e.versions,n=e.bounces,r=e.fetchBounces,c=e.selectVersion,i=e.title,s=e.createVersion,o=e.authorized,u=e.editVersion,l=e.deleteVersion,d=Object(a.useState)(i.selectedVersion),p=Object(Ie.a)(d,2),b=p[0],j=p[1],f=Object(a.useState)(null),O=Object(Ie.a)(f,2),h=O[0],m=O[1];Object(a.useEffect)((function(){b&&(r(b.id),c(b,i.id),m(b.bounces.map((function(e){return n[e]}))))}),[b]),Object(a.useEffect)((function(){b&&m(b.bounces.map((function(e){return n[e]})))}),[n]),Object(a.useEffect)((function(){b!==i.selectedVersion&&j(i.selectedVersion)}),[t,i.selectedVersion]);var v=function(){var e;return e=1===t.length?"1 Version:":"".concat(t.length," Versions:"),Object(Be.jsx)("h5",{children:e})},y=function(){if(b.current)return Object(Be.jsx)("div",{className:"current",children:"Current Version"})};return Object(Be.jsxs)("div",{className:"version-container",children:[Object(Be.jsxs)("div",{className:"detail-box",children:[b?Object(Be.jsxs)("div",{className:"detail-content",children:[Object(Be.jsxs)("div",{className:"detail-header",children:[v(),Object(Be.jsxs)("div",{className:"dropdown",children:[Object(Be.jsx)("button",{className:"dropbtn",children:b.name}),Object(Be.jsx)("div",{className:"dropdown-content",children:t.filter((function(e){return e.id!==b.id})).map((function(e){var t=e.current?Object(Be.jsx)("span",{className:"list-current",children:" * current"}):null;return Object(Be.jsxs)("div",{className:"dropdown-link change-version",onClick:function(){return j(e)},children:[e.name,t]},e.id)}))})]}),y()]}),Object(Be.jsx)("div",{className:"detail-notes",children:b.notes})]}):Object(Be.jsx)("div",{className:"detail-content",children:Object(Be.jsx)("div",{className:"detail-header",children:Object(Be.jsx)("h5",{children:"No Versions for this Song Yet"})})}),Object(Be.jsxs)("div",{className:"detail-buttons",children:[function(){if(o)return Object(Be.jsx)(Me,{title:"Add a Version of ".concat(i.title),image:"images/add.png",fields:[{label:"Name",name:"name",type:"input",required:!0},{label:"Notes",name:"notes",type:"textarea"},{label:"Current Version?",name:"current",type:"checkbox"}],onSubmit:function(e){return s(e,i.id)},form:"add-version-".concat(i.id),initialValues:{current:!0},enableReinitialize:!0,addClass:!0})}(),b&&function(){if(o)return Object(Be.jsx)(Me,{title:"Edit ".concat(b.name),image:"images/edit.png",fields:[{label:"Name",name:"name",type:"input"},{label:"Notes",name:"notes",type:"textarea"},{label:"Current Version?",name:"current",type:"checkbox"}],onSubmit:function(e){return u(e,b.id,i.id)},initialValues:le.a.pick(b,"name","notes","current"),form:"edit-version-".concat(i.id),enableReinitialize:!0,addClass:!0})}(),b&&function(){if(o)return Object(Be.jsx)(Ye,{onSubmit:function(){return l(b.id,i.id)},displayName:b.name})}()]})]}),function(){if(h)return Object(Be.jsx)(Ke,{bounces:h,title:i,version:b})}()]})}))),We=n(110),Xe=n.n(We),Je=Object(s.b)(null,{queueSongs:function(e){return function(t,n){var a=e.tier.trackList.map((function(e){return n().titles[e]})),r=a.splice(a.indexOf(e.title)),c=[];r.forEach((function(e){if(e&&e.selectedVersion&&e.selectedBounce){var t=n().versions[e.selectedVersion.id],a=n().bounces[e.selectedBounce.id];c.push({title:e.title,version:t.name,date:a.date,duration:a.duration,audio:a.id})}})),t({type:te,payload:c})}},queuePlaylistSongs:function(e){return function(t,n){var a=e.playlist.songs.map((function(e){return n().playlistSongs[e]})),r=a.splice(a.indexOf(e.self)).map((function(e){var t=n().versions[e.version],a=n().bounces[e.bounce];return{title:n().titles[e.title].title,version:t.name,date:a.date,duration:a.duration,audio:a.id}}));t({type:te,payload:r})}},playAudio:ke})((function(e){var t,n=e.song,a=e.queueSongs,r=e.parentType,c=e.queuePlaylistSongs;return Object(Be.jsxs)("div",{className:"playcontainer",children:[Object(Be.jsx)("div",{className:"songtime",children:function(e){var t=Math.floor(e/60),n=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return"".concat(t,":").concat(n)}(n.bounce.duration)}),Object(Be.jsx)("div",{className:"playbutton",children:Object(Be.jsx)("img",{src:"/images/play.svg",className:"playicon",onClick:function(e){e.stopPropagation(),"tier"===r?a(n):"playlist"===r&&c(n)}})}),Object(Be.jsxs)("div",{className:"title-display",children:[Object(Be.jsx)("p",{children:n.version.name}),Object(Be.jsx)("p",{children:(t=n.bounce.date,Le.a.utc(t).format("MM/DD/YY"))})]}),Object(Be.jsx)("div",{className:"download",onClick:function(e){e.stopPropagation(),function(e,t){var n;n="https://exploring-the-space.com",O.a.get("".concat(n,"/api/audio/download/").concat(e,".mp3"),{responseType:"blob"}).then((function(e){Xe()(e.data,t)}))}(n.bounce.id,"".concat(n.title.title,"-").concat(Le.a.utc(n.bounce.date).format("MM-DD-yy"),".mp3"))},children:Object(Be.jsx)("img",{src:"/images/download.svg"})})]})})),Qe=Object(s.b)((function(e){return{versions:e.versions,bounces:e.bounces,band:e.bands.currentBand,playlists:e.playlists,titles:e.titles,audio:e.audio}}),{fetchVersions:fe,fetchBounces:Oe,selectVersion:we,selectBounce:Ee,createPlaylistSong:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var c,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=r().bands.currentBand,n.next=4,v.post("/playlistsongs",Object(l.a)(Object(l.a)({},e),{},{playlist:t,currentBand:c.id}));case 4:i=n.sent,a({type:A,payload:{playlistsong:i.data,playlist:t}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(de(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},editTitle:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var c,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=r().bands.currentBand,n.next=4,v.patch("/titles/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:c.id}));case 4:i=n.sent,a({type:M,payload:i.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(de(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteTitle:xe})(He((function(e){var t=e.tier,n=e.title,r=e.titles,c=e.fetchVersions,i=e.versions,s=e.bounces,o=e.fetchBounces,u=e.authorized,d=e.band,p=e.playlists,b=e.selectVersion,j=e.selectBounce,f=e.createPlaylistSong,O=e.editTitle,h=e.deleteTitle,m=e.getTime,v=e.audio,y=Object(a.useState)(!1),x=Object(Ie.a)(y,2),g=x[0],N=x[1],S=Object(a.useState)(null),k=Object(Ie.a)(S,2),w=k[0],E=k[1],B=Object(a.useState)(null),T=Object(Ie.a)(B,2),I=T[0],C=T[1],V=Object(a.useState)(null),A=Object(Ie.a)(V,2),L=A[0],P=A[1];Object(a.useEffect)((function(){c(n.id)}),[]),Object(a.useEffect)((function(){E(n.versions.map((function(e){return i[e]})))}),[i,n]),Object(a.useEffect)((function(){if(w&&w[0]){var e,t=w.map((function(e){return e.id}));n.selectedVersion&&t.includes(n.selectedVersion.id)?n.selectedVersion&&(e=w.includes(n.selectedVersion)?n.selectedVersion:w.find((function(e){return e.id===n.selectedVersion.id}))):e=w.find((function(e){return e.current})),b(e,n.id)}n.selectedVersion&&o(n.selectedVersion.id)}),[w]),Object(a.useEffect)((function(){n.selectedVersion&&(n.selectedVersion.bounces[0]?C(n.selectedVersion.bounces.map((function(e){return s[e]}))):(console.log("set bounce list null"),C(null),j(null,n.id)))}),[s]),Object(a.useEffect)((function(){var e;I&&I[0]?(e=n.selectedBounce&&I.includes(n.selectedBounce)?n.selectedBounce:I.find((function(e){return e.latest})))&&j(e,n.id):L&&P(null)}),[I]),Object(a.useEffect)((function(){n.selectedBounce&&n.selectedVersion?(P({tier:t,title:n,version:n.selectedVersion,bounce:n.selectedBounce}),m({id:n.id,duration:n.selectedBounce.duration})):L&&!n.selectedBounce&&(P(null),m({id:n.id,duration:0}))}),[r]);var D=g?"down-arrow":"",_=v.currentSong?v.currentSong.audio:null,F="";return _&&n.selectedBounce&&(F=_===n.selectedBounce.id?"current-song":""),Object(Be.jsxs)("div",{className:"title-margin",children:[Object(Be.jsx)("div",{className:"row title ".concat(F),children:Object(Be.jsxs)("div",{className:"marqee",onClick:function(){return N(!g)},children:[Object(Be.jsxs)("div",{className:"row-name",children:[Object(Be.jsx)("img",{className:"arrow ".concat(D),src:"/images/right-arrow.svg"}),Object(Be.jsx)("div",{className:"name-spot",children:Object(Be.jsx)("h3",{children:n.title})})]}),function(){if(L)return Object(Be.jsx)(Je,{song:L,parentType:"tier"})}(),function(){if(u){var e=d.playlists.map((function(e){return p[e]})).map((function(e){if(e)return{value:e.id,display:e.name}}));return Object(Be.jsxs)("div",{className:"tier-display",children:[L&&Object(Be.jsx)(Me,{title:"Add to a Playlist",onSubmit:function(e){return function(e){f(Object(l.a)(Object(l.a)({},e),{},{bounce:n.selectedBounce.id,version:n.selectedVersion.id,title:n.id}),e.playlistId)}(e)},image:"images/playlist.png",fields:[{type:"select",options:e,name:"playlistId",label:"Playlist"}],form:"add-to-playlist-".concat(n.id),enableReinitialize:!0}),Object(Be.jsx)(Me,{title:"Edit ".concat(n.title),image:"images/edit.png",fields:[{label:"Title",name:"title",type:"input",required:!0}],onSubmit:function(e){return O(e,n.id)},initialValues:le.a.pick(n,"title"),form:"edit-title-".concat(n.id),enableReinitialize:!0}),Object(Be.jsx)(Ye,{onSubmit:function(){return h(n.id,t.id)},displayName:n.title})]})}}()]})}),g&&Object(Be.jsx)(Ge,{versions:w,title:n})]})}))),Ze=Object(s.b)((function(e){return{titles:e.titles,band:e.bands.currentBand,tiers:e.tiers}}),{createTier:he,fetchTitles:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.get("/titles/".concat(e));case 3:a=t.sent,n({type:T,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(de(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},editTier:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var c,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=r().bands.currentBand,n.next=4,v.patch("/tiers/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:c.id}));case 4:i=n.sent,a({type:q,payload:i.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(de(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},createTitle:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var c,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r().bands.currentBand,n.prev=1,n.next=4,v.post("/titles",Object(l.a)(Object(l.a)({},e),{},{currentBand:c.id,tier:t}));case 4:i=n.sent,a({type:L,payload:{title:i.data,tier:t}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a(de(n.t0));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteTier:ye})(He((function(e){var t=e.tier,n=e.titles,r=e.fetchTitles,c=e.authorized,i=e.band,s=e.tiers,o=e.editTier,u=e.createTitle,d=e.deleteTier,p=Object(a.useState)(!1),b=Object(Ie.a)(p,2),j=b[0],f=b[1],O=Object(a.useState)(null),h=Object(Ie.a)(O,2),m=h[0],v=h[1],y=Object(a.useState)([]),x=Object(Ie.a)(y,2),g=x[0],N=x[1],S=Object(a.useState)({}),k=Object(Ie.a)(S,2),w=k[0],E=k[1];Object(a.useEffect)((function(){r(t.id)}),[]),Object(a.useEffect)((function(){v(t.trackList.map((function(e){return n[e]})))}),[n,t]),Object(a.useEffect)((function(){if(i.tiers.length){var e=i.tiers.map((function(e){return s[e]})).sort((function(e,t){return e.position<t.position?-1:1}));N(e.map((function(e){if(e)return{value:e.position,display:e.position}})))}}),[s]);var B=function(e){E(Object(l.a)(Object(l.a)({},w),{},Object(Ve.a)({},e.id,e.duration)))},T=j?"down-arrow":"",I=j?"open":"";return Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsxs)("div",{className:"row tier",onClick:function(){return f(!j)},children:[Object(Be.jsxs)("div",{className:"marqee",children:[Object(Be.jsxs)("div",{className:"tier-name",children:[Object(Be.jsx)("img",{className:"arrow ".concat(T),src:"images/right-arrow.svg"}),Object(Be.jsx)("h2",{children:t.name}),function(){if(c)return Object(Be.jsx)(Me,{title:"Add a Title to ".concat(t.name),image:"images/add.png",fields:[{label:"Title",name:"title",type:"input",required:!0}],onSubmit:function(e){u(e,t.id),f(!0)},form:"add-title-".concat(t.id)})}()]}),Object(Be.jsxs)("div",{className:"tier-count",children:[Object(Be.jsxs)("div",{className:"song-count",children:[t.trackList.length," songs"]}),Object(Be.jsx)("div",{className:"song-count",children:function(){var e=Object.values(w).reduce((function(e,t){return e+t}),0);if(!e)return null;var t=Math.floor(e/60),n=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return Object(Be.jsx)("div",{children:"".concat(t,":").concat(n)})}()})]}),Object(Be.jsxs)("div",{className:"tier-display",children:[function(){if(c)return Object(Be.jsx)(Me,{title:"Edit ".concat(t.name),image:"images/edit.png",fields:[{label:"Tier Name",name:"name",type:"input",required:!0},{label:"Tier Position",name:"position",type:"select",options:g}],onSubmit:function(e){return o(e,t.id)},initialValues:le.a.pick(t,"name","position"),form:"edit-tier-".concat(t.id),enableReinitialize:!0})}(),function(){if(c)return Object(Be.jsx)(Ye,{onSubmit:function(){return d(t.id)},displayName:t.name})}()]})]}),Object(Be.jsx)("hr",{})]}),Object(Be.jsx)("div",{className:I,children:j&&m&&m.map((function(e){if(e)return Object(Be.jsx)(Qe,{title:e,tier:t,getTime:B},e.id)}))})]})}))),$e=Object(s.b)((function(e){return{playlistSongs:e.playlistSongs,bands:e.bands,playlists:e.playlists,versions:e.versions,bounces:e.bounces,titles:e.titles}}),{fetchBounces:Oe,fetchVersions:fe,editPlaylistSong:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var c,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=r().bands.currentBand,n.next=4,v.patch("/playlistsongs/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:c.id}));case 4:i=n.sent,a({type:R,payload:i.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(de(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},deletePlaylistSong:Se})(He((function(e){var t=e.playlist,n=e.song,r=e.playlistSongs,c=e.authorized,i=e.versions,s=e.bounces,o=e.titles,u=e.fetchBounces,d=e.fetchVersions,p=e.editPlaylistSong,b=e.deletePlaylistSong,j=Object(a.useState)(null),f=Object(Ie.a)(j,2),O=f[0],h=f[1];Object(a.useEffect)((function(){d(n.title),o[n.title].versions.forEach((function(e){u(e)}))}),[]),Object(a.useEffect)((function(){o[n.title]&&h({playlist:t,title:o[n.title],version:i[n.version],bounce:s[n.bounce],self:n})}),[r[n.id],s[n.bounce],o[n.title],i[n.version]]);return Object(Be.jsx)("div",{className:"title-margin",children:Object(Be.jsx)("div",{className:"row title",children:Object(Be.jsxs)("div",{className:"marqee",children:[Object(Be.jsxs)("div",{className:"row-name",children:[Object(Be.jsx)("div",{className:"song-position",children:n.position}),Object(Be.jsx)("div",{className:"name-spot",children:Object(Be.jsx)("h3",{children:n&&o[n.title]&&o[n.title].title})})]}),O&&O.bounce&&O.version?Object(Be.jsx)(Je,{song:O,parentType:"playlist"}):Object(Be.jsxs)("div",{className:"playlistsong-no-bounce",children:[Object(Be.jsx)("p",{children:i[n.version]?"".concat(i[n.version].name):"No Version Selected"}),Object(Be.jsx)("p",{children:"No Bounce Selected"})]}),Object(Be.jsxs)("div",{className:"tier-display",children:[function(){if(c&&o[n.title]){var e=Object.values(r).filter((function(e){return t.songs.includes(e.id)})).map((function(e){return{value:e.position,display:e.position}})),a=o[n.title].versions.map((function(e){return i[e]})),u=a.map((function(e){if(e)return e.bounces.map((function(e){return s[e]}))})),d=[];return a.forEach((function(e,t){u[t]&&u[t].forEach((function(t){if(t){var n="";e.current&&t.latest&&(n=" * current"),d.push({value:t.id,display:"".concat(e.name," -- ").concat(Le.a.utc(t.date).format("MM/DD/YY")).concat(n)})}}))})),Object(Be.jsx)(Me,{image:"/images/edit.png",title:"Edit ".concat(o[n.title].title),onSubmit:function(e){return function(e){var a=Object.values(i).find((function(t){return t.bounces.includes(e.bounce)}));p(Object(l.a)(Object(l.a)({},e),{},{version:a.id,playlistId:t.id}),n.id)}(e)},fields:[{name:"position",label:"Position",type:"select",options:e},{name:"bounce",label:"Bounce",type:"select",options:d,required:!0}],initialValues:n.bounce?le.a.pick(n,"position","bounce"):le.a.pick(n,"position"),form:"edit-playlistsong-".concat(n.id),enableReinitialize:!0})}}(),function(){if(c)return Object(Be.jsx)(Ye,{onSubmit:function(){return b(n.id,t.id)},displayName:n.title.title})}()]})]})})})}))),et=Object(s.b)((function(e){return{playlists:e.playlists,playlistSongs:e.playlistSongs,band:e.bands.currentBand}}),{fetchPlaylistSongs:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.get("/playlistsongs/".concat(e));case 3:a=t.sent,n({type:S,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(de(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},deletePlaylist:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().bands.currentBand,t.prev=1,t.next=4,v.post("/playlists/delete",{playlistId:e,currentBand:r.id});case 4:(c=t.sent).data.songs.forEach((function(e){n(Se(e,c.data.id))})),n({type:G,payload:c.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(de(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()}})(He((function(e){var t=e.playlist,n=e.playlists,r=e.fetchPlaylistSongs,c=e.playlistSongs,i=e.authorized,s=e.deletePlaylist,o=e.band,u=Object(a.useState)(!1),d=Object(Ie.a)(u,2),p=d[0],f=d[1],O=Object(a.useState)([]),h=Object(Ie.a)(O,2),m=h[0],y=h[1],x=Object(a.useState)(null),g=Object(Ie.a)(x,2),N=g[0],S=g[1];Object(a.useEffect)((function(){r(t.id)}),[]),Object(a.useEffect)((function(){S(t.songs.map((function(e){return c[e]})))}),[c,t.songs]);Object(a.useEffect)((function(){if(o.playlists.length){var e=o.playlists.map((function(e){return n[e]})).sort((function(e,t){return e.position<t.position?-1:t.position<e.position?1:void 0}));y(e.map((function(e){if(e)return{value:e.position,display:e.position}})))}}),[n]);var k=p?"down-arrow":"",w=p?"open":"";return Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsxs)("div",{className:"row tier",onClick:function(){return f(!p)},children:[Object(Be.jsxs)("div",{className:"marqee tier-info",children:[Object(Be.jsxs)("div",{className:"tier-name",children:[Object(Be.jsx)("img",{className:"arrow ".concat(k),src:"/images/right-arrow.svg"}),Object(Be.jsx)("h2",{children:t.name})]}),Object(Be.jsx)("div",{className:"tier-count",children:Object(Be.jsxs)("div",{className:"song-count",children:[t.songs.length," songs"]})}),Object(Be.jsxs)("div",{className:"tier-display",children:[function(){if(i)return Object(Be.jsx)(Me,{title:"Edit ".concat(t.name),image:"images/edit.png",fields:[{label:"Playlist Name",name:"name",type:"input"},{label:"Playlist Position",name:"position",type:"select",options:m}],onSubmit:function(e){return function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a,r){var c,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=r().bands.currentBand,n.next=4,v.patch("/playlists/".concat(t),Object(l.a)(Object(l.a)({},e),{},{currentBand:c.id}));case 4:i=n.sent,a({type:U,payload:i.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(de(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t.id)},initialValues:le.a.pick(t,"name","position"),form:"edit-".concat(t.id),enableReinitialize:!0})}(),function(){if(i)return Object(Be.jsx)(Ye,{onSubmit:function(){return s(t.id)},displayName:t.name})}()]})]}),Object(Be.jsx)("hr",{})]}),Object(Be.jsx)("div",{className:w,children:p&&(N.sort((function(e,t){return e.position<t.position?-1:1})),N.map((function(e){if(e)return Object(Be.jsx)($e,{song:e,playlist:t},e.id)})))})]})}))),tt=Object(s.b)((function(e){return{tiers:e.tiers,playlists:e.playlists,currentSong:e.audio.currentSong}}),{fetchTiers:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.get("/tiers/".concat(e));case 3:a=t.sent,n({type:N,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(de(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchPlaylists:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.get("/playlists/".concat(e));case 3:a=t.sent,n({type:w,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(de(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},createTier:he,createPlaylist:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n,a){var r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=a().bands.currentBand,t.next=4,v.post("/playlists",Object(l.a)(Object(l.a)({},e),{},{currentBand:r.id}));case 4:c=t.sent,n({type:P,payload:c.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(de(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()}})(He((function(e){var t=e.fetchPlaylists,n=e.createTier,r=e.fetchTiers,c=e.tiers,i=e.playlists,s=e.band,o=e.authorized,u=e.createPlaylist,l=e.currentSong,d=Object(a.useState)([]),p=Object(Ie.a)(d,2),b=p[0],j=p[1],f=Object(a.useState)([]),O=Object(Ie.a)(f,2),h=O[0],m=O[1];Object(a.useEffect)((function(){r(s.id),t(s.id)}),[]),Object(a.useEffect)((function(){j(s.tiers.map((function(e){return c[e]})).sort((function(e,t){return e.position<t.position?-1:t.position<e.position?1:void 0})))}),[c]),Object(a.useEffect)((function(){m(s.playlists.map((function(e){return i[e]})).sort((function(e,t){return e.position<t.position?-1:t.position<e.position?1:void 0})))}),[i]);var v=l?"playbar-active":"";return Object(Be.jsxs)("div",{className:"body-container ".concat(v),children:[Object(Be.jsxs)("div",{className:"section-header",children:[Object(Be.jsx)("h2",{className:"section-title",children:"Tiers"}),Object(Be.jsx)("div",{className:"section-add",children:function(){if(o)return Object(Be.jsx)(Me,{onSubmit:function(e){return n(e)},title:"Add a Tier",image:"/images/add.png",fields:[{label:"Tier Name",name:"tierName",type:"input",required:!0}]})}()})]}),Object(Be.jsx)("hr",{}),c&&b.map((function(e){if(e)return Object(Be.jsx)(Ze,{tier:e},e.id)})),Object(Be.jsxs)("div",{className:"playlists",children:[Object(Be.jsxs)("div",{className:"section-header",children:[Object(Be.jsx)("h2",{className:"section-title",children:"Playlists"}),Object(Be.jsx)("div",{className:"section-add",children:function(){if(o)return Object(Be.jsx)(Me,{onSubmit:function(e){return u(e)},title:"Add a Playlist",image:"/images/add.png",fields:[{label:"Playlist Name",name:"playlistName",type:"input",required:!0}]})}()})]}),Object(Be.jsx)("hr",{}),i&&h.map((function(e){if(e)return Object(Be.jsx)(et,{playlist:e},e.id)}))]})]})}))),nt=function(e){Object(_e.a)(n,e);var t=Object(Fe.a)(n);function n(e){var a;return Object(Pe.a)(this,n),(a=t.call(this,e)).state={volume:50,sliderPosition:0},a.displayDate=function(e){return Le.a.utc(e).format("MM/DD/yy")},a.updateSlider=function(){var e=a.audio.current.currentTime/a.audio.current.duration*1e3;a.time=a.formatTime(a.audio.current.currentTime),isNaN(e)||a.setState({sliderPosition:e})},a.setSpaceBarToPlay=function(e){"Space"===e.code&&(e.preventDefault(),a.props.pause?a.play():a.pause())},a.audioError=function(){a.props.throwError("The audio player had an error, probably can't connect to server.")},a.nextSong=function(){setTimeout((function(){a.props.queue.length&&a.props.nextSong()}),400)},a.play=function(){a.props.playAudio()},a.pause=function(){a.props.pauseAudio()},a.onSliderChange=function(e){var t=e.target.value/1e3*a.audio.current.duration;a.audio.current.currentTime=t},a.onPauseButton=function(){a.props.play?a.pause():a.play()},a.url="https://exploring-the-space.com",a.audio=r.a.createRef(),a}return Object(De.a)(n,[{key:"formatTime",value:function(e){var t=e<600?"0".concat(Math.floor(e/60)):Math.floor(e/60),n=e%60<10?"0".concat(Math.floor(e%60)):Math.floor(e%60);return"".concat(t,":").concat(n)}},{key:"wrapUrl",value:function(e){return"".concat(this.url,"/api/audio/").concat(e,".mp3")}},{key:"componentDidMount",value:function(){this.audio.current=new Audio,this.audio.current.addEventListener("timeupdate",this.updateSlider),this.audio.current.addEventListener("error",this.audioError),this.audio.current.addEventListener("ended",this.nextSong),document.addEventListener("keydown",this.setSpaceBarToPlay)}},{key:"componentDidUpdate",value:function(e){this.scrolled||(window.scroll(window.scrollX,window.scrollY+96),this.scrolled=!0),this.props.song?(this.props.song!==e.song?(this.audio.current.src=this.wrapUrl(this.props.song.audio),this.audio.current.volume=this.props.volume/120,this.audio.current.play()):this.props.play&&e.pause?this.audio.current.play():this.props.pause&&e.play&&this.audio.current.pause(),this.props.volume!==e.volume&&(this.audio.current.volume=this.props.volume/120)):this.audio.current.pause()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.setSpaceBarToPlay),this.audio.current.src="",this.audio.current.removeEventListener("timeupdate",this.updateSlider),this.audio.current.removeEventListener("error",this.audioError),this.audio.current.removeEventListener("ended",this.nextSong),this.props.initializeAudio()}},{key:"render",value:function(){return this.props.song?Object(Be.jsxs)("div",{className:"playbar",children:[Object(Be.jsxs)("div",{className:"playbar-header",children:[Object(Be.jsx)("div",{className:"playbar-title",children:Object(Be.jsx)("p",{children:this.props.song.title})}),Object(Be.jsx)("div",{className:"pause-container",onClick:this.onPauseButton,children:Object(Be.jsx)("img",{className:"big-play-btn",src:this.props.play?"/images/pause.svg":"/images/play.svg"})}),Object(Be.jsxs)("div",{className:"playbar-info",children:[Object(Be.jsxs)("div",{className:"playbar-detail",children:[Object(Be.jsx)("p",{children:"Version:"}),Object(Be.jsx)("p",{children:this.props.song.version})]}),Object(Be.jsxs)("div",{className:"playbar-detail",children:[Object(Be.jsx)("p",{children:"Date:"}),Object(Be.jsx)("p",{children:this.displayDate(this.props.song.date)})]})]})]}),Object(Be.jsxs)("div",{className:"playslidercontainer",children:[Object(Be.jsx)("div",{className:"playslidertime",children:this.time}),Object(Be.jsx)("input",{type:"range",min:"0",max:"1000",value:this.state.sliderPosition,className:"playslider",onInput:this.onSliderChange}),Object(Be.jsx)("div",{className:"playslidertime",children:this.formatTime(this.props.song.duration)})]})]}):null}}]),n}(r.a.Component),at=Object(s.b)((function(e){return{song:e.audio.currentSong,play:e.audio.play,pause:e.audio.pause,queue:e.audio.queue,volume:e.audio.volume}}),{playAudio:ke,pauseAudio:function(){return{type:ee}},nextSong:function(){return{type:ne}},throwError:be,initializeAudio:function(){return{type:re}}})(nt),rt=Object(s.b)((function(e){return{band:e.bands.currentBand,user:e.auth.currentUser,signedIn:e.auth.isSignedIn,volume:e.audio.volume}}),{fetchBand:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.get("/bands/".concat(e));case 3:a=t.sent,n({type:E,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(de(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},signOut:pe,changeVolume:function(e){return{type:ae,payload:e}}})(He((function(e){var t=e.fetchBand,n=e.band,r=e.match,c=e.authorized,i=e.handleUpdate,s=e.user,o=e.signedIn,u=e.signOut,l=e.volume,d=e.changeVolume,p=Object(a.useState)(!1),b=Object(Ie.a)(p,2),j=b[0],f=b[1];Object(a.useEffect)((function(){t(r.params.bandName)}),[]),Object(a.useEffect)((function(){i()}),[n,s]);return Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsxs)("div",{className:"header",children:[Object(Be.jsx)(at,{}),Object(Be.jsxs)("div",{className:"band-header",children:[Object(Be.jsxs)("div",{className:"band-name",children:[Object(Be.jsx)("h1",{children:n&&n.name}),Object(Be.jsxs)("div",{className:"menu-button",onClick:function(){return f(!j)},children:[Object(Be.jsx)("img",{src:"images/dots.png"}),j&&(c?Object(Be.jsxs)("div",{className:"menu",children:[Object(Be.jsx)(Ce.a,{className:"menu-item",to:"/user",children:"User Home"}),Object(Be.jsx)("div",{className:"menu-item",onClick:u,children:"Sign Out"})]}):Object(Be.jsxs)("div",{className:"menu",children:[Object(Be.jsx)(Ce.a,{className:"menu-item",to:"/",children:"Home"}),Object(Be.jsx)(Ce.a,{className:"menu-item",to:"/signin",children:"Sign In"})]}))]})]}),Object(Be.jsxs)("div",{className:"slidecontainer",children:[Object(Be.jsx)("input",{type:"range",min:"0",max:"100",className:"master-volume",value:l,onInput:function(e){return d(e.target.value)}}),Object(Be.jsx)("img",{src:"/images/volume.svg"})]})]})]}),n?o&&!s?null:Object(Be.jsx)(tt,{band:n}):null]})}))),ct=Object(s.b)((function(e){return{user:e.auth.user,bands:e.bands}}),{createBand:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.post("/bands",e);case 3:a=t.sent,n({type:F,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(de(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchBands:je,editBand:function(e,t){return function(){var n=Object(j.a)(b.a.mark((function n(a){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.patch("/bands",Object(l.a)(Object(l.a)({},e),{},{currentBand:t}));case 3:r=n.sent,a({type:H,payload:r.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a(de(n.t0));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},deleteBand:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.post("/bands/delete",{currentBand:e});case 3:(a=t.sent).data.tiers.forEach((function(e){n(ye(e,a.data.id))})),n({type:Z,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(de(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},signOut:pe})((function(e){var t=e.user,n=e.bands,r=e.createBand,c=e.fetchBands,i=e.editBand,s=e.deleteBand,o=e.signOut;Object(a.useEffect)((function(){c()}),[]);return t?Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsxs)("div",{className:"user-header",children:[Object(Be.jsxs)("h1",{className:"user-title",children:[t.username,"'s bands"]}),Object(Be.jsx)("div",{onClick:o,children:"Sign Out"})]}),Object(Be.jsx)("hr",{}),Object(Be.jsx)("div",{className:"row band-list",children:function(){var e=t.bands.map((function(e){return n[e]}));return e.length&&e[0]?e.map((function(e){if(e)return Object(Be.jsxs)("div",{className:"band-item",children:[Object(Be.jsx)(Ce.a,{to:"/".concat(e.url),children:Object(Be.jsx)("h2",{children:e.name})}),Object(Be.jsxs)("div",{className:"band-buttons",children:[Object(Be.jsx)(Me,{onSubmit:function(t){return i(t,e.id)},title:"Edit ".concat(e.name),image:"images/edit.png",fields:[{label:"Band Name",name:"name",type:"input"}],initialValues:{name:e.name},enableReinitialize:!0,form:"edit-band-".concat(e.id)}),Object(Be.jsx)(Ye,{onSubmit:function(){return s(e.id)},displayName:e.name})]})]},e.id)})):Object(Be.jsx)("h3",{children:"No bands belong to this user"})}()}),Object(Be.jsx)("div",{className:"centered-button",children:Object(Be.jsx)(Me,{onSubmit:function(e){return r(e)},title:"Create a Band",image:"images/add.png",fields:[{label:"Band Name",name:"bandName",type:"input"}]})})]}):null})),it=function(e){Object(_e.a)(n,e);var t=Object(Fe.a)(n);function n(){var e;Object(Pe.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderInput=function(e){var t=e.input,n=e.label,a=(e.meta,e.type),r=e.autoComplete;e.defaultValue;return Object(Be.jsxs)("div",{children:[Object(Be.jsx)("label",{children:n}),Object(Be.jsx)("input",Object(l.a)({type:a,autoComplete:r},t))]})},e.submitForm=function(t){e.props.onSubmit(t)},e}return Object(De.a)(n,[{key:"render",value:function(){return Object(Be.jsxs)("form",{className:"signin",onSubmit:this.props.handleSubmit(this.submitForm),children:[Object(Be.jsx)(qe.a,{name:"username",component:this.renderInput,label:"Username: ",type:"text",autoComplete:"username"}),Object(Be.jsx)(qe.a,{name:"password",component:this.renderInput,label:"Passwyrd: ",type:"password",autoComplete:"current-password"}),Object(Be.jsx)("button",{className:"signin-submit",children:"Submit"})]})}}]),n}(r.a.Component),st=Object(Ue.a)({form:"userForm"})(it),ot=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.post("/signin",e);case 3:a=t.sent,localStorage.setItem("token",a.data.token),n({type:y,payload:a.data.user}),oe.push("/user"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(de(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.signIn,n=e.isSignedIn;return Object(a.useEffect)((function(){n&&oe.push("/user")}),[]),Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsx)("h1",{children:"Sign In"}),Object(Be.jsx)(st,{onSubmit:function(e){return t(e)}})]})})),ut=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signUp:function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.post("/signup",e);case 3:a=t.sent,localStorage.setItem("token",a.data.token),n({type:y,payload:a.data.user}),oe.push("/user"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(de(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.signUp,n=e.isSignedIn;return Object(a.useEffect)((function(){n&&oe.push("/user")}),[]),Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsx)("h1",{children:"Sign Up"}),Object(Be.jsx)(st,{onSubmit:function(e){return t(e)}})]})})),lt=function(e){Object(_e.a)(n,e);var t=Object(Fe.a)(n);function n(){return Object(Pe.a)(this,n),t.apply(this,arguments)}return Object(De.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchBands()}},{key:"renderBands",value:function(){return delete this.props.bands.currentBand,Object.values(this.props.bands).map((function(e){return Object(Be.jsx)("div",{className:"band-item",children:Object(Be.jsx)(Ce.a,{to:"/".concat(e.url),children:Object(Be.jsx)("h2",{children:e.name})})},e.id)}))}},{key:"render",value:function(){return Object(Be.jsxs)("div",{className:"container",children:[Object(Be.jsx)("h1",{className:"home-header",children:"Exploring the Space"}),Object(Be.jsxs)("div",{className:"home-buttons",children:[Object(Be.jsx)(Ce.a,{to:"/signin",children:"Sign In"}),Object(Be.jsx)(Ce.a,{to:"/signup",children:"Sign Up"})]}),Object(Be.jsx)("h1",{children:"All Bands:"}),Object(Be.jsx)("div",{className:"band-list",children:this.props.bands&&this.renderBands()})]})}}]),n}(r.a.Component),dt=Object(s.b)((function(e){return{bands:e.bands}}),{fetchBands:je})(lt),pt=Object(s.b)((function(e){return{signedIn:e.auth.isSignedIn,error:e.error.error}}),{fetchUser:function(){return function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.get("/user");case 3:(n=e.sent).data?t({type:y,payload:n.data}):t(pe()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(de(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.signedIn,n=e.fetchUser,r=e.error;Object(a.useEffect)((function(){t&&n()}),[]);var c=r?"error-margin":"";return Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsx)(Te,{}),Object(Be.jsx)("div",{className:"container ".concat(c),children:Object(Be.jsx)(d.b,{history:oe,children:Object(Be.jsxs)(d.c,{children:[Object(Be.jsx)(d.a,{path:"/",exact:!0,component:dt}),Object(Be.jsx)(d.a,{path:"/signin",exact:!0,component:ot}),";",Object(Be.jsx)(d.a,{path:"/signup",exact:!0,component:ut}),";",Object(Be.jsx)(d.a,{path:"/user",exact:!0,render:function(e){return t?Object(Be.jsx)(ct,Object(l.a)({},e)):(oe.push("/signin"),null)}}),Object(Be.jsx)(d.a,{path:"/:bandName",component:rt})]})})})]})})),bt=n(241),jt={isSignedIn:!1,user:null},ft={play:!1,volume:75,queue:[],currentSong:null},Ot=Object(o.c)({form:bt.a,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(l.a)(Object(l.a)({},e),{},{isSignedIn:!0,user:t.payload});case x:return Object(l.a)(Object(l.a)({},e),{},{isSignedIn:!1,user:null});case F:var n=e.user;return n.bands.push(t.payload.id),Object(l.a)(Object(l.a)({},e),{},{user:n});default:return e}},tiers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(l.a)(Object(l.a)({},e),le.a.mapKeys(t.payload,"id"));case V:return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.id,t.payload));case q:var n=e[t.payload.id].position,a=t.payload.position,r={};if(n>a)for(var c=0,i=Object.values(e);c<i.length;c++){var s=i[c];if(s.position>=a&&s.position<n){var o=s.position;r[s.id]=Object(l.a)(Object(l.a)({},s),{},{position:o+1})}}if(n<a)for(var u=0,d=Object.values(e);u<d.length;u++){var p=d[u];if(p.position>n&&p.position<=a){var b=p.position;r[p.id]=Object(l.a)(Object(l.a)({},p),{},{position:b-1})}}return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.id,t.payload),r);case K:var j=Object.values(le.a.omit(e,e.currentBand)).filter((function(e){return e.position>t.payload.position}));return j.forEach((function(e){e.position=e.position-1})),delete e[t.payload.id],Object(l.a)(Object(l.a)({},e),le.a.mapKeys(j,"id"));case L:var f=e[t.payload.tier];return f.trackList.push(t.payload.title.id),Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},f.id,f));case X:var O=e[t.payload.tier];if(O){var h=O.trackList.filter((function(e){return e!==t.payload.title.id}));return O.trackList=h,Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},O.id,O))}default:return e}},titles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(l.a)(Object(l.a)({},e),le.a.mapKeys(t.payload,"id"));case L:return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.title.id,t.payload.title));case M:return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.id,t.payload));case X:return delete e[t.payload.title.id],Object(l.a)({},e);case ce:var n=e[t.payload.titleId];return n.selectedVersion=t.payload.version,Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},n.id,n));case ie:var a=e[t.payload.titleId];return a.selectedBounce=t.payload.bounce,Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},a.id,a));case D:var r=e[t.payload.title];return r.versions.push(t.payload.version.id),Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},r.id,r));case J:var c=e[t.payload.title];if(c){var i=c.versions.filter((function(e){return e!==t.payload.version.id}));return c.versions=i,Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},c.id,c))}default:return e}},versions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(l.a)(Object(l.a)({},e),le.a.mapKeys(t.payload,"id"));case D:return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.version.id,t.payload.version));case z:return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.id,t.payload));case J:return delete e[t.payload.version.id],Object(l.a)({},e);case _:var n=e[t.payload.version];return n.bounces.push(t.payload.bounce.id),Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},n.id,n));case Q:var a=e[t.payload.version];if(a){var r=a.bounces.filter((function(e){return e!==t.payload.bounce.id}));return a.bounces=r,Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},a.id,a))}default:return e}},bounces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(l.a)(Object(l.a)({},e),le.a.mapKeys(t.payload,"id"));case _:return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.bounce.id,t.payload.bounce));case Y:return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.id,t.payload));case Q:return delete e[t.payload.bounce.id],Object(l.a)({},e);default:return e}},playlists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(l.a)(Object(l.a)({},e),le.a.mapKeys(t.payload,"id"));case k:case P:return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.id,t.payload));case U:var n=e[t.payload.id].position,a=t.payload.position,r={};if(n>a)for(var c=0,i=Object.values(e);c<i.length;c++){var s=i[c];if(s.position>=a&&s.position<n){var o=s.position;r[s.id]=Object(l.a)(Object(l.a)({},s),{},{position:o+1})}}if(n<a)for(var u=0,d=Object.values(e);u<d.length;u++){var p=d[u];if(p.position>n&&p.position<=a){var b=p.position;r[p.id]=Object(l.a)(Object(l.a)({},p),{},{position:b-1})}}return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.id,t.payload),r);case G:delete e.currentBand;var j=Object.values(e).filter((function(e){return e.position>t.payload.position}));return j.forEach((function(e){e.position=e.position-1})),delete e[t.payload.id],Object(l.a)(Object(l.a)({},e),le.a.mapKeys(j,"id"));case A:var f=e[t.payload.playlist];return f.songs.push(t.payload.playlistsong.id),Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},f.id,f));case W:var O=e[t.payload.playlist];if(O){var h=O.songs.filter((function(e){return e!==t.payload.playlistsong.id}));return O.songs=h,Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},O.id,O))}default:return e}},playlistSongs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(l.a)(Object(l.a)({},e),le.a.mapKeys(t.payload,"id"));case A:return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.playlistsong.id,t.payload.playlistsong));case R:var n=e[t.payload.id].position,a=t.payload.position,r={};if(n>a)for(var c=0,i=Object.values(e);c<i.length;c++){var s=i[c];if(s.position>=a&&s.position<n){var o=s.position;r[s.id]=Object(l.a)(Object(l.a)({},s),{},{position:o+1})}}if(n<a)for(var u=0,d=Object.values(e);u<d.length;u++){var p=d[u];if(p.position>n&&p.position<=a){var b=p.position;r[p.id]=Object(l.a)(Object(l.a)({},p),{},{position:b-1})}}return Object(l.a)(Object(l.a)({},e),{},Object(Ve.a)({},t.payload.id,t.payload),r);case W:var j=Object.values(e).filter((function(e){return e.position>t.payload.position}));return j.forEach((function(e){e.position=e.position-1})),delete e[t.payload.playlistsong.id],Object(l.a)({},e);case J:for(var f in e)e[f].version===t.payload.version.id&&(e[f].version=null,e[f].bounce=null);return Object(l.a)({},e);case Q:for(var O in e)e[O].bounce===t.payload.bounce.id&&(e[O].bounce=null);return Object(l.a)({},e);default:return e}},bands:function(){var e,t,n,a,r,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;switch(i.type){case E:return Object(l.a)(Object(l.a)({},c),{},(e={},Object(Ve.a)(e,i.payload.id,i.payload),Object(Ve.a)(e,"currentBand",i.payload),e));case B:return Object(l.a)(Object(l.a)({},c),le.a.mapKeys(i.payload,"id"));case F:case H:return Object(l.a)(Object(l.a)({},c),{},Object(Ve.a)({},i.payload.id,i.payload));case Z:return delete c[i.payload.id],Object(l.a)({},c);case V:var s=c.currentBand;return s.tiers.push(i.payload.id),Object(l.a)(Object(l.a)({},c),{},(t={},Object(Ve.a)(t,s.id,s),Object(Ve.a)(t,"currentBand",s),t));case K:var o=c.currentBand,u=o.tiers.filter((function(e){return e!==i.payload.id}));return o.tiers=u,Object(l.a)(Object(l.a)({},c),{},(n={},Object(Ve.a)(n,o.id,o),Object(Ve.a)(n,"currentBand",o),n));case P:var d=c.currentBand;return d.playlists.push(i.payload.id),Object(l.a)(Object(l.a)({},c),{},(a={},Object(Ve.a)(a,d.id,d),Object(Ve.a)(a,"currentBand",d),a));case G:var p=c.currentBand,b=p.playlists.filter((function(e){return e!==i.payload.id}));return p.playlists=b,Object(l.a)(Object(l.a)({},c),{},(r={},Object(Ve.a)(r,p.id,p),Object(Ve.a)(r,"currentBand",p),r));case x:return le.a.omit(c,c.currentBand);default:return c}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.payload&&console.log(t.payload),{error:t.payload};default:return e}},audio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return Object(l.a)(Object(l.a)({},e),{},{play:!0,pause:!1});case ee:return Object(l.a)(Object(l.a)({},e),{},{play:!1,pause:!0});case te:var n=t.payload.shift();return Object(l.a)(Object(l.a)({},e),{},{queue:t.payload,currentSong:n,play:!0});case ne:var a=e.queue,r=a.shift();return Object(l.a)(Object(l.a)({},e),{},{queue:a,currentSong:r});case Q:if(e.currentSong&&t.payload.bounce.id===e.currentSong.audio)return Object(l.a)({},ft);if(e.queue.length)return e.queue=e.queue.filter((function(e){return e.audio!==t.payload.bounce.id})),Object(l.a)({},e);case ae:return Object(l.a)(Object(l.a)({},e),{},{volume:t.payload});case re:return Object(l.a)({},ft);default:return e}}}),ht={};localStorage.getItem("token")&&(ht.auth={isSignedIn:!0});var mt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,vt=Object(o.e)(Ot,ht,mt(Object(o.a)(u.a)));i.a.render(Object(Be.jsx)(s.a,{store:vt,children:Object(Be.jsx)(pt,{})}),document.querySelector("#root"))}},[[238,1,2]]]);
//# sourceMappingURL=main.95342dd6.chunk.js.map