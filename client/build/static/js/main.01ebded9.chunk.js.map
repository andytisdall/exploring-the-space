{"version":3,"sources":["web-audio-recorder/WebAudioRecorder.js","apis/greenhouse.js","actions/types.js","history.js","actions/index.js","components/Error.js","components/AddButton.js","components/Modal.js","components/DeleteButton.js","components/requireAuth.js","components/DetailBox.js","components/Bounce.js","components/Version.js","components/PlayContainer.js","components/Title.js","components/Tier.js","components/PlaylistSong.js","components/Playlist.js","components/Main.js","components/AudioDisplay.js","components/Header.js","components/User.js","components/UserForm.js","components/SignIn.js","components/SignUp.js","components/Home.js","components/Help.js","components/Waveform.js","components/Playhead.js","components/Timer.js","components/DeviceControl.js","components/AddRecording.js","components/Recorder.js","components/App.js","reducers/authReducer.js","reducers/audioReducer.js","reducers/index.js","reducers/tierReducer.js","reducers/titleReducer.js","reducers/versionReducer.js","reducers/bounceReducer.js","reducers/playlistReducer.js","reducers/playlistSongReducer.js","reducers/bandReducer.js","reducers/errorReducer.js","index.js"],"names":["module","exports","extend","target","arguments","sources","slice","call","i","length","src","key","val","CONFIGS","workerDir","numChannels","encoding","options","timeLimit","encodeAfterRecord","progressInterval","bufferSize","undefined","wav","mimeType","ogg","quality","mp3","bitRate","WebAudioRecorder","sourceNode","configs","this","context","createScriptProcessor","createJavaScriptNode","input","createGain","connect","buffer","initWorker","prototype","isRecording","processor","setEncoding","error","setOptions","worker","postMessage","command","startRecording","destination","onaudioprocess","event","ch","inputBuffer","getChannelData","startTime","Date","now","recordingTime","cancelRecording","disconnect","finishRecording","cancelEncoding","onEncodingCanceled","terminate","onEncoderLoading","Worker","_this","onmessage","data","onEncoderLoaded","onTimeout","onEncodingProgress","progress","onComplete","blob","message","config","sampleRate","onError","recorder","console","log","url","instance","axios","create","interceptors","request","use","token","localStorage","getItem","headers","Authorization","err","Promise","reject","SIGN_IN","SIGN_OUT","ERROR","FETCH_TIERS","FETCH_PLAYLISTSONGS","FETCH_PLAYLIST","FETCH_PLAYLISTS","FETCH_BAND","FETCH_BANDS","FETCH_TITLES","FETCH_VERSIONS","FETCH_BOUNCES","CREATE_TIER","CREATE_PLAYLISTSONG","CREATE_TITLE","CREATE_PLAYLIST","CREATE_VERSION","CREATE_BOUNCE","CREATE_BAND","UPLOAD_STARTED","EDIT_TIER","EDIT_PLAYLIST","EDIT_PLAYLISTSONG","EDIT_TITLE","EDIT_VERSION","EDIT_BOUNCE","EDIT_BAND","DELETE_TIER","DELETE_PLAYLIST","DELETE_PLAYLISTSONG","DELETE_TITLE","DELETE_VERSION","DELETE_BOUNCE","DELETE_BAND","PLAY_AUDIO","PAUSE_AUDIO","QUEUE_SONGS","NEXT_SONG","CHANGE_VOLUME","INITIALIZE_AUDIO","ORDER_TIER","SELECT_VERSION","SELECT_BOUNCE","createBrowserHistory","errorHandler","dispatch","response","setTimeout","throwError","type","payload","signOut","removeItem","history","push","fetchBand","bandName","a","greenhouse","get","fetchBands","fetchTiers","bandId","fetchTitles","tierId","fetchVersions","titleId","fetchBounces","versionId","createTier","formValues","getState","currentBand","bands","post","id","createBounce","parentVersion","versions","bounces","latest","file","reader","FileReader","onload","window","AudioContext","webkitAudioContext","decodeAudioData","result","duration","parseInt","formObject","version","formData","FormData","append","bounceList","map","oldLatest","find","b","editBounce","_","pick","bounce","onerror","readAsArrayBuffer","createPlaylistSong","playlistsong","playlist","playlistId","editVersion","thisVersion","current","patch","parentTitle","titles","versionList","oldCurrent","v","title","bounceId","thisBounce","deleteTier","trackList","forEach","deleteTitle","deleteVersion","playlists","Object","values","playlistSongs","filter","pls","pl","songs","includes","deletePlaylistSong","tier","remainingVersions","newCurrent","selectVersion","deleteBounce","remainingBounces","newLatest","selectBounce","playlistSongId","playAudio","queueSongs","song","songObject","name","date","audio","parent","state","useEffect","listen","location","className","onClick","AddButton","props","boxVisible","selectedOption","blockSpaceBarPress","e","stopPropagation","bodyClick","ref","contains","setState","showOptions","field","option","value","display","onDrop","files","onChange","inputClass","errors","meta","touched","autoFocus","required","showFields","fields","comp","label","Field","component","validate","submitForm","onSubmit","reset","showBox","addClass","handleSubmit","click","React","createRef","prevProps","prevState","document","addEventListener","capture","removeEventListener","image","Component","reduxForm","form","Modal","querySelector","classList","add","remove","ReactDOM","createPortal","onDismiss","content","actions","DeleteButton","displayName","useState","visible","setVisible","ChildComponent","ComposedComponent","authorized","handleUpdate","checkAuth","user","auth","DetailBox","selectedItem","itemList","itemType","displayItem","setSelected","renderAddButton","renderEditButton","renderDeleteButton","playButton","dropdownVisible","setDropdownVisible","dropdownRef","useRef","onBodyClick","count","currentTag","renderItemList","notes","comments","parentType","renderDetail","requireAuth","selectedBounce","setSelectedBounce","uploadActive","setUploadActive","displayDate","moment","utc","format","onEditSubmit","sort","onAddSubmit","initialValues","enableReinitialize","createVersion","selectedVersion","setSelectedVersion","setBounceList","renderBounces","queuePlaylistSongs","position","baseUrl","loaded","setLoaded","time","minutes","Math","floor","seconds","displayTime","onLoad","href","encodeURIComponent","band","tiers","editTitle","changeTier","move","currentTier","new","old","getTime","findLatest","expand","setExpand","setVersionList","setSong","versionToSelect","versionIds","bounceToSelect","arrow","currentSong","currentClass","open","renderPlayContainer","playlistOptions","tierOptions","t","unshift","onAddToPlaylist","renderButtons","editTier","createTitle","setOrder","orderBy","titlesToRender","setTitlesToRender","times","setTimes","orderedTitles","track","total","reduce","prev","cur","renderTotalTime","tierList","titleList","renderTitles","editPlaylistSong","newSong","doUpdate","playSong","setPlaySong","updateToCurrent","currentVersion","currentBounce","otherSongs","s","otherVersions","otherBounces","editOptions","fetchPlaylistSongs","deletePlaylist","editPlaylist","playlistList","setPlaylistList","songsToRender","setSongsToRender","setDoUpdate","playlistsToShow","showUpdatePlaylistCheckbox","fetchPlaylists","createPlaylist","setTierList","playbarActive","renderTierAddButton","renderPlaylistAddButton","AudioDisplay","volume","sliderPosition","updateSlider","currentTime","formatTime","isNaN","setSpaceBarToPlay","code","preventDefault","pause","play","audioError","playOnLoad","prevSong","nextSong","pauseAudio","onSliderChange","onPauseButton","Audio","scrolled","scroll","scrollX","scrollY","wrapUrl","initializeAudio","min","max","onInput","allTitles","indexOf","allSongs","index","currentUser","changeVolume","match","menu","params","clickToDismiss","to","Main","createBand","editBand","deleteBand","username","bandList","renderBands","UserForm","renderInput","autoComplete","defaultValue","isSignedIn","signIn","setItem","signUp","Home","Help","Waveform","audioContext","canvas","getContext","clearRect","width","height","renderWaveform","arrayBuffer","audio_context","array_buffer","scale","WaveformData","createFromAudio","waveform","drawWaveform","ctx","lengthMultiplier","scaleY","amplitude","beginPath","channel","x","max_sample","lineTo","min_sample","closePath","stroke","fill","Playhead","playheadPosition","setPlayheadPosition","isPlaying","setIsPlaying","player","onended","onplay","onpause","ontimeupdate","URL","createObjectURL","Timer","timer","setTimer","interval","setInterval","clearInterval","DeviceControl","inputSource","setInputSource","devices","setDevices","getDevices","navigator","mediaDevices","ondevicechange","enumerateDevices","inputDevices","device","kind","deviceId","deviceList","micSelect","uploadStarted","defaultItem","selectedTitle","setSelectedTitle","selectedTier","setSelectedTier","toISOString","substring","selectedDate","setSelectedDate","uploadSuccess","setUploadSuccess","uploadLoading","setUploadLoading","setTitleList","list","selector","stateList","onSelect","item","selected","submitActive","File","lastModified","Recorder","setIsRecording","setAudio","setError","mediaRecorder","getUserMedia","inputStream","node","createMediaStreamSource","onRecord","signedIn","fetchUser","errClass","path","exact","SignIn","SignUp","render","routeProps","Header","INITIAL_STATE","initialState","combineReducers","formReducer","action","mapKeys","oldPosition","newPosition","changedPositions","pos","changePosition","omit","addToTier","newTier","oldTier","deleteFromTier","newTrackList","oldTitle","newTitle","versionTitle","bounceTitle","addToTitle","deleteFromTitle","newVersionList","addToVersion","deleteFromVersion","newBounceList","p","addToPlaylist","deleteFromPlaylist","newSongList","newTiers","currentBandP","bandP","newPlaylists","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk"],"mappings":"mFAAAA,EAAOC,QAAW,WAEhB,IAAIC,EAAS,SAATA,IAGF,IAFA,IAAIC,EAASC,UAAU,GACrBC,EAAU,GAAGC,MAAMC,KAAKH,UAAW,GAC5BI,EAAI,EAAGA,EAAIH,EAAQI,SAAUD,EAAG,CACvC,IAAIE,EAAML,EAAQG,GAClB,IAAK,IAAIG,KAAOD,EAAK,CACnB,IAAIE,EAAMF,EAAIC,GACdR,EAAOQ,GACU,kBAARC,EACHV,EAA8B,kBAAhBC,EAAOQ,GAAoBR,EAAOQ,GAAO,GAAIC,GAC3DA,GAGV,OAAOT,GAULU,EAAU,CACZC,UAAW,IACXC,YAAa,EACbC,SAAU,MAGVC,QAAS,CACPC,UAAW,IACXC,mBAAmB,EACnBC,iBAAkB,IAClBC,gBAAYC,EAGZC,IAAK,CACHC,SAAU,aAEZC,IAAK,CACHD,SAAU,YACVE,QAAS,IAEXC,IAAK,CACHH,SAAU,aACVI,QAAS,OAMXC,EAAmB,SAAUC,EAAYC,GAC3C7B,EAAO8B,KAAMnB,EAASkB,GAAW,IACjCC,KAAKC,QAAUH,EAAWG,QACgB,MAAtCD,KAAKC,QAAQC,wBACfF,KAAKC,QAAQC,sBAAwBF,KAAKC,QAAQE,sBACpDH,KAAKI,MAAQJ,KAAKC,QAAQI,aAC1BP,EAAWQ,QAAQN,KAAKI,OACxBJ,KAAKO,OAAS,GACdP,KAAKQ,cAiJP,OA7IAtC,EAAO2B,EAAiBY,UAAW,CACjCC,YAAa,WACX,OAAyB,MAAlBV,KAAKW,WAGdC,YAAa,SAAU5B,GACjBgB,KAAKU,cACPV,KAAKa,MAAM,qDACJb,KAAKhB,WAAaA,IACzBgB,KAAKhB,SAAWA,EAChBgB,KAAKQ,eAITM,WAAY,SAAU7B,GAChBe,KAAKU,cACPV,KAAKa,MAAM,oDAEX3C,EAAO8B,KAAKf,QAASA,GACrBe,KAAKe,OAAOC,YAAY,CAAEC,QAAS,UAAWhC,QAASe,KAAKf,YAIhEiC,eAAgB,WACd,GAAIlB,KAAKU,cACPV,KAAKa,MAAM,qDACR,CACH,IAAI9B,EAAciB,KAAKjB,YACrBwB,EAASP,KAAKO,OACdQ,EAASf,KAAKe,OAChBf,KAAKW,UAAYX,KAAKC,QAAQC,sBAC5BF,KAAKf,QAAQI,WACbW,KAAKjB,YACLiB,KAAKjB,aAEPiB,KAAKI,MAAME,QAAQN,KAAKW,WACxBX,KAAKW,UAAUL,QAAQN,KAAKC,QAAQkB,aACpCnB,KAAKW,UAAUS,eAAiB,SAAUC,GACxC,IAAK,IAAIC,EAAK,EAAGA,EAAKvC,IAAeuC,EACnCf,EAAOe,GAAMD,EAAME,YAAYC,eAAeF,GAChDP,EAAOC,YAAY,CAAEC,QAAS,SAAUV,OAAQA,KAElDP,KAAKe,OAAOC,YAAY,CACtBC,QAAS,QACT5B,WAAYW,KAAKW,UAAUtB,aAE7BW,KAAKyB,UAAYC,KAAKC,QAI1BC,cAAe,WACb,OAAO5B,KAAKU,cAAgD,MAA/BgB,KAAKC,MAAQ3B,KAAKyB,WAAqB,MAGtEI,gBAAiB,WACX7B,KAAKU,eACPV,KAAKI,MAAM0B,aACX9B,KAAKW,UAAUmB,oBACR9B,KAAKW,UACZX,KAAKe,OAAOC,YAAY,CAAEC,QAAS,YAC9BjB,KAAKa,MAAM,6CAGpBkB,gBAAiB,WACX/B,KAAKU,eACPV,KAAKI,MAAM0B,aACX9B,KAAKW,UAAUmB,oBACR9B,KAAKW,UACZX,KAAKe,OAAOC,YAAY,CAAEC,QAAS,YAC9BjB,KAAKa,MAAM,6CAGpBmB,eAAgB,WACVhC,KAAKf,QAAQE,kBACXa,KAAKU,cACPV,KAAKa,MAAM,8CAEXb,KAAKiC,mBAAmBjC,MACxBA,KAAKQ,cAEJR,KAAKa,MAAM,wCAGlBL,WAAY,WACS,MAAfR,KAAKe,QAAgBf,KAAKe,OAAOmB,YACrClC,KAAKmC,iBAAiBnC,KAAMA,KAAKhB,UACjCgB,KAAKe,OAAS,IAAIqB,OAAOpC,KAAKlB,UAAY,0BAE1C,IAAIuD,EAAQrC,KACZA,KAAKe,OAAOuB,UAAY,SAAUjB,GAChC,IAAIkB,EAAOlB,EAAMkB,KACjB,OAAQA,EAAKtB,SACX,IAAK,SACHoB,EAAMG,gBAAgBH,EAAOA,EAAMrD,UACnC,MACF,IAAK,UACHqD,EAAMI,UAAUJ,GAChB,MACF,IAAK,WACHA,EAAMK,mBAAmBL,EAAOE,EAAKI,UACrC,MACF,IAAK,WACHN,EAAMO,WAAWP,EAAOE,EAAKM,MAC7B,MACF,IAAK,QACHR,EAAMxB,MAAM0B,EAAKO,WAGvB9C,KAAKe,OAAOC,YAAY,CACtBC,QAAS,OACT8B,OAAQ,CACNC,WAAYhD,KAAKC,QAAQ+C,WACzBjE,YAAaiB,KAAKjB,aAEpBE,QAASe,KAAKf,WAIlB4B,MAAO,SAAUiC,GACf9C,KAAKiD,QAAQjD,KAAM,uBAAyB8C,IAI9CX,iBAAkB,SAAUe,EAAUlE,KACtCwD,gBAAiB,SAAUU,EAAUlE,KACrCyD,UAAW,SAAUS,GACnBA,EAASnB,mBAEXW,mBAAoB,SAAUQ,EAAUP,KACxCV,mBAAoB,SAAUiB,KAC9BN,WAAY,SAAUM,EAAUL,GAC9BK,EAASD,QACPC,EACA,6DAGJD,QAAS,SAAUC,EAAUJ,GAC3BK,QAAQC,IAAIN,MAITjD,EA9MS,I,oJCEZwD,EAAM,CAGRA,QAAc,uCAKZC,E,OAAWC,EAAMC,OAAOH,GAE9BC,EAASG,aAAaC,QAAQC,KAC1B,SAACZ,GACG,IAAMa,EAAQC,aAAaC,QAAQ,SAInC,OAHIF,IACAb,EAAOgB,QAAQC,cAAgBJ,GAE5Bb,KAEX,SAACkB,GACG,OAAOC,QAAQC,OAAOF,MAMfX,QC3BFc,EAAU,UACVC,EAAW,WAEXC,EAAQ,QAERC,EAAc,cACdC,EAAsB,sBACtBC,EAAiB,iBACjBC,EAAkB,kBAClBC,EAAa,aACbC,EAAc,cACdC,EAAe,eACfC,EAAiB,iBACjBC,EAAgB,gBAMhBC,EAAc,cACdC,EAAsB,sBACtBC,EAAe,eACfC,EAAkB,kBAClBC,EAAiB,iBACjBC,EAAgB,gBAChBC,EAAc,cAEdC,EAAiB,iBAEjBC,EAAY,YACZC,EAAgB,gBAChBC,EAAoB,oBACpBC,EAAa,aACbC,EAAe,eACfC,EAAc,cACdC,EAAY,YAEZC,EAAc,cACdC,EAAkB,kBAClBC,EAAsB,sBACtBC,EAAe,eACfC,EAAiB,iBACjBC,EAAgB,gBAChBC,EAAc,cAEdC,EAAa,aACbC,GAAc,cACdC,GAAc,cACdC,GAAY,YACZC,GAAgB,gBAChBC,GAAmB,mBACnBC,GAAa,aAEbC,GAAiB,iBACjBC,GAAgB,gB,SCpDdC,kB,oBC8CTC,GAAe,SAAC/C,GAAD,OAAS,SAACgD,GAC7B,IAAInE,EAEFA,EADEmB,EAAIiD,SACIjD,EAAIiD,SAAS3E,KAAK1B,MAElBoD,EAAInB,QAEhBK,QAAQC,IAAIa,GACZkD,YAAW,WACTF,EAASG,GAAW,SACnB,KACHH,EAAS,CAAEI,KAAM/C,EAAOgD,QAASxE,MActByE,GAAU,WAGrB,OAFA1D,aAAa2D,WAAW,SACxBC,GAAQC,KAAK,KACN,CAAEL,KAAMhD,IAcJ+C,GAAa,SAACtE,GACzB,MAAO,CAAEuE,KAAM/C,EAAOgD,QAASxE,IAgBpB6E,GAAY,SAACC,GAAD,8CAAc,WAAOX,GAAP,eAAAY,EAAA,+EAEZC,EAAWC,IAAX,iBAAyBH,IAFb,OAE7BV,EAF6B,OAGnCD,EAAS,CAAEI,KAAM1C,EAAY2C,QAASJ,EAAS3E,OAHZ,gDAKnC0E,EAASD,GAAa,EAAD,KALc,yDAAd,uDASZgB,GAAa,yDAAM,WAAOf,GAAP,eAAAY,EAAA,+EAELC,EAAWC,IAAX,UAFK,OAEtBb,EAFsB,OAG5BD,EAAS,CAAEI,KAAMzC,EAAa0C,QAASJ,EAAS3E,OAHpB,gDAK5B0E,EAASD,GAAa,EAAD,KALO,yDAAN,uDASbiB,GAAa,SAACC,GAAD,8CAAY,WAAOjB,GAAP,eAAAY,EAAA,+EAEXC,EAAWC,IAAX,iBAAyBG,IAFd,OAE5BhB,EAF4B,OAGlCD,EAAS,CAAEI,KAAM9C,EAAa+C,QAASJ,EAAS3E,OAHd,gDAKlC0E,EAASD,GAAa,EAAD,KALa,yDAAZ,uDASbmB,GAAc,SAACC,GAAD,8CAAY,WAAOnB,GAAP,eAAAY,EAAA,+EAEZC,EAAWC,IAAX,kBAA0BK,IAFd,OAE7BlB,EAF6B,OAGnCD,EAAS,CAAEI,KAAMxC,EAAcyC,QAASJ,EAAS3E,OAHd,gDAKnC0E,EAASD,GAAa,EAAD,KALc,yDAAZ,uDASdqB,GAAgB,SAACC,GAAD,8CAAa,WAAOrB,GAAP,eAAAY,EAAA,+EAEfC,EAAWC,IAAX,oBAA4BO,IAFb,OAEhCpB,EAFgC,OAGtCD,EAAS,CAAEI,KAAMvC,EAAgBwC,QAASJ,EAAS3E,OAHb,gDAKtC0E,EAASD,GAAa,EAAD,KALiB,yDAAb,uDAShBuB,GAAe,SAACC,GAAD,8CAAe,WAAOvB,GAAP,eAAAY,EAAA,+EAEhBC,EAAWC,IAAX,mBAA2BS,IAFX,OAEjCtB,EAFiC,OAGvCD,EAAS,CAAEI,KAAMtC,EAAeuC,QAASJ,EAAS3E,OAHX,gDAKvC0E,EAASD,GAAa,EAAD,KALkB,yDAAf,uDAoCfyB,GAAa,SAACC,GAAD,8CAAgB,WAAOzB,EAAU0B,GAAjB,iBAAAd,EAAA,sEAE9Be,EAAgBD,IAAWE,MAA3BD,YAF8B,SAGfd,EAAWgB,KAAK,SAAhB,2BAClBJ,GADkB,IAErBE,YAAaA,EAAYG,MALW,OAGhC7B,EAHgC,OAOtCD,EAAS,CAAEI,KAAMrC,EAAasC,QAASJ,EAAS3E,OAPV,gDAStC0E,EAASD,GAAa,EAAD,KATiB,yDAAhB,yDA0EbgC,GACX,SAACN,EAAYF,GAAb,8CAA2B,WAAOvB,EAAU0B,GAAjB,mBAAAd,EAAA,sDACzBZ,EAAS,CAAEI,KAAM9B,IACjB,IACUqD,EAAgBD,IAAWE,MAA3BD,aACFK,EAAgBN,IAAWO,SAASV,IAEvBW,QAAQ1K,SACzBiK,EAAWU,QAAS,GAOtBV,EAAWW,KAAOX,EAAWW,KAAK,IAG5BC,EAAS,IAAIC,YAGZC,OAAS,SAACnI,IAEM,IAAKoI,OAAOC,cAC/BD,OAAOE,qBAGIC,gBAAgBvI,EAAMlD,OAAO0L,OAA1C,+BAAAhC,EAAA,MAAkD,WAAOtH,GAAP,2BAAAsH,EAAA,sDAahD,IAASlJ,KAXHmL,EAAWC,SAASxJ,EAAOuJ,UAE3BE,EAJ0C,2BAK3CtB,GAL2C,IAM9CE,YAAaA,EAAYG,GACzBkB,QAASzB,EACTsB,aAGII,EAAW,IAAIC,SAELH,EACdE,EAASE,OAAOzL,EAAKqL,EAAWrL,IAdc,gBAiBzBmJ,EAAWgB,KAAK,WAAYoB,EAAU,CAC3DnG,QAAS,CAAE,eAAgB,yBAlBmB,QAiB1CmD,EAjB0C,QAqBnC3E,KAAK6G,QACZH,EAAcE,QAAQ1K,SAClB4L,EAAapB,EAAcE,QAAQmB,KACvC,SAACvB,GAAD,OAAQJ,IAAWQ,QAAQJ,OAEvBwB,EAAYF,EAAWG,MAAK,SAACC,GAAD,OAAOA,EAAErB,WACjCA,QAAS,EACnBnC,EACEyD,GACEC,KAAEC,KAAKL,EAAW,OAAQ,WAAY,UACtCA,EAAUxB,GACVP,KAORvB,EAAS,CACPI,KAAMhC,EACNiC,QAAS,CAAEuD,OAAQ3D,EAAS3E,KAAM0H,QAASzB,KAzCG,2CAAlD,wDA+CFc,EAAOwB,QAAU,SAACzJ,GAChB8B,QAAQtC,MAAM,sCAAuCQ,IAIvDiI,EAAOyB,kBAAkBrC,EAAWW,MACpC,MAAOpF,GACPgD,EAASD,GAAa/C,IAhFC,2CAA3B,yDAiGW+G,GACX,SAACtC,GAAD,8CAAgB,WAAOzB,EAAU0B,GAAjB,iBAAAd,EAAA,sEAEJe,EAAgBD,IAAWE,MAA3BD,YAFI,SAGWd,EAAWgB,KAAK,iBAAhB,2BAClBJ,GADkB,IAErBE,YAAaA,EAAYG,MALf,OAGN7B,EAHM,OAOZD,EAAS,CACPI,KAAMpC,EACNqC,QAAS,CACP2D,aAAc/D,EAAS3E,KACvB2I,SAAUxC,EAAWyC,cAXb,gDAeZlE,EAASD,GAAa,EAAD,KAfT,yDAAhB,yDAkEWoE,GACX,SADWA,EACV1C,EAAYF,EAAWF,GAAxB,8CAAoC,WAAOrB,EAAU0B,GAAjB,yBAAAd,EAAA,sEAExBe,EAAgBD,IAAWE,MAA3BD,aACFyC,EAAc1C,IAAWO,SAASV,IACxB8C,UACd5C,EAAW4C,SAAU,GALS,SAOTxD,EAAWyD,MAAX,oBAA8B/C,GAA9B,2BAClBE,GADkB,IAErBE,YAAaA,EAAYG,MATK,QAO1B7B,EAP0B,QAWnB3E,KAAK+I,UAAYD,EAAYC,UAClCE,EAAc7C,IAAW8C,OAAOnD,GAChCoD,EAAcF,EAAYtC,SAASoB,KACvC,SAACvB,GAAD,OAAQJ,IAAWO,SAASH,OAExB4C,EAAaD,EAAYlB,MAAK,SAACoB,GAAD,OAAOA,EAAEN,YAClCA,SAAU,EACrBrE,EACEmE,EACET,KAAEC,KAAKe,EAAY,OAAQ,QAAS,WACpCA,EAAW5C,GACXT,KAMNrB,EAAS,CACPI,KAAMzB,EACN0B,QAAS,CAAE2C,QAAS/C,EAAS3E,KAAMsJ,MAAOvD,KA9BZ,kDAiChCrB,EAASD,GAAa,EAAD,KAjCW,0DAApC,yDAqCW0D,GACX,SADWA,EACVhC,EAAYoD,EAAUtD,GAAvB,8CAAqC,WAAOvB,EAAU0B,GAAjB,2BAAAd,EAAA,kEAEzBe,EAAgBD,IAAWE,MAA3BD,aACFmD,EAAapD,IAAWQ,QAAQ2C,IACvB1C,SACbV,EAAWU,QAAS,IAElBV,EAAWW,OAAQX,EAAWW,KAAK5K,OAPN,iBAQ/BiK,EAAWW,KAAOX,EAAWW,KAAK,IAG5BC,EAAS,IAAIC,YAGZC,OAAS,SAACnI,IAEM,IAAKoI,OAAOC,cAC/BD,OAAOE,qBAGIC,gBAAgBvI,EAAMlD,OAAO0L,OAA1C,+BAAAhC,EAAA,MAAkD,WAAOtH,GAAP,6BAAAsH,EAAA,sDAYhD,IAASlJ,KAVHmL,EAAWC,SAASxJ,EAAOuJ,UAE3BE,EAJ0C,2BAK3CtB,GAL2C,IAM9CE,YAAaA,EAAYG,GACzBe,aAGII,EAAW,IAAIC,SAELH,EACdE,EAASE,OAAOzL,EAAKqL,EAAWrL,IAbc,gBAgBzBmJ,EAAWyD,MAAX,mBACTO,GACZ5B,EACA,CACEnG,QAAS,CAAE,eAAgB,yBApBiB,QAgB1CmD,EAhB0C,QAwBnC3E,KAAK6G,SAAW2C,EAAW3C,SAChCH,EAAgBN,IAAWO,SAASV,GACpC6B,EAAapB,EAAcE,QAAQmB,KACvC,SAACvB,GAAD,OAAQJ,IAAWQ,QAAQJ,OAEvBwB,EAAYF,EAAWG,MAAK,SAACC,GAAD,OAAOA,EAAErB,WACjCA,QAAS,EACnBnC,EACEyD,EACEC,KAAEC,KAAKL,EAAW,OAAQ,WAAY,UACtCA,EAAUxB,GACVP,KAKNvB,EAAS,CAAEI,KAAMxB,EAAayB,QAASJ,EAAS3E,OAxCA,2CAAlD,wDA6CF+G,EAAOwB,QAAU,SAACzJ,GAChB8B,QAAQtC,MAAM,sCAAuCQ,IAIvDiI,EAAOyB,kBAAkBrC,EAAWW,MAtEL,yCAwERvB,EAAWyD,MAAX,mBAA6BO,GAA7B,2BAClBpD,GADkB,IAErBE,YAAaA,EAAYG,MA1EI,SAwEzB7B,EAxEyB,QA4ElB3E,KAAK6G,SAAW2C,EAAW3C,SAChCH,EAAgBN,IAAWO,SAASV,GACpC6B,EAAapB,EAAcE,QAAQmB,KACvC,SAACvB,GAAD,OAAQJ,IAAWQ,QAAQJ,OAEvBwB,EAAYF,EAAWG,MAAK,SAACC,GAAD,OAAOA,EAAErB,WACjCA,QAAS,EACnBnC,EACEyD,EACEC,KAAEC,KAAKL,EAAW,OAAQ,WAAY,UACtCA,EAAUxB,GACVP,KAKNvB,EAAS,CAAEI,KAAMxB,EAAayB,QAASJ,EAAS3E,OA5FjB,0DA+FjC0E,EAASD,GAAa,EAAD,KA/FY,0DAArC,yDA6JWgF,GAAa,SAAC5D,GAAD,8CAAY,WAAOnB,EAAU0B,GAAjB,iBAAAd,EAAA,6DAC5Be,EAAgBD,IAAWE,MAA3BD,YAD4B,kBAGXd,EAAWgB,KAAK,gBAAiB,CACtDV,SACAQ,YAAaA,EAAYG,KALO,QAG5B7B,EAH4B,QAOzB3E,KAAK0J,UAAUC,SAAQ,SAAC5D,GAC/BrB,EAASkF,GAAY7D,EAASpB,EAAS3E,KAAKwG,QAE9C9B,EAAS,CAAEI,KAAMtB,EAAauB,QAASJ,EAAS3E,OAVd,gDAYlC0E,EAASD,GAAa,EAAD,KAZa,yDAAZ,yDAgBbmF,GAAc,SAAC7D,EAASF,GAAV,8CAAqB,WAAOnB,EAAU0B,GAAjB,mBAAAd,EAAA,6DACtCe,EAAgBD,IAAWE,MAA3BD,YADsC,kBAGrBd,EAAWgB,KAAK,iBAAkB,CACvDR,UACAF,SACAQ,YAAaA,EAAYG,KANiB,QAGtC7B,EAHsC,QAQnC3E,KAAK2G,SAASgD,SAAQ,SAAC1D,GAC9BvB,EAASmF,GAAc5D,EAAWtB,EAAS3E,KAAKwG,QAE5CsD,EAAYC,OAAOC,OAAO5D,IAAW0D,WACrBC,OAAOC,OAAO5D,IAAW6D,eAAeC,QAC5D,SAACC,GAAD,OAASA,EAAIb,QAAUvD,KAEX4D,SAAQ,SAACQ,GACrB,IAAMxB,EAAWmB,EAAU7B,MAAK,SAACmC,GAAD,OAAQA,EAAGC,MAAMC,SAASH,EAAI3D,OAC9D9B,EAAS6F,GAAmBJ,EAAI3D,GAAImC,EAASnC,QAE/C9B,EAAS,CACPI,KAAMnB,EACNoB,QAAS,CAAEuE,MAAO3E,EAAS3E,KAAMwK,KAAM3E,KArBG,kDAwB5CnB,EAASD,GAAa,EAAD,KAxBuB,0DAArB,yDA4BdoF,GACX,SAAC5D,EAAWF,GAAZ,8CAAwB,WAAOrB,EAAU0B,GAAjB,uBAAAd,EAAA,6DACde,EAAgBD,IAAWE,MAA3BD,YADc,kBAGGd,EAAWgB,KAAK,mBAAoB,CACzDN,YACAF,UACAM,YAAaA,EAAYG,KANP,QAGd7B,EAHc,QAQP3E,KAAK+I,UACVE,EAAc7C,IAAW8C,OAAOnD,OAE9B0E,EAAoBxB,EAAYtC,SAASuD,QAC7C,SAAC1D,GAAD,OAAQA,IAAOP,MAEK/J,SACdwO,EACJtE,IAAWO,SACT8D,EAAkBA,EAAkBvO,OAAS,KAEtC6M,SAAU,EACrBrE,EAASiG,GAAcD,EAAY3E,IACnCrB,EACEmE,GACET,KAAEC,KAAKqC,EAAY,OAAQ,QAAS,WACpCA,EAAWlE,GACXT,KAIJrB,EAASiG,GAAc,KAAM5E,KAInCpB,EAAS3E,KAAK4G,QAAQ+C,SAAQ,SAACJ,GAC7B7E,EAASkG,GAAarB,EAAU5E,EAAS3E,KAAKwG,GAAIT,OAEpDrB,EAAS,CACPI,KAAMlB,EACNmB,QAAS,CAAE2C,QAAS/C,EAAS3E,KAAMsJ,MAAOvD,KAtCxB,kDAyCpBrB,EAASD,GAAa,EAAD,KAzCD,0DAAxB,yDA6CWmG,GACX,SAACrB,EAAUtD,EAAWF,GAAtB,8CAAkC,WAAOrB,EAAU0B,GAAjB,uBAAAd,EAAA,6DACxBe,EAAgBD,IAAWE,MAA3BD,YADwB,kBAGPd,EAAWgB,KAAK,kBAAmB,CACxDgD,WACAtD,YACAI,YAAaA,EAAYG,KANG,QAGxB7B,EAHwB,QAQjB3E,KAAK6G,SACVH,EAAgBN,IAAWO,SAASV,OAElC4E,EAAmBnE,EAAcE,QAAQsD,QAC7C,SAAC1D,GAAD,OAAQA,IAAO+C,MAEIrN,SACb4O,EACJ1E,IAAWQ,QAAQiE,EAAiBA,EAAiB3O,OAAS,KACtD2K,QAAS,EACnBnC,EAASqG,GAAaD,EAAUtE,GAAIT,IACpCrB,EACEyD,GACEC,KAAEC,KAAKyC,EAAW,OAAQ,WAAY,UACtCA,EAAUtE,GACVP,KAIJvB,EAASqG,GAAa,KAAMhF,KAIlCrB,EAAS,CACPI,KAAMjB,EACNkB,QAAS,CAAEuD,OAAQ3D,EAAS3E,KAAM0H,QAASzB,KAjCf,gDAoC9BvB,EAASD,GAAa,EAAD,KApCS,yDAAlC,yDAwDW8F,GACX,SAACS,EAAgBpC,GAAjB,8CAAgC,WAAOlE,EAAU0B,GAAjB,iBAAAd,EAAA,6DACtBe,EAAgBD,IAAWE,MAA3BD,YADsB,kBAGLd,EAAWgB,KAAK,wBAAyB,CAC9DyE,iBACApC,aACAvC,YAAaA,EAAYG,KANC,OAGtB7B,EAHsB,OAQ5BD,EAAS,CACPI,KAAMpB,EACNqB,QAAS,CAAE2D,aAAc/D,EAAS3E,KAAM2I,SAAUC,KAVxB,gDAa5BlE,EAASD,GAAa,EAAD,KAbO,yDAAhC,yDAiBWwG,GAAY,WACvB,MAAO,CAAEnG,KAAMf,IAOJmH,GAAa,SAACC,GAAD,OAAU,SAACzG,GACnC,IAAM0G,EAAa,CACjB9B,MAAO6B,EAAK7B,MACZ5B,QAASyD,EAAKzD,QAAQ2D,KACtBC,KAAMH,EAAK7C,OAAOgD,KAClB/D,SAAU4D,EAAK7C,OAAOf,SACtBgE,MAAOJ,EAAK7C,OAAO9B,IAGrB9B,EAAS,CACPI,KAAMb,GACNc,QAAS,CAAEoG,KAAMC,EAAYI,OAAQL,EAAKX,UAkNjCG,GAAgB,SAACjD,EAAS3B,GACrC,MAAO,CAAEjB,KAAMR,GAAgBS,QAAS,CAAE2C,UAAS3B,aAGxCgF,GAAe,SAACzC,EAAQvC,GACnC,MAAO,CAAEjB,KAAMP,GAAeQ,QAAS,CAAEuD,SAAQvC,a,QC59BpChI,gBANS,SAAA0N,GACpB,MAAO,CACHnN,MAAOmN,EAAMnN,MAAMA,SAIa,CAAEuG,eAA3B9G,EA5BD,SAAC,GAA2B,IAAzBO,EAAwB,EAAxBA,MAAOuG,EAAiB,EAAjBA,WAQpB,OANA6G,qBAAU,WACNxG,GAAQyG,QAAO,SAAAC,GACX/G,EAAW,WAEhB,CAACK,KAEC5G,EAKD,uBAAKuN,UAAU,QAAQC,QAAS,kBAAMjH,EAAW,OAAjD,UACI,sBAAKgH,UAAU,UAAf,eACCvN,EACD,sBAAKuN,UAAU,UAAf,kBAPG,Q,8GCVTE,G,oDAEF,WAAYC,GAAQ,IAAD,+BACf,cAAMA,IAIVP,MAAQ,CAAEQ,YAAY,EAAOC,eAAgB,MAL1B,EAuBnBC,mBAAqB,SAACC,GAClBA,EAAEC,mBAxBa,EA2BnBC,UAAY,SAACF,GACL,EAAKG,IAAIxD,SAAW,EAAKwD,IAAIxD,QAAQyD,SAASJ,EAAExQ,SAGhD,EAAK6P,MAAMQ,YACX,EAAKQ,SAAS,CAAER,YAAY,KAhCjB,EAoCnBS,YAAc,SAACC,GACX,OAAOA,EAAMjQ,QAAQqL,KAAI,SAAA6E,GACrB,OACI,yBAEIC,MAAOD,EAAOC,MAFlB,SAIKD,EAAOE,SAHHF,EAAOC,WAxCT,EAiDnBE,OAAS,SAACX,EAAGvO,GACT,IAAMiJ,EAAOsF,EAAExQ,OAAOoR,MAAM,IAE5BC,EADqBpP,EAAboP,UACCnG,IApDM,EAuDnBjJ,MAAQ,SAAC8O,GACL,IAAIO,EAAa,GACE,SAAfP,EAAM7H,OACNoI,EAAa,YAEE,aAAfP,EAAM7H,OACNoI,EAAa,YAEE,UAAfP,EAAM7H,OACNoI,EAAa,cAGjB,IAAMC,EACF,sBAAKtB,UAAU,cAAf,SACCc,EAAMS,KAAKC,SAAYV,EAAMS,KAAK9O,OAAS,+BAAIqO,EAAMS,KAAK9O,MAAM,gDAGrE,MAAmB,SAAfqO,EAAM7H,aACC6H,EAAM9O,MAAMgP,MACZ,uCACFM,EACD,kDACQR,EAAM9O,OADd,IAEIiH,KAAK,OACL+G,UAAU,YACVkB,OAAQ,SAACX,GAAD,OAAO,EAAKW,OAAOX,EAAGO,EAAM9O,eAItB,WAAf8O,EAAM7H,KACN,uCACFqI,EACD,mDACQR,EAAM9O,OADd,IAEIyP,UAAWX,EAAMW,UAFrB,SAIKX,EAAMjQ,QAAU,EAAKgQ,YAAYC,GAAS,WAI5C,uCACFQ,EACD,kDACQR,EAAM9O,OADd,IAEIyP,UAAWX,EAAMW,UACjBxI,KAAM6H,EAAM7H,KACZ+G,UAAWqB,SArGR,EA2GnBK,SAAW,SAAAV,GACP,OAAOA,OAAQ9P,EAAY,YA5GZ,EA+GnByQ,WAAa,WAET,OAAO,EAAKxB,MAAMyB,OAAO1F,KAAI,SAAC4E,EAAO1Q,GACjC,IAAMqR,EAAkB,IAANrR,EACdyR,EAAO,EAAK7P,MAIhB,MAHmB,aAAf8O,EAAM7H,OACN4I,EAAO,YAEJ,iCACH,mCAAQf,EAAMgB,MAAd,QACA,eAACC,GAAA,EAAD,CACIvC,KAAMsB,EAAMtB,KACZwC,UAAWH,EACXJ,UAAWA,EACXxI,KAAM6H,EAAM7H,KACZgJ,SAAUnB,EAAMY,SAAW,EAAKA,SAAW,KAC3C7Q,QAASiQ,EAAMjQ,QANnB,SAQKiQ,EAAMjQ,QAAU,EAAKgQ,YAAYC,GAAS,SAVlCA,EAAMgB,WAvHZ,EAwInBI,WAAa,SAAC5H,GACV,EAAK6F,MAAMgC,SAAS7H,GACpB,EAAKsG,SAAS,CAAER,YAAY,IAC5B,EAAKD,MAAMiC,SA3II,EA8InBC,QAAU,WACN,GAAI,EAAKzC,MAAMQ,WAAY,CACvB,IAAMkC,EAAW,EAAKnC,MAAMmC,SAAW,EAAKnC,MAAMmC,SAAW,GAC7D,OAAO,qCACH,uBAAKtC,UAAS,kBAAasC,GAAYrC,QAAS,SAAAM,GAAC,OAAIA,EAAEC,mBAAvD,UACI,qBAAIR,UAAU,gBAAd,SAA+B,EAAKG,MAAM1C,QAC1C,wBAAM0E,SAAY,EAAKhC,MAAMoC,aAAa,EAAKL,YAA/C,UACK,EAAKP,aACN,sBAAK3B,UAAU,yBAAf,SACI,yBAAQA,UAAU,gBAAgB/G,KAAK,SAAvC,4BAvJL,EA+JnBuJ,MAAQ,SAACjC,GACLA,EAAEC,kBACE,EAAKE,IAAIxD,SAAW,EAAKwD,IAAIxD,UAAYqD,EAAExQ,SAG3C,EAAK6P,MAAMQ,WACX,EAAKQ,SAAS,CAAER,YAAY,IAE5B,EAAKQ,SAAS,CAAER,YAAY,MArKhC,EAAKM,IAAM+B,IAAMC,YAFF,E,uDAOnB,SAAmBC,EAAWC,IACG,IAAzBA,EAAUxC,aAAkD,IAA1BxO,KAAKgO,MAAMQ,YAC7CyC,SAASC,iBAAiB,QAASlR,KAAK6O,UAAW,CAACsC,SAAS,IAC7DF,SAASC,iBAAiB,UAAWlR,KAAK0O,mBAAoB,CAACyC,SAAS,MACxC,IAAzBH,EAAUxC,aAAiD,IAA1BxO,KAAKgO,MAAMQ,aACnDyC,SAASG,oBAAoB,QAASpR,KAAK6O,UAAW,CAACsC,SAAS,IAChEF,SAASG,oBAAoB,UAAWpR,KAAK0O,mBAAoB,CAACyC,SAAS,O,kCAKnF,WACIF,SAASG,oBAAoB,QAASpR,KAAK6O,UAAW,CAACsC,SAAS,IAChEF,SAASG,oBAAoB,UAAWpR,KAAK0O,mBAAoB,CAACyC,SAAS,M,oBAwJ/E,WAEI,OAAO,qCACH,uBAAK/C,UAAU,MAAMC,QAASrO,KAAK4Q,MAAO9B,IAAK9O,KAAK8O,IAApD,UACI,sBAAKpQ,IAAKsB,KAAKuO,MAAM8C,QACpBrR,KAAKyQ,mB,GAnLEI,IAAMS,WA0LfC,gBAAU,CAAEC,KAAM,QAAlBD,CAA4BjD,IC3LrCmD,G,2KAEF,WACIR,SAASS,cAAc,cAAcC,UAAUC,IAAI,kB,kCAEvD,WACIX,SAASS,cAAc,cAAcC,UAAUE,OAAO,kB,oBAG1D,WACI,OAAOC,IAASC,aACZ,sBAAK1D,QAASrO,KAAKuO,MAAMyD,UAAW5D,UAAU,mBAA9C,SACI,uBACIC,QAAS,SAAAM,GAAC,OAAIA,EAAEC,mBAChBR,UAAU,YAFd,UAII,sBAAKA,UAAU,cAAf,SACKpO,KAAKuO,MAAM0D,UAEhB,+BACKjS,KAAKuO,MAAM2D,eAIxBjB,SAASS,cAAc,e,GAxBfb,IAAMS,WA6BXG,MC+BAU,GA7DM,SAAC,GAA+B,IAA7B5B,EAA4B,EAA5BA,SAAU6B,EAAkB,EAAlBA,YAE9B,EAA8BC,oBAAS,GAAvC,oBAAOC,EAAP,KAAgBC,EAAhB,KAkDA,OACI,iCACI,sBAAK7T,IAAI,qBAAqB0P,UAAU,SAASC,QARzC,SAACM,GACbA,EAAEC,kBACF2D,GAAW,MAOND,GAtBD,eAAC,GAAD,CACIL,QA7BF,qBAAN,OAA4BG,EAA5B,MA8BQF,QAzBJ,uCACI,yBACI9D,UAAU,eACVC,QAAS,WACLkC,IACAgC,GAAW,IAJnB,oBASA,yBACInE,UAAU,eACVC,QAAS,kBAAMkE,GAAW,IAF9B,wBAgBAP,UAAW,SAAArD,GACPA,EAAEC,kBACF2D,GAAW,UCtChB,YAAAC,GAAmB,IAExBC,EAFuB,oDAIzB,WAAYlE,GAAQ,IAAD,+BACf,cAAMA,IAGVP,MAAQ,CAAE0E,YAAY,GAJH,EAenBC,aAAe,WACX,EAAKC,aAhBU,EAJM,sDAUzB,WACI5S,KAAK4S,cAXgB,uBAuBzB,WACQ5S,KAAKuO,MAAMsE,MAAQ7S,KAAKuO,MAAM3F,aAAe5I,KAAKuO,MAAMsE,KAAKhK,MAAMgE,SAAS7M,KAAKuO,MAAM3F,YAAYG,KACnG/I,KAAKgP,SAAS,CAAE0D,YAAY,MAzBX,oBA6BzB,WACI,OAAO,eAACF,EAAD,2BAAoBxS,KAAKuO,OAAzB,IAAgCmE,WAAY1S,KAAKgO,MAAM0E,WAAYC,aAAc3S,KAAK2S,oBA9BxE,GAEG9B,IAAMS,WAyCtC,OAAOhR,aAPiB,SAAA0N,GACpB,MAAO,CACH6E,KAAM7E,EAAM8E,KAAKD,KACjBjK,YAAaoF,EAAMnF,MAAMD,eAI1BtI,CAAyBmS,ICyFrBM,GArIG,SAAC,GAAuI,IAArIC,EAAoI,EAApIA,aAAcC,EAAsH,EAAtHA,SAAUC,EAA4G,EAA5GA,SAAUC,EAAkG,EAAlGA,YAAaC,EAAqF,EAArFA,YAAaC,EAAwE,EAAxEA,gBAAiBC,EAAuD,EAAvDA,iBAAkBC,EAAqC,EAArCA,mBAAoBC,EAAiB,EAAjBA,WAEpI,EAA8CnB,oBAAS,GAAvD,oBAAOoB,EAAP,KAAwBC,EAAxB,KAEMC,EAAcC,iBAAO,MAE3B3F,qBAAU,WACFwF,EACAxC,SAASC,iBAAiB,QAAS2C,EAAa,CAAC1C,SAAS,IAE1DF,SAASG,oBAAoB,QAASyC,EAAa,CAAC1C,SAAS,MAElE,CAACsC,IAEJ,IAAMK,EAAQ,WACV,IAAIA,EAOJ,OALIA,EADsB,IAAtBb,IAAWxU,OACN,YAAQyU,EAAR,KAEA,UAAMD,IAAWxU,OAAS,EAA1B,YAA+ByU,EAA/B,MAIL,8BAAKY,KAIPC,EAAa,WACf,GAAIf,EAAa1H,SAAW0H,EAAa5J,OACrC,OACI,sBAAKgF,UAAU,UAAf,sBAONyF,EAAc,SAAAlF,GAEZgF,EAAYrI,SAAWqI,EAAYrI,QAAQyD,SAASJ,EAAExQ,SAItDsV,GACAC,GAAmB,IAIrBM,EAAiB,WACnB,GAAIP,EAEA,OAAOR,IAAW3I,KAAI,SAAA9L,GAClB,IAAM8M,EAAU9M,EAAE8M,SAAW9M,EAAE4K,OAAS,uBAAMgF,UAAU,eAAhB,wBAAmD,KAC3F,OAAO,uBACHA,UAAU,gBACVC,QAAS,WACL+E,EAAY5U,GACZkV,GAAmB,IAJpB,UAQEP,EAAY3U,GACZ8M,IAHA9M,EAAEuK,QA4DvB,OACI,uBACIqF,UAAS,qBAA6B,WAAb8E,EAAwB,SAAW,IADhE,UAnDiB,WACjB,GAAIF,EACA,OACI,uBAAK5E,UAAU,iBAAf,UACI,uBAAKA,UAAU,gBAAf,UACK0F,IACAC,OAEL,uBAAK3F,UAAU,qBAAf,UACI,uBAAKA,UAAU,WAAWU,IAAK6E,EAA/B,UACI,yBACIvF,UAAU,UACVC,QAAS,kBAAMqF,GAAoBD,IAFvC,SAIKN,EAAYH,KAEjB,sBAAK5E,UAAU,mBAAf,SACK4F,SAGRR,GAAcA,OAInB,uBAAKpF,UAAU,eAAf,UACI,sBAAKA,UAAU,qBAAf,oBACA,6BACK4E,EAAaiB,OAASjB,EAAakB,iBAMpD,IAAIC,EAAa,GAOjB,MANiB,YAAbjB,IACAiB,EAAa,QAEA,WAAbjB,IACAiB,EAAa,WAGb,sBAAK/F,UAAU,iBAAf,SACI,sBAAKA,UAAU,gBAAf,SACI,2CAAW8E,EAAX,sBAAiCiB,EAAjC,cAWXC,GACD,uBAAKhG,UAAU,iBAAf,UACKiF,IACAL,GAAgBM,IAChBN,GAAgBO,WCsFlBjT,eAAQ,KAAM,CAC3BgN,gBACAtE,gBACA0B,cACAyC,gBACAM,eALanN,CAMZ+T,IA5MY,SAAC,GAWT,IAVLlL,EAUI,EAVJA,QACAmE,EASI,EATJA,aACAzB,EAQI,EARJA,MACA6G,EAOI,EAPJA,WACAzI,EAMI,EANJA,QACAjB,EAKI,EALJA,aACA0B,EAII,EAJJA,WACAyC,EAGI,EAHJA,aACAO,EAEI,EAFJA,KACAD,EACI,EADJA,WAEA,EAA4C4E,mBAASxG,EAAMyI,gBAA3D,oBAAOA,EAAP,KAAuBC,EAAvB,KAEA,EAAwClC,oBAAS,GAAjD,oBAAOmC,EAAP,KAAqBC,EAArB,KAIAxG,qBAAU,WACJqG,GAAkBA,IAAmBzI,EAAMyI,gBAC7ChH,EAAagH,EAAgBzI,EAAM9C,MAGpC,CAACuL,IAEJrG,qBAAU,WACJqG,GAAkBA,IAAmBzI,EAAMyI,gBAC7ChH,EAAazB,EAAMyI,eAAgBzI,EAAM9C,MAE1C,CAAC8C,EAAMyI,iBAEVrG,qBAAU,WACRsG,EAAkB1I,EAAMyI,gBACxBG,GAAgB,KACf,CAAC5I,EAAMyI,iBAEV,IAAMI,EAAc,SAAC7G,GACnB,OAAO8G,KAAOC,IAAI/G,GAAMgH,OAAO,aAoB3BC,EAAe,SAACpM,GACpBgC,EAAWhC,EAAY4L,EAAevL,GAAIkB,EAAQlB,IAClD0L,GAAgB,IAoHlB,OAAID,EACK,sBAAKpG,UAAU,oBAAf,SAhHL,uBAAKA,UAAU,eAAf,UACE,8CACA,sBAAKA,UAAU,WAAW1P,IAAI,8BAgH9BuL,EAEA,eAAC,GAAD,CACE+I,aAAcsB,EACdpB,SAAS,SACTD,SA3IS,WACf,GAAIqB,EACF,OAAOnL,EACJsD,QAAO,SAAChC,GAAD,OAAOA,GAAKA,EAAE1B,KAAOuL,EAAevL,MAC3CgM,MAAK,SAAClN,EAAG4C,GAAJ,OAAW5C,EAAEgG,KAAOpD,EAAEoD,KAAO,GAAK,MAwItCsF,YAhJc,SAAC1I,GACrB,MAAM,GAAN,OAAUiK,EAAYjK,EAAEoD,QAgJlBuF,YAAamB,EACblB,gBAnHgB,WACtB,GAAIX,EACF,OACE,eAAC,GAAD,CACE7G,MAAK,0BAAqB5B,EAAQ2D,MAClCyD,MAAM,iBACNrB,OAAQ,CACN,CACEE,MAAO,OACPtC,KAAM,OACNvG,KAAM,OACNyI,UAAU,GAEZ,CACEI,MAAO,OACPtC,KAAM,OACNvG,KAAM,OACNyI,UAAU,GAEZ,CACEI,MAAO,WACPtC,KAAM,WACNvG,KAAM,YAER,CACE6I,MAAO,iBACPtC,KAAM,SACNvG,KAAM,aAGVkJ,SAAU,SAAC7H,GAAD,OAjDE,SAACA,GACnBM,EAAaN,EAAYuB,EAAQlB,IACjC0L,GAAgB,GA+CgBO,CAAYtM,IACtC8I,KAAI,qBAAgB3F,EAAM9C,IAC1BkM,cAAe,CAAE7L,QAAQ,GACzBsH,SAAS,gBAmFT4C,iBA7EiB,WACvB,GAAIZ,EACF,OACE,eAAC,GAAD,CACE7G,MAAO,mBACPwF,MAAM,kBACNrB,OAAQ,CACN,CACEE,MAAO,OACPtC,KAAM,OACNvG,KAAM,QAER,CACE6I,MAAO,OACPtC,KAAM,OACNvG,KAAM,QAER,CACE6I,MAAO,WACPtC,KAAM,WACNvG,KAAM,YAER,CACE6I,MAAO,kBACPtC,KAAM,SACNvG,KAAM,aAGVkJ,SAAUuE,EACVG,cAAa,2BACRtK,KAAEC,KAAK0J,EAAgB,WAAY,WAD3B,IAEXzG,KAAM8G,KAAOC,IAAIN,EAAezG,MAAMgH,OAAO,gBAE/CrD,KAAI,sBAAiB3F,EAAM9C,IAC3BmM,oBAAoB,EACpBxE,SAAS,gBA2CT6C,mBArCmB,WACzB,GAAIb,EACF,OACE,eAAC,GAAD,CACEnC,SAAU,kBAAMpD,EAAamH,EAAevL,GAAIkB,EAAQlB,GAAI8C,EAAM9C,KAClEqJ,YAAasC,EAAYJ,EAAezG,SAiCxC2F,WA3Be,WAGrB,OACE,sBACE9U,IAAI,mBACJ0P,UAAU,YACVC,QAAS,kBAAMZ,EAAWC,SAwBrB,SCpDEpN,gBANS,SAAA0N,GACpB,MAAO,CACH7E,QAAS6E,EAAM7E,WAIiB,CAAEZ,gBAAc2E,iBAAeiI,cR8DrE,SAACzM,EAAYJ,GAAb,8CAAyB,WAAOrB,EAAU0B,GAAjB,uBAAAd,EAAA,sEAEbe,EAAgBD,IAAWE,MAA3BD,aACF4C,EAAc7C,IAAW8C,OAAOnD,IAErBY,SAASzK,SACxBiK,EAAW4C,SAAU,GANF,SASExD,EAAWgB,KAAK,YAAhB,2BAClBJ,GADkB,IAErBE,YAAaA,EAAYG,GACzB8C,MAAOvD,KAZY,QASfpB,EATe,QAeR3E,KAAK+I,SACZE,EAAYtC,SAASzK,SACjBiN,EAAcF,EAAYtC,SAASoB,KACvC,SAACvB,GAAD,OAAQJ,IAAWO,SAASH,OAExB4C,EAAaD,EAAYlB,MAAK,SAACoB,GAAD,OAAOA,EAAEN,YAClCA,SAAU,EACrBrE,EACEmE,GACET,KAAEC,KAAKe,EAAY,OAAQ,QAAS,WACpCA,EAAW5C,GACXT,KAORrB,EAAS,CACPI,KAAMjC,EACNkC,QAAS,CAAE2C,QAAS/C,EAAS3E,KAAMsJ,MAAOvD,KAnCvB,kDAsCrBrB,EAASD,GAAa,EAAD,KAtCA,0DAAzB,yDQ9DoFoE,eAAagB,kBAApF9L,CAAqG+T,IAnJpG,SAAC,GAA4H,IAA1HnL,EAAyH,EAAzHA,SAAUC,EAA+G,EAA/GA,QAASZ,EAAsG,EAAtGA,aAAc2E,EAAwF,EAAxFA,cAAerB,EAAyE,EAAzEA,MAAOsJ,EAAkE,EAAlEA,cAAezC,EAAmD,EAAnDA,WAAYtH,EAAuC,EAAvCA,YAAagB,EAA0B,EAA1BA,cAAesB,EAAW,EAAXA,KAE7H,EAA8C2E,mBAASxG,EAAMuJ,iBAA7D,oBAAOA,EAAP,KAAwBC,EAAxB,KACA,EAAoChD,mBAAS,MAA7C,oBAAOhI,EAAP,KAAmBiL,EAAnB,KAEArH,qBAAU,WAEFmH,IAAoBvJ,EAAMuJ,kBAC1BlI,EAAckI,EAAiBvJ,EAAM9C,IACrCuM,EAAcF,EAAgBjM,QAAQmB,KAAI,SAAAvB,GAAE,OAAII,EAAQJ,OACxDR,EAAa6M,EAAgBrM,OAElC,CAACqM,IAEJnH,qBAAU,WACFmH,GAEAE,EAAcF,EAAgBjM,QAAQmB,KAAI,SAAAvB,GAAE,OAAII,EAAQJ,SAE7D,CAACI,EAASiM,IAGbnH,qBAAU,WACFmH,IAAoBvJ,EAAMuJ,iBAC1BC,EAAmBxJ,EAAMuJ,mBAE9B,CAACvJ,EAAMuJ,kBAkGV,OACI,uCACI,eAAC,GAAD,CACIpC,aAAcoC,EACdlC,SAAS,UACTD,SAbK,WACb,OAAO/J,EAASuD,QAAO,SAAAb,GAAC,OAAIA,EAAE7C,KAAOqM,EAAgBrM,OAa7CoK,YAVW,SAAAvH,GACnB,MAAM,GAAN,OAAUA,EAAEgC,OAUJwF,YAAaiC,EACbhC,gBA1FY,WACpB,GAAIX,EACA,OACI,eAAC,GAAD,CACI7G,MAAK,2BAAsBA,EAAMA,OACjCwF,MAAM,iBACNrB,OAAQ,CACJ,CACIE,MAAO,OACPtC,KAAM,OACNvG,KAAM,QACNyI,UAAU,GAEd,CACII,MAAO,QACPtC,KAAM,QACNvG,KAAM,YAEV,CACI6I,MAAO,mBACPtC,KAAM,UACNvG,KAAM,aAGdkJ,SAAU,SAAC7H,GAAD,OAAgByM,EAAczM,EAAYmD,EAAM9C,KAC1DyI,KAAI,sBAAiB3F,EAAM9C,IAC3BkM,cAAe,CAAE3J,SAAS,GAC1B4J,oBAAoB,EACpBxE,SAAS,iBA+Db4C,iBAzDa,WACrB,GAAIZ,EACA,OAAO,eAAC,GAAD,CACH7G,MAAK,eAAUuJ,EAAgBxH,MAC/ByD,MAAM,kBACNrB,OAAQ,CACJ,CACIE,MAAO,OACPtC,KAAM,OACNvG,KAAM,SAEV,CACI6I,MAAO,QACPtC,KAAM,QACNvG,KAAM,YAEV,CACI6I,MAAO,mBACPtC,KAAM,UACNvG,KAAM,aAGdkJ,SAAU,SAAA7H,GAAU,OAAI0C,EAAY1C,EAAY0M,EAAgBrM,GAAI8C,EAAM9C,KAC1EkM,cAAetK,KAAEC,KAAKwK,EAAiB,OAAQ,QAAS,WACxD5D,KAAI,uBAAkB3F,EAAM9C,IAC5BmM,oBAAoB,EACpBxE,SAAS,iBAgCT6C,mBA3Be,WACvB,GAAIb,EACA,OAAO,eAAC,GAAD,CACHnC,SAAU,kBAAMnE,EAAcgJ,EAAgBrM,GAAI8C,EAAM9C,KACxDqJ,YAAagD,EAAgBxH,UAlFnB,WAElB,GAAIvD,GAAc+K,EAEd,OACI,uCACI,sBAAKhH,UAAU,gBAAf,oBACA,eAAC,GAAD,CAAQjF,QAASkB,EAAYwB,MAAOA,EAAO5B,QAASmL,EAAiB1H,KAAMA,OAoGlF6H,UC9DEjV,eAAQ,KAAM,CAAEmN,cAAY+H,mBTstBT,SAAC9H,GAAD,OAAU,SAACzG,EAAU0B,GAKrD,IAAMgF,EAAa,CACjB9B,MAAO6B,EAAK7B,MACZ5B,QAASyD,EAAKzD,QAAQ2D,KACtBC,KAAMH,EAAK7C,OAAOgD,KAClB/D,SAAU4D,EAAK7C,OAAOf,SACtBgE,MAAOJ,EAAK7C,OAAO9B,GACnB0M,SAAU/H,EAAK+H,UAGjBxO,EAAS,CACPI,KAAMb,GACNc,QAAS,CAAEoG,KAAMC,EAAYI,OAAQL,EAAKxC,cStuBiBsC,cAAhDlN,EA9EO,SAAC,GAA0D,IA2CzEoV,EAvCiB7H,EAJAH,EAAuD,EAAvDA,KAAMD,EAAiD,EAAjDA,WAAY0G,EAAqC,EAArCA,WAAYqB,EAAyB,EAAzBA,mBAEnD,EAA4BnD,oBAAS,GAArC,oBAAOsD,EAAP,KAAeC,EAAf,KAgDA,OALIF,EAAU,kCAMV,uBAAKtH,UAAU,iBAAf,UACI,sBAAKA,UAAU,sBAAf,SA5CY,SAACyH,GACjB,IAAMC,EAAUC,KAAKC,MAAMH,EAAO,IAC5BI,EAAUF,KAAKC,MAAMH,EAAO,IAAM,GAAK,IAAME,KAAKC,MAAMH,EAAO,IAAME,KAAKC,MAAMH,EAAO,IAC7F,MAAM,GAAN,OAAUC,EAAV,YAAqBG,GAyCqBC,CAAYxI,EAAK7C,OAAOf,YAC9D,uBAAKsE,UAAU,sBAAf,WACMuH,GA7BN,uBAAKvH,UAAU,iBAAf,UACI,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,uBACf,sBAAKA,UAAU,0BAkBf,sBACI1P,IAAI,mBACJ0P,UAAU,YACVC,QA5CD,SAACM,GACZA,EAAEC,kBACiB,SAAfuF,EACA1G,EAAWC,GACW,aAAfyG,GACPqB,EAAmB9H,IAwCXyI,OAAQ,kBAAMP,GAAU,SAGhC,uBAAKxH,UAAU,yBAAf,UACI,6BAAIV,EAAKzD,QAAQ2D,OACjB,8BA5DSC,EA4DOH,EAAK7C,OAAOgD,KA3D7B8G,KAAOC,IAAI/G,GAAMgH,OAAO,kBA6D3B,oBACIzG,UAAU,WACVC,QAAS,SAAAM,GAAC,OAAIA,EAAEC,mBAChBwH,KAAI,UAAKV,EAAL,+BAAmChI,EAAK7C,OAAO9B,GAA/C,YAAqDsN,mBAAmB3I,EAAK7B,MAAMA,QAH3F,SAMI,sBAAKnN,IAAI,iCC8KV4B,gBAZS,SAAA0N,GACpB,MAAO,CACH9E,SAAU8E,EAAM9E,SAChBC,QAAS6E,EAAM7E,QACfmN,KAAMtI,EAAMnF,MAAMD,YAClByD,UAAW2B,EAAM3B,UACjBZ,OAAQuC,EAAMvC,OACdqC,MAAOE,EAAMF,MACbyI,MAAOvI,EAAMuI,SAImB,CAAElO,iBAAeE,gBAAc2E,iBAAeI,gBAActC,sBAAoBwL,UVyJtH,SAAC9N,EAAYJ,EAASF,GAAtB,8CAAiC,WAAOnB,EAAU0B,GAAjB,mBAAAd,EAAA,sEAErBe,EAAgBD,IAAWE,MAA3BD,YACJ6N,EAAa/N,EAAWgO,KAHC,SAIN5O,EAAWyD,MAAX,kBAA4BjD,GAA5B,2BAClBI,GADkB,IAErBiO,YAAavO,EACbQ,YAAaA,EAAYG,MAPE,OAIvB7B,EAJuB,OAS7BD,EAAS,CACPI,KAAM1B,EACN2B,QAAS,CACPuE,MAAO3E,EAAS3E,KAChBwK,KAAM,CAAE6J,IAAKH,EAAYI,IAAKzO,MAbL,gDAiB7BnB,EAASD,GAAa,EAAD,KAjBQ,yDAAjC,yDUzJiImF,gBAApH7L,CAAmI+T,IAlPpI,SAAC,GAAsN,IAApNtH,EAAmN,EAAnNA,KAAMlB,EAA6M,EAA7MA,MAAOJ,EAAsM,EAAtMA,OAAQpD,EAA8L,EAA9LA,cAAea,EAA+K,EAA/KA,SAAUC,EAAqK,EAArKA,QAASZ,EAA4J,EAA5JA,aAAcmK,EAA8I,EAA9IA,WAAY4D,EAAkI,EAAlIA,KAAMjK,EAA4H,EAA5HA,UAAWa,EAAiH,EAAjHA,cAAeI,EAAkG,EAAlGA,aAActC,EAAoF,EAApFA,mBAAoBwL,EAAgE,EAAhEA,UAAWrK,EAAqD,EAArDA,YAAa2K,EAAwC,EAAxCA,QAAShJ,EAA+B,EAA/BA,MAAOiJ,EAAwB,EAAxBA,WAAYR,EAAY,EAAZA,MAEpN,EAA4BlE,oBAAS,GAArC,oBAAO2E,EAAP,KAAeC,EAAf,KACA,EAAsC5E,mBAAS,MAA/C,oBAAO3G,EAAP,KAAoBwL,EAApB,KACA,EAAoC7E,mBAAS,MAA7C,oBAAOhI,EAAP,KAAmBiL,EAAnB,KACA,EAAwBjD,mBAAS,MAAjC,oBAAO3E,EAAP,KAAayJ,EAAb,KAEAlJ,qBAAU,WACN5F,EAAcwD,EAAM9C,MACrB,IAEHkF,qBAAU,WAENiJ,EAAerL,EAAM3C,SAASoB,KAAI,SAAAvB,GAAE,OAAIG,EAASH,SAIlD,CAACG,IAEJ+E,qBAAU,WAEN,GAAIvC,GAAeA,EAAY,GAAI,CAE/B,IAAI0L,EAEE5L,EAAcC,EAAOI,EAAM9C,IAE3BsO,EAAa3L,EAAYpB,KAAI,SAAAsB,GAAC,OAAIA,EAAE7C,MAErCyC,EAAY4J,iBAAoBiC,EAAWxK,SAASrB,EAAY4J,gBAAgBrM,IAE1EyC,EAAY4J,kBAIfgC,EAHClO,EAASsC,EAAY4J,gBAAgBrM,IAGpBG,EAASsC,EAAY4J,gBAAgBrM,IAFrC,MAHtBqO,EAAkB1L,EAAYlB,MAAK,SAAAoB,GAAC,OAAIA,EAAEN,WAS9C4B,EAAckK,EAAiBvL,EAAM9C,OAE1C,CAAC2C,IAEJuC,qBAAU,WAEFpC,EAAMuJ,iBAAmBvJ,EAAMuJ,gBAAgBrM,IAC/CR,EAAasD,EAAMuJ,gBAAgBrM,MAGxC,CAAC8C,EAAMuJ,kBAEVnH,qBAAU,WACFpC,EAAMuJ,kBACFvJ,EAAMuJ,gBAAgBjM,QAAQ,GAC9BmM,EAAczJ,EAAMuJ,gBAAgBjM,QAAQmB,KAAI,SAAAvB,GAAE,OAAII,EAAQJ,OAE9B,OAAzB8C,EAAMyI,iBAEbgB,EAAc,MACdhI,EAAa,KAAMzB,EAAM9C,QAGlC,CAACI,IAEJ8E,qBAAU,WAGF,IAAIqJ,EAFJjN,GAAcA,EAAW,IAIrBwB,EAAMyI,gBAAkBjK,EAAWwC,SAAShB,EAAMyI,gBAClDgD,EAAiBzL,EAAMyI,gBAEvBgD,EAAiBjN,EAAWG,MAAK,SAAAC,GAAC,OAAIA,EAAErB,UACxC2N,EAAWlL,EAAOyL,IAGlBA,IAAmBzL,EAAMyI,gBAEzBhH,EAAagK,EAAgBzL,EAAM9C,KAIhC2E,GACPyJ,EAAQ,QAGb,CAAC9M,IAGJ4D,qBAAU,WACFpC,EAAMyI,gBAAkBzI,EAAMuJ,iBAE9B+B,EAAQ,CACJpK,OACAlB,MAAOJ,EAAOI,EAAM9C,IACpBkB,QAAS4B,EAAMuJ,gBACfvK,OAAQgB,EAAMyI,iBAGlBwC,EAAQ,CAAE/N,GAAI8C,EAAM9C,GAAIe,SAAU+B,EAAMyI,eAAexK,YAEhD4D,IAAS7B,EAAMyI,iBACtB6C,EAAQ,MACRL,EAAQ,CAAE/N,GAAI8C,EAAM9C,GAAIe,SAAU,OAGvC,CAAC2B,EAAOI,EAAM9C,MAGjB,IAyFMwO,EAAQP,EAAS,aAAe,GAEhC1L,EAAUwC,EAAM0J,YAAc1J,EAAM0J,YAAY1J,MAAQ,KACxDC,EAASD,EAAMC,OAASD,EAAMC,OAAOhF,GAAK,KAE5C0O,EAAe,GAEfnM,GAAWO,EAAMyI,iBACjBmD,EAAe1J,IAAWhB,EAAKhE,IAAMuC,IAAYO,EAAMyI,eAAevL,GAAK,eAAiB,IAGhG,IAAI2O,EAAOV,EAAS,OAAS,SAE7B,OACI,uBAAK5I,UAAU,eAAf,UACI,sBAAKA,UAAS,oBAAeqJ,EAAf,YAA+BT,EAAS,WAAa,IAAnE,SACI,uBAAK5I,UAAU,SAASC,QAAS,kBAAM4I,GAAWD,IAAlD,UACI,uBAAK5I,UAAU,aAAf,UACI,sBAAKA,UAAS,gBAAWmJ,GAAS7Y,IAAG,4BACrC,8BAAKmN,EAAMA,WA5GH,WAExB,GAAI6B,EACA,OAAO,eAAC,GAAD,CAAeA,KAAMA,EAAMyG,WAAW,SA2GpCwD,GAtFK,WAClB,GAAIjF,EAAY,CACZ,IACMkF,EADgBtB,EAAKjK,UAAU/B,KAAI,SAAAvB,GAAE,OAAIsD,EAAUtD,MACnBuB,KAAI,SAAAqC,GACtC,GAAIA,EACA,MAAO,CAAEyC,MAAOzC,EAAG5D,GAAIsG,QAAS1C,EAAGiB,SAMrCiK,EAHYvB,EAAKC,MAClB9J,QAAO,SAAAqL,GAAC,OAAIA,IAAM/K,EAAKhE,MACvBuB,KAAI,SAAAvB,GAAE,OAAIwN,EAAMxN,MACSuB,KAAI,SAAAwN,GAC9B,GAAIA,EACA,MAAO,CAAE1I,MAAO0I,EAAE/O,GAAIsG,QAASyI,EAAElK,SAIzC,OADAiK,EAAYE,QAAQ,CAAE3I,MAAO,KAAMC,QAAS,KAExC,uBAAKjB,UAAU,eAAf,UACKV,GAAQ,eAAC,GAAD,CACL7B,MAAM,oBACN0E,SAAU,SAAA7H,GAAU,OA9BhB,SAAAA,GACpBsC,EAAmB,2BACZtC,GADW,IAEdmC,OAAQgB,EAAMyI,eAAevL,GAC7BkB,QAAS4B,EAAMuJ,gBAAgBrM,GAC/B8C,MAAOA,EAAM9C,MAyBuBiP,CAAgBtP,IACxC2I,MAAM,sBACNrB,OAAQ,CACJ,CACI3I,KAAM,SACNpI,QAAS2Y,EACThK,KAAM,aACNsC,MAAO,aAGfsB,KAAI,0BAAqB3F,EAAM9C,IAC/BmM,oBAAoB,IAExB,eAAC,GAAD,CACIrJ,MAAK,eAAUA,EAAMA,OACrBwF,MAAM,kBACNrB,OAAQ,CACJ,CACIE,MAAO,QACPtC,KAAM,QACNvG,KAAM,QACNyI,UAAU,GAEd,CACII,MAAO,eACPtC,KAAM,OACNvG,KAAM,SACNpI,QAAS4Y,IAGjBtH,SAAU,SAAA7H,GAAU,OAAI8N,EAAU9N,EAAYmD,EAAM9C,GAAIgE,EAAKhE,KAC7DkM,cAAe,CAAEpJ,MAAOA,EAAMA,MAAO6K,KAAM,MAC3ClF,KAAI,qBAAgB3F,EAAM9C,IAC1BmM,oBAAoB,IAExB,eAAC,GAAD,CACI3E,SAAU,kBAAMpE,EAAYN,EAAM9C,GAAIgE,EAAKhE,KAC3CqJ,YAAavG,EAAMA,YA6BtBoM,QAGT,sBAAK7J,UAAS,4BAAuBsJ,GAArC,SACKV,GAxGL,eAAC,GAAD,CAAS9N,SAAUwC,EAAaG,MAAOA,EAAO6B,KAAMA,aCoJjDpN,gBATS,SAAA0N,GACpB,MAAO,CACHvC,OAAQuC,EAAMvC,OACd6K,KAAMtI,EAAMnF,MAAMD,YAClB2N,MAAOvI,EAAMuI,SAKmB,CAAE9N,cAAYN,eAAa+P,SXiH3C,SAACxP,EAAYN,GAAb,8CAAwB,WAAOnB,EAAU0B,GAAjB,iBAAAd,EAAA,sEAEpCe,EAAgBD,IAAWE,MAA3BD,YAFoC,SAGrBd,EAAWyD,MAAX,iBAA2BnD,GAA3B,2BAClBM,GADkB,IAErBE,YAAaA,EAAYG,MALiB,OAGtC7B,EAHsC,OAO5CD,EAAS,CAAEI,KAAM7B,EAAW8B,QAASJ,EAAS3E,OAPF,gDAS5C0E,EAASD,GAAa,EAAD,KATuB,yDAAxB,yDWjHqDmR,YX7E3E,SAACzP,EAAYN,GAAb,8CAAwB,WAAOnB,EAAU0B,GAAjB,iBAAAd,EAAA,6DACde,EAAgBD,IAAWE,MAA3BD,YADc,kBAGGd,EAAWgB,KAAK,UAAhB,2BAClBJ,GADkB,IAErBE,YAAaA,EAAYG,GACzBgE,KAAM3E,KANY,OAGdlB,EAHc,OAQpBD,EAAS,CACPI,KAAMnC,EACNoC,QAAS,CAAEuE,MAAO3E,EAAS3E,KAAMwK,KAAM3E,KAVrB,gDAapBnB,EAASD,GAAa,EAAD,KAbD,yDAAxB,yDW6EwFgF,cAAYoM,SXwiB9E,SAACrL,EAAMsL,GAC7B,MAAO,CAAEhR,KAAMT,GAAYU,QAAS,CAAEyF,OAAMsL,cWziB/B/X,CAAmG+T,IA5QrG,SAAC,GAAyG,IAAvGtH,EAAsG,EAAtGA,KAAMtB,EAAgG,EAAhGA,OAAQtD,EAAwF,EAAxFA,YAAauK,EAA2E,EAA3EA,WAAY4D,EAA+D,EAA/DA,KAAMC,EAAyD,EAAzDA,MAAO2B,EAAkD,EAAlDA,SAAUC,EAAwC,EAAxCA,YAAanM,EAA2B,EAA3BA,WAAYoM,EAAe,EAAfA,SAEnG,EAA4B/F,oBAAS,GAArC,oBAAO2E,EAAP,KAAeC,EAAf,KACA,EAA4C5E,mBAAS,MAArD,oBAAOiG,EAAP,KAAuBC,EAAvB,KACA,EAA0BlG,mBAAS,IAAnC,oBAAOmG,EAAP,KAAcC,EAAd,KAEMC,EAAgB9E,iBAAO,IAE7B3F,qBAAU,WACNmK,EAASrL,EAAKhE,GAAI,QAClBZ,EAAY4E,EAAKhE,MAClB,IAEHkF,qBAAU,WACNsK,EAAkBxL,EAAKd,UAClB3B,KAAI,SAAAvB,GAAE,OAAI0C,EAAO1C,SACvB,CAAC0C,EAAQsB,IAEZ,IAAMgK,EAAa,SAAClL,EAAOhB,GAClB6N,EAAcpN,QAAQO,EAAM9C,MAC7B2P,EAAcpN,QAAQO,EAAM9C,IAAM,IAAIrH,KAAKmJ,EAAOgD,QA4CpDwF,EAAkB,WACpB,GAAIX,EACA,OACI,uBAAKtE,UAAU,WAAf,UACI,4DAGA,eAAC,GAAD,CACIvC,MAAK,yBAAoBkB,EAAKa,MAC9ByD,MAAM,iBACNrB,OAAQ,CACJ,CACIE,MAAO,QACPtC,KAAM,QACNvG,KAAM,QACNyI,UAAU,IAGlBS,SAAU,SAAC7H,GACPyP,EAAYzP,EAAYqE,EAAKhE,IAC7BkO,GAAU,IAEdzF,KAAI,oBAAezE,EAAKhE,IACxB2H,SAAS,iBA6EvBoG,EAAU,SAAC6B,GACTH,EAAMG,EAAM5P,MAAQ4P,EAAM7O,UAC1B2O,EAAS,2BAAKD,GAAN,mBAAcG,EAAM5P,GAAK4P,EAAM7O,aA4DzCyN,EAAQP,EAAS,aAAe,GAChCU,EAAOV,EAAS,OAAS,SAE/B,OACI,uCACI,sBAAK5I,UAAS,mBAAc4I,EAAS,WAAa,IAAM3I,QAAS,kBAAM4I,GAAWD,IAAlF,SACI,uBAAK5I,UAAU,SAAf,UACI,uBAAKA,UAAU,YAAf,UACI,sBAAKA,UAAS,gBAAWmJ,GAAS7Y,IAAG,2BACrC,8BAAKqO,EAAKa,UAGd,uBAAKQ,UAAU,aAAf,UACI,uBAAKA,UAAU,aAAf,UAA6BrB,EAAKd,UAAUxN,OAA5C,YACA,sBAAK2P,UAAU,aAAf,SAhGI,WAGpB,IAAMwK,EAAQtM,OAAOC,OAAOiM,GAAOK,QAAO,SAACC,EAAMC,GAC7C,OAAOD,EAAOC,IACf,GAEH,IAAKH,EACD,OAAO,KAGX,IAAM9C,EAAUC,KAAKC,MAAM4C,EAAQ,IAC7B3C,EAAUF,KAAKC,MAAM4C,EAAQ,IAAM,GAAK,IAAM7C,KAAKC,MAAM4C,EAAQ,IAAM7C,KAAKC,MAAM4C,EAAQ,IAChG,OACI,yCACQ9C,EADR,YACmBG,KAiFsB+C,QAEjC,uBAAK5K,UAAU,eAAf,UApJS,WACrB,GAAIsE,EAAY,CAEZ,IAAMuG,EAAW3C,EAAKC,MACjBjM,KAAI,SAAAvB,GAAE,OAAIwN,EAAMxN,MAChBgM,MAAK,SAAClN,EAAG4C,GAAJ,OAAU5C,EAAE4N,SAAWhL,EAAEgL,UAAY,EAAI,KAC9CnL,KAAI,SAAAwN,GACD,GAAIA,EACA,MAAO,CAAE1I,MAAO0I,EAAErC,SAAUpG,QAASyI,EAAErC,aAKnD,OACI,eAAC,GAAD,CACI5J,MAAK,eAAUkB,EAAKa,MACpByD,MAAM,kBACNrB,OAAQ,CACJ,CACIE,MAAO,YACPtC,KAAM,OACNvG,KAAM,QACNyI,UAAU,GACX,CACCI,MAAO,gBACPtC,KAAM,WACNvG,KAAM,SACNpI,QAASga,IAGjB1I,SAAU,SAAC7H,GAAD,OAAgBwP,EAASxP,EAAYqE,EAAKhE,KACpDkM,cAAe,CAAErH,KAAMb,EAAKa,KAAM6H,SAAU1I,EAAK0I,UACjDjE,KAAI,oBAAezE,EAAKhE,IACxBmM,oBAAoB,KAoHf5B,GA9GM,WACvB,GAAIZ,EACA,OACI,eAAC,GAAD,CACInC,SAAU,kBAAMvE,EAAWe,EAAKhE,KAChCqJ,YAAarF,EAAKa,OA0Gb2F,WAIb,sBAAKnF,UAAS,uBAAkB4I,EAAS,kBAAoB,IAA7D,SACKA,GA7BF,uCACF3D,IAlDAtG,EAAKsL,SAA4B,SAAjBtL,EAAKsL,QAuBL,SAAjBtL,EAAKsL,QAED,uBAAKjK,UAAU,WAAf,UACI,oDACA,sBACIA,UAAU,eACVC,QAAS,SAAAM,GACLA,EAAEC,kBACFwJ,EAASrL,EAAKhE,GAAI,SAJ1B,kBASA,sBACIqF,UAAU,4BACVC,QAAS,SAAAM,GAAC,OAAIA,EAAEC,mBAFpB,yBAbZ,EArBQ,uBAAKR,UAAU,WAAf,UACI,qDACA,sBACIA,UAAU,4BACVC,QAAS,SAAAM,GAAC,OAAIA,EAAEC,mBAFpB,kBAMA,sBACIR,UAAU,eACVC,QAAS,SAAAM,GACLA,EAAEC,kBACFwJ,EAASrL,EAAKhE,GAAI,SAJ1B,yBAsER,wBACA,sBAAKqF,UAAS,0BAAqBsJ,GAAnC,SACKV,GAAUsB,GApOF,WAEjB,IAAMY,EAAS,aAAOZ,GA2BtB,OAzBKvL,EAAKsL,SAA4B,SAAjBtL,EAAKsL,SAEtBa,EAAUnE,MAAK,SAAClN,EAAG4C,GACf,OAAIiO,EAAcpN,QAAQzD,EAAEkB,KAAO2P,EAAcpN,QAAQb,EAAE1B,IACnD2P,EAAcpN,QAAQzD,EAAEkB,IAAM2P,EAAcpN,QAAQb,EAAE1B,KAC9C,EAED,EAEJ2P,EAAcpN,QAAQzD,EAAEkB,KACvB,EACD2P,EAAcpN,QAAQb,EAAE1B,IACxB,OADJ,KAMM,SAAjBgE,EAAKsL,SAELa,EAAUnE,MAAK,SAAClN,EAAG4C,GACf,OAAO5C,EAAEgE,MAAQpB,EAAEoB,OAAS,EAAI,KAKjCqN,EAAU5O,KAAI,SAAAuB,GACjB,GAAIA,EACA,OACI,eAAC,GAAD,CAAOA,MAAOA,EAAOkB,KAAMA,EAAqB+J,QAASA,EAASC,WAAYA,GAAxClL,EAAM9C,OAoMnBoQ,YCzB9B7Y,gBAdS,SAAA0N,GAEpB,MAAO,CACHxB,cAAewB,EAAMxB,cACrB8J,KAAMtI,EAAMnF,MAAMD,YAClByD,UAAW2B,EAAM3B,UACjBnD,SAAU8E,EAAM9E,SAChBC,QAAS6E,EAAM7E,QACfsC,OAAQuC,EAAMvC,OACdqC,MAAOE,EAAMF,SAKmB,CAAEvF,gBAAcF,iBAAe+Q,iBZqVrE,SAAC1Q,EAAY6E,GAAb,8CAAgC,WAAOtG,EAAU0B,GAAjB,qBAAAd,EAAA,sEAEpBe,EAAgBD,IAAWE,MAA3BD,YACF8E,EAAO/E,IAAW6D,cAAce,GAClC7E,EAAWgO,OACP2C,EAAU,CACdlO,WAAYzC,EAAWgO,KACvB7K,MAAO6B,EAAK7B,MACZ5B,QAASyD,EAAKzD,QACdY,OAAQ6C,EAAK7C,QAEf5D,EAAS+D,GAAmBqO,KAXF,SAaLvR,EAAWyD,MAAX,yBACHgC,GADG,2BAEhB7E,GAFgB,IAEJE,YAAaA,EAAYG,MAfhB,OAatB7B,EAbsB,OAiB5BD,EAAS,CACPI,KAAM3B,EACN4B,QAAS,CACP2D,aAAc/D,EAAS3E,KACvB2I,SAAUxC,EAAWyC,cArBG,kDAyB5BlE,EAASD,GAAa,EAAD,KAzBO,0DAAhC,yDYrVuF8F,uBAA1ExM,CAAgG+T,IApO1F,SAAC,GAA4L,IAA1LnJ,EAAyL,EAAzLA,SAAUmB,EAA+K,EAA/KA,UAAWqB,EAAoK,EAApKA,KAAMlB,EAA8J,EAA9JA,cAAekG,EAA+I,EAA/IA,WAAYxJ,EAAmI,EAAnIA,SAAUC,EAAyH,EAAzHA,QAASsC,EAAgH,EAAhHA,OAAQlD,EAAwG,EAAxGA,aAAcF,EAA0F,EAA1FA,cAAe+Q,EAA2E,EAA3EA,iBAAkBtM,EAAyD,EAAzDA,mBAAoBgB,EAAqC,EAArCA,MAAOgJ,EAA8B,EAA9BA,QAASR,EAAqB,EAArBA,KAAMgD,EAAe,EAAfA,SAE9L,EAAgCjH,mBAAS,MAAzC,oBAAOkH,EAAP,KAAiBC,EAAjB,KAEAvL,qBAAU,WACN5F,EAAcqF,EAAK7B,OACnBJ,EAAOiC,EAAK7B,OAAO3C,SAASgD,SAAQ,SAAAnD,GAChCR,EAAaQ,QAElB,IAEHkF,qBAAU,WACFxC,EAAOiC,EAAK7B,QACZ2N,EAAY,CACJtO,WACAW,MAAOJ,EAAOiC,EAAK7B,OACnB5B,QAASf,EAASwE,EAAKzD,SACvBY,OAAQ1B,EAAQuE,EAAK7C,QACrB4K,SAAU/H,EAAK+H,WAGnBtM,EAAQuE,EAAK7C,SACbiM,EAAQ,CAAE/N,GAAI2E,EAAK3E,GAAIe,SAAUX,EAAQuE,EAAK7C,QAAQf,aAE/D,CAAC0C,EAAckB,EAAK3E,IAAKI,EAAQuE,EAAK7C,QAASY,EAAOiC,EAAK7B,OAAQ3C,EAASwE,EAAKzD,WAEpFgE,qBAAU,WAEFqL,GACAG,MAEL,CAACH,IAEJ,IA2BMG,EAAkB,WAEpB,IAEMC,EAFYjO,EAAOiC,EAAK7B,OACE3C,SAASoB,KAAI,SAAAvB,GAAE,OAAIG,EAASH,MACvByB,MAAK,SAAAoB,GAAC,OAAIA,GAAKA,EAAEN,WACtD,GAAIoO,EAAgB,CAChB,IACMC,EADiBD,EAAevQ,QAAQmB,KAAI,SAAAvB,GAAE,OAAII,EAAQJ,MAC3ByB,MAAK,SAAAC,GAAC,OAAIA,GAAKA,EAAErB,UAClDuQ,GACAP,EAAiB,CACbvO,OAAQ8O,EAAc5Q,GACtBkB,QAASyP,EAAe3Q,GACxB0M,SAAU/H,EAAK+H,SACftK,WAAYD,EAASnC,IACtB2E,EAAK3E,MAyGduC,EAAUwC,EAAM0J,YAAc1J,EAAM0J,YAAY1J,MAAQ,KACxDC,EAASD,EAAMC,OAASD,EAAMC,OAAOhF,GAAK,KAE5C0O,EAAe,GAOnB,OALInM,GAAWoC,EAAK7C,SAChB4M,EAAe1J,IAAW7C,EAASnC,IAAMuC,IAAYoC,EAAK7C,OAAS,eAAiB,IAKpF,sBAAKuD,UAAU,eAAf,SACI,sBAAKA,UAAS,iCAA4BqJ,GAA1C,SACI,uBAAKrJ,UAAU,SAAf,UACI,uBAAKA,UAAU,aAAf,UACI,sBAAKA,UAAU,gBAAf,SACI,6BAAIV,EAAK+H,aAEb,8BAAK/H,GAAQjC,EAAOiC,EAAK7B,QAAUJ,EAAOiC,EAAK7B,OAAOA,WAlKlE0N,GAAYA,EAAS1O,QAAU0O,EAAStP,QACjC,eAAC,GAAD,CAAeyD,KAAM6L,EAAUpF,WAAW,aAG7C,uBAAK/F,UAAU,yBAAf,UACI,6BACKlF,EAASwE,EAAKzD,SAAd,UAA4Bf,EAASwE,EAAKzD,SAAS2D,MAAS,wBAEjE,uDA8JA,uBAAKQ,UAAU,eAAf,UAzHS,WACrB,GAAIsE,GAAcjH,EAAOiC,EAAK7B,OAAQ,CAElC,IAAM+N,EAAatN,OAAOC,OAAOC,GAC5BC,QAAO,SAAAoN,GAAC,OAAI3O,EAAS0B,MAAMC,SAASgN,EAAE9Q,OACtCgM,MAAK,SAAClN,EAAE4C,GAAH,OAAS5C,EAAE4N,SAAWhL,EAAEgL,UAAY,EAAI,KAC7CnL,KAAI,SAAAuP,GACD,MAAO,CAAEzK,MAAOyK,EAAEpE,SAAUpG,QAASwK,EAAEpE,aAKzCqE,EAFYrO,EAAOiC,EAAK7B,OAEE3C,SAASoB,KAAI,SAAAvB,GAAE,OAAIG,EAASH,MAEtDgR,EAAeD,EAAcxP,KAAI,SAAAsB,GACnC,GAAIA,EACA,OAAOA,EAAEzC,QAAQmB,KAAI,SAAAvB,GAAE,OAAII,EAAQJ,SAKrCiR,EAAc,GAEpBF,EAAc5N,SAAQ,SAACN,EAAGpN,GAClBub,EAAavb,IACbub,EAAavb,GAAG0N,SAAQ,SAAAzB,GACpB,GAAIA,EAAG,CACH,IAAIa,EAAU,GACVM,EAAEN,SAAWb,EAAErB,SACfkC,EAAS,cAEb0O,EAAYtS,KAAK,CACb0H,MAAO3E,EAAE1B,GACTsG,QAAQ,GAAD,OAAKzD,EAAEgC,KAAP,eAAkB+G,KAAOC,IAAInK,EAAEoD,MAAMgH,OAAO,aAA5C,OAA0DvJ,YAQrF,IAIMsM,EAJgBtB,EAAKjK,UACtBI,QAAO,SAAA1D,GAAE,OAAIA,IAAOmC,EAASnC,MAC7BuB,KAAI,SAAAvB,GAAE,OAAIsD,EAAUtD,MAEauB,KAAI,SAAAqC,GACtC,GAAIA,EACA,MAAO,CAAEyC,MAAOzC,EAAG5D,GAAIsG,QAAS1C,EAAGiB,SAM3C,OAFAgK,EAAgBG,QAAQ,CAAE3I,MAAO,KAAMC,QAAS,KAG5C,eAAC,GAAD,CACIgC,MAAM,mBACNxF,MAAK,eAAUJ,EAAOiC,EAAK7B,OAAOA,OAClC0E,SAAU,SAAA7H,GAAU,OAtFf,SAAAA,GACjB,IAAM2C,EAAciB,OAAOC,OAAOrD,GAAUsB,MAAK,SAAAoB,GAAC,OAAIA,EAAEzC,QAAQ0D,SAASnE,EAAWmC,WACpFuO,EAAiB,2BACV1Q,GADS,IAEZuB,QAASoB,EAAYtC,GACrBoC,WAAYD,EAASnC,KACtB2E,EAAK3E,IAgF4B+L,CAAapM,IACrCsH,OAAQ,CACJ,CACIpC,KAAM,WACNsC,MAAO,WACP7I,KAAM,SACNpI,QAAS2a,GAEb,CACIhM,KAAM,SACNsC,MAAO,SACP7I,KAAM,SACNpI,QAAS+a,EACTlK,UAAU,GAEd,CACII,MAAO,kBACPtC,KAAM,OACNvG,KAAM,SACNpI,QAAS2Y,IAGjB3C,cAAevH,EAAK7C,OAAL,2BAAmBF,KAAEC,KAAK8C,EAAM,WAAY,WAA5C,IAAuDgJ,KAAM,OAAS,CAAEjB,SAAU/H,EAAK+H,SAAUiB,KAAM,MACtHlF,KAAI,4BAAuB9D,EAAK3E,IAChCmM,oBAAoB,EACpBxE,SAAS,eAwCJ4C,GAlCM,WACvB,GAAIZ,EACA,OACI,eAAC,GAAD,CACInC,SAAU,kBAAMzD,EAAmBY,EAAK3E,GAAImC,EAASnC,KACrDqJ,YAAa3G,EAAOiC,EAAK7B,OAAOA,QA8B3B0H,iBCtBVjT,gBARS,SAAA0N,GACpB,MAAO,CACH3B,UAAW2B,EAAM3B,UACjBG,cAAewB,EAAMxB,cACrB8J,KAAMtI,EAAMnF,MAAMD,eAIc,CAAEqR,mBbtBR,SAAC9O,GAAD,8CAAgB,WAAOlE,GAAP,eAAAY,EAAA,+EAEvBC,EAAWC,IAAX,yBAAiCoD,IAFV,OAExCjE,EAFwC,OAG9CD,EAAS,CAAEI,KAAM7C,EAAqB8C,QAASJ,EAAS3E,OAHV,gDAK9C0E,EAASD,GAAa,EAAD,KALyB,yDAAhB,uDasB4BkT,ebkjBhC,SAAC/O,GAAD,8CAAgB,WAAOlE,EAAU0B,GAAjB,iBAAAd,EAAA,6DACpCe,EAAgBD,IAAWE,MAA3BD,YADoC,kBAGnBd,EAAWgB,KAAK,oBAAqB,CAC1DqC,aACAvC,YAAaA,EAAYG,KALe,QAGpC7B,EAHoC,QAOjC3E,KAAKqK,MAAMV,SAAQ,SAACqB,GAC3BtG,EAAS6F,GAAmBS,EAAgBrG,EAAS3E,KAAKwG,QAE5D9B,EAAS,CAAEI,KAAMrB,EAAiBsB,QAASJ,EAAS3E,OAVV,gDAY1C0E,EAASD,GAAa,EAAD,KAZqB,yDAAhB,yDaljBgDmT,absX5E,SAACzR,EAAYyC,GAAb,8CAA4B,WAAOlE,EAAU0B,GAAjB,iBAAAd,EAAA,sEAEhBe,EAAgBD,IAAWE,MAA3BD,YAFgB,SAGDd,EAAWyD,MAAX,qBAA+BJ,GAA/B,2BAClBzC,GADkB,IAErBE,YAAaA,EAAYG,MALH,OAGlB7B,EAHkB,OAOxBD,EAAS,CAAEI,KAAM5B,EAAe6B,QAASJ,EAAS3E,OAP1B,gDASxB0E,EAASD,GAAa,EAAD,KATG,yDAA5B,0DatXa1G,CAA+E+T,IAtL7E,SAAC,GAAgH,IAA9GnJ,EAA6G,EAA7GA,SAAUmB,EAAmG,EAAnGA,UAAW4N,EAAwF,EAAxFA,mBAAoBzN,EAAoE,EAApEA,cAAekG,EAAqD,EAArDA,WAAYyH,EAAyC,EAAzCA,aAAcD,EAA2B,EAA3BA,eAAgB5D,EAAW,EAAXA,KAElH,EAA4BjE,oBAAS,GAArC,oBAAO2E,EAAP,KAAeC,EAAf,KACA,EAAwC5E,mBAAS,IAAjD,oBAAO+H,EAAP,KAAqBC,EAArB,KACA,EAA0BhI,mBAAS,IAAnC,oBAAOmG,EAAP,KAAcC,EAAd,KACA,EAA0CpG,mBAAS,MAAnD,oBAAOiI,EAAP,KAAsBC,EAAtB,KACA,EAAgClI,oBAAS,GAAzC,oBAAOiH,EAAP,KAAiBkB,EAAjB,KAGAvM,qBAAU,WACNgM,EAAmB/O,EAASnC,MAC7B,IAEHkF,qBAAU,WACNsM,EAAiBrP,EAAS0B,MAAMtC,KAAI,SAAAvB,GAAE,OAAIyD,EAAczD,SACzD,CAACyD,EAAetB,EAAS0B,QAe5BqB,qBAAU,WACN,GAAIqI,EAAKjK,UAAU5N,OAAQ,CACvB,IAAMgc,EAAkBnE,EAAKjK,UAAU/B,KAAI,SAAAvB,GAAE,OAAIsD,EAAUtD,MAAKgM,MAAK,SAAClN,EAAG4C,GACrE,OAAI5C,EAAE4N,SAAWhL,EAAEgL,UACP,EAERhL,EAAEgL,SAAW5N,EAAE4N,SACR,OADX,KAIJ4E,EAAgBI,EAAgBnQ,KAAI,SAAAwN,GAChC,GAAIA,EACA,MAAO,CAAE1I,MAAO0I,EAAErC,SAAUpG,QAASyI,EAAErC,iBAIpD,CAACpJ,IAEJ4B,qBAAU,WACFqL,GACAkB,GAAY,KAEjB,CAAClB,IAEJ,IA6DMxC,EAAU,SAAC6B,GACTH,EAAMG,EAAM5P,MAAQ4P,EAAM7O,UAC1B2O,EAAS,2BAAKD,GAAN,mBAAcG,EAAM5P,GAAK4P,EAAM7O,aAwBzCyN,EAAQP,EAAS,aAAe,GAChCU,EAAOV,EAAS,OAAS,SAE/B,OACI,uCACI,sBAAK5I,UAAS,mBAAc4I,EAAS,WAAa,IAAM3I,QAAS,kBAAM4I,GAAWD,IAAlF,SACI,uBAAK5I,UAAU,mBAAf,UACI,uBAAKA,UAAU,YAAf,UACI,sBAAKA,UAAS,gBAAWmJ,GAAS7Y,IAAG,4BACrC,8BAAKwM,EAAS0C,OA7BC,WAC/B,GAAI8E,GAAcsE,EACd,OACI,uBAAK5I,UAAU,kBAAf,UACI,sDAGA,sBACIA,UAAU,sBACVC,QAAS,SAAAM,GACLA,EAAEC,kBACF4L,GAAY,SAoBfE,MAIL,uBAAKtM,UAAU,aAAf,UACI,uBAAKA,UAAU,aAAf,UAA6BlD,EAAS0B,MAAMnO,OAA5C,YACA,sBAAK2P,UAAU,aAAf,SA/DI,WAGpB,IAAMwK,EAAQtM,OAAOC,OAAOiM,GAAOK,QAAO,SAACC,EAAMC,GAC7C,OAAOD,EAAOC,IACf,GAEH,IAAKH,EACD,OAAO,KAGX,IAAM9C,EAAUC,KAAKC,MAAM4C,EAAQ,IAC7B3C,EAAUF,KAAKC,MAAM4C,EAAQ,IAAM,GAAK,IAAM7C,KAAKC,MAAM4C,EAAQ,IAAM7C,KAAKC,MAAM4C,EAAQ,IAChG,OACI,yCACQ9C,EADR,YACmBG,KAgDsB+C,QAEjC,uBAAK5K,UAAU,eAAf,UA1GS,WACrB,GAAIsE,EAGA,OACI,eAAC,GAAD,CACI7G,MAAK,eAAUX,EAAS0C,MACxByD,MAAM,kBACNrB,OAAQ,CACJ,CACIE,MAAO,gBACPtC,KAAM,OACNvG,KAAM,SACP,CACC6I,MAAO,oBACPtC,KAAM,WACNvG,KAAM,SACNpI,QAASmb,IAGjB7J,SAAU,SAAC7H,GAAD,OAAgByR,EAAazR,EAAYwC,EAASnC,KAC5DkM,cAAetK,KAAEC,KAAKM,EAAU,OAAQ,YACxCsG,KAAI,eAAUtG,EAASnC,IACvBmM,oBAAoB,EACpBxE,SAAS,aAmFA4C,GA7EE,WACvB,GAAIZ,EACA,OACI,eAAC,GAAD,CACInC,SAAU,kBAAM2J,EAAehP,EAASnC,KACxCqJ,YAAalH,EAAS0C,OAyEb2F,WAIjB,wBACA,sBAAKnF,UAAS,0BAAqBsJ,GAAnC,SACKV,IArJTsD,EAAcvF,MAAK,SAAClN,EAAG4C,GAAJ,OAAU5C,EAAE4N,SAAWhL,EAAEgL,UAAY,EAAI,KAErD6E,EAAchQ,KAAI,SAAAoD,GACrB,GAAIA,EACA,OACA,eAAC,GAAD,CAAcA,KAAMA,EAAMxC,SAAUA,EAAwB4L,QAASA,EAASwC,SAAUA,GAArC5L,EAAK3E,iBCkHzDzI,gBAVS,SAAA0N,GACpB,MAAO,CACHuI,MAAOvI,EAAMuI,MACblK,UAAW2B,EAAM3B,UACjBmL,YAAaxJ,EAAMF,MAAM0J,YACzB3E,KAAM7E,EAAM8E,KAAKD,KACjByD,KAAMtI,EAAMnF,MAAMD,eAIc,CAAEX,cAAY0S,edaxB,SAACzS,GAAD,8CAAY,WAAOjB,GAAP,eAAAY,EAAA,+EAEfC,EAAWC,IAAX,qBAA6BG,IAFd,OAEhChB,EAFgC,OAGtCD,EAAS,CAAEI,KAAM3C,EAAiB4C,QAASJ,EAAS3E,OAHd,gDAKtC0E,EAASD,GAAa,EAAD,KALiB,yDAAZ,uDcbwCyB,cAAYmS,eduMpD,SAAClS,GAAD,8CAAgB,WAAOzB,EAAU0B,GAAjB,iBAAAd,EAAA,sEAElCe,EAAgBD,IAAWE,MAA3BD,YAFkC,SAGnBd,EAAWgB,KAAK,aAAhB,2BAClBJ,GADkB,IAErBE,YAAaA,EAAYG,MALe,OAGpC7B,EAHoC,OAO1CD,EAAS,CAAEI,KAAMlC,EAAiBmC,QAASJ,EAAS3E,OAPV,gDAS1C0E,EAASD,GAAa,EAAD,KATqB,yDAAhB,0DcvMf1G,CAAqF+T,IA1I9E,SAAC,GAAqI,IAAnIsG,EAAkI,EAAlIA,eAAgBlS,EAAkH,EAAlHA,WAAYR,EAAsG,EAAtGA,WAAYsO,EAA0F,EAA1FA,MAAOlK,EAAmF,EAAnFA,UAAWiK,EAAwE,EAAxEA,KAAM5D,EAAkE,EAAlEA,WAAYkI,EAAsD,EAAtDA,eAAgBpD,EAAsC,EAAtCA,YAAa7E,EAAyB,EAAzBA,aAAcE,EAAW,EAAXA,KAE5I,EAAgCR,mBAAS,IAAzC,oBAAO4G,EAAP,KAAiB4B,EAAjB,KACA,EAAwCxI,mBAAS,IAAjD,oBAAO+H,EAAP,KAAqBC,EAArB,KAEApM,qBAAU,WACNhG,EAAWqO,EAAKvN,IAChB4R,EAAerE,EAAKvN,MACrB,IAEHkF,qBAAU,WACN0E,MACD,CAACE,IAEJ5E,qBAAU,WACN4M,EAAYvE,EAAKC,MAAMjM,KAAI,SAAAvB,GAAE,OAAIwN,EAAMxN,MAAKgM,MAAK,SAAClN,EAAG4C,GACjD,OAAI5C,EAAE4N,SAAWhL,EAAEgL,UACP,EAERhL,EAAEgL,SAAW5N,EAAE4N,SACR,OADX,QAIL,CAACc,IAEJtI,qBAAU,WACNoM,EAAgB/D,EAAKjK,UAAU/B,KAAI,SAAAvB,GAAE,OAAIsD,EAAUtD,MAAKgM,MAAK,SAAClN,EAAG4C,GAC7D,OAAI5C,EAAE4N,SAAWhL,EAAEgL,UACP,EAERhL,EAAEgL,SAAW5N,EAAE4N,SACR,OADX,QAIL,CAACpJ,IAEJ,IA8DMyO,EAAgBtD,EAAc,iBAAmB,GAEvD,OACI,uBAAKpJ,UAAS,eAAU0M,GAAxB,UACI,uBAAK1M,UAAU,iBAAf,UACI,qBAAIA,UAAU,gBAAd,mBACA,sBAAKA,UAAU,cAAf,SAxDgB,WACxB,GAAIsE,EACA,OACI,eAAC,GAAD,CACInC,SAAU,SAAA7H,GAAU,OAAID,EAAWC,IACnCmD,MAAM,aACNwF,MAAM,kBACNrB,OAAQ,CAAC,CACLE,MAAO,YACPtC,KAAM,WACNvG,KAAM,QACNyI,UAAU,IAEdY,SAAS,aA4CRqK,QAGT,wBACCxE,GAvEE0C,EAAS3O,KAAI,SAAAyC,GAChB,GAAIA,EACA,OACI,eAAC,GAAD,CAAMA,KAAMA,GAAWA,EAAKhE,OAqEpC,uBAAKqF,UAAU,YAAf,UACI,uBAAKA,UAAU,iBAAf,UACI,qBAAIA,UAAU,gBAAd,uBACA,sBAAKA,UAAU,cAAf,SA7CgB,WAC5B,GAAIsE,EACA,OACI,eAAC,GAAD,CACInC,SAAU,SAAA7H,GAAU,OAAIkS,EAAelS,IACvCmD,MAAM,iBACNwF,MAAM,kBACNrB,OAAQ,CAAC,CACLE,MAAO,gBACPtC,KAAM,eACNvG,KAAM,QACNyI,UAAU,IAEdY,SAAS,aAiCJsK,QAGT,wBACC3O,GA7BF+N,EAAa9P,KAAI,SAAAY,GACpB,GAAIA,EACA,OACI,eAAC,GAAD,CAAUA,SAAUA,GAAeA,EAASnC,iBC/F1DkS,G,oDAEF,WAAY1M,GAAQ,IAAD,+BACf,cAAMA,IAUVP,MAAQ,CAAEkN,OAAQ,GAAIC,eAAgB,GAXnB,EAoBnBzG,YAAc,SAAA7G,GACV,OAAO8G,KAAOC,IAAI/G,GAAMgH,OAAO,aArBhB,EA4BnBuG,aAAe,WACX,IAAM3F,EAAY,EAAK3H,MAAMxC,QAAQ+P,YAAc,EAAKvN,MAAMxC,QAAQxB,SAAY,IAClF,EAAK+L,KAAO,EAAKyF,WAAW,EAAKxN,MAAMxC,QAAQ+P,aAC1CE,MAAM9F,IACP,EAAKzG,SAAS,CACVmM,eAAgB1F,KAjCT,EAsCnB+F,kBAAoB,SAAC7M,GACF,UAAXA,EAAE8M,OACF9M,EAAE+M,iBACE,EAAKnN,MAAMoN,MACX,EAAKC,OAEL,EAAKD,UA5CE,EAiDnBE,WAAa,WAET,EAAKtN,MAAMnH,WADK,qEAlDD,EA0HnB0U,WAAa,WACL,EAAKvN,MAAMqN,MACX,EAAK9N,MAAMxC,QAAQsQ,QA5HR,EAgInBG,SAAW,WACH,EAAKjO,MAAMxC,QAAQ+P,YAAc,EACjC,EAAK9M,MAAMwN,WAEX,EAAKjO,MAAMxC,QAAQ+P,YAAc,GApItB,EAwInBW,SAAW,WACP,EAAKzN,MAAMyN,YAzII,EA4InBJ,KAAO,WACH,EAAKrN,MAAMf,aA7II,EAgJnBmO,MAAQ,WACJ,EAAKpN,MAAM0N,cAjJI,EAoJnBC,eAAiB,SAACvN,GACd,IAAM8G,EAAY9G,EAAExQ,OAAOiR,MAAQ,IAAQ,EAAKtB,MAAMxC,QAAQxB,SAC9D,EAAKgE,MAAMxC,QAAQ+P,YAAc5F,GAtJlB,EAyJnB0G,cAAgB,WAER,EAAK5N,MAAMqN,KACX,EAAKD,QAEL,EAAKC,QA3JL,EAAKvY,IAAM,kCAIf,EAAKyK,MAAQ+C,IAAMC,YAPJ,E,+CAanB,SAAW+E,GAEP,IAAIC,EAAUD,EAAO,IAAP,WAAiBE,KAAKC,MAAMH,EAAK,KAAQE,KAAKC,MAAMH,EAAK,IACnEI,EAAUJ,EAAO,GAAK,GAAZ,WAAqBE,KAAKC,MAAMH,EAAO,KAAQE,KAAKC,MAAMH,EAAO,IAC/E,MAAM,GAAN,OAAUC,EAAV,YAAqBG,K,qBAOzB,SAAQlN,GACJ,MAAM,GAAN,OAAU/I,KAAKqD,IAAf,sBAAgC0F,EAAhC,U,+BA6BJ,WAMI/I,KAAK8N,MAAMxC,QAAU,IAAI8Q,MAEzBpc,KAAK8N,MAAMxC,QAAQ4F,iBAAiB,aAAclR,KAAKob,cAEvDpb,KAAK8N,MAAMxC,QAAQ4F,iBAAiB,QAASlR,KAAK6b,YAIlD7b,KAAK8N,MAAMxC,QAAQ4F,iBAAiB,QAASlR,KAAKgc,UAIlD/K,SAASC,iBAAiB,UAAWlR,KAAKwb,mBAG1Cxb,KAAK8N,MAAMxC,QAAQ4F,iBAAiB,iBAAkBlR,KAAK8b,c,gCAI/D,SAAmB/K,GAIV/Q,KAAKqc,WACN5S,OAAO6S,OAAO7S,OAAO8S,QAAS9S,OAAO+S,QAAU,IAC/Cxc,KAAKqc,UAAW,GAGhBrc,KAAKuO,MAAMb,MAIP1N,KAAKuO,MAAMb,OAASqD,EAAUrD,MAC9B1N,KAAK8N,MAAMxC,QAAQ5M,IAAIsB,KAAKyc,QAAQzc,KAAKuO,MAAMb,KAAKI,OACpD9N,KAAK8N,MAAMxC,QAAQ4P,OAASlb,KAAKuO,MAAM2M,OAAS,KAEzClb,KAAKuO,MAAMqN,MAAQ7K,EAAU4K,MAEpC3b,KAAK8N,MAAMxC,QAAQsQ,OACZ5b,KAAKuO,MAAMoN,OAAS5K,EAAU6K,MACrC5b,KAAK8N,MAAMxC,QAAQqQ,QAEnB3b,KAAKuO,MAAM2M,SAAWnK,EAAUmK,SAChClb,KAAK8N,MAAMxC,QAAQ4P,OAASlb,KAAKuO,MAAM2M,OAAS,MAGpDlb,KAAK8N,MAAMxC,QAAQqQ,U,kCAI3B,WACI1K,SAASG,oBAAoB,UAAWpR,KAAKwb,mBAE7Cxb,KAAK8N,MAAMxC,QAAQ5M,IAAI,GACvBsB,KAAK8N,MAAMxC,QAAQ8F,oBAAoB,aAAcpR,KAAKob,cAC1Dpb,KAAK8N,MAAMxC,QAAQ8F,oBAAoB,QAASpR,KAAK6b,YACrD7b,KAAK8N,MAAMxC,QAAQ8F,oBAAoB,QAASpR,KAAKgc,UACrDhc,KAAK8N,MAAMxC,QAAQ8F,oBAAoB,iBAAkBpR,KAAK8b,YAE9D9b,KAAKuO,MAAMmO,oB,oBA4Cf,WAEI,OAAI1c,KAAKuO,MAAMb,KAGP,uBAAKU,UAAU,UAAf,UACI,uBAAKA,UAAU,iBAAf,UACQ,sBAAKA,UAAU,gBAAf,SACI,6BAAIpO,KAAKuO,MAAMb,KAAK7B,MAAMA,UAE9B,uBAAKuC,UAAU,qBAAf,UACI,sBACI1P,IAAI,mBACJ0P,UAAU,iBACVC,QAASrO,KAAK+b,WAElB,sBACI3N,UAAU,eACV1P,IAAKsB,KAAKuO,MAAMqN,KAAO,oBAAsB,mBAC7CvN,QAASrO,KAAKmc,gBAElB,sBACIzd,IAAI,mBACJ0P,UAAU,iBACVC,QAASrO,KAAKgc,cAI1B,uBAAK5N,UAAU,eAAf,UACI,uBAAKA,UAAU,sBAAf,UACI,0CACA,6BAAIpO,KAAKuO,MAAMb,KAAKzD,aAExB,uBAAKmE,UAAU,sBAAf,UACI,uCACA,6BAAIpO,KAAK0U,YAAY1U,KAAKuO,MAAMb,KAAKG,iBAIjD,uBAAKO,UAAU,uBAAf,UACI,sBAAKA,UAAU,kBAAf,SACKpO,KAAK6V,OAEV,wBACIxO,KAAK,QACLsV,IAAI,IACJC,IAAI,OACJxN,MAAOpP,KAAKgO,MAAMmN,eAClB/M,UAAU,aACVyO,QAAS7c,KAAKkc,iBAElB,sBAAK9N,UAAU,kBAAf,SACKpO,KAAKsb,WAAWtb,KAAKuO,MAAMb,KAAK5D,kBAM1C,S,GA/NQ+G,IAAMS,WA6OlBhR,gBATS,SAAA0N,GACpB,MAAO,CACHN,KAAMM,EAAMF,MAAM0J,YAClBoE,KAAM5N,EAAMF,MAAM8N,KAClBD,MAAO3N,EAAMF,MAAM6N,MACnBT,OAAQlN,EAAMF,MAAMoN,UAIY,CAAE1N,aAAWyO,WfoiB3B,WACxB,MAAO,CAAE5U,KAAMd,KeriBgDyV,Sf+kBzC,kBAAM,SAAC/U,EAAU0B,GACvC,MAAgCA,IAAWmF,MAAnCC,EAAR,EAAQA,OAAQyJ,EAAhB,EAAgBA,YAChB,GAAIzJ,EAAO9B,UAAW,CACpB,IAAI6Q,EAEmB,SAAnB/O,EAAOsK,UACTyE,EAAY/O,EAAO9B,UAChB3B,KAAI,SAACvB,GAAD,OAAQJ,IAAW8C,OAAO1C,MAC9BgM,MAAK,SAAClN,EAAG4C,GACR,OAAI5C,EAAEyM,gBAAkB7J,EAAE6J,eAEtB,IAAI5S,KAAKmG,EAAEyM,eAAezG,MAAQ,IAAInM,KAAK+I,EAAE6J,eAAezG,OAEpD,EAED,EAEAhG,EAAEyM,gBACH,EACC7J,EAAE6J,eACJ,OADF,MAMU,SAAnBvG,EAAOsK,UACTyE,EAAY/O,EAAO9B,UAChB3B,KAAI,SAACvB,GAAD,OAAQJ,IAAW8C,OAAO1C,MAC9BgM,MAAK,SAAClN,EAAG4C,GACR,OAAO5C,EAAEgE,MAAQpB,EAAEoB,OAAS,EAAI,MAItC,IAAM6B,EAAOoP,EAAUA,EAAUC,QAAQvF,EAAY3L,OAAS,GAE9D,GAAI6B,GAAQA,EAAK0H,iBAAmB1H,EAAK4G,eAAgB,CACvD,IAAMrK,EAAUtB,IAAWO,SAASwE,EAAK0H,gBAAgBrM,IACnD8B,EAASlC,IAAWQ,QAAQuE,EAAK4G,eAAevL,IAEhD4E,EAAa,CACjB9B,MAAO6B,EACPzD,QAASA,EAAQ2D,KACjBC,KAAMhD,EAAOgD,KACb/D,SAAUe,EAAOf,SACjBgE,MAAOjD,EAAO9B,IAGhB9B,EAAS,CAAEI,KAAMZ,GAAWa,QAASqG,SAErC1G,EAAS,CAAEI,KAAMV,KAGrB,GAAIoH,EAAOnB,MAAO,CAQhB,IAPA,IAIIc,EAJEsP,EAAWjP,EAAOnB,MACrBtC,KAAI,SAACvB,GAAD,OAAQJ,IAAW6D,cAAczD,MACrCgM,MAAK,SAAClN,EAAG4C,GAAJ,OAAW5C,EAAE4N,SAAWhL,EAAEgL,UAAY,EAAI,KAG9CwH,EAAQzF,EAAY/B,SAEjBwH,EAAQD,EAASve,QAAQ,CAC9B,GAA+B,OAA3Bue,EAASC,GAAOpS,OAAiB,CACnC6C,EAAOsP,EAASC,GAChB,MAEFA,IAGF,IAAKvP,EACH,OAAOzG,EAAS,CAAEI,KAAMV,KAG1B,IAAMsD,EAAUtB,IAAWO,SAASwE,EAAKzD,SACnCY,EAASlC,IAAWQ,QAAQuE,EAAK7C,QAGjC8C,EAAa,CACjB9B,MAHYlD,IAAW8C,OAAOiC,EAAK7B,OAInC5B,QAASA,EAAQ2D,KACjBC,KAAMhD,EAAOgD,KACb/D,SAAUe,EAAOf,SACjBgE,MAAOjD,EAAO9B,GACd0M,SAAU/H,EAAK+H,UAEjBxO,EAAS,CAAEI,KAAMZ,GAAWa,QAASqG,OenqBkCoO,SfuqBnD,kBAAM,SAAC9U,EAAU0B,GACvC,MAAgCA,IAAWmF,MAAnCC,EAAR,EAAQA,OAAQyJ,EAAhB,EAAgBA,YAChB,GAAIzJ,EAAO9B,UAAW,CACpB,IAAI6Q,EACmB,SAAnB/O,EAAOsK,UACTyE,EAAY/O,EAAO9B,UAChB3B,KAAI,SAACvB,GAAD,OAAQJ,IAAW8C,OAAO1C,MAC9BgM,MAAK,SAAClN,EAAG4C,GACR,OAAI5C,EAAEyM,gBAAkB7J,EAAE6J,eAEtB,IAAI5S,KAAKmG,EAAEyM,eAAezG,MAAQ,IAAInM,KAAK+I,EAAE6J,eAAezG,OAEpD,EAED,EAEAhG,EAAEyM,gBACH,EACC7J,EAAE6J,eACJ,OADF,MAMU,SAAnBvG,EAAOsK,UACTyE,EAAY/O,EAAO9B,UAChB3B,KAAI,SAACvB,GAAD,OAAQJ,IAAW8C,OAAO1C,MAC9BgM,MAAK,SAAClN,EAAG4C,GACR,OAAO5C,EAAEgE,MAAQpB,EAAEoB,OAAS,EAAI,MAItC,IAAM6B,EAAOoP,EAAUA,EAAUC,QAAQvF,EAAY3L,OAAS,GAE9D,GAAI6B,GAAQA,EAAK0H,iBAAmB1H,EAAK4G,eAAgB,CACvD,IAAMrK,EAAUtB,IAAWO,SAASwE,EAAK0H,gBAAgBrM,IACnD8B,EAASlC,IAAWQ,QAAQuE,EAAK4G,eAAevL,IAEhD4E,EAAa,CACjB9B,MAAO6B,EACPzD,QAASA,EAAQ2D,KACjBC,KAAMhD,EAAOgD,KACb/D,SAAUe,EAAOf,SACjBgE,MAAOjD,EAAO9B,IAGhB9B,EAAS,CAAEI,KAAMZ,GAAWa,QAASqG,KAIzC,GAAII,EAAOnB,MAAO,CAQhB,IAPA,IAIIc,EAJEsP,EAAWjP,EAAOnB,MACrBtC,KAAI,SAACvB,GAAD,OAAQJ,IAAW6D,cAAczD,MACrCgM,MAAK,SAAClN,EAAG4C,GAAJ,OAAW5C,EAAE4N,SAAWhL,EAAEgL,UAAY,EAAI,KAG9CwH,EAAQzF,EAAY/B,SAAW,EAE5BwH,EAAQD,EAASve,QAAQ,CAC9B,GAA+B,OAA3Bue,EAASC,GAAOpS,OAAiB,CACnC6C,EAAOsP,EAASC,GAChB,MAEFA,GAAgB,EAGlB,IAAKvP,EACH,OAAOzG,EAAS,CAAEI,KAAMV,KAG1B,IAAMsD,EAAUtB,IAAWO,SAASwE,EAAKzD,SACnCY,EAASlC,IAAWQ,QAAQuE,EAAK7C,QAGjC8C,EAAa,CACjB9B,MAHYlD,IAAW8C,OAAOiC,EAAK7B,OAInC5B,QAASA,EAAQ2D,KACjBC,KAAMhD,EAAOgD,KACb/D,SAAUe,EAAOf,SACjBgE,MAAOjD,EAAO9B,GACd0M,SAAU/H,EAAK+H,UAEjBxO,EAAS,CAAEI,KAAMZ,GAAWa,QAASqG,OezvB4CvG,cAAYsV,gBfiwBlE,WAC7B,MAAO,CAAErV,KAAMV,MelwBFrG,CAAqG2a,IC/HrG3a,gBARS,SAAA0N,GACpB,MAAO,CACHsI,KAAMtI,EAAMnF,MAAMD,YAClBiK,KAAM7E,EAAM8E,KAAKoK,YACjBhC,OAAQlN,EAAMF,MAAMoN,UAIY,CAAEvT,aAAWJ,WAAS4V,ahB43BlC,SAAC/N,GAC3B,MAAO,CAAE/H,KAAMX,GAAeY,QAAS8H,KgB73B1B9O,CAA+D+T,IA5G/D,SAAC,GAA+F,IAA7F1M,EAA4F,EAA5FA,UAAW2O,EAAiF,EAAjFA,KAAM8G,EAA2E,EAA3EA,MAAO1K,EAAoE,EAApEA,WAAYC,EAAwD,EAAxDA,aAAcE,EAA0C,EAA1CA,KAAMtL,EAAoC,EAApCA,QAAS2T,EAA2B,EAA3BA,OAAQiC,EAAmB,EAAnBA,aAEvF,EAA4B9K,oBAAS,GAArC,oBAAO2E,EAAP,KAAeC,EAAf,KACMoG,EAAOzJ,iBAAO,MAEpB3F,qBAAU,WAGN,OAFAtG,EAAUyV,EAAME,OAAO1V,UACvBqJ,SAASC,iBAAiB,QAASqM,EAAgB,CAAEpM,SAAS,IACvD,WACHF,SAASG,oBAAoB,QAASmM,EAAgB,CAAEpM,SAAS,OAEtE,IAEHlD,qBAAU,WACN0E,MACD,CAAC2D,EAAMzD,IAEV,IAAM0K,EAAiB,SAAC5O,GAChB0O,EAAK/R,SAAW+R,EAAK/R,QAAQyD,SAASJ,EAAExQ,SAG5C8Y,GAAU,IAkEd,OAAO,uCAEH,uBAAK7I,UAAU,SAAf,UACI,eAAC,GAAD,IA5CCkI,EAiBD,uBAAKlI,UAAU,cAAf,UACI,uBAAKA,UAAU,YAAf,UACI,8BAAKkI,GAAQA,EAAK1I,OAClB,uBAAKQ,UAAU,cAAcU,IAAKuO,EAAMhP,QAAS,kBAAM4I,GAAWD,IAAlE,UACI,sBAAKtY,IAAI,oBACRsY,IAAWtE,EA1CxB,uBAAKtE,UAAU,OAAf,UACI,eAAC,KAAD,CAAMA,UAAU,YAAYoP,GAAG,QAA/B,uBACA,eAAC,KAAD,CAAMpP,UAAU,YAAYoP,GAAG,QAA/B,kBACA,sBAAKpP,UAAU,YAAYC,QAAS9G,EAApC,yBAOJ,uBAAK6G,UAAU,OAAf,UACI,eAAC,KAAD,CAAMA,UAAU,YAAYoP,GAAG,IAA/B,kBACA,eAAC,KAAD,CAAMpP,UAAU,YAAYoP,GAAG,QAA/B,kBACA,eAAC,KAAD,CAAMpP,UAAU,YAAYoP,GAAG,UAA/B,+BAgCA,uBAAKpP,UAAU,mBAAf,UACI,wBACI/G,KAAK,QACLsV,IAAI,IAAIC,IAAI,MACZxO,UAAU,SACVgB,MAAO8L,EACP2B,QAAS,SAAAlO,GAAC,OAAIwO,EAAaxO,EAAExQ,OAAOiR,UAExC,sBAAK1Q,IAAI,6BA/Bb,uBAAK0P,UAAU,UAAf,UACI,0GACA,uBAAKA,UAAU,eAAf,UACI,eAAC,KAAD,CAAMoP,GAAG,IAAT,kBAGA,eAAC,KAAD,CAAMA,GAAG,QAAT,kCAwCflH,GAAQ,eAACmH,GAAD,WCLFnd,gBAPS,SAAA0N,GACpB,MAAO,CACH6E,KAAM7E,EAAM8E,KAAKD,KACjBhK,MAAOmF,EAAMnF,SAImB,CAAE6U,WjBiFhB,SAAChV,GAAD,8CAAgB,WAAOzB,GAAP,eAAAY,EAAA,+EAEfC,EAAWgB,KAAK,SAAUJ,GAFX,OAEhCxB,EAFgC,OAGtCD,EAAS,CAAEI,KAAM/B,EAAagC,QAASJ,EAAS3E,OAHV,gDAKtC0E,EAASD,GAAa,EAAD,KALiB,yDAAhB,uDiBjF4BgB,cAAY2V,SjB0R1C,SAACjV,EAAYR,GAAb,8CAAwB,WAAOjB,GAAP,eAAAY,EAAA,+EAErBC,EAAWyD,MAAM,SAAjB,2BAClB7C,GADkB,IAErBE,YAAaV,KAJ6B,OAEtChB,EAFsC,OAM5CD,EAAS,CAAEI,KAAMvB,EAAWwB,QAASJ,EAAS3E,OANF,gDAQ5C0E,EAASD,GAAa,EAAD,KARuB,yDAAxB,uDiB1RoD4W,WjB+flD,SAAC1V,GAAD,8CAAY,WAAOjB,GAAP,eAAAY,EAAA,+EAEXC,EAAWgB,KAAK,gBAAiB,CACtDF,YAAaV,IAHmB,QAE5BhB,EAF4B,QAKzB3E,KAAKgU,MAAMrK,SAAQ,SAAC9D,GAC3BnB,EAAS+E,GAAW5D,EAAQlB,EAAS3E,KAAKwG,QAE5C9B,EAAS,CAAEI,KAAMhB,EAAaiB,QAASJ,EAAS3E,OARd,gDAUlC0E,EAASD,GAAa,EAAD,KAVa,yDAAZ,uDiB/f8DO,YAAzEjH,EA1FF,SAAC,GAA4E,IAA1EuS,EAAyE,EAAzEA,KAAMhK,EAAmE,EAAnEA,MAAO6U,EAA4D,EAA5DA,WAAY1V,EAAgD,EAAhDA,WAAY2V,EAAoC,EAApCA,SAAUC,EAA0B,EAA1BA,WAAYrW,EAAc,EAAdA,QAEvE0G,qBAAU,WACNjG,MACD,IAuCH,OAAI6K,EACO,uCACH,uBAAKzE,UAAU,cAAf,UACI,uBAAKA,UAAU,kBAAf,UACI,sBAAIA,UAAU,aAAd,UACKyE,EAAKgL,SADV,cAGA,eAAC,GAAD,CACItN,SAAU,SAAA7H,GAAU,OAAIgV,EAAWhV,IACnCmD,MAAM,gBACNwF,MAAM,iBACNrB,OAAQ,CAAC,CACLE,MAAO,YACPtC,KAAM,WACNvG,KAAM,eAIlB,uBAAK+G,UAAU,kBAAf,UACI,eAAC,KAAD,CAAMA,UAAU,YAAYoP,GAAG,IAA/B,kBAGA,sBAAKpP,UAAU,YAAYC,QAAS9G,EAApC,4BAKR,wBACA,sBAAK6G,UAAU,YAAf,SAjEY,WAChB,IAAM0P,EAAWjL,EAAKhK,MAAMyB,KAAI,SAAAvB,GAAE,OAAIF,EAAME,MAC5C,OAAK+U,EAASrf,QAAWqf,EAAS,GAG3BA,EAASxT,KAAI,SAAAgM,GAChB,GAAIA,EACA,OACI,uBAAKlI,UAAU,YAAf,UACI,eAAC,KAAD,CAAMoP,GAAE,WAAMlH,EAAKjT,KAAnB,SACI,8BAAKiT,EAAK1I,SAEd,uBAAKQ,UAAU,eAAf,UACI,eAAC,GAAD,CACImC,SAAU,SAAA7H,GAAU,OAAIiV,EAASjV,EAAY4N,EAAKvN,KAClD8C,MAAK,eAAUyK,EAAK1I,MACpByD,MAAM,kBACNrB,OAAQ,CAAC,CACLE,MAAO,YACPtC,KAAM,OACNvG,KAAM,UAEV4N,cAAe,CAAErH,KAAM0I,EAAK1I,MAC5BsH,oBAAoB,EACpB1D,KAAI,oBAAe8E,EAAKvN,MAE5B,eAAC,GAAD,CACIwH,SAAU,kBAAMqN,EAAWtH,EAAKvN,KAChCqJ,YAAakE,EAAK1I,YApBE0I,EAAKvN,OALtC,+DA+DFgV,QAMF,QCnFTC,G,+MAEFC,YAAc,YAA+D,IAA5D7d,EAA2D,EAA3DA,MAAO8P,EAAoD,EAApDA,MAAa7I,GAAuC,EAA7CsI,KAA6C,EAAvCtI,MAAM6W,EAAiC,EAAjCA,aAAiC,EAAnBC,aAErD,OACI,iCACI,iCAAQjO,IACR,oCACI7I,KAAMA,EACN6W,aAAcA,GACV9d,Q,EAMpBkQ,WAAa,SAAA5H,GACT,EAAK6F,MAAMgC,SAAS7H,I,6CAIxB,WACI,OACI,wBAAM0F,UAAU,SAASmC,SAAUvQ,KAAKuO,MAAMoC,aAAa3Q,KAAKsQ,YAAhE,UACI,eAACH,GAAA,EAAD,CACIvC,KAAK,WACLwC,UAAWpQ,KAAKie,YAChB/N,MAAM,aACN7I,KAAK,OACL6W,aAAa,aAGjB,eAAC/N,GAAA,EAAD,CACIvC,KAAK,WACLwC,UAAWpQ,KAAKie,YAChB/N,MAAM,aACN7I,KAAK,WACL6W,aAAa,qBAEjB,yBAAQ9P,UAAU,gBAAlB,2B,GAvCOyC,IAAMS,WA+CdC,gBAAU,CACrBC,KAAM,YADKD,CAEZyM,ICXY1d,gBAJS,SAAA0N,GACpB,MAAO,CAAEoQ,WAAYpQ,EAAM8E,KAAKsL,cAGI,CAAEC,OnBqBpB,SAAC3V,GAAD,8CAAgB,WAAOzB,GAAP,eAAAY,EAAA,+EAEXC,EAAWgB,KAAK,UAAWJ,GAFhB,OAE5BxB,EAF4B,OAGlCrD,aAAaya,QAAQ,QAASpX,EAAS3E,KAAKqB,OAC5CqD,EAAS,CAAEI,KAAMjD,EAASkD,QAASJ,EAAS3E,KAAKsQ,OACjDpL,GAAQC,KAAK,SALqB,gDAOlCT,EAASD,GAAa,EAAD,KAPa,yDAAhB,wDmBrBP1G,EAhCA,SAAC,GAA4B,IAA1B+d,EAAyB,EAAzBA,OAAQD,EAAiB,EAAjBA,WAQtB,OANAnQ,qBAAU,WACFmQ,GACA3W,GAAQC,KAAK,WAElB,IAIC,uBAAK0G,UAAU,OAAf,UACI,sBAAKA,UAAU,cAAf,iCAGA,0CACA,eAAC,GAAD,CAAUmC,SAAU,SAAA7H,GAAU,OAAI2V,EAAO3V,MACzC,uBAAK0F,UAAU,eAAf,UACI,eAAC,KAAD,CAAMoP,GAAG,IAAT,kBAGA,eAAC,KAAD,CAAMA,GAAG,SAAT,8BCWDld,gBAJS,SAAA0N,GACpB,MAAO,CAAEoQ,WAAYpQ,EAAM8E,KAAKsL,cAGI,CAAEG,OpBuCpB,SAAC7V,GAAD,8CAAgB,WAAOzB,GAAP,eAAAY,EAAA,+EAEXC,EAAWgB,KAAK,UAAWJ,GAFhB,OAE5BxB,EAF4B,OAGlCrD,aAAaya,QAAQ,QAASpX,EAAS3E,KAAKqB,OAC5CqD,EAAS,CAAEI,KAAMjD,EAASkD,QAASJ,EAAS3E,KAAKsQ,OACjDpL,GAAQC,KAAK,SALqB,gDAOlCT,EAASD,GAAa,EAAD,KAPa,yDAAhB,wDoBvCP1G,EA/BA,SAAC,GAA4B,IAA1Bie,EAAyB,EAAzBA,OAAQH,EAAiB,EAAjBA,WAQtB,OANAnQ,qBAAU,WACFmQ,GACA3W,GAAQC,KAAK,WAElB,IAGC,uBAAK0G,UAAU,OAAf,UACI,sBAAKA,UAAU,cAAf,iCAGA,0CACA,eAAC,GAAD,CAAUmC,SAAU,SAAA7H,GAAU,OAAI6V,EAAO7V,MACzC,uBAAK0F,UAAU,eAAf,UACI,eAAC,KAAD,CAAMoP,GAAG,IAAT,kBAGA,eAAC,KAAD,CAAMA,GAAG,SAAT,8BCrBVgB,G,2KAGF,WACIxe,KAAKuO,MAAMvG,e,yBAGf,WAMI,cAJOhI,KAAKuO,MAAM1F,MAAMD,YAEV0D,OAAOC,OAAOvM,KAAKuO,MAAM1F,OAE1ByB,KAAI,SAAAgM,GACb,OACI,sBAAKlI,UAAU,YAAf,SACI,eAAC,KAAD,CAAMoP,GAAE,WAAMlH,EAAKjT,KAAnB,SACI,8BAAKiT,EAAK1I,UAFc0I,EAAKvN,S,oBAWjD,WACI,OACI,uBAAKqF,UAAU,YAAf,UACI,qBAAIA,UAAU,cAAd,iCACA,uBAAKA,UAAU,eAAf,UACI,eAAC,KAAD,CAAMoP,GAAG,UAAT,qBAGA,eAAC,KAAD,CAAMA,GAAG,UAAT,qBAGA,eAAC,KAAD,CAAMA,GAAG,QAAT,4BAIJ,6CACA,sBAAKpP,UAAU,YAAf,SACKpO,KAAKuO,MAAM1F,OAAS7I,KAAK+d,uB,GA3C3BlN,IAAMS,WA0DVhR,gBANS,SAAA0N,GACpB,MAAO,CACHnF,MAAOmF,EAAMnF,SAImB,CAAEb,eAA3B1H,CAAyCke,ICczCC,GA5EF,WACT,OAAO,uCACH,uBAAKrQ,UAAU,eAAf,UACI,eAAC,KAAD,CAAMoP,GAAG,IAAT,kBACA,eAAC,KAAD,CAAMA,GAAG,SAAT,qBACA,eAAC,KAAD,CAAMA,GAAG,SAAT,wBAEJ,uBAAKpP,UAAU,OAAf,UACI,sBAAKA,UAAU,cAAf,uHAGA,wDAGA,sBAAKA,UAAU,OAAf,kOAGA,oGAIA,gDAGA,yNAGA,wCAGA,sTAGA,yCAGA,gTAGA,2CAGA,oVAGA,0CAGA,sNAGA,4CAGA,gRAGA,4SAGA,2CAGA,4KAGA,oBAAGA,UAAU,SAAb,iGAGA,oBAAGgI,KAAK,4CAAR,4C,+BCUGsI,GA/EE,SAAC,GAA0C,IAAxC5Q,EAAuC,EAAvCA,MAAOpN,EAAgC,EAAhCA,YAAaie,EAAmB,EAAnBA,aAChCC,EAAShL,mBAEf3F,oBAAS,sBAAC,sBAAApG,EAAA,sDACJnH,GAAeke,EAAOtT,QACZsT,EAAOtT,QAAQuT,WAAW,MAClCC,UAAU,EAAG,EAAGF,EAAOtT,QAAQyT,MAAOH,EAAOtT,QAAQ0T,QAEzDC,IALM,2CAOP,CAACve,IAEJ,IAAMue,EAAc,uCAAG,8BAAApX,EAAA,sEAUAiG,EAAMoR,cAVN,OAUf3e,EAVe,OAWftB,EAAU,CACdkgB,cAAeR,EACfS,aAAc7e,EACd8e,MAAO,KAGTC,KAAaC,gBAAgBtgB,GAAS,SAACgF,EAAKub,GACtCvb,EACFd,QAAQC,IAAIa,GAEZwb,EAAaD,MArBI,2CAAH,qDA6BdC,EAAe,SAACD,GACpB,IAAME,EAAMd,EAAOtT,QAAQuT,WAAW,MAEhCc,EAAmBH,EAAS/gB,OAAS,IAErCmhB,EAAS,SAACC,EAAWb,GAIzB,OAAOA,GAAWa,EAFH,KAEyBb,EAH1B,KAMhBU,EAAII,YAKJ,IAHA,IAAMC,EAAUP,EAASO,QAAQ,GAGxBC,EAAI,EAAGA,EAAIR,EAAS/gB,OAAQuhB,IAAK,CACxC,IAAMphB,EAAMmhB,EAAQE,WAAWD,GAE/BN,EAAIQ,OAAOF,EAAIL,EAAkBC,EAAOhhB,EAAKggB,EAAOtT,QAAQ0T,SAI9D,IAAK,IAAIgB,EAAIR,EAAS/gB,OAAS,EAAGuhB,GAAK,EAAGA,IAAK,CAC7C,IAAMphB,EAAMmhB,EAAQI,WAAWH,GAE/BN,EAAIQ,OAAOF,EAAIL,EAAkBC,EAAOhhB,EAAKggB,EAAOtT,QAAQ0T,SAG9DU,EAAIU,YACJV,EAAIW,SACJX,EAAIY,QAGN,OAAO,yBAAQxR,IAAK8P,KC2BP2B,GAtGE,SAAC,GAA0C,IAAxCzS,EAAuC,EAAvCA,MAAOpN,EAAgC,EAAhCA,YAAaie,EAAmB,EAAnBA,aACtC,EAAgDtM,mBAAS,GAAzD,oBAAOmO,EAAP,KAAyBC,EAAzB,KACA,EAAkCpO,oBAAS,GAA3C,oBAAOqO,EAAP,KAAkBC,EAAlB,KAEMC,EAAShN,mBAEf3F,qBAAU,WAYR,OAXA2S,EAAOtV,QAAU,IAAI8Q,MACrBwE,EAAOtV,QAAQuV,QAAU,WACvBF,GAAa,IAEfC,EAAOtV,QAAQwV,OAAS,WACtBH,GAAa,IAEfC,EAAOtV,QAAQyV,QAAU,WACvBJ,GAAa,IAEfC,EAAOtV,QAAQ0V,aAAe5F,EACvB,WACLwF,EAAOtV,QAAQ0V,aAAe,KAC9BJ,EAAOtV,QAAQuV,QAAU,KACzBD,EAAOtV,QAAQwV,OAAS,KACxBF,EAAOtV,QAAQyV,QAAU,QAE1B,IAEH9S,qBAAU,WACJvN,IACFigB,GAAa,GACTC,EAAOtV,SACTsV,EAAOtV,QAAQqQ,WAGlB,CAACjb,IAEJuN,qBAAU,WACR,GAAIH,EAAO,CACT,IAAMzK,EAAM4d,IAAIC,gBAAgBpT,GAChC8S,EAAOtV,QAAQ5M,IAAM2E,KAEtB,CAACyK,IAEJ,IAuBMsN,EAAe,WACnB,IAAM3F,EACHmL,EAAOtV,QAAQ+P,YAAcuF,EAAOtV,QAAQxB,SAAY,IACtDyR,MAAM9F,IACTgL,EAAoBhL,EAAWmL,EAAOtV,QAAQxB,SAAW,MAW7D,OACE,uCAtCKpJ,IAAeoN,GAAU4S,GAWlBhgB,GAAeoN,EAEvB,sBACEpP,IAAI,oBACJ0P,UAAU,YACVC,QAAS,kBAAMuS,EAAOtV,QAAQqQ,gBAL7B,EATH,sBACEjd,IAAI,mBACJ0P,UAAU,YACVC,QAAS,WACPlL,QAAQC,IAAIwd,EAAOtV,SACnBsV,EAAOtV,QAAQsQ,UAiCrB,uBAAKxN,UAAU,mBAAf,UACE,eAAC,GAAD,CACEN,MAAOA,EACPpN,YAAaA,EACbie,aAAcA,IAEhB,wBACEtX,KAAK,QACLsV,IAAI,IACJC,IAAI,OACJxN,MAAOoR,EACPpS,UAAU,WACVyO,QAtBe,SAAClO,GACtB,IAAM8G,EAAY9G,EAAExQ,OAAOiR,MAAQ,IAAQwR,EAAOtV,QAAQxB,SACrDyR,MAAM9F,KACTmL,EAAOtV,QAAQ+P,YAAc5F,aC/CpB0L,GA/BD,SAAC,GAAqB,IAAnBzgB,EAAkB,EAAlBA,YACf,EAA0B2R,mBAAS,GAAnC,oBAAO+O,EAAP,KAAcC,EAAd,KAEApT,qBAAU,WACR,IAAIqT,EASJ,OARI5gB,EACF4gB,EAAWC,aAAY,WACrBF,EAASD,EAAQ,KAChB,MAEHI,cAAcF,GACdD,EAAS,IAEJ,WACLG,cAAcF,MAEf,CAAC5gB,EAAa0gB,IAUjB,OACE,sBAAKhT,UAAU,gBAAf,SAAgC1N,GATf,SAACmV,GAClB,IAAIC,EACFD,EAAO,IAAP,WAAiBE,KAAKC,MAAMH,EAAO,KAAQE,KAAKC,MAAMH,EAAO,IAC3DI,EACFJ,EAAO,GAAK,GAAZ,WAAqBE,KAAKC,MAAMH,EAAO,KAAQE,KAAKC,MAAMH,EAAO,IACnE,MAAM,GAAN,OAAUC,EAAV,YAAqBG,GAI0BqF,CAAW8F,MCY/CK,GAvCO,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,YAAaC,EAAqB,EAArBA,eACpC,EAA8BtP,mBAAS,IAAvC,oBAAOuP,EAAP,KAAgBC,EAAhB,KAEA5T,qBAAU,WACR6T,IACAC,UAAUC,aAAaC,eAAiBH,IACvC,IAEH,IAAMA,EAAU,uCAAG,8BAAAja,EAAA,sEAEKka,UAAUC,aAAaE,mBAF5B,OAEXN,EAFW,OAGXO,EAAeP,EAAQtX,KAAI,SAAC8X,GAChC,GAAoB,eAAhBA,EAAOC,MAA6C,YAApBD,EAAOE,SACzC,OAAOF,KAGXP,EAAWM,GACNT,GACHC,EAAeC,EAAQ,IAVR,2CAAH,qDAuBhB,OACE,uBAAKxT,UAAU,iBAAf,UACE,iDACA,sBAAKA,UAAU,aAAf,SAZc,WAChB,IAAMmU,EAAaX,EAAQtX,KAAI,SAAC8X,GAC9B,GAAIA,EACF,OAAO,kCAA+BA,EAAOlS,OAAzBkS,EAAOE,aAG/B,OAAO,kCAASC,IAMeC,SCkMpBliB,gBAVS,SAAC0N,GACvB,MAAO,CACLuI,MAAOvI,EAAMuI,MACb9K,OAAQuC,EAAMvC,OACdvC,SAAU8E,EAAM9E,SAChBN,YAAaoF,EAAMnF,MAAMD,YACzB6Z,cAAezU,EAAMnF,MAAM4Z,iBAIS,CACtCxa,cACAE,eACAE,iBACAV,aACAqB,gBACAT,iBANajI,EA1NM,SAAC,GAcf,IAbLsI,EAaI,EAbJA,YACA2N,EAYI,EAZJA,MACA9K,EAWI,EAXJA,OACAvC,EAUI,EAVJA,SACAtB,EASI,EATJA,SACAD,EAQI,EARJA,UACAM,EAOI,EAPJA,WACAE,EAMI,EANJA,YACAE,EAKI,EALJA,cACAE,EAII,EAJJA,aACAS,EAGI,EAHJA,aACA8E,EAEI,EAFJA,MACA2U,EACI,EADJA,cAEMC,EAAc,CAAE9U,KAAM,YAAa7E,GAAI,KAK7C,EAA0CsJ,mBAASqQ,GAAnD,oBAAOC,EAAP,KAAsBC,EAAtB,KACA,EAAwCvQ,mBAASqQ,GAAjD,oBAAOG,EAAP,KAAqBC,EAArB,KACA,EAA8CzQ,mBAASqQ,GAAvD,oBAAOtN,EAAP,KAAwBC,EAAxB,KACA,EAAwChD,oBAN/B,IAAI3Q,MAAOqhB,cAAcC,UAAU,EAAG,KAM/C,oBAAOC,EAAP,KAAqBC,EAArB,KACA,EAA0C7Q,oBAAS,GAAnD,oBAAO8Q,EAAP,KAAsBC,EAAtB,KACA,EAA0C/Q,oBAAS,GAAnD,oBAAOgR,EAAP,KAAsBC,EAAtB,KAEA,EAAkCjR,mBAAS,IAA3C,oBAAO6G,EAAP,KAAkBqK,EAAlB,KACA,EAAgClR,mBAAS,IAAzC,oBAAO4G,EAAP,KAAiB4B,EAAjB,KACA,EAAsCxI,mBAAS,IAA/C,oBAAO3G,EAAP,KAAoBwL,EAApB,KAEAjJ,qBAAU,WACRtG,EAAUC,KACT,IAEHqG,qBAAU,WACJrF,GACFX,EAAWW,EAAYG,MAExB,CAACH,IAEJqF,qBAAU,WACR,GAAIrF,EAAa,CACf,IAAM4a,EAAO5a,EAAY2N,MAAMjM,KAAI,SAACvB,GAAD,OAAQwN,EAAMxN,MACjD8R,EAAY2I,MAEb,CAACjN,IAEJtI,qBAAU,WACJ4U,IAAiBH,IACnBva,EAAY0a,EAAa9Z,IACzBmO,EAAe,IACf7B,EAAmBqN,MAEpB,CAACG,IAEJ5U,qBAAU,WACR,GAAI4U,IAAiBH,EAAa,CAChC,IAAMc,EAAOX,EAAa5W,UAAU3B,KAAI,SAACvB,GAAD,OAAQ0C,EAAO1C,MACvDwa,EAAaC,MAEd,CAAC/X,IAEJwC,qBAAU,WACJ0U,IAAkBD,GACpBra,EAAcsa,EAAc5Z,MAE7B,CAAC4Z,IAEJ1U,qBAAU,WACR,GAAI0U,IAAkBD,EAAa,CACjC,IAAMc,EAAOb,EAAczZ,SAASoB,KAAI,SAACvB,GAAD,OAAQG,EAASH,MACzDmO,EAAesM,MAEhB,CAACta,IAEJ+E,qBAAU,WACmB,MAAvBmH,EAAgBrM,IAClBR,EAAa6M,EAAgBrM,MAE9B,CAACqM,IAEJnH,qBAAU,WACJoV,IAAkBZ,IACpBa,GAAiB,GACjBF,GAAiB,GACjBjc,YAAW,WACTic,GAAiB,KAChB,MAEDX,IAAkBY,GACpBC,GAAiB,KAElB,CAACb,IAEJ,IAAMgB,EAAW,SAACC,EAAWC,EAAU3Q,GACrC,IAKM/T,EADI,CAAIyjB,GAAJ,oBAAoBgB,IACTpZ,KAAI,SAACsZ,GACxB,GAAIA,EAAM,CACR,IAAMhW,EAAOgW,EAAKhW,MAAQgW,EAAK/X,MAC/B,OACE,yBAAQuD,MAAOwU,EAAK7a,GAApB,SACG6E,GAD0BgW,EAAK7a,QAMxC,OACE,yBAAQyG,SAhBO,SAACb,GAChB,IAAMkV,EAAWH,EAAUlZ,MAAK,SAACoZ,GAAD,OAAUA,EAAK7a,KAAO4F,EAAExQ,OAAOiR,SAC/DuU,EAASE,IAcmBzU,MAAO4D,EAAajK,GAAhD,SACG9J,KAmBD6kB,EAAe,WACnB,SAAIhW,IAASmV,GAAuC,MAAvB7N,EAAgBrM,KAmB/C,OACE,uBAAKqF,UAAU,gBAAf,UACE,uBAAKA,UAAU,2BAAf,UACE,sBAAKA,UAAU,sBAAf,mBACA,+BACGxF,GACCqQ,GACAwK,EAASxK,EAAU6J,EAAiBD,QAI1C,uBAAKzU,UAAU,2BAAf,UACE,sBAAKA,UAAU,sBAAf,oBACA,+BACGyU,GACC3J,GACAuK,EAASvK,EAAW0J,EAAkBD,QAI5C,uBAAKvU,UAAU,2BAAf,UACE,sBAAKA,UAAU,sBAAf,sBACA,+BACGuU,GACCjX,GACA+X,EAAS/X,EAAa2J,EAAoBD,QAIhD,uBAAKhH,UAAU,2BAAf,UACE,sBAAKA,UAAU,sBAAf,mBACA,+BACE,wBACE/G,KAAK,OACL+H,MAAO6T,EACPzT,SAAU,SAACb,GAAD,OAAOuU,EAAgBvU,EAAExQ,OAAOiR,QAC1ChB,UAAU,kBAIhB,uBAAMmC,SA1EO,SAAC5B,GAEhB,GADAA,EAAE+M,iBACEoI,IAAgB,CAClB,IAAMza,EAAO,IAAI0a,KAAK,CAACjW,GAAQ,gBAAiB,CAAEkW,aAActiB,SAOhEsH,EANa,CACX6E,KAAMoV,EACN7Z,QAAQ,EACRC,KAAM,CAACA,IAGU+L,EAAgBrM,MAgEnC,SACE,yBACEqF,UAAS,UACP0V,IAAiB,yBAA2B,mBAE9Czc,KAAK,SAJP,2BASD8b,GA9DI,sBAAK/U,UAAU,iBAAf,2CA+DJiV,GA1DD,uBAAKjV,UAAU,eAAf,UACE,8CACA,sBAAK1P,IAAI,uBAAuB0P,UAAU,sBCFnC6V,GAnJE,SAAC,GAAe,IAAb7G,EAAY,EAAZA,MAClB,EAAsC/K,oBAAS,GAA/C,oBAAO3R,EAAP,KAAoBwjB,EAApB,KACA,EAA0B7R,qBAA1B,oBAAOvE,EAAP,KAAcqW,EAAd,KACA,EAAsC9R,qBAAtC,oBAAOqP,EAAP,KAAoBC,EAApB,KACA,EAA0BtP,mBAAS,IAAnC,oBAAOxR,EAAP,KAAcujB,EAAd,KAEMC,EAAgBzQ,mBAChB+K,EAAe/K,iBAAO,IAAIlK,cACjBkK,iBAAO,IAEtB3F,oBAAS,sBAAC,8BAAApG,EAAA,0DA8BJ6Z,EA9BI,gCA+BoBK,UAAUC,aAAasC,aAAa,CAC5DxW,MAAO,CACLwU,SAAUZ,EAAYY,YAjCpB,OA+BAiC,EA/BA,OAoCAC,EAAO7F,EAAarT,QAAQmZ,wBAAwBF,GAE1DF,EAAc/Y,QAAU,IAAIzL,KAAiB2kB,EAAM,CACjD1lB,UAAoC,uBACpCE,SAAU,MACVC,QAAS,CACPC,UAAW,MAEbC,mBAAmB,EACnByD,WAAY,SAACM,EAAUL,GACrBM,QAAQC,IAAIP,GACZshB,EAASthB,GACTqhB,GAAe,IAEjBzhB,UAAW,SAACS,GACV,IAAM2S,EAAO3S,EAAStB,gBACtBwiB,EAAS,cAAD,OAAevO,EAAf,cAEV5S,QAAS,SAACC,EAAUJ,GAClBshB,EAASthB,IAEXN,gBAAiB,WACfW,QAAQC,IAAI,qBA1DV,2CA8DP,CAACse,IAEJ,IAAMgD,EAAQ,uCAAG,sBAAA7c,EAAA,sDAIf,GAAKnH,EAkBH2jB,EAAc/Y,QAAQvJ,kBAKtBmiB,GAAe,QAtBf,IAQEG,EAAc/Y,QAAQpK,iBAEtBgjB,GAAe,GACf,MAAOvV,GACPxL,QAAQtC,MAAM8N,GAEdyV,EAASzV,EAAE7L,SAnBA,2CAAH,qDA8Cd,OACE,uBAAKsL,UAAW1N,EAAc,qBAAuB,WAArD,UACE,+BAAMG,IACN,sBAAKuN,UAAU,qBAAf,SACGN,IAAUpN,GACT,eAAC,GAAD,CACEoN,MAAOA,EACPpN,YAAaA,EACbie,aAAcA,EAAarT,YArBjC,sBAAK8C,UAAU,mBAAf,SACE,sBAAKC,QAASqW,EAAUtW,UAAU,eAAlC,SACG1N,EAAc,OAAS,aA0B5B,eAAC,GAAD,CAAOA,YAAaA,IAEpB,eAAC,GAAD,CACEghB,YAAaA,EACbC,eAAgBA,IAGlB,eAAC,GAAD,CAAc/Z,SAAUwV,EAAME,OAAO1V,SAAUkG,MAAOA,QC1F7CxN,gBAPS,SAAC0N,GACvB,MAAO,CACL2W,SAAU3W,EAAM8E,KAAKsL,WACrBvd,MAAOmN,EAAMnN,MAAMA,SAIiB,CAAE+jB,U7BgCjB,yDAAM,WAAO3d,GAAP,eAAAY,EAAA,+EAEJC,EAAWC,IAAI,SAFX,QAErBb,EAFqB,QAGd3E,KACX0E,EAAS,CAAEI,KAAMjD,EAASkD,QAASJ,EAAS3E,OAE5C0E,EAASM,MANgB,gDAS3BN,EAASD,GAAa,EAAD,KATM,yDAAN,wD6BhCV1G,EA9CH,SAAC,GAAoC,IAAlCqkB,EAAiC,EAAjCA,SAAUC,EAAuB,EAAvBA,UAAW/jB,EAAY,EAAZA,MAClCoN,qBAAU,WACJ0W,GACFC,MAED,IAEH,IAAMC,EAAWhkB,EAAQ,eAAiB,GAE1C,OACE,uCACE,eAAC,GAAD,IACA,sBAAKuN,UAAS,oBAAeyW,GAA7B,SACE,eAAC,IAAD,CAAQpd,QAASA,GAAjB,SACE,gBAAC,IAAD,WACE,eAAC,IAAD,CAAOqd,KAAK,IAAIC,OAAK,EAAC3U,UAAWoO,KACjC,eAAC,IAAD,CAAOsG,KAAK,UAAUC,OAAK,EAAC3U,UAAW4U,KAFzC,IAGE,eAAC,IAAD,CAAOF,KAAK,UAAUC,OAAK,EAAC3U,UAAW6U,KAHzC,IAIE,eAAC,IAAD,CACEH,KAAK,QACLC,OAAK,EACLG,OAAQ,SAACC,GACP,OAAKR,EAIE,eAAC,GAAD,eAAUQ,KAHf1d,GAAQC,KAAK,WACN,SAKb,eAAC,IAAD,CAAOod,KAAK,QAAQC,OAAK,EAAC3U,UAAWqO,KACrC,eAAC,IAAD,CAAOqG,KAAK,oBAAoBC,OAAK,EAAC3U,UAAW6T,KACjD,eAAC,IAAD,CAAOa,KAAK,aAAa1U,UAAWgV,kB,UC7C1CC,GAAgB,CAClBjH,YAAY,EACZvL,KAAM,MCFJyS,GAAe,CACjB1J,MAAM,EACNV,OAAQ,GACR1D,YAAa,MCQF+N,eAAgB,CAC3B/T,KAAMgU,KACN1S,KFRW,WAAoC,IAAnC9E,EAAkC,uDAA1BqX,GAAeI,EAAW,uCAC9C,OAAQA,EAAOpe,MACX,KAAKjD,EACD,OAAO,2BAAK4J,GAAZ,IAAmBoQ,YAAY,EAAMvL,KAAM4S,EAAOne,UACtD,KAAKjD,EACD,OAAO,2BAAK2J,GAAZ,IAAmBoQ,YAAY,EAAOvL,KAAM,OAChD,KAAKvN,EACD,IAAQuN,EAAS7E,EAAT6E,KAER,OADAA,EAAKhK,MAAMnB,KAAK+d,EAAOne,QAAQyB,IACxB,2BAAKiF,GAAZ,IAAmB6E,SACvB,QACI,OAAO7E,IEFfuI,MCbW,WAAyB,IAAxBvI,EAAuB,uDAAf,GAAIyX,EAAW,uCAEnC,OAAQA,EAAOpe,MAEX,KAAK9C,EACD,OAAO,2BAAKyJ,GAAUrD,KAAE+a,QAAQD,EAAOne,QAAS,OACpD,KAAKtC,EACD,OAAO,2BAAKgJ,GAAZ,mBAAoByX,EAAOne,QAAQyB,GAAK0c,EAAOne,UACnD,KAAK9B,EACD,IAAMmgB,EAAc3X,EAAMyX,EAAOne,QAAQyB,IAArB,SACd6c,EAAcH,EAAOne,QAAQmO,SAC/BoQ,EAAmB,GACvB,GAAIF,EAAcC,EACd,cAAiBtZ,OAAOC,OAAOyB,GAA/B,eAAuC,CAAlC,IAAI4V,EAAI,KACT,GAAIA,EAAKnO,UAAYmQ,GAAehC,EAAKnO,SAAWkQ,EAAa,CAC7D,IAAMG,EAAMlC,EAAKnO,SACjBoQ,EAAiBjC,EAAK7a,IAAtB,2BAAiC6a,GAAjC,IAAuCnO,SAAUqQ,EAAM,KAInE,GAAIH,EAAcC,EACd,cAAiBtZ,OAAOC,OAAOyB,GAA/B,eAAuC,CAAlC,IAAI4V,EAAI,KACT,GAAIA,EAAKnO,SAAWkQ,GAAe/B,EAAKnO,UAAYmQ,EAAa,CAC7D,IAAME,EAAMlC,EAAKnO,SACjBoQ,EAAiBjC,EAAK7a,IAAtB,2BAAiC6a,GAAjC,IAAuCnO,SAAUqQ,EAAM,KAInE,OAAO,2BAAK9X,GAAZ,mBAAoByX,EAAOne,QAAQyB,GAAK0c,EAAOne,SAAYue,GAC/D,KAAK9f,EACD,IAAMggB,EAAiBzZ,OAAOC,OAAO5B,KAAEqb,KAAKhY,EAAOA,EAAMpF,cAAc6D,QAAO,SAAAqL,GAAC,OAAIA,EAAErC,SAAWgQ,EAAOne,QAAQmO,YAK/G,OAJAsQ,EAAe7Z,SAAQ,SAACa,GACpBA,EAAK0I,SAAW1I,EAAK0I,SAAW,YAE7BzH,EAAMyX,EAAOne,QAAQyB,IACrB,2BAAKiF,GAAUrD,KAAE+a,QAAQK,EAAgB,OACpD,KAAKnf,GAED,OADAoH,EAAMyX,EAAOne,QAAQyF,MAAMsL,QAAUoN,EAAOne,QAAQ+Q,QAC7C,eAAKrK,GAChB,KAAK9I,EACD,IAAM+gB,EAAYjY,EAAMyX,EAAOne,QAAQyF,MAEvC,OADAkZ,EAAUha,UAAUvE,KAAK+d,EAAOne,QAAQuE,MAAM9C,IACvC,2BAAKiF,GAAZ,mBAAoBiY,EAAUld,GAAKkd,IACvC,KAAKtgB,EACD,GAAI8f,EAAOne,QAAQyF,KAAK6J,IAAK,CAAC,IAAD,EACnBsP,EAAUlY,EAAMyX,EAAOne,QAAQyF,KAAK6J,KAC1CsP,EAAQja,UAAUvE,KAAK+d,EAAOne,QAAQuE,MAAM9C,IAC5C,IAAMod,EAAUnY,EAAMyX,EAAOne,QAAQyF,KAAK8J,KAE1C,OADAsP,EAAQla,UAAYka,EAAQla,UAAUQ,QAAO,SAAA1D,GAAE,OAAIA,IAAO0c,EAAOne,QAAQuE,MAAM9C,MACxE,2BAAKiF,GAAZ,wBAAoBkY,EAAQnd,GAAKmd,GAAjC,eAA2CC,EAAQpd,GAAKod,GAAxD,IAEA,OAAOnY,EAEf,KAAK9H,EACD,IAAMkgB,EAAiBpY,EAAMyX,EAAOne,QAAQyF,MAC5C,GAAIqZ,EAAgB,CAChB,IAAMC,EAAeD,EAAena,UAAUQ,QAAO,SAAA1D,GAAE,OAAIA,IAAO0c,EAAOne,QAAQuE,MAAM9C,MAEvF,OADAqd,EAAena,UAAYoa,EACpB,2BAAKrY,GAAZ,mBAAoBoY,EAAerd,GAAKqd,IAEhD,QACI,OAAOpY,ID/CfvC,OEbW,WAAyB,IAAxBuC,EAAuB,uDAAf,GAAIyX,EAAW,uCAEnC,OAAQA,EAAOpe,MAEX,KAAKxC,EACD,OAAO,2BAAKmJ,GAAUrD,KAAE+a,QAAQD,EAAOne,QAAS,OACpD,KAAKpC,EACD,OAAO,2BAAK8I,GAAZ,mBAAoByX,EAAOne,QAAQuE,MAAM9C,GAAK0c,EAAOne,QAAQuE,QACjE,KAAKlG,EACD,IAAM2gB,EAAWtY,EAAMyX,EAAOne,QAAQuE,MAAM9C,IACtCwd,EAAWd,EAAOne,QAAQuE,MAGhC,OAFA0a,EAASnR,gBAAkBkR,EAASlR,gBACpCmR,EAASjS,eAAiBgS,EAAShS,eAC5B,2BAAKtG,GAAZ,mBAAoBuY,EAASxd,GAAKwd,IACtC,KAAKrgB,EAED,cADO8H,EAAMyX,EAAOne,QAAQuE,MAAM9C,IAC3B,eAAKiF,GAChB,KAAKnH,GACD,IAAM2f,EAAexY,EAAMyX,EAAOne,QAAQgB,SAE1C,OADAke,EAAapR,gBAAkBqQ,EAAOne,QAAQ2C,QACvC,2BAAK+D,GAAZ,mBAAoBwY,EAAazd,GAAjC,eAA2Cyd,KAC/C,KAAK1f,GACD,IAAM2f,EAAczY,EAAMyX,EAAOne,QAAQgB,SAEzC,OADAme,EAAYnS,eAAiBmR,EAAOne,QAAQuD,OACrC,2BAAKmD,GAAZ,mBAAoByY,EAAY1d,GAAhC,eAA0C0d,KAC9C,KAAKrhB,EACD,IAAMshB,EAAa1Y,EAAMyX,EAAOne,QAAQuE,OAGxC,OAFA6a,EAAWxd,SAASxB,KAAK+d,EAAOne,QAAQ2C,QAAQlB,IAChD2d,EAAWtR,gBAAkBqQ,EAAOne,QAAQ2C,QACrC,2BAAK+D,GAAZ,mBAAoB0Y,EAAW3d,GAAK2d,IACxC,KAAKvgB,EACD,IAAMwgB,EAAkB3Y,EAAMyX,EAAOne,QAAQuE,OAC7C,GAAI8a,EAAiB,CACjB,IAAMC,EAAiBD,EAAgBzd,SAASuD,QAAO,SAAA1D,GAAE,OAAIA,IAAO0c,EAAOne,QAAQ2C,QAAQlB,MAE3F,OADA4d,EAAgBzd,SAAW0d,EACpB,2BAAK5Y,GAAZ,mBAAoB2Y,EAAgB5d,GAAK4d,IAEjD,QACI,OAAO3Y,IFxBf9E,SGfW,WAAyB,IAAxB8E,EAAuB,uDAAf,GAAIyX,EAAW,uCAEnC,OAAQA,EAAOpe,MAEX,KAAKvC,EACD,OAAO,2BAAKkJ,GAAUrD,KAAE+a,QAAQD,EAAOne,QAAS,OACpD,KAAKlC,EAEL,KAAKQ,EACD,OAAO,2BAAKoI,GAAZ,mBAAoByX,EAAOne,QAAQ2C,QAAQlB,GAAK0c,EAAOne,QAAQ2C,UACnE,KAAK9D,EAED,cADO6H,EAAMyX,EAAOne,QAAQ2C,QAAQlB,IAC7B,eAAKiF,GAChB,KAAK3I,EACD,IAAMwhB,EAAe7Y,EAAMyX,EAAOne,QAAQ2C,SAE1C,OADA4c,EAAa1d,QAAQzB,KAAK+d,EAAOne,QAAQuD,OAAO9B,IACzC,2BAAKiF,GAAZ,mBAAoB6Y,EAAa9d,GAAK8d,IAC1C,KAAKzgB,EACD,IAAM0gB,EAAoB9Y,EAAMyX,EAAOne,QAAQ2C,SAC/C,GAAI6c,EAAmB,CACnB,IAAMC,EAAgBD,EAAkB3d,QAAQsD,QAAO,SAAA1D,GAAE,OAAIA,IAAO0c,EAAOne,QAAQuD,OAAO9B,MAE1F,OADA+d,EAAkB3d,QAAU4d,EACrB,2BAAK/Y,GAAZ,mBAAoB8Y,EAAkB/d,GAAK+d,IAEnD,QACI,OAAO9Y,IHTf7E,QIXW,WAAyB,IAAxB6E,EAAuB,uDAAf,GAAIyX,EAAW,uCACrC,OAAQA,EAAOpe,MACb,KAAKtC,EACH,OAAO,2BAAKiJ,GAAUrD,KAAE+a,QAAQD,EAAOne,QAAS,OAClD,KAAKjC,EACH,OAAO,2BAAK2I,GAAZ,mBAAoByX,EAAOne,QAAQuD,OAAO9B,GAAK0c,EAAOne,QAAQuD,SAChE,KAAKhF,EACH,OAAO,2BAAKmI,GAAZ,mBAAoByX,EAAOne,QAAQyB,GAAK0c,EAAOne,UACjD,KAAKlB,EAEH,cADO4H,EAAMyX,EAAOne,QAAQuD,OAAO9B,IAC5B,eAAKiF,GACd,QACE,OAAOA,IJAT3B,UKjBW,WAAyB,IAAxB2B,EAAuB,uDAAf,GAAIyX,EAAW,uCAEnC,OAAQA,EAAOpe,MAEX,KAAK3C,EACD,OAAO,2BAAKsJ,GAAUrD,KAAE+a,QAAQD,EAAOne,QAAS,OACpD,KAAK7C,EAEL,KAAKU,EACD,OAAO,2BAAK6I,GAAZ,mBAAoByX,EAAOne,QAAQyB,GAAK0c,EAAOne,UACnD,KAAK7B,EACD,IAAMkgB,EAAc3X,EAAMyX,EAAOne,QAAQyB,IAArB,SACd6c,EAAcH,EAAOne,QAAQmO,SAC/BoQ,EAAmB,GACvB,GAAIF,EAAcC,EACd,cAAiBtZ,OAAOC,OAAOyB,GAA/B,eAAuC,CAAlC,IAAI4V,EAAI,KACT,GAAIA,EAAKnO,UAAYmQ,GAAehC,EAAKnO,SAAWkQ,EAAa,CAC7D,IAAMG,EAAMlC,EAAKnO,SACjBoQ,EAAiBjC,EAAK7a,IAAtB,2BAAiC6a,GAAjC,IAAuCnO,SAAUqQ,EAAM,KAInE,GAAIH,EAAcC,EACd,cAAiBtZ,OAAOC,OAAOyB,GAA/B,eAAuC,CAAlC,IAAI4V,EAAI,KACT,GAAIA,EAAKnO,SAAWkQ,GAAe/B,EAAKnO,UAAYmQ,EAAa,CAC7D,IAAME,EAAMlC,EAAKnO,SACjBoQ,EAAiBjC,EAAK7a,IAAtB,2BAAiC6a,GAAjC,IAAuCnO,SAAUqQ,EAAM,KAInE,OAAO,2BAAK9X,GAAZ,mBAAoByX,EAAOne,QAAQyB,GAAK0c,EAAOne,SAAYue,GAC/D,KAAK7f,SACMgI,EAAMpF,YACb,IAAMmd,EAAiBzZ,OAAOC,OAAOyB,GAAOvB,QAAO,SAAAua,GAAC,OAAIA,EAAEvR,SAAWgQ,EAAOne,QAAQmO,YAKpF,OAJAsQ,EAAe7Z,SAAQ,SAAChB,GACpBA,EAASuK,SAAWvK,EAASuK,SAAW,YAErCzH,EAAMyX,EAAOne,QAAQyB,IACrB,2BAAKiF,GAAUrD,KAAE+a,QAAQK,EAAgB,OACpD,KAAK9gB,EACD,IAAMgiB,EAAgBjZ,EAAMyX,EAAOne,QAAQ4D,UAE3C,OADA+b,EAAcra,MAAMlF,KAAK+d,EAAOne,QAAQ2D,aAAalC,IAC9C,2BAAKiF,GAAZ,mBAAoBiZ,EAAcle,GAAKke,IAC3C,KAAKhhB,EACD,IAAMihB,EAAqBlZ,EAAMyX,EAAOne,QAAQ4D,UAChD,GAAIgc,EAAoB,CACpB,IAAMC,EAAcD,EAAmBta,MAAMH,QAAO,SAAA1D,GAAE,OAAIA,IAAO0c,EAAOne,QAAQ2D,aAAalC,MAE7F,OADAme,EAAmBta,MAAQua,EACpB,2BAAKnZ,GAAZ,mBAAoBkZ,EAAmBne,GAAKme,IAEpD,QACI,OAAOlZ,ILjCfxB,cMlBW,WAAyB,IAAxBwB,EAAuB,uDAAf,GAAIyX,EAAW,uCAEnC,OAAQA,EAAOpe,MAEX,KAAK7C,EACD,OAAO,2BAAKwJ,GAAUrD,KAAE+a,QAAQD,EAAOne,QAAS,OACpD,KAAKrC,EACD,OAAO,2BAAK+I,GAAZ,mBAAoByX,EAAOne,QAAQ2D,aAAalC,GAAK0c,EAAOne,QAAQ2D,eACxE,KAAKvF,EACD,IAAMigB,EAAc3X,EAAMyX,EAAOne,QAAQ2D,aAAalC,IAAlC,SACd6c,EAAcH,EAAOne,QAAQ2D,aAAawK,SAC5CoQ,EAAmB,GAEvB,GAAIF,EAAcC,EACd,cAAiBtZ,OAAOC,OAAOyB,GAA/B,eAAuC,CAAlC,IAAI4V,EAAI,KACT,GAAIA,EAAKnO,UAAYmQ,GAAehC,EAAKnO,SAAWkQ,EAAa,CAC7D,IAAMG,EAAMlC,EAAKnO,SACjBoQ,EAAiBjC,EAAK7a,IAAtB,2BAAiC6a,GAAjC,IAAuCnO,SAAUqQ,EAAM,KAInE,GAAIH,EAAcC,EACd,cAAiBtZ,OAAOC,OAAOyB,GAA/B,eAAuC,CAAlC,IAAI4V,EAAI,KACT,GAAIA,EAAKnO,SAAWkQ,GAAe/B,EAAKnO,UAAYmQ,EAAa,CAC7D,IAAME,EAAMlC,EAAKnO,SACjBoQ,EAAiBjC,EAAK7a,IAAtB,2BAAiC6a,GAAjC,IAAuCnO,SAAUqQ,EAAM,KAKnE,OAAO,2BAAK9X,GAAZ,mBAAoByX,EAAOne,QAAQ2D,aAAalC,GAAK0c,EAAOne,QAAQ2D,cAAiB4a,GACzF,KAAK5f,EACD,IAAM8f,EAAiBzZ,OAAOC,OAAOyB,GAAOvB,QAAO,SAAAua,GAAC,OAAIA,EAAEvR,SAAWgQ,EAAOne,QAAQ2D,aAAawK,YAKjG,OAJAsQ,EAAe7Z,SAAQ,SAACwB,GACpBA,EAAK+H,SAAW/H,EAAK+H,SAAW,YAE7BzH,EAAMyX,EAAOne,QAAQ2D,aAAalC,IAClC,eAAKiF,GAChB,KAAK7H,EACD,IAAK,IAAM4C,KAAMiF,EACTA,EAAMjF,GAAIkB,UAAYwb,EAAOne,QAAQ2C,QAAQlB,KAC7CiF,EAAMjF,GAAIkB,QAAU,KACpB+D,EAAMjF,GAAI8B,OAAS,MAG3B,OAAO,eAAKmD,GAChB,KAAK5H,EACD,IAAK,IAAM2C,KAAMiF,EACTA,EAAMjF,GAAI8B,SAAW4a,EAAOne,QAAQuD,OAAO9B,KAC3CiF,EAAMjF,GAAI8B,OAAS,MAG3B,OAAO,eAAKmD,GAChB,QACI,OAAOA,INnCfnF,MONW,WAAyB,IAAD,UAAvBmF,EAAuB,uDAAf,GAAIyX,EAAW,uCACrC,OAAQA,EAAOpe,MACb,KAAK1C,EACH,OAAO,2BACFqJ,GADL,wBAEGyX,EAAOne,QAAQyB,GAAK0c,EAAOne,SAF9B,6BAGeme,EAAOne,SAHtB,IAKF,KAAK1C,EACH,OAAO,2BAAKoJ,GAAUrD,KAAE+a,QAAQD,EAAOne,QAAS,OAClD,KAAKhC,EAEL,KAAKQ,EACH,OAAO,2BAAKkI,GAAZ,mBAAoByX,EAAOne,QAAQyB,GAAK0c,EAAOne,UACjD,KAAKjB,EAEH,cADO2H,EAAMyX,EAAOne,QAAQyB,IACrB,eAAKiF,GACd,KAAKhJ,EACH,IAAQ4D,EAAgBoF,EAAhBpF,YAER,OADAA,EAAY2N,MAAM7O,KAAK+d,EAAOne,QAAQyB,IAC/B,2BAAKiF,GAAZ,wBAAoBpF,EAAYG,GAAKH,GAArC,6BAAkDA,GAAlD,IACF,KAAK7C,EACH,IAAMuQ,EAAOtI,EAAMpF,YACbwe,EAAW9Q,EAAKC,MAAM9J,QAAO,SAAC1D,GAAD,OAAQA,IAAO0c,EAAOne,QAAQyB,MAEjE,OADAuN,EAAKC,MAAQ6Q,EACN,2BAAKpZ,GAAZ,wBAAoBsI,EAAKvN,GAAKuN,GAA9B,6BAAiDA,GAAjD,IACF,KAAKnR,EACH,IAAMkiB,EAAerZ,EAAMpF,YAE3B,OADAye,EAAahb,UAAU3E,KAAK+d,EAAOne,QAAQyB,IACpC,2BACFiF,GADL,wBAEGqZ,EAAate,GAAKse,GAFrB,6BAGeA,GAHf,IAKF,KAAKrhB,EACH,IAAMshB,EAAQtZ,EAAMpF,YACd2e,EAAeD,EAAMjb,UAAUI,QACnC,SAAC1D,GAAD,OAAQA,IAAO0c,EAAOne,QAAQyB,MAGhC,OADAue,EAAMjb,UAAYkb,EACX,2BAAKvZ,GAAZ,wBAAoBsZ,EAAMve,GAAKue,GAA/B,6BAAmDA,GAAnD,IACF,KAAKjjB,EACH,OAAOsG,KAAEqb,KAAKhY,EAAOA,EAAMpF,aAC7B,KAAKrD,EACH,OAAO,2BAAKyI,GAAZ,IAAmByU,eAAe,IACpC,KAAKpd,EACH,OAAO,2BAAK2I,GAAZ,IAAmByU,eAAe,IACpC,QACE,OAAOzU,IPzCTnN,MQpBW,WAAyB,IAAxBmN,EAAuB,uDAAf,GAAIyX,EAAW,uCACnC,OAAQA,EAAOpe,OACN/C,EACM,CAAEzD,MAAO4kB,EAAOne,SAEhB0G,GRgBfF,MDhBW,WAAmC,IAAlCE,EAAiC,uDAAzBsX,GAAcG,EAAW,uCAC7C,OAAQA,EAAOpe,MACX,KAAKf,EACD,OAAO,2BAAK0H,GAAZ,IAAmB4N,MAAM,EAAMD,OAAO,IAC1C,KAAKpV,GACD,OAAO,2BAAKyH,GAAZ,IAAmB4N,MAAM,EAAOD,OAAO,IAC3C,KAAKnV,GACD,MAAyBif,EAAOne,QAAxBoG,EAAR,EAAQA,KAAMK,EAAd,EAAcA,OACd,OAAO,2BAAKC,GAAZ,IAAmBwJ,YAAa9J,EAAMkO,MAAM,EAAM7N,WACtD,KAAKtH,GACD,OAAO,2BAAKuH,GAAZ,IAAmBwJ,YAAaiO,EAAOne,UAC3C,KAAKlB,EACD,OAAI4H,EAAMwJ,aAAeiO,EAAOne,QAAQuD,OAAO9B,KAAOiF,EAAMwJ,YAAY1J,MAC7D,eAAKwX,IAELtX,EAMf,KAAKtH,GACD,OAAO,2BAAKsH,GAAZ,IAAmBkN,OAAQuK,EAAOne,UACtC,KAAKX,GACD,OAAO,eAAK2e,IAChB,QACI,OAAOtX,MUrBbsX,GAAe,GAEPzhB,aAAaC,QAAQ,WAG/BwhB,GAAaxS,KAAO,CAAEsL,YAAY,IAGtC,IAAMoJ,GAAmB/d,OAAOge,sCAAwCC,IAClEC,GAAQC,YACVC,GACAvC,GACAkC,GAAiBM,YAAgBC,OAGrCjW,IAASoT,OACL,eAAC,IAAD,CAAUyC,MAAOA,GAAjB,SACI,eAAC,GAAD,MAEJ1W,SAASS,cAAc,Y","file":"static/js/main.01ebded9.chunk.js","sourcesContent":["module.exports = (function () {\r\n  // internal: same as jQuery.extend(true, args...)\r\n  var extend = function () {\r\n    var target = arguments[0],\r\n      sources = [].slice.call(arguments, 1);\r\n    for (var i = 0; i < sources.length; ++i) {\r\n      var src = sources[i];\r\n      for (let key in src) {\r\n        var val = src[key];\r\n        target[key] =\r\n          typeof val === 'object'\r\n            ? extend(typeof target[key] === 'object' ? target[key] : {}, val)\r\n            : val;\r\n      }\r\n    }\r\n    return target;\r\n  };\r\n\r\n  var WORKER_FILE = {\r\n    wav: 'WebAudioRecorderWav.js',\r\n    ogg: 'WebAudioRecorderOgg.js',\r\n    mp3: 'WebAudioRecorderMp3.js',\r\n  };\r\n\r\n  // default configs\r\n  var CONFIGS = {\r\n    workerDir: '/', // worker scripts dir (end with /)\r\n    numChannels: 2, // number of channels\r\n    encoding: 'wav', // encoding (can be changed at runtime)\r\n\r\n    // runtime options\r\n    options: {\r\n      timeLimit: 300, // recording time limit (sec)\r\n      encodeAfterRecord: false, // process encoding after recording\r\n      progressInterval: 1000, // encoding progress report interval (millisec)\r\n      bufferSize: undefined, // buffer size (use browser default)\r\n\r\n      // encoding-specific options\r\n      wav: {\r\n        mimeType: 'audio/wav',\r\n      },\r\n      ogg: {\r\n        mimeType: 'audio/ogg',\r\n        quality: 0.5, // (VBR only): quality = [-0.1 .. 1]\r\n      },\r\n      mp3: {\r\n        mimeType: 'audio/mpeg',\r\n        bitRate: 160, // (CBR only): bit rate = [64 .. 320]\r\n      },\r\n    },\r\n  };\r\n\r\n  // constructor\r\n  var WebAudioRecorder = function (sourceNode, configs) {\r\n    extend(this, CONFIGS, configs || {});\r\n    this.context = sourceNode.context;\r\n    if (this.context.createScriptProcessor == null)\r\n      this.context.createScriptProcessor = this.context.createJavaScriptNode;\r\n    this.input = this.context.createGain();\r\n    sourceNode.connect(this.input);\r\n    this.buffer = [];\r\n    this.initWorker();\r\n  };\r\n\r\n  // instance methods\r\n  extend(WebAudioRecorder.prototype, {\r\n    isRecording: function () {\r\n      return this.processor != null;\r\n    },\r\n\r\n    setEncoding: function (encoding) {\r\n      if (this.isRecording())\r\n        this.error('setEncoding: cannot set encoding during recording');\r\n      else if (this.encoding !== encoding) {\r\n        this.encoding = encoding;\r\n        this.initWorker();\r\n      }\r\n    },\r\n\r\n    setOptions: function (options) {\r\n      if (this.isRecording())\r\n        this.error('setOptions: cannot set options during recording');\r\n      else {\r\n        extend(this.options, options);\r\n        this.worker.postMessage({ command: 'options', options: this.options });\r\n      }\r\n    },\r\n\r\n    startRecording: function () {\r\n      if (this.isRecording())\r\n        this.error('startRecording: previous recording is running');\r\n      else {\r\n        var numChannels = this.numChannels,\r\n          buffer = this.buffer,\r\n          worker = this.worker;\r\n        this.processor = this.context.createScriptProcessor(\r\n          this.options.bufferSize,\r\n          this.numChannels,\r\n          this.numChannels\r\n        );\r\n        this.input.connect(this.processor);\r\n        this.processor.connect(this.context.destination);\r\n        this.processor.onaudioprocess = function (event) {\r\n          for (var ch = 0; ch < numChannels; ++ch)\r\n            buffer[ch] = event.inputBuffer.getChannelData(ch);\r\n          worker.postMessage({ command: 'record', buffer: buffer });\r\n        };\r\n        this.worker.postMessage({\r\n          command: 'start',\r\n          bufferSize: this.processor.bufferSize,\r\n        });\r\n        this.startTime = Date.now();\r\n      }\r\n    },\r\n\r\n    recordingTime: function () {\r\n      return this.isRecording() ? (Date.now() - this.startTime) * 0.001 : null;\r\n    },\r\n\r\n    cancelRecording: function () {\r\n      if (this.isRecording()) {\r\n        this.input.disconnect();\r\n        this.processor.disconnect();\r\n        delete this.processor;\r\n        this.worker.postMessage({ command: 'cancel' });\r\n      } else this.error('cancelRecording: no recording is running');\r\n    },\r\n\r\n    finishRecording: function () {\r\n      if (this.isRecording()) {\r\n        this.input.disconnect();\r\n        this.processor.disconnect();\r\n        delete this.processor;\r\n        this.worker.postMessage({ command: 'finish' });\r\n      } else this.error('finishRecording: no recording is running');\r\n    },\r\n\r\n    cancelEncoding: function () {\r\n      if (this.options.encodeAfterRecord)\r\n        if (this.isRecording())\r\n          this.error('cancelEncoding: recording is not finished');\r\n        else {\r\n          this.onEncodingCanceled(this);\r\n          this.initWorker();\r\n        }\r\n      else this.error('cancelEncoding: invalid method call');\r\n    },\r\n\r\n    initWorker: function () {\r\n      if (this.worker != null) this.worker.terminate();\r\n      this.onEncoderLoading(this, this.encoding);\r\n      this.worker = new Worker(this.workerDir + 'WebAudioRecorderMp3.js');\r\n\r\n      var _this = this;\r\n      this.worker.onmessage = function (event) {\r\n        var data = event.data;\r\n        switch (data.command) {\r\n          case 'loaded':\r\n            _this.onEncoderLoaded(_this, _this.encoding);\r\n            break;\r\n          case 'timeout':\r\n            _this.onTimeout(_this);\r\n            break;\r\n          case 'progress':\r\n            _this.onEncodingProgress(_this, data.progress);\r\n            break;\r\n          case 'complete':\r\n            _this.onComplete(_this, data.blob);\r\n            break;\r\n          case 'error':\r\n            _this.error(data.message);\r\n        }\r\n      };\r\n      this.worker.postMessage({\r\n        command: 'init',\r\n        config: {\r\n          sampleRate: this.context.sampleRate,\r\n          numChannels: this.numChannels,\r\n        },\r\n        options: this.options,\r\n      });\r\n    },\r\n\r\n    error: function (message) {\r\n      this.onError(this, 'WebAudioRecorder.js:' + message);\r\n    },\r\n\r\n    // event handlers\r\n    onEncoderLoading: function (recorder, encoding) {},\r\n    onEncoderLoaded: function (recorder, encoding) {},\r\n    onTimeout: function (recorder) {\r\n      recorder.finishRecording();\r\n    },\r\n    onEncodingProgress: function (recorder, progress) {},\r\n    onEncodingCanceled: function (recorder) {},\r\n    onComplete: function (recorder, blob) {\r\n      recorder.onError(\r\n        recorder,\r\n        'WebAudioRecorder.js: You must override .onComplete event'\r\n      );\r\n    },\r\n    onError: function (recorder, message) {\r\n      console.log(message);\r\n    },\r\n  });\r\n\r\n  return WebAudioRecorder;\r\n})();\r\n","import axios from 'axios';\n\nconst url = {};\n\nif (process.env.NODE_ENV === 'production') {\n    url.baseURL = 'https://exploring-the-space.com/api';\n} else {\n    url.baseURL = 'http://localhost:3001/api'\n}\n\nconst instance = axios.create(url);\n\ninstance.interceptors.request.use(\n    (config) => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            config.headers.Authorization = token;\n        }\n        return config;\n    },\n    (err) => {\n        return Promise.reject(err);\n    }\n);\n\n\n\nexport default instance;","export const SIGN_IN = 'SIGN_IN';\nexport const SIGN_OUT = 'SIGN_OUT';\n\nexport const ERROR = 'ERROR';\n\nexport const FETCH_TIERS = 'FETCH_TIERS';\nexport const FETCH_PLAYLISTSONGS = 'FETCH_PLAYLISTSONGS';\nexport const FETCH_PLAYLIST = 'FETCH_PLAYLIST';\nexport const FETCH_PLAYLISTS = 'FETCH_PLAYLISTS';\nexport const FETCH_BAND = 'FETCH_BAND';\nexport const FETCH_BANDS = 'FETCH_BANDS';\nexport const FETCH_TITLES = 'FETCH_TITLES';\nexport const FETCH_VERSIONS = 'FETCH_VERSIONS';\nexport const FETCH_BOUNCES = 'FETCH_BOUNCES';\n\nexport const FETCH_TITLE = 'FETCH_TITLE';\nexport const FETCH_VERSION = 'FETCH_VERSION';\nexport const FETCH_BOUNCE = 'FETCH_BOUNCE';\n\nexport const CREATE_TIER = 'CREATE_TIER';\nexport const CREATE_PLAYLISTSONG = 'CREATE_PLAYLISTSONG';\nexport const CREATE_TITLE = 'CREATE_TITLE';\nexport const CREATE_PLAYLIST = 'CREATE_PLAYLIST';\nexport const CREATE_VERSION = 'CREATE_VERSION';\nexport const CREATE_BOUNCE = 'CREATE_BOUNCE';\nexport const CREATE_BAND = 'CREATE_BAND';\n\nexport const UPLOAD_STARTED = 'UPLOAD_STARTED';\n\nexport const EDIT_TIER = 'EDIT_TIER';\nexport const EDIT_PLAYLIST = 'EDIT_PLAYLIST';\nexport const EDIT_PLAYLISTSONG = 'EDIT_PLAYLISTSONG';\nexport const EDIT_TITLE = 'EDIT_TITLE';\nexport const EDIT_VERSION = 'EDIT_VERSION';\nexport const EDIT_BOUNCE = 'EDIT_BOUNCE';\nexport const EDIT_BAND = 'EDIT_BAND';\n\nexport const DELETE_TIER = 'DELETE_TIER';\nexport const DELETE_PLAYLIST = 'DELETE_PLAYLIST';\nexport const DELETE_PLAYLISTSONG = 'DELETE_PLAYLISTSONG';\nexport const DELETE_TITLE = 'DELETE_TITLE';\nexport const DELETE_VERSION = 'DELETE_VERSION';\nexport const DELETE_BOUNCE = 'DELETE_BOUNCE';\nexport const DELETE_BAND = 'DELETE_BAND';\n\nexport const PLAY_AUDIO = 'PLAY_AUDIO';\nexport const PAUSE_AUDIO = 'PAUSE_AUDIO';\nexport const QUEUE_SONGS = 'QUEUE_SONGS';\nexport const NEXT_SONG = 'NEXT_SONG';\nexport const CHANGE_VOLUME = 'CHANGE_VOLUME';\nexport const INITIALIZE_AUDIO = 'INITIALIZE_AUDIO';\nexport const ORDER_TIER = 'ORDER_TIER';\n\nexport const SELECT_VERSION = 'SELECT_VERSION';\nexport const SELECT_BOUNCE = 'SELECT_BOUNCE';\n","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();","import greenhouse from '../apis/greenhouse';\nimport {\n  SIGN_IN,\n  SIGN_OUT,\n  ERROR,\n  FETCH_BAND,\n  FETCH_BANDS,\n  FETCH_TIERS,\n  FETCH_TITLES,\n  FETCH_VERSIONS,\n  FETCH_BOUNCES,\n  FETCH_PLAYLISTS,\n  FETCH_PLAYLISTSONGS,\n  CREATE_BAND,\n  CREATE_TIER,\n  CREATE_TITLE,\n  CREATE_VERSION,\n  CREATE_BOUNCE,\n  CREATE_PLAYLIST,\n  CREATE_PLAYLISTSONG,\n  EDIT_BAND,\n  EDIT_TIER,\n  EDIT_TITLE,\n  EDIT_VERSION,\n  EDIT_BOUNCE,\n  EDIT_PLAYLIST,\n  EDIT_PLAYLISTSONG,\n  DELETE_BAND,\n  DELETE_TIER,\n  DELETE_TITLE,\n  DELETE_VERSION,\n  DELETE_BOUNCE,\n  DELETE_PLAYLIST,\n  DELETE_PLAYLISTSONG,\n  PLAY_AUDIO,\n  PAUSE_AUDIO,\n  QUEUE_SONGS,\n  NEXT_SONG,\n  CHANGE_VOLUME,\n  INITIALIZE_AUDIO,\n  ORDER_TIER,\n  SELECT_VERSION,\n  SELECT_BOUNCE,\n  UPLOAD_STARTED,\n} from './types';\nimport history from '../history';\nimport _ from 'lodash';\n\nconst errorHandler = (err) => (dispatch) => {\n  let message;\n  if (err.response) {\n    message = err.response.data.error;\n  } else {\n    message = err.message;\n  }\n  console.log(err);\n  setTimeout(() => {\n    dispatch(throwError(null));\n  }, 10000);\n  dispatch({ type: ERROR, payload: message });\n};\n\nexport const signIn = (formValues) => async (dispatch) => {\n  try {\n    const response = await greenhouse.post('/signin', formValues);\n    localStorage.setItem('token', response.data.token);\n    dispatch({ type: SIGN_IN, payload: response.data.user });\n    history.push('/user');\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const signOut = () => {\n  localStorage.removeItem('token');\n  history.push('/');\n  return { type: SIGN_OUT };\n};\n\nexport const signUp = (formValues) => async (dispatch) => {\n  try {\n    const response = await greenhouse.post('/signup', formValues);\n    localStorage.setItem('token', response.data.token);\n    dispatch({ type: SIGN_IN, payload: response.data.user });\n    history.push('/user');\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const throwError = (message) => {\n  return { type: ERROR, payload: message };\n};\n\nexport const fetchUser = () => async (dispatch) => {\n  try {\n    const response = await greenhouse.get('/user');\n    if (response.data) {\n      dispatch({ type: SIGN_IN, payload: response.data });\n    } else {\n      dispatch(signOut());\n    }\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const fetchBand = (bandName) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/bands/${bandName}`);\n    dispatch({ type: FETCH_BAND, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const fetchBands = () => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/bands`);\n    dispatch({ type: FETCH_BANDS, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const fetchTiers = (bandId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/tiers/${bandId}`);\n    dispatch({ type: FETCH_TIERS, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const fetchTitles = (tierId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/titles/${tierId}`);\n    dispatch({ type: FETCH_TITLES, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const fetchVersions = (titleId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/versions/${titleId}`);\n    dispatch({ type: FETCH_VERSIONS, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const fetchBounces = (versionId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/bounces/${versionId}`);\n    dispatch({ type: FETCH_BOUNCES, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const fetchPlaylists = (bandId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/playlists/${bandId}`);\n    dispatch({ type: FETCH_PLAYLISTS, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const fetchPlaylistSongs = (playlistId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/playlistsongs/${playlistId}`);\n    dispatch({ type: FETCH_PLAYLISTSONGS, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createBand = (formValues) => async (dispatch) => {\n  try {\n    const response = await greenhouse.post('/bands', formValues);\n    dispatch({ type: CREATE_BAND, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createTier = (formValues) => async (dispatch, getState) => {\n  try {\n    const { currentBand } = getState().bands;\n    const response = await greenhouse.post('/tiers', {\n      ...formValues,\n      currentBand: currentBand.id,\n    });\n    dispatch({ type: CREATE_TIER, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createTitle =\n  (formValues, tierId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n      const response = await greenhouse.post('/titles', {\n        ...formValues,\n        currentBand: currentBand.id,\n        tier: tierId,\n      });\n      dispatch({\n        type: CREATE_TITLE,\n        payload: { title: response.data, tier: tierId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const createVersion =\n  (formValues, titleId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const parentTitle = getState().titles[titleId];\n\n      if (!parentTitle.versions.length) {\n        formValues.current = true;\n      }\n\n      const response = await greenhouse.post('/versions', {\n        ...formValues,\n        currentBand: currentBand.id,\n        title: titleId,\n      });\n\n      if (response.data.current) {\n        if (parentTitle.versions.length) {\n          const versionList = parentTitle.versions.map(\n            (id) => getState().versions[id]\n          );\n          const oldCurrent = versionList.find((v) => v.current);\n          oldCurrent.current = false;\n          dispatch(\n            editVersion(\n              _.pick(oldCurrent, 'name', 'notes', 'current'),\n              oldCurrent.id,\n              titleId\n            )\n          );\n        }\n      }\n\n      // dispatch({ type: SELECT_VERSION, payload: { titleId, version: response.data } });\n      dispatch({\n        type: CREATE_VERSION,\n        payload: { version: response.data, title: titleId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const createBounce =\n  (formValues, versionId) => async (dispatch, getState) => {\n    dispatch({ type: UPLOAD_STARTED });\n    try {\n      const { currentBand } = getState().bands;\n      const parentVersion = getState().versions[versionId];\n\n      if (!parentVersion.bounces.length) {\n        formValues.latest = true;\n      }\n\n      // if (formValues.file instanceof FileList) {\n      //   formValues.file = formValues.file[0];\n      // }\n\n      formValues.file = formValues.file[0];\n\n      // Create instance of FileReader\n      const reader = new FileReader();\n\n      // When the file has been succesfully read\n      reader.onload = (event) => {\n        // Create an instance of AudioContext\n        const audioContext = new (window.AudioContext ||\n          window.webkitAudioContext)();\n\n        // Asynchronously decode audio file data contained in an ArrayBuffer.\n        audioContext.decodeAudioData(event.target.result, async (buffer) => {\n          // Obtain the duration in seconds of the audio file (with milliseconds as well, a float value)\n          const duration = parseInt(buffer.duration);\n\n          const formObject = {\n            ...formValues,\n            currentBand: currentBand.id,\n            version: versionId,\n            duration,\n          };\n\n          const formData = new FormData();\n\n          for (let key in formObject) {\n            formData.append(key, formObject[key]);\n          }\n\n          const response = await greenhouse.post('/bounces', formData, {\n            headers: { 'Content-Type': 'multipart/form-data' },\n          });\n\n          if (response.data.latest) {\n            if (parentVersion.bounces.length) {\n              const bounceList = parentVersion.bounces.map(\n                (id) => getState().bounces[id]\n              );\n              const oldLatest = bounceList.find((b) => b.latest);\n              oldLatest.latest = false;\n              dispatch(\n                editBounce(\n                  _.pick(oldLatest, 'date', 'comments', 'latest'),\n                  oldLatest.id,\n                  versionId\n                )\n              );\n            }\n          }\n\n          // dispatch({ type: SELECT_BOUNCE, payload: { titleId, bounce: response.data } });\n          dispatch({\n            type: CREATE_BOUNCE,\n            payload: { bounce: response.data, version: versionId },\n          });\n        });\n      };\n\n      // In case the file couldn't be read\n      reader.onerror = (event) => {\n        console.error('An error ocurred reading the file: ', event);\n      };\n\n      // Read file as an ArrayBuffer, important !\n      reader.readAsArrayBuffer(formValues.file);\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const createPlaylist = (formValues) => async (dispatch, getState) => {\n  try {\n    const { currentBand } = getState().bands;\n    const response = await greenhouse.post('/playlists', {\n      ...formValues,\n      currentBand: currentBand.id,\n    });\n    dispatch({ type: CREATE_PLAYLIST, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createPlaylistSong =\n  (formValues) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const response = await greenhouse.post('/playlistsongs', {\n        ...formValues,\n        currentBand: currentBand.id,\n      });\n      dispatch({\n        type: CREATE_PLAYLISTSONG,\n        payload: {\n          playlistsong: response.data,\n          playlist: formValues.playlistId,\n        },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const editBand = (formValues, bandId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.patch('/bands', {\n      ...formValues,\n      currentBand: bandId,\n    });\n    dispatch({ type: EDIT_BAND, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const editTier = (formValues, tierId) => async (dispatch, getState) => {\n  try {\n    const { currentBand } = getState().bands;\n    const response = await greenhouse.patch(`/tiers/${tierId}`, {\n      ...formValues,\n      currentBand: currentBand.id,\n    });\n    dispatch({ type: EDIT_TIER, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const editTitle =\n  (formValues, titleId, tierId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      let changeTier = formValues.move;\n      const response = await greenhouse.patch(`/titles/${titleId}`, {\n        ...formValues,\n        currentTier: tierId,\n        currentBand: currentBand.id,\n      });\n      dispatch({\n        type: EDIT_TITLE,\n        payload: {\n          title: response.data,\n          tier: { new: changeTier, old: tierId },\n        },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const editVersion =\n  (formValues, versionId, titleId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const thisVersion = getState().versions[versionId];\n      if (thisVersion.current) {\n        formValues.current = true;\n      }\n      const response = await greenhouse.patch(`/versions/${versionId}`, {\n        ...formValues,\n        currentBand: currentBand.id,\n      });\n      if (response.data.current && !thisVersion.current) {\n        const parentTitle = getState().titles[titleId];\n        const versionList = parentTitle.versions.map(\n          (id) => getState().versions[id]\n        );\n        const oldCurrent = versionList.find((v) => v.current);\n        oldCurrent.current = false;\n        dispatch(\n          editVersion(\n            _.pick(oldCurrent, 'name', 'notes', 'current'),\n            oldCurrent.id,\n            titleId\n          )\n        );\n      }\n\n      // dispatch({ type: SELECT_VERSION, payload: { titleId, version: response.data } });\n      dispatch({\n        type: EDIT_VERSION,\n        payload: { version: response.data, title: titleId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const editBounce =\n  (formValues, bounceId, versionId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const thisBounce = getState().bounces[bounceId];\n      if (thisBounce.latest) {\n        formValues.latest = true;\n      }\n      if (formValues.file && formValues.file.length) {\n        formValues.file = formValues.file[0];\n\n        // Create instance of FileReader\n        const reader = new FileReader();\n\n        // When the file has been succesfully read\n        reader.onload = (event) => {\n          // Create an instance of AudioContext\n          const audioContext = new (window.AudioContext ||\n            window.webkitAudioContext)();\n\n          // Asynchronously decode audio file data contained in an ArrayBuffer.\n          audioContext.decodeAudioData(event.target.result, async (buffer) => {\n            // Obtain the duration in seconds of the audio file (with milliseconds as well, a float value)\n            const duration = parseInt(buffer.duration);\n\n            const formObject = {\n              ...formValues,\n              currentBand: currentBand.id,\n              duration,\n            };\n\n            const formData = new FormData();\n\n            for (let key in formObject) {\n              formData.append(key, formObject[key]);\n            }\n\n            const response = await greenhouse.patch(\n              `/bounces/${bounceId}`,\n              formData,\n              {\n                headers: { 'Content-Type': 'multipart/form-data' },\n              }\n            );\n\n            if (response.data.latest && !thisBounce.latest) {\n              const parentVersion = getState().versions[versionId];\n              const bounceList = parentVersion.bounces.map(\n                (id) => getState().bounces[id]\n              );\n              const oldLatest = bounceList.find((b) => b.latest);\n              oldLatest.latest = false;\n              dispatch(\n                editBounce(\n                  _.pick(oldLatest, 'date', 'comments', 'latest'),\n                  oldLatest.id,\n                  versionId\n                )\n              );\n            }\n\n            dispatch({ type: EDIT_BOUNCE, payload: response.data });\n          });\n        };\n\n        // In case the file couldn't be read\n        reader.onerror = (event) => {\n          console.error('An error ocurred reading the file: ', event);\n        };\n\n        // Read file as an ArrayBuffer, important !\n        reader.readAsArrayBuffer(formValues.file);\n      } else {\n        const response = await greenhouse.patch(`/bounces/${bounceId}`, {\n          ...formValues,\n          currentBand: currentBand.id,\n        });\n        if (response.data.latest && !thisBounce.latest) {\n          const parentVersion = getState().versions[versionId];\n          const bounceList = parentVersion.bounces.map(\n            (id) => getState().bounces[id]\n          );\n          const oldLatest = bounceList.find((b) => b.latest);\n          oldLatest.latest = false;\n          dispatch(\n            editBounce(\n              _.pick(oldLatest, 'date', 'comments', 'latest'),\n              oldLatest.id,\n              versionId\n            )\n          );\n        }\n\n        dispatch({ type: EDIT_BOUNCE, payload: response.data });\n      }\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const editPlaylist =\n  (formValues, playlistId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const response = await greenhouse.patch(`/playlists/${playlistId}`, {\n        ...formValues,\n        currentBand: currentBand.id,\n      });\n      dispatch({ type: EDIT_PLAYLIST, payload: response.data });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const editPlaylistSong =\n  (formValues, playlistSongId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const song = getState().playlistSongs[playlistSongId];\n      if (formValues.move) {\n        const newSong = {\n          playlistId: formValues.move,\n          title: song.title,\n          version: song.version,\n          bounce: song.bounce,\n        };\n        dispatch(createPlaylistSong(newSong));\n      }\n      const response = await greenhouse.patch(\n        `/playlistsongs/${playlistSongId}`,\n        { ...formValues, currentBand: currentBand.id }\n      );\n      dispatch({\n        type: EDIT_PLAYLISTSONG,\n        payload: {\n          playlistsong: response.data,\n          playlist: formValues.playlistId,\n        },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const deleteBand = (bandId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.post('/bands/delete', {\n      currentBand: bandId,\n    });\n    response.data.tiers.forEach((tierId) => {\n      dispatch(deleteTier(tierId, response.data.id));\n    });\n    dispatch({ type: DELETE_BAND, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const deleteTier = (tierId) => async (dispatch, getState) => {\n  const { currentBand } = getState().bands;\n  try {\n    const response = await greenhouse.post('/tiers/delete', {\n      tierId,\n      currentBand: currentBand.id,\n    });\n    response.data.trackList.forEach((titleId) => {\n      dispatch(deleteTitle(titleId, response.data.id));\n    });\n    dispatch({ type: DELETE_TIER, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const deleteTitle = (titleId, tierId) => async (dispatch, getState) => {\n  const { currentBand } = getState().bands;\n  try {\n    const response = await greenhouse.post('/titles/delete', {\n      titleId,\n      tierId,\n      currentBand: currentBand.id,\n    });\n    response.data.versions.forEach((versionId) => {\n      dispatch(deleteVersion(versionId, response.data.id));\n    });\n    const playlists = Object.values(getState().playlists);\n    const playlistSongs = Object.values(getState().playlistSongs).filter(\n      (pls) => pls.title === titleId\n    );\n    playlistSongs.forEach((pls) => {\n      const playlist = playlists.find((pl) => pl.songs.includes(pls.id));\n      dispatch(deletePlaylistSong(pls.id, playlist.id));\n    });\n    dispatch({\n      type: DELETE_TITLE,\n      payload: { title: response.data, tier: tierId },\n    });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const deleteVersion =\n  (versionId, titleId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n      const response = await greenhouse.post('/versions/delete', {\n        versionId,\n        titleId,\n        currentBand: currentBand.id,\n      });\n      if (response.data.current) {\n        const parentTitle = getState().titles[titleId];\n        if (parentTitle) {\n          const remainingVersions = parentTitle.versions.filter(\n            (id) => id !== versionId\n          );\n          if (remainingVersions.length) {\n            const newCurrent =\n              getState().versions[\n                remainingVersions[remainingVersions.length - 1]\n              ];\n            newCurrent.current = true;\n            dispatch(selectVersion(newCurrent, titleId));\n            dispatch(\n              editVersion(\n                _.pick(newCurrent, 'name', 'notes', 'current'),\n                newCurrent.id,\n                titleId\n              )\n            );\n          } else {\n            dispatch(selectVersion(null, titleId));\n          }\n        }\n      }\n      response.data.bounces.forEach((bounceId) => {\n        dispatch(deleteBounce(bounceId, response.data.id, titleId));\n      });\n      dispatch({\n        type: DELETE_VERSION,\n        payload: { version: response.data, title: titleId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const deleteBounce =\n  (bounceId, versionId, titleId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n      const response = await greenhouse.post('/bounces/delete', {\n        bounceId,\n        versionId,\n        currentBand: currentBand.id,\n      });\n      if (response.data.latest) {\n        const parentVersion = getState().versions[versionId];\n        if (parentVersion) {\n          const remainingBounces = parentVersion.bounces.filter(\n            (id) => id !== bounceId\n          );\n          if (remainingBounces.length) {\n            const newLatest =\n              getState().bounces[remainingBounces[remainingBounces.length - 1]];\n            newLatest.latest = true;\n            dispatch(selectBounce(newLatest.id, titleId));\n            dispatch(\n              editBounce(\n                _.pick(newLatest, 'date', 'comments', 'latest'),\n                newLatest.id,\n                versionId\n              )\n            );\n          } else {\n            dispatch(selectBounce(null, titleId));\n          }\n        }\n      }\n      dispatch({\n        type: DELETE_BOUNCE,\n        payload: { bounce: response.data, version: versionId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const deletePlaylist = (playlistId) => async (dispatch, getState) => {\n  const { currentBand } = getState().bands;\n  try {\n    const response = await greenhouse.post('/playlists/delete', {\n      playlistId,\n      currentBand: currentBand.id,\n    });\n    response.data.songs.forEach((playlistSongId) => {\n      dispatch(deletePlaylistSong(playlistSongId, response.data.id));\n    });\n    dispatch({ type: DELETE_PLAYLIST, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const deletePlaylistSong =\n  (playlistSongId, playlistId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n      const response = await greenhouse.post('/playlistsongs/delete', {\n        playlistSongId,\n        playlistId,\n        currentBand: currentBand.id,\n      });\n      dispatch({\n        type: DELETE_PLAYLISTSONG,\n        payload: { playlistsong: response.data, playlist: playlistId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const playAudio = () => {\n  return { type: PLAY_AUDIO };\n};\n\nexport const pauseAudio = () => {\n  return { type: PAUSE_AUDIO };\n};\n\nexport const queueSongs = (song) => (dispatch) => {\n  const songObject = {\n    title: song.title,\n    version: song.version.name,\n    date: song.bounce.date,\n    duration: song.bounce.duration,\n    audio: song.bounce.id,\n  };\n\n  dispatch({\n    type: QUEUE_SONGS,\n    payload: { song: songObject, parent: song.tier },\n  });\n};\n\nexport const queuePlaylistSongs = (song) => (dispatch, getState) => {\n  // const version = getState().versions[song.version];\n  // const bounce = getState().bounces[song.bounce];\n  // const title = getState().titles[song.title];\n\n  const songObject = {\n    title: song.title,\n    version: song.version.name,\n    date: song.bounce.date,\n    duration: song.bounce.duration,\n    audio: song.bounce.id,\n    position: song.position,\n  };\n\n  dispatch({\n    type: QUEUE_SONGS,\n    payload: { song: songObject, parent: song.playlist },\n  });\n};\n\nexport const setOrder = (tier, orderBy) => {\n  return { type: ORDER_TIER, payload: { tier, orderBy } };\n};\n\nexport const nextSong = () => (dispatch, getState) => {\n  const { parent, currentSong } = getState().audio;\n  if (parent.trackList) {\n    let allTitles;\n\n    if (parent.orderBy === 'date') {\n      allTitles = parent.trackList\n        .map((id) => getState().titles[id])\n        .sort((a, b) => {\n          if (a.selectedBounce && b.selectedBounce) {\n            if (\n              new Date(a.selectedBounce.date) > new Date(b.selectedBounce.date)\n            ) {\n              return -1;\n            } else {\n              return 1;\n            }\n          } else if (a.selectedBounce) {\n            return -1;\n          } else if (b.selectedBounce) {\n            return 1;\n          }\n        });\n    }\n\n    if (parent.orderBy === 'name') {\n      allTitles = parent.trackList\n        .map((id) => getState().titles[id])\n        .sort((a, b) => {\n          return a.title < b.title ? -1 : 1;\n        });\n    }\n\n    const song = allTitles[allTitles.indexOf(currentSong.title) + 1];\n\n    if (song && song.selectedVersion && song.selectedBounce) {\n      const version = getState().versions[song.selectedVersion.id];\n      const bounce = getState().bounces[song.selectedBounce.id];\n\n      const songObject = {\n        title: song,\n        version: version.name,\n        date: bounce.date,\n        duration: bounce.duration,\n        audio: bounce.id,\n      };\n\n      dispatch({ type: NEXT_SONG, payload: songObject });\n    } else {\n      dispatch({ type: INITIALIZE_AUDIO });\n    }\n  }\n  if (parent.songs) {\n    const allSongs = parent.songs\n      .map((id) => getState().playlistSongs[id])\n      .sort((a, b) => (a.position < b.position ? -1 : 1));\n\n    let song;\n    let index = currentSong.position;\n\n    while (index < allSongs.length) {\n      if (allSongs[index].bounce !== null) {\n        song = allSongs[index];\n        break;\n      }\n      index++;\n    }\n\n    if (!song) {\n      return dispatch({ type: INITIALIZE_AUDIO });\n    }\n\n    const version = getState().versions[song.version];\n    const bounce = getState().bounces[song.bounce];\n    const title = getState().titles[song.title];\n\n    const songObject = {\n      title: title,\n      version: version.name,\n      date: bounce.date,\n      duration: bounce.duration,\n      audio: bounce.id,\n      position: song.position,\n    };\n    dispatch({ type: NEXT_SONG, payload: songObject });\n  }\n};\n\nexport const prevSong = () => (dispatch, getState) => {\n  const { parent, currentSong } = getState().audio;\n  if (parent.trackList) {\n    let allTitles;\n    if (parent.orderBy === 'date') {\n      allTitles = parent.trackList\n        .map((id) => getState().titles[id])\n        .sort((a, b) => {\n          if (a.selectedBounce && b.selectedBounce) {\n            if (\n              new Date(a.selectedBounce.date) > new Date(b.selectedBounce.date)\n            ) {\n              return -1;\n            } else {\n              return 1;\n            }\n          } else if (a.selectedBounce) {\n            return -1;\n          } else if (b.selectedBounce) {\n            return 1;\n          }\n        });\n    }\n\n    if (parent.orderBy === 'name') {\n      allTitles = parent.trackList\n        .map((id) => getState().titles[id])\n        .sort((a, b) => {\n          return a.title < b.title ? -1 : 1;\n        });\n    }\n\n    const song = allTitles[allTitles.indexOf(currentSong.title) - 1];\n\n    if (song && song.selectedVersion && song.selectedBounce) {\n      const version = getState().versions[song.selectedVersion.id];\n      const bounce = getState().bounces[song.selectedBounce.id];\n\n      const songObject = {\n        title: song,\n        version: version.name,\n        date: bounce.date,\n        duration: bounce.duration,\n        audio: bounce.id,\n      };\n\n      dispatch({ type: NEXT_SONG, payload: songObject });\n    }\n  }\n\n  if (parent.songs) {\n    const allSongs = parent.songs\n      .map((id) => getState().playlistSongs[id])\n      .sort((a, b) => (a.position < b.position ? -1 : 1));\n\n    let song;\n    let index = currentSong.position - 2;\n\n    while (index < allSongs.length) {\n      if (allSongs[index].bounce !== null) {\n        song = allSongs[index];\n        break;\n      }\n      index = index - 1;\n    }\n\n    if (!song) {\n      return dispatch({ type: INITIALIZE_AUDIO });\n    }\n\n    const version = getState().versions[song.version];\n    const bounce = getState().bounces[song.bounce];\n    const title = getState().titles[song.title];\n\n    const songObject = {\n      title: title,\n      version: version.name,\n      date: bounce.date,\n      duration: bounce.duration,\n      audio: bounce.id,\n      position: song.position,\n    };\n    dispatch({ type: NEXT_SONG, payload: songObject });\n  }\n};\n\nexport const changeVolume = (value) => {\n  return { type: CHANGE_VOLUME, payload: value };\n};\n\nexport const initializeAudio = () => {\n  return { type: INITIALIZE_AUDIO };\n};\n\nexport const selectVersion = (version, titleId) => {\n  return { type: SELECT_VERSION, payload: { version, titleId } };\n};\n\nexport const selectBounce = (bounce, titleId) => {\n  return { type: SELECT_BOUNCE, payload: { bounce, titleId } };\n};\n","\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { throwError } from '../actions';\nimport history from '../history';\n\nconst Error = ({ error, throwError }) => {\n\n    useEffect(() => {\n        history.listen(location => {\n            throwError(null);\n        });\n    }, [history]);\n\n    if (!error) {\n        return null;\n    }\n\n    return (\n        <div className=\"error\" onClick={() => throwError(null)}>\n            <div className=\"error-x\">X</div>\n            {error}\n            <div className=\"error-x\">X</div>\n        </div>\n    );\n\n};\n\nconst mapStateToProps = state => {\n    return {\n        error: state.error.error\n    }\n}\n\nexport default connect(mapStateToProps, { throwError })(Error);","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\n\n\n\nclass AddButton extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.ref = React.createRef();\n    }\n\n    state = { boxVisible: false, selectedOption: null };\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.boxVisible === false && this.state.boxVisible === true) {\n            document.addEventListener('click', this.bodyClick, {capture: true});\n            document.addEventListener('keydown', this.blockSpaceBarPress, {capture: true});\n        } else if (prevState.boxVisible === true && this.state.boxVisible === false) {\n            document.removeEventListener('click', this.bodyClick, {capture: true});\n            document.removeEventListener('keydown', this.blockSpaceBarPress, {capture: true});\n        }\n        \n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.bodyClick, {capture: true});\n        document.removeEventListener('keydown', this.blockSpaceBarPress, {capture: true});\n    }\n\n    blockSpaceBarPress = (e) => {\n        e.stopPropagation();\n    }\n\n    bodyClick = (e) => {\n        if (this.ref.current && this.ref.current.contains(e.target)) {\n            return;\n        }\n        if (this.state.boxVisible) {\n            this.setState({ boxVisible: false });\n        }\n    }\n\n    showOptions = (field) => {\n        return field.options.map(option => {\n            return (\n                <option\n                    key={option.value}\n                    value={option.value}\n                >\n                    {option.display}\n                </option>\n            );\n        });\n    };\n\n    onDrop = (e, input) => {\n        const file = e.target.files[0];\n        const { onChange } = input;\n        onChange(file);\n    }\n\n    input = (field) => {\n        let inputClass = '';\n        if (field.type === 'date') {\n            inputClass = 'calendar';\n        }\n        if (field.type === 'checkbox') {\n            inputClass = 'checkbox';\n        }\n        if (field.type === 'input') {\n            inputClass = 'text-input';\n        }\n\n        const errors = \n            <div className=\"form-errors\">\n            {field.meta.touched && (field.meta.error && <p>{field.meta.error}<span>&darr;</span></p>)}\n            </div>;\n\n        if (field.type === 'file') {\n            delete field.input.value;\n            return <>\n                {errors}\n                <input\n                    {...field.input}\n                    type='file'\n                    className='inputfile'\n                    onDrop={(e) => this.onDrop(e, field.input)}\n                        \n                />\n            </>;\n        } else if (field.type === 'select') {\n            return <>\n                {errors}\n                <select\n                    {...field.input}\n                    autoFocus={field.autoFocus}\n                >\n                    {field.options ? this.showOptions(field) : null}\n                </select>\n            </>;\n        } else {\n            return <>\n                {errors}\n                <input\n                    {...field.input}\n                    autoFocus={field.autoFocus}\n                    type={field.type}\n                    className={inputClass}\n                />\n            </>;\n        }\n    }\n\n    required = value => {\n        return value ? undefined : 'Required';\n    }\n\n    showFields = () => {\n\n        return this.props.fields.map((field, i) => {\n            const autoFocus = i === 0 ? true : false;\n            let comp = this.input;\n            if (field.type === 'textarea') {\n                comp = 'textarea'\n            }\n            return <div key={field.label}>\n                <label>{field.label}: </label>\n                <Field\n                    name={field.name}\n                    component={comp}\n                    autoFocus={autoFocus}\n                    type={field.type}\n                    validate={field.required ? this.required : null}\n                    options={field.options}\n                >\n                    {field.options ? this.showOptions(field) : null}\n                </Field>\n            </div>\n        });\n \n    };\n\n    submitForm = (formValues) => {\n        this.props.onSubmit(formValues);\n        this.setState({ boxVisible: false });\n        this.props.reset();\n    }\n\n    showBox = () => {\n        if (this.state.boxVisible) {\n            const addClass = this.props.addClass ? this.props.addClass : '';\n            return <>    \n                <div className={`add-box ${addClass}`} onClick={e => e.stopPropagation()}>\n                    <h3 className=\"add-box-title\">{this.props.title}</h3>\n                    <form onSubmit = {this.props.handleSubmit(this.submitForm)}>\n                        {this.showFields()}\n                        <div className=\"submit-button-centered\">\n                            <button className=\"submit-button\"type='submit'>OK</button>\n                        </div>\n                    </form>\n                </div>\n            </>\n        }\n    }\n\n    click = (e) => {\n        e.stopPropagation();\n        if (this.ref.current && this.ref.current === e.target) {\n            return;\n        }\n        if (this.state.boxVisible) {\n            this.setState({ boxVisible: false });\n        } else {\n            this.setState({ boxVisible: true });\n        }\n\n    }\n    \n    render() {\n\n        return <>\n            <div className=\"add\" onClick={this.click} ref={this.ref}>\n                <img src={this.props.image} />\n                {this.showBox()}\n            </div>\n        </>;\n    }\n\n}\n\nexport default reduxForm({ form: 'form' })(AddButton);","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n\nclass Modal extends React.Component {\n\n    componentDidMount() {\n        document.querySelector('.container').classList.add('modal-active');\n    }\n    componentWillUnmount() {\n        document.querySelector('.container').classList.remove('modal-active');\n    }\n\n    render() {\n        return ReactDOM.createPortal(\n            <div onClick={this.props.onDismiss} className=\"modal-background\">\n                <div \n                    onClick={e => e.stopPropagation()}\n                    className=\"modal-box\"\n                >\n                    <div className=\"modal-title\">\n                        {this.props.content}\n                    </div>\n                    <div>\n                        {this.props.actions}\n                    </div>\n                </div>\n            </div>,\n            document.querySelector('#modal')\n        );\n    }\n};\n\nexport default Modal;","import React, { useState } from 'react';\nimport Modal from './Modal';\n\nconst DeleteButton = ({ onSubmit, displayName }) => {\n\n    const [visible, setVisible] = useState(false);\n\n    const renderContent = () => {\n        return `Seriously delete \"${displayName}\"?`;\n    };\n\n    const renderActions = () => {\n        return (\n            <>\n                <button\n                    className=\"modal-button\"\n                    onClick={() => {\n                        onSubmit();\n                        setVisible(false);\n                    }}\n                >\n                    Delete\n                </button>\n                <button\n                    className=\"modal-button\"\n                    onClick={() => setVisible(false)}\n                >\n                    No Wait\n                </button>\n            </>\n        );\n    };\n\n    const showModal = () => {\n\n        return (\n            <Modal \n                content={renderContent()}\n                actions={renderActions()}\n                onDismiss={e => {\n                    e.stopPropagation();\n                    setVisible(false)\n                }}\n            />\n        );\n    };\n\n\n\n    const onClick = (e) => {\n        e.stopPropagation();\n        setVisible(true);\n    };\n\n\n    return (\n        <div>\n            <img src=\"/images/delete.png\" className=\"delete\" onClick={onClick} />\n            {visible && showModal()}\n        </div>\n    );\n\n};\n\nexport default DeleteButton;","import React from 'react';\nimport { connect } from 'react-redux';\n\nexport default ChildComponent => {\n\n    class ComposedComponent extends React.Component {\n\n        constructor(props) {\n            super(props);\n        }\n\n        state = { authorized: false };\n\n        componentDidMount() {\n            this.checkAuth();\n        }\n\n\n        // componentDidUpdate() {\n        //     this.checkAuth();\n        // }\n\n        handleUpdate = () => {\n            this.checkAuth();\n        }\n\n        checkAuth() {\n            if (this.props.user && this.props.currentBand && this.props.user.bands.includes(this.props.currentBand.id)) {\n                this.setState({ authorized: true });\n            }\n        }\n\n        render() {\n            return <ChildComponent {...this.props} authorized={this.state.authorized} handleUpdate={this.handleUpdate} />;\n\n        }\n\n    }\n\n    const mapStateToProps = state => {\n        return {\n            user: state.auth.user,\n            currentBand: state.bands.currentBand\n        }\n    };\n\n    return connect(mapStateToProps)(ComposedComponent);\n\n};\n\n","import React, { useEffect, useState, useRef } from 'react';\n\nconst DetailBox = ({ selectedItem, itemList, itemType, displayItem, setSelected, renderAddButton, renderEditButton, renderDeleteButton, playButton }) => {\n\n    const [dropdownVisible, setDropdownVisible] = useState(false);\n\n    const dropdownRef = useRef(null);\n\n    useEffect(() => {\n        if (dropdownVisible) {\n            document.addEventListener('click', onBodyClick, {capture: true});\n        } else {\n            document.removeEventListener('click', onBodyClick, {capture: true});\n        }\n    }, [dropdownVisible]);\n\n    const count = () => {\n        let count;\n        if (itemList().length === 0) {\n            count = `1 ${itemType}:`;\n        } else {\n            count = `${itemList().length + 1} ${itemType}s:`\n        }\n\n        return (\n            <h5>{count}</h5>\n        );\n    };\n\n    const currentTag = () => {\n        if (selectedItem.current || selectedItem.latest) {\n            return (\n                <div className=\"current\">\n                    Current\n                </div>\n            );\n        }\n    };\n\n    const onBodyClick = e => {\n\n        if (dropdownRef.current && dropdownRef.current.contains(e.target)) {\n            return;\n        }\n\n        if (dropdownVisible) {\n            setDropdownVisible(false);\n        }\n    };\n\n    const renderItemList = () => {\n        if (dropdownVisible) {\n            \n            return itemList().map(i => {\n                const current = i.current || i.latest ? <span className=\"list-current\"> * current</span> : null;\n                return <div\n                    className=\"dropdown-link\"\n                    onClick={() => {\n                        setSelected(i);\n                        setDropdownVisible(false);\n                    }}\n                    key={i.id}\n                >\n                        {displayItem(i)}\n                        {current}\n                </div>\n            });\n        }\n    };\n\n\n    const renderDetail = () => {\n        if (selectedItem) {\n            return (\n                <div className=\"detail-content\">\n                    <div className=\"detail-header\">\n                        {count()}\n                        {currentTag()}\n                    </div>\n                    <div className='dropdown-container'>\n                        <div className=\"dropdown\" ref={dropdownRef}>\n                            <button\n                                className=\"dropbtn\"\n                                onClick={() => setDropdownVisible(!dropdownVisible)}\n                            >\n                                {displayItem(selectedItem)}\n                            </button>\n                            <div className=\"dropdown-content\">\n                                {renderItemList()}\n                            </div>\n                        </div>\n                        {playButton && playButton()}\n                    </div>\n                    \n                    \n                    <div className=\"detail-notes\">\n                        <div className=\"detail-notes-title\">Notes:</div>\n                        <p>\n                            {selectedItem.notes || selectedItem.comments}\n                        </p>\n                    </div>\n                </div>\n            );\n        } else {\n            let parentType = '';\n            if (itemType === 'Version') {\n                parentType = 'Song';\n            }\n            if (itemType === 'Bounce') {\n                parentType = 'Version';\n            }\n            return (\n                <div className=\"detail-content\">\n                    <div className=\"detail-header\">\n                        <h5>{`No ${itemType}s for this ${parentType} Yet`}</h5>\n                    </div>\n                </div>\n            );\n        }\n    };\n\n    return (\n        <div\n            className={`detail-box ${itemType === 'Bounce' ? 'bounce' : ''}`}\n        >\n            {renderDetail()}      \n            <div className=\"detail-buttons\">\n                {renderAddButton()}\n                {selectedItem && renderEditButton()}\n                {selectedItem && renderDeleteButton()}\n            </div>\n        </div>\n    );\n};\n\nexport default DetailBox;","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\nimport requireAuth from './requireAuth';\nimport DetailBox from './DetailBox';\nimport {\n  selectBounce,\n  createBounce,\n  editBounce,\n  deleteBounce,\n  queueSongs,\n} from '../actions';\n\nconst Bounce = ({\n  bounces,\n  selectBounce,\n  title,\n  authorized,\n  version,\n  createBounce,\n  editBounce,\n  deleteBounce,\n  song,\n  queueSongs,\n}) => {\n  const [selectedBounce, setSelectedBounce] = useState(title.selectedBounce);\n\n  const [uploadActive, setUploadActive] = useState(false);\n\n  // const [playButtonVisible, setPlayButtonVisible] = useState(false);\n\n  useEffect(() => {\n    if (selectedBounce && selectedBounce !== title.selectedBounce) {\n      selectBounce(selectedBounce, title.id);\n      // setPlayButtonVisible(true);\n    }\n  }, [selectedBounce]);\n\n  useEffect(() => {\n    if (selectedBounce && selectedBounce !== title.selectedBounce) {\n      selectBounce(title.selectedBounce, title.id);\n    }\n  }, [title.selectedBounce]);\n\n  useEffect(() => {\n    setSelectedBounce(title.selectedBounce);\n    setUploadActive(false);\n  }, [title.selectedBounce]);\n\n  const displayDate = (date) => {\n    return moment.utc(date).format('MM/DD/yy');\n  };\n\n  const displayBounce = (b) => {\n    return `${displayDate(b.date)}`;\n  };\n\n  const itemList = () => {\n    if (selectedBounce) {\n      return bounces\n        .filter((b) => b && b.id !== selectedBounce.id)\n        .sort((a, b) => (a.date < b.date ? 1 : -1));\n    }\n  };\n\n  const onAddSubmit = (formValues) => {\n    createBounce(formValues, version.id);\n    setUploadActive(true);\n  };\n\n  const onEditSubmit = (formValues) => {\n    editBounce(formValues, selectedBounce.id, version.id);\n    setUploadActive(true);\n  };\n\n  const uploadContent = () => {\n    return (\n      <div className=\"upload-image\">\n        <p>Uploading...</p>\n        <img className=\"windmill\" src=\"/images/windmill.gif\" />\n      </div>\n    );\n  };\n\n  const renderAddButton = () => {\n    if (authorized) {\n      return (\n        <AddButton\n          title={`Add a Bounce of ${version.name}`}\n          image=\"images/add.png\"\n          fields={[\n            {\n              label: 'File',\n              name: 'file',\n              type: 'file',\n              required: true,\n            },\n            {\n              label: 'Date',\n              name: 'date',\n              type: 'date',\n              required: true,\n            },\n            {\n              label: 'Comments',\n              name: 'comments',\n              type: 'textarea',\n            },\n            {\n              label: 'Latest Bounce?',\n              name: 'latest',\n              type: 'checkbox',\n            },\n          ]}\n          onSubmit={(formValues) => onAddSubmit(formValues)}\n          form={`add-bounce-${title.id}`}\n          initialValues={{ latest: true }}\n          addClass=\"add-bounce\"\n        />\n      );\n    }\n  };\n\n  const renderEditButton = () => {\n    if (authorized) {\n      return (\n        <AddButton\n          title={'Edit this Bounce'}\n          image=\"images/edit.png\"\n          fields={[\n            {\n              label: 'File',\n              name: 'file',\n              type: 'file',\n            },\n            {\n              label: 'Date',\n              name: 'date',\n              type: 'date',\n            },\n            {\n              label: 'Comments',\n              name: 'comments',\n              type: 'textarea',\n            },\n            {\n              label: 'Current Bounce?',\n              name: 'latest',\n              type: 'checkbox',\n            },\n          ]}\n          onSubmit={onEditSubmit}\n          initialValues={{\n            ..._.pick(selectedBounce, 'comments', 'latest'),\n            date: moment.utc(selectedBounce.date).format('YYYY-MM-DD'),\n          }}\n          form={`edit-bounce-${title.id}`}\n          enableReinitialize={true}\n          addClass=\"add-bounce\"\n        />\n      );\n    }\n  };\n\n  const renderDeleteButton = () => {\n    if (authorized) {\n      return (\n        <DeleteButton\n          onSubmit={() => deleteBounce(selectedBounce.id, version.id, title.id)}\n          displayName={displayDate(selectedBounce.date)}\n        />\n      );\n    }\n  };\n\n  const showPlayButton = () => {\n    // if (playButtonVisible) {\n\n    return (\n      <img\n        src=\"/images/play.svg\"\n        className=\"play-icon\"\n        onClick={() => queueSongs(song)}\n      />\n    );\n    // }\n  };\n\n  if (uploadActive) {\n    return <div className=\"detail-box bounce\">{uploadContent()}</div>;\n  } else {\n    if (version) {\n      return (\n        <DetailBox\n          selectedItem={selectedBounce}\n          itemType=\"Bounce\"\n          itemList={itemList}\n          displayItem={displayBounce}\n          setSelected={setSelectedBounce}\n          renderAddButton={renderAddButton}\n          renderEditButton={renderEditButton}\n          renderDeleteButton={renderDeleteButton}\n          playButton={showPlayButton}\n        />\n      );\n    } else {\n      return null;\n    }\n  }\n};\n\nexport default connect(null, {\n  selectBounce,\n  createBounce,\n  editBounce,\n  deleteBounce,\n  queueSongs,\n})(requireAuth(Bounce));\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport { fetchBounces, selectVersion, createVersion, editVersion, deleteVersion } from '../actions';\nimport Bounce from './Bounce';\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\nimport requireAuth from './requireAuth';\nimport DetailBox from './DetailBox';\n\nconst Version = ({ versions, bounces, fetchBounces, selectVersion, title, createVersion, authorized, editVersion, deleteVersion, song }) => {\n\n    const [selectedVersion, setSelectedVersion] = useState(title.selectedVersion);\n    const [bounceList, setBounceList] = useState(null);\n\n    useEffect(() => {\n        // console.log(selectedVersion);\n        if (selectedVersion !== title.selectedVersion) {\n            selectVersion(selectedVersion, title.id);\n            setBounceList(selectedVersion.bounces.map(id => bounces[id]));\n            fetchBounces(selectedVersion.id)\n        } \n    }, [selectedVersion]);\n\n    useEffect(() => {\n        if (selectedVersion) {\n            // console.log(title.selectedVersion)\n            setBounceList(selectedVersion.bounces.map(id => bounces[id]));\n        }\n    }, [bounces, selectedVersion]);\n\n\n    useEffect(() => {\n        if (selectedVersion !== title.selectedVersion) {\n            setSelectedVersion(title.selectedVersion);\n        }\n    }, [title.selectedVersion]);\n\n    \n    const renderBounces = () => {\n\n        if (bounceList && selectedVersion) {\n\n            return (\n                <>\n                    <div className=\"version-arrow\">&rarr;</div>\n                    <Bounce bounces={bounceList} title={title} version={selectedVersion} song={song} />\n                </>\n            );   \n        }\n    };\n\n    const renderAddButton = () => {\n        if (authorized) {\n            return (\n                <AddButton\n                    title={`Add a Version of ${title.title}`}\n                    image=\"images/add.png\"\n                    fields={[\n                        {\n                            label: 'Name',\n                            name: 'name',\n                            type: 'input',\n                            required: true         \n                        },\n                        {\n                            label: 'Notes',\n                            name: 'notes',\n                            type: 'textarea',          \n                        },\n                        {\n                            label: 'Current Version?',\n                            name: 'current',\n                            type: 'checkbox',      \n                        },\n                    ]}\n                    onSubmit={(formValues) => createVersion(formValues, title.id)}\n                    form={`add-version-${title.id}`}\n                    initialValues={{ current: true }}\n                    enableReinitialize={true}\n                    addClass='add-version'\n                />\n            );\n        }\n    };\n\n    const renderEditButton = () => {\n        if (authorized) {\n            return <AddButton\n                title={`Edit ${selectedVersion.name}`}\n                image=\"images/edit.png\"\n                fields={[\n                    {\n                        label: 'Name',\n                        name: 'name',\n                        type: 'input', \n                    },\n                    {\n                        label: 'Notes',\n                        name: 'notes',\n                        type: 'textarea',          \n                    },\n                    {\n                        label: 'Current Version?',\n                        name: 'current',\n                        type: 'checkbox',        \n                    },\n                ]}\n                onSubmit={formValues => editVersion(formValues, selectedVersion.id, title.id)}\n                initialValues={_.pick(selectedVersion, 'name', 'notes', 'current')}\n                form={`edit-version-${title.id}`}\n                enableReinitialize={true}\n                addClass='add-version'\n            />;\n        }\n    };\n\n    const renderDeleteButton = () => {\n        if (authorized) {\n            return <DeleteButton\n                onSubmit={() => deleteVersion(selectedVersion.id, title.id)}\n                displayName={selectedVersion.name}\n            />;\n        }\n    };\n\n    const itemList = () => {\n        return versions.filter(v => v.id !== selectedVersion.id);\n    };\n\n    const displayVersion = v => {\n        return `${v.name}`;\n    };\n    \n    return (\n        <>\n            <DetailBox\n                selectedItem={selectedVersion}\n                itemType=\"Version\"\n                itemList={itemList}\n                displayItem={displayVersion}\n                setSelected={setSelectedVersion}\n                renderAddButton={renderAddButton}\n                renderEditButton={renderEditButton}\n                renderDeleteButton={renderDeleteButton}\n            />\n            {renderBounces()}          \n        </>\n    );\n};\n\nconst mapStateToProps = state => {\n    return {\n        bounces: state.bounces\n    };\n}\n\nexport default connect(mapStateToProps, { fetchBounces, selectVersion, createVersion, editVersion, deleteVersion })(requireAuth(Version));","import React, { useState } from 'react';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\n\nimport { queueSongs, queuePlaylistSongs, playAudio } from '../actions';\n\n\nconst PlayContainer = ({ song, queueSongs, parentType, queuePlaylistSongs }) => {\n\n    const [loaded, setLoaded] = useState(false);\n\n    const displayDate = (date) => {\n        return moment.utc(date).format('MM/DD/YY');\n    }\n\n    const displayTime = (time) => {\n        const minutes = Math.floor(time / 60);\n        const seconds = Math.floor(time % 60) < 10 ? '0' + Math.floor(time % 60) : Math.floor(time % 60);\n        return `${minutes}:${seconds}`;\n    }\n\n    const onPlay = (e) => {\n        e.stopPropagation();\n        if (parentType === \"tier\") {\n            queueSongs(song);\n        } else if (parentType === \"playlist\") {\n            queuePlaylistSongs(song);\n        }\n    };\n\n    const renderSpinner = () => {\n        return (\n            <div className=\"sk-circle-fade\">\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n                <div className=\"sk-circle-fade-dot\"></div>\n            </div>\n        );\n    };\n\n\n    let baseUrl;\n    if (process.env.NODE_ENV === 'production') {\n        baseUrl = 'https://exploring-the-space.com'\n    } else {\n        baseUrl = 'http://localhost:3001';\n    }\n\n    return (\n        <div className='play-container'>\n            <div className='play-container-time'>{displayTime(song.bounce.duration)}</div> \n            <div className=\"play-icon-container\">\n                {!loaded && renderSpinner()}          \n                <img\n                    src='/images/play.svg'\n                    className='play-icon'\n                    onClick={onPlay}\n                    onLoad={() => setLoaded(true)}\n                /> \n            </div>\n            <div className='play-container-display'>\n                <p>{song.version.name}</p>\n                <p>{displayDate(song.bounce.date)}</p>\n            </div>\n            <a\n                className='download'\n                onClick={e => e.stopPropagation()}\n                href={`${baseUrl}/api/audio/download/${song.bounce.id}/${encodeURIComponent(song.title.title)}`}\n                \n            >\n                <img src=\"/images/download.svg\" />\n            </a>\n        </div>\n    );\n};\n\nexport default connect(null, { queueSongs, queuePlaylistSongs, playAudio })(PlayContainer);\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport Version from './Version';\nimport AddButton from './AddButton';\nimport { fetchVersions, fetchBounces, selectBounce, selectVersion, createPlaylistSong, editTitle, deleteTitle } from '../actions';\nimport PlayContainer from './PlayContainer';\nimport requireAuth from './requireAuth';\nimport DeleteButton from './DeleteButton';\n\nconst Title = ({ tier, title, titles, fetchVersions, versions, bounces, fetchBounces, authorized, band, playlists, selectVersion, selectBounce, createPlaylistSong, editTitle, deleteTitle, getTime, audio, findLatest, tiers }) => {\n\n    const [expand, setExpand] = useState(false);\n    const [versionList, setVersionList] = useState(null);\n    const [bounceList, setBounceList] = useState(null);\n    const [song, setSong] = useState(null);\n\n    useEffect(() => {\n        fetchVersions(title.id);\n    }, []);\n\n    useEffect(() => {\n\n        setVersionList(title.versions.map(id => versions[id]));\n        // console.log('set version list')\n\n        \n    }, [versions]);\n\n    useEffect(() => {\n        // console.log(versionList);\n        if (versionList && versionList[0]) {\n            \n            let versionToSelect;\n\n            const parentTitle = titles[title.id];\n\n            const versionIds = versionList.map(v => v.id);\n\n            if (!parentTitle.selectedVersion || !versionIds.includes(parentTitle.selectedVersion.id)) {\n                versionToSelect = versionList.find(v => v.current);\n            } else if (parentTitle.selectedVersion) {\n                if (!versions[parentTitle.selectedVersion.id]) {\n                    versionToSelect = null;\n                } else {\n                    versionToSelect = versions[parentTitle.selectedVersion.id];\n                }\n            }\n\n            selectVersion(versionToSelect, title.id);\n        }\n    }, [versionList]);\n\n    useEffect(() => {\n        // console.log(title)\n        if (title.selectedVersion && title.selectedVersion.id) {\n            fetchBounces(title.selectedVersion.id);\n            // console.log('fetch bounces')\n        }\n    }, [title.selectedVersion]);\n\n    useEffect(() => {\n        if (title.selectedVersion) {\n            if (title.selectedVersion.bounces[0]) {\n                setBounceList(title.selectedVersion.bounces.map(id => bounces[id]));\n                // console.log('set bounce list')\n            } else if (title.selectedBounce !== null) {\n                // console.log('set bounce list null')\n                setBounceList(null);\n                selectBounce(null, title.id);\n            }\n        }\n    }, [bounces]);\n\n    useEffect(() => {\n        if (bounceList && bounceList[0]) {\n\n            let bounceToSelect;\n\n            if (title.selectedBounce && bounceList.includes(title.selectedBounce)) {\n                bounceToSelect = title.selectedBounce;\n            } else {\n                bounceToSelect = bounceList.find(b => b.latest);\n                findLatest(title, bounceToSelect);\n            }\n\n            if (bounceToSelect !== title.selectedBounce) {\n                \n                selectBounce(bounceToSelect, title.id);\n                // console.log('select bounce');\n                \n            }\n        } else if (song) {\n            setSong(null);\n        }\n\n    }, [bounceList]);\n\n\n    useEffect(() => {\n        if (title.selectedBounce && title.selectedVersion) {\n\n            setSong({\n                tier,\n                title: titles[title.id],\n                version: title.selectedVersion,\n                bounce: title.selectedBounce\n            });\n            // console.log('song update')\n            getTime({ id: title.id, duration: title.selectedBounce.duration });\n            \n        } else if (song && !title.selectedBounce) {\n            setSong(null);\n            getTime({ id: title.id, duration: 0 });\n        }\n        \n    }, [titles[title.id]]);\n\n\n    const renderPlayContainer = () => {\n\n        if (song) {\n            return <PlayContainer song={song} parentType=\"tier\" />;\n        }\n    }\n\n    const renderVersion = () => {\n\n   \n        return (\n            <Version versions={versionList} title={title} song={song} />\n        )\n    }\n\n    const onAddToPlaylist = formValues => {\n        createPlaylistSong({\n            ...formValues,\n            bounce: title.selectedBounce.id,\n            version: title.selectedVersion.id,\n            title: title.id\n        });\n    }\n\n    const renderButtons = () => {\n        if (authorized) {\n            const bandPlaylists = band.playlists.map(id => playlists[id]);\n            const playlistOptions = bandPlaylists.map(pl => {\n                if (pl) {\n                    return { value: pl.id, display: pl.name};\n                }\n            });\n            const bandTiers = band.tiers\n                .filter(t => t !== tier.id)\n                .map(id => tiers[id]);\n            const tierOptions = bandTiers.map(t => {\n                if (t) {\n                    return { value: t.id, display: t.name };\n                }\n            });\n            tierOptions.unshift({ value: null, display: ''});\n            return (\n                <div className='tier-display'>\n                    {song && <AddButton\n                        title=\"Add to a Playlist\"\n                        onSubmit={formValues => onAddToPlaylist(formValues)}\n                        image=\"images/playlist.png\"\n                        fields={[\n                            {\n                                type: 'select',\n                                options: playlistOptions,\n                                name: 'playlistId',\n                                label: 'Playlist'\n                            }\n                        ]}\n                        form={`add-to-playlist-${title.id}`}\n                        enableReinitialize={true}\n                    />}\n                    <AddButton\n                        title={`Edit ${title.title}`}\n                        image=\"images/edit.png\"\n                        fields={[\n                            {\n                                label: 'Title',\n                                name: 'title',\n                                type: 'input',\n                                required: true\n                            },\n                            {\n                                label: 'Move to Tier',\n                                name: 'move',\n                                type: 'select',\n                                options: tierOptions\n                            }\n                        ]}\n                        onSubmit={formValues => editTitle(formValues, title.id, tier.id)}\n                        initialValues={{ title: title.title, move: null }}\n                        form={`edit-title-${title.id}`}\n                        enableReinitialize={true}\n                    />\n                    <DeleteButton\n                        onSubmit={() => deleteTitle(title.id, tier.id)}\n                        displayName={title.title}\n                    />\n                </div>\n            );\n        }\n    };\n\n    const arrow = expand ? 'down-arrow' : '';\n\n    const current = audio.currentSong ? audio.currentSong.audio : null;\n    const parent = audio.parent ? audio.parent.id : null;\n\n    let currentClass = '';\n\n    if (current && title.selectedBounce) {\n        currentClass = parent === tier.id && current === title.selectedBounce.id ? 'current-song' : '';\n    }\n\n    let open = expand ? 'open' : 'closed';\n\n    return (\n        <div className=\"title-margin\">\n            <div className={`row title ${currentClass} ${expand ? 'row-open' : ''}`}>\n                <div className=\"marqee\" onClick={() => setExpand(!expand)}>\n                    <div className=\"title-name\"   >\n                        <img className={`arrow ${arrow}`} src={`/images/right-arrow.svg`} />              \n                        <h3>{title.title}</h3>\n                    </div>\n                    {renderPlayContainer()}\n                    {renderButtons()}\n                </div>\n            </div>\n            <div className={`version-container ${open}`}>\n                {expand && renderVersion()}\n            </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = state => {\n    return {\n        versions: state.versions,\n        bounces: state.bounces,\n        band: state.bands.currentBand,\n        playlists: state.playlists,\n        titles: state.titles,\n        audio: state.audio,\n        tiers: state.tiers\n    }\n}\n\nexport default connect(mapStateToProps, { fetchVersions, fetchBounces, selectVersion, selectBounce, createPlaylistSong, editTitle, deleteTitle })(requireAuth(Title));","import React, { useEffect, useState, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport { createTier, editTier, fetchTitles, createTitle, deleteTier, setOrder } from '../actions';\nimport Title from './Title';\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\nimport requireAuth from './requireAuth';\n\n\nconst Tier = ({ tier, titles, fetchTitles, authorized, band, tiers, editTier, createTitle, deleteTier, setOrder }) => {\n\n    const [expand, setExpand] = useState(false);\n    const [titlesToRender, setTitlesToRender] = useState(null);\n    const [times, setTimes] = useState({});\n\n    const orderedTitles = useRef({});\n\n    useEffect(() => {\n        setOrder(tier.id, 'date');\n        fetchTitles(tier.id);\n    }, []);\n\n    useEffect(() => {\n        setTitlesToRender(tier.trackList\n            .map(id => titles[id]));\n    }, [titles, tier]);\n\n    const findLatest = (title, bounce) => {\n        if (!orderedTitles.current[title.id]) {\n            orderedTitles.current[title.id] = new Date(bounce.date);\n        }\n    };\n\n\n    const renderTitles = () => {\n\n        const titleList = [...titlesToRender];\n\n        if (!tier.orderBy || tier.orderBy === 'date') {\n\n            titleList.sort((a, b) => {\n                if (orderedTitles.current[a.id] && orderedTitles.current[b.id]) {\n                    if (orderedTitles.current[a.id] > orderedTitles.current[b.id]) {\n                        return -1;\n                    } else {\n                        return 1;\n                    }\n                } else if (orderedTitles.current[a.id]) {\n                    return -1;\n                } else if (orderedTitles.current[b.id]) {\n                    return 1;\n                }\n            });\n        }\n\n        if (tier.orderBy === 'name') {\n\n            titleList.sort((a, b) => {\n                return a.title < b.title ? -1 : 1;\n            });\n\n        }\n\n        return titleList.map(title => {\n            if (title) {\n                return (\n                    <Title title={title} tier={tier} key={title.id} getTime={getTime} findLatest={findLatest}/>\n                );\n            }\n        });\n    };\n\n\n    const renderAddButton = () => {\n        if (authorized) {\n            return (\n                <div className=\"order-by\">\n                    <div>\n                        Add a Title to this Tier\n                    </div>\n                    <AddButton\n                        title={`Add a Title to ${tier.name}`}\n                        image=\"images/add.png\"\n                        fields={[\n                            {\n                                label: 'Title',\n                                name: 'title',\n                                type: 'input',\n                                required: true\n                            }\n                        ]}\n                        onSubmit={(formValues) => {\n                            createTitle(formValues, tier.id);\n                            setExpand(true);\n                        }}\n                        form={`add-title-${tier.id}`}\n                        addClass='add-left'\n                    />\n                </div>\n            );\n        }\n    };\n\n    const renderEditButton = () => {\n        if (authorized) {\n\n            const tierList = band.tiers\n                .map(id => tiers[id])\n                .sort((a, b) => a.position < b.position ? -1 : 1)\n                .map(t => {\n                    if (t) {\n                        return { value: t.position, display: t.position };\n                    }\n                });\n\n\n            return (\n                <AddButton\n                    title={`Edit ${tier.name}`}\n                    image=\"images/edit.png\"\n                    fields={[\n                        {\n                            label: 'Tier Name',\n                            name: 'name',\n                            type: 'input',\n                            required: true        \n                        }, {\n                            label: 'Tier Position',\n                            name: 'position',\n                            type: 'select',\n                            options: tierList,\n                        }\n                    ]}\n                    onSubmit={(formValues) => editTier(formValues, tier.id)}\n                    initialValues={{ name: tier.name, position: tier.position }}\n                    form={`edit-tier-${tier.id}`}\n                    enableReinitialize={true}\n                />\n            );\n        }\n    };\n\n    const renderDeleteButton = () => {\n        if (authorized) {\n            return (\n                <DeleteButton\n                    onSubmit={() => deleteTier(tier.id)}\n                    displayName={tier.name}\n                />\n            );\n        }\n    };\n\n    const renderTotalTime = () => {\n\n\n        const total = Object.values(times).reduce((prev, cur) => {\n            return prev + cur;\n        }, 0);\n\n        if (!total) {\n            return null;\n        }\n\n        const minutes = Math.floor(total / 60);\n        const seconds = Math.floor(total % 60) < 10 ? '0' + Math.floor(total % 60) : Math.floor(total % 60);\n        return (\n            <div>\n                {`${minutes}:${seconds}`}\n            </div>\n        );\n    };\n\n    const getTime = (track) => {\n        if (times[track.id] !== track.duration) {\n            setTimes({ ...times, [track.id]: track.duration });\n        }\n    };\n\n    const renderOrderButton = () => {\n        if (!tier.orderBy || tier.orderBy === 'date') {\n            return (\n                <div className='order-by'>\n                    <div>Order titles by: </div>\n                    <div\n                        className='order-button order-active'\n                        onClick={e => e.stopPropagation()}\n                    >\n                        Date\n                    </div>\n                    <div\n                        className='order-button'\n                        onClick={e => {\n                            e.stopPropagation();\n                            setOrder(tier.id, 'name');\n                        }}\n                    >\n                        ABC\n                    </div>\n                </div>\n            );\n        }\n        \n        if (tier.orderBy === 'name') {\n            return (\n                <div className='order-by'>\n                    <div>Order titles by:</div>\n                    <div\n                        className='order-button'\n                        onClick={e => {\n                            e.stopPropagation();\n                            setOrder(tier.id, 'date');\n                        }}\n                    >\n                        Date\n                    </div>\n                    <div\n                        className='order-button order-active'\n                        onClick={e => e.stopPropagation()}\n                    >\n                        ABC\n                    </div>\n                </div>\n            );\n        }\n    };\n\n    const renderOptions = () => {\n\n        return <>\n            {renderAddButton()}\n            {renderOrderButton()}     \n        </>;\n    };\n\n    const arrow = expand ? 'down-arrow' : '';\n    const open = expand ? 'open' : 'closed';\n\n    return (\n        <>\n            <div className={`row tier ${expand ? 'row-open' : ''}`} onClick={() => setExpand(!expand)}>\n                <div className=\"marqee\">\n                    <div className=\"tier-name\">\n                        <img className={`arrow ${arrow}`} src={`images/right-arrow.svg`} />\n                        <h2>{tier.name}</h2>\n                        \n                    </div>\n                    <div className=\"tier-count\">\n                        <div className=\"song-count\">{tier.trackList.length} songs</div>\n                        <div className=\"song-count\">{renderTotalTime()}</div>\n                    </div>\n                    <div className=\"tier-display\">\n                        {renderEditButton()}\n                        {renderDeleteButton()}\n                    </div>\n                </div>   \n            </div>\n            <div className={`tier-options ${expand ? 'options-visible' : ''}`}>\n                {expand && renderOptions()}\n            </div>\n            <hr />\n            <div className={`title-container ${open}`}>\n                {expand && titlesToRender && renderTitles()}\n            </div>\n        </>\n    );\n};\n\nconst mapStateToProps = state => {\n    return {\n        titles: state.titles,\n        band: state.bands.currentBand,\n        tiers: state.tiers\n    }\n};\n\n\nexport default connect(mapStateToProps, { createTier, fetchTitles, editTier, createTitle, deleteTier, setOrder })(requireAuth(Tier));","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\nimport { editPlaylistSong, fetchVersions, fetchBounces, deletePlaylistSong } from '../actions';\nimport PlayContainer from './PlayContainer';\nimport requireAuth from './requireAuth';\n\nconst PlaylistSong = ({ playlist, playlists, song, playlistSongs, authorized, versions, bounces, titles, fetchBounces, fetchVersions, editPlaylistSong, deletePlaylistSong, audio, getTime, band, doUpdate }) => {\n\n    const [playSong, setPlaySong] = useState(null);\n\n    useEffect(() => {\n        fetchVersions(song.title);\n        titles[song.title].versions.forEach(id => {\n            fetchBounces(id);\n        });\n    }, []);\n    \n    useEffect(() => {\n        if (titles[song.title]) {\n            setPlaySong({\n                    playlist,\n                    title: titles[song.title],\n                    version: versions[song.version],\n                    bounce: bounces[song.bounce],\n                    position: song.position\n                });\n            }\n            if (bounces[song.bounce]) {\n                getTime({ id: song.id, duration: bounces[song.bounce].duration });\n            }   \n    }, [playlistSongs[song.id], bounces[song.bounce], titles[song.title], versions[song.version]]);\n\n    useEffect(() => {\n        // console.log(doUpdate);\n        if (doUpdate) {\n            updateToCurrent();\n        }\n    }, [doUpdate]);\n\n    const renderPlayContainer = () => {\n\n        if (playSong && playSong.bounce && playSong.version) {\n            return <PlayContainer song={playSong} parentType=\"playlist\" />;\n        } else {\n            return (\n                <div className=\"playlistsong-no-bounce\">\n                    <p>\n                        {versions[song.version] ? `${versions[song.version].name}` : 'No Version Selected'}\n                    </p>\n                    <p>\n                        No Bounce Selected\n                    </p>\n                </div>\n            );\n        }\n    };\n\n    const onEditSubmit = formValues => {\n        const thisVersion = Object.values(versions).find(v => v.bounces.includes(formValues.bounce));\n        editPlaylistSong({\n            ...formValues,\n            version: thisVersion.id,\n            playlistId: playlist.id\n        }, song.id);\n    };\n\n    const updateToCurrent = () => {\n\n        const thisTitle = titles[song.title];\n        const titleVersions = thisTitle.versions.map(id => versions[id]);\n        const currentVersion = titleVersions.find(v => v && v.current);\n        if (currentVersion) {\n            const versionBounces = currentVersion.bounces.map(id => bounces[id]);\n            const currentBounce = versionBounces.find(b => b && b.latest);\n            if (currentBounce) {\n                editPlaylistSong({\n                    bounce: currentBounce.id,\n                    version: currentVersion.id,\n                    position: song.position,\n                    playlistId: playlist.id\n                }, song.id);\n            }\n        }\n\n    };\n\n    const renderEditButton = () => {\n        if (authorized && titles[song.title]) {\n\n            const otherSongs = Object.values(playlistSongs)\n                .filter(s => playlist.songs.includes(s.id))\n                .sort((a,b) => a.position < b.position ? -1 : 1)\n                .map(s => {\n                    return { value: s.position, display: s.position };\n            });\n\n            const thisTitle = titles[song.title];\n\n            const otherVersions = thisTitle.versions.map(id => versions[id]);\n\n            const otherBounces = otherVersions.map(v => {\n                if (v) {\n                    return v.bounces.map(id => bounces[id]);\n                }\n            });\n\n\n            const editOptions = [];\n            \n            otherVersions.forEach((v, i) => {\n                if (otherBounces[i]) {\n                    otherBounces[i].forEach(b => {\n                        if (b) {\n                            let current = '';\n                            if (v.current && b.latest) {\n                                current =' * current';\n                            }\n                            editOptions.push({\n                                value: b.id,\n                                display: `${v.name} -- ${moment.utc(b.date).format('MM/DD/YY')}${current}`\n                            });\n                        }\n                    });\n                }\n            });\n\n\n            const bandPlaylists = band.playlists\n                .filter(id => id !== playlist.id)\n                .map(id => playlists[id]);\n                \n            const playlistOptions = bandPlaylists.map(pl => {\n                if (pl) {\n                    return { value: pl.id, display: pl.name };\n                }\n            });\n\n            playlistOptions.unshift({ value: null, display: ''})\n\n            return (\n                <AddButton\n                    image='/images/edit.png'\n                    title={`Edit ${titles[song.title].title}`}\n                    onSubmit={formValues => onEditSubmit(formValues)}\n                    fields={[\n                        {\n                            name: 'position',\n                            label: 'Position',\n                            type: 'select',\n                            options: otherSongs\n                        },\n                        {\n                            name: 'bounce',\n                            label: 'Bounce',\n                            type: 'select',\n                            options: editOptions,\n                            required: true\n                        },\n                        {\n                            label: 'Add to Playlist',\n                            name: 'move',\n                            type: 'select',\n                            options: playlistOptions\n                        }\n                    ]}\n                    initialValues={song.bounce ? { ..._.pick(song, 'position', 'bounce'), move: null } : { position: song.position, move: null }}\n                    form={`edit-playlistsong-${song.id}`}\n                    enableReinitialize={true}\n                    addClass='add-right'\n                />\n            );\n        }\n    };\n\n    const renderDeleteButton = () => {\n        if (authorized) {\n            return (\n                <DeleteButton\n                    onSubmit={() => deletePlaylistSong(song.id, playlist.id)}\n                    displayName={titles[song.title].title}\n                />\n            );\n        }\n    };\n\n    const current = audio.currentSong ? audio.currentSong.audio : null;\n    const parent = audio.parent ? audio.parent.id : null;\n\n    let currentClass = '';\n\n    if (current && song.bounce) {\n        currentClass = parent === playlist.id && current === song.bounce ? 'current-song' : '';\n    }\n\n\n    return (\n        <div className='title-margin'>\n            <div className={`row title playlistsong ${currentClass}`}>                    \n                <div className=\"marqee\">\n                    <div className='title-name'>\n                        <div className=\"song-position\">\n                            <p>{song.position}</p>\n                        </div>\n                        <h3>{song && titles[song.title] && titles[song.title].title}</h3>\n                    </div>      \n\n                    {renderPlayContainer()}\n                    <div className=\"tier-display\">\n                        {renderEditButton()}\n                        {renderDeleteButton()}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n\n};\n\n\n\nconst mapStateToProps = state => {\n\n    return {\n        playlistSongs: state.playlistSongs,\n        band: state.bands.currentBand,\n        playlists: state.playlists,\n        versions: state.versions,\n        bounces: state.bounces,\n        titles: state.titles,\n        audio: state.audio\n    }\n\n}\n\nexport default connect(mapStateToProps, { fetchBounces, fetchVersions, editPlaylistSong, deletePlaylistSong })(requireAuth(PlaylistSong));","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport { fetchPlaylistSongs, deletePlaylist, editPlaylist } from '../actions';\nimport PlaylistSong from './PlaylistSong';\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\nimport requireAuth from './requireAuth';\n\nconst Playlist = ({ playlist, playlists, fetchPlaylistSongs, playlistSongs, authorized, editPlaylist, deletePlaylist, band }) => {\n\n    const [expand, setExpand] = useState(false);\n    const [playlistList, setPlaylistList] = useState([]);\n    const [times, setTimes] = useState({});\n    const [songsToRender, setSongsToRender] = useState(null);\n    const [doUpdate, setDoUpdate] = useState(false);\n\n\n    useEffect(() => {\n        fetchPlaylistSongs(playlist.id);\n    }, []);\n\n    useEffect(() => {\n        setSongsToRender(playlist.songs.map(id => playlistSongs[id]));\n    }, [playlistSongs, playlist.songs]);\n\n    const renderPlaylistSongs = () => {\n\n        songsToRender.sort((a, b) => a.position < b.position ? -1 : 1);\n\n        return songsToRender.map(song => {\n            if (song) {\n                return (\n                <PlaylistSong song={song} playlist={playlist} key={song.id} getTime={getTime} doUpdate={doUpdate} />\n                );\n            }\n        });\n    };\n\n    useEffect(() => {\n        if (band.playlists.length) {\n            const playlistsToShow = band.playlists.map(id => playlists[id]).sort((a, b) => {\n                if (a.position < b.position) {\n                    return -1;\n                }\n                if (b.position < a.position) {\n                    return 1;\n                }\n            });\n            setPlaylistList(playlistsToShow.map(t => {\n                if (t) {\n                    return { value: t.position, display: t.position };\n                }\n            }));\n        }\n    }, [playlists]);\n\n    useEffect(() => {\n        if (doUpdate) {\n            setDoUpdate(false);\n        }\n    }, [doUpdate]);\n\n    const renderEditButton = () => {\n        if (authorized) {\n\n\n            return (\n                <AddButton\n                    title={`Edit ${playlist.name}`}\n                    image=\"images/edit.png\"\n                    fields={[\n                        {\n                            label: 'Playlist Name',\n                            name: 'name',\n                            type: 'input',          \n                        }, {\n                            label: 'Playlist Position',\n                            name: 'position',\n                            type: 'select',\n                            options: playlistList,\n                        }\n                    ]}\n                    onSubmit={(formValues) => editPlaylist(formValues, playlist.id)}\n                    initialValues={_.pick(playlist, 'name', 'position')}\n                    form={`edit-${playlist.id}`}\n                    enableReinitialize={true}\n                    addClass='add-tier'\n                />\n            );\n        }\n    };\n\n    const renderDeleteButton = () => {\n        if (authorized) {\n            return (\n                <DeleteButton\n                    onSubmit={() => deletePlaylist(playlist.id)}\n                    displayName={playlist.name}\n                />\n            );\n        }\n    };\n\n    const renderTotalTime = () => {\n\n\n        const total = Object.values(times).reduce((prev, cur) => {\n            return prev + cur;\n        }, 0);\n\n        if (!total) {\n            return null;\n        }\n\n        const minutes = Math.floor(total / 60);\n        const seconds = Math.floor(total % 60) < 10 ? '0' + Math.floor(total % 60) : Math.floor(total % 60);\n        return (\n            <div>\n                {`${minutes}:${seconds}`}\n            </div>\n        );\n    };\n\n    const getTime = (track) => {\n        if (times[track.id] !== track.duration) {\n            setTimes({ ...times, [track.id]: track.duration });\n        }\n    };\n\n    const showUpdatePlaylistCheckbox = () => {\n        if (authorized && expand) {\n            return (\n                <div className=\"playlist-update\">\n                    <div>\n                        Set all to current\n                    </div>\n                    <div\n                        className=\"playlist-update-btn\"\n                        onClick={e => {\n                            e.stopPropagation();\n                            setDoUpdate(true);\n                        }}\n                    />\n                </div>\n            );\n        }\n    };\n\n\n    const arrow = expand ? 'down-arrow' : '';\n    const open = expand ? 'open' : 'closed';\n\n    return (\n        <>\n            <div className={`row tier ${expand ? 'row-open' : ''}`} onClick={() => setExpand(!expand)} >\n                <div className=\"marqee tier-info\">\n                    <div className=\"tier-name\"  >\n                        <img className={`arrow ${arrow}`} src={`/images/right-arrow.svg`}/>\n                        <h2>{playlist.name}</h2>\n\n                        {showUpdatePlaylistCheckbox()}\n\n                    </div>\n\n                    <div className=\"tier-count\">\n                        <div className=\"song-count\">{playlist.songs.length} songs</div>\n                        <div className=\"song-count\">{renderTotalTime()}</div>\n                    </div>\n                    <div className=\"tier-display\">\n                            {renderEditButton()}\n                            {renderDeleteButton()}\n                    </div>\n                </div>   \n            </div>\n            <hr />\n            <div className={`title-container ${open}`}>\n                {expand && renderPlaylistSongs()}\n            </div>\n        </>\n    );\n};\n\nconst mapStateToProps = state => {\n    return {\n        playlists: state.playlists,\n        playlistSongs: state.playlistSongs,\n        band: state.bands.currentBand\n    }\n}\n\nexport default connect(mapStateToProps, { fetchPlaylistSongs, deletePlaylist, editPlaylist })(requireAuth(Playlist));","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport { fetchTiers, fetchPlaylists, createTier, createPlaylist } from '../actions';\nimport Tier from './Tier';\nimport Playlist from './Playlist';\nimport AddButton from './AddButton';\nimport requireAuth from './requireAuth';\n\nconst BodyContainer = ({ fetchPlaylists, createTier, fetchTiers, tiers, playlists, band, authorized, createPlaylist, currentSong, handleUpdate, user }) => {\n\n    const [tierList, setTierList] = useState([]);\n    const [playlistList, setPlaylistList] = useState([]);\n\n    useEffect(() => {\n        fetchTiers(band.id);\n        fetchPlaylists(band.id);\n    }, []);\n\n    useEffect(() => {\n        handleUpdate();\n    }, [user]);\n\n    useEffect(() => {\n        setTierList(band.tiers.map(id => tiers[id]).sort((a, b) => {\n            if (a.position < b.position) {\n                return -1;\n            }\n            if (b.position < a.position) {\n                return 1;\n            }\n        }));\n    }, [tiers]);\n\n    useEffect(() => {\n        setPlaylistList(band.playlists.map(id => playlists[id]).sort((a, b) => {\n            if (a.position < b.position) {\n                return -1;\n            }\n            if (b.position < a.position) {\n                return 1;\n            }\n        }));\n    }, [playlists]);\n\n    const renderTiers = () => {\n\n        return tierList.map(tier => {\n            if (tier) {\n                return (\n                    <Tier tier={tier} key={tier.id} />\n                );\n            }\n        });\n    };\n\n\n    const renderTierAddButton = () => {\n        if (authorized) {\n            return (\n                <AddButton\n                    onSubmit={formValues => createTier(formValues)}\n                    title='Add a Tier'\n                    image=\"/images/add.png\"\n                    fields={[{\n                        label: 'Tier Name',\n                        name: 'tierName',\n                        type: 'input',\n                        required: true          \n                    }]}\n                    addClass='add-left'\n                    \n                />\n            );\n        }\n    };\n\n    const renderPlaylistAddButton = () => {\n        if (authorized) {\n            return (\n                <AddButton\n                    onSubmit={formValues => createPlaylist(formValues)}\n                    title='Add a Playlist'\n                    image=\"/images/add.png\"\n                    fields={[{\n                        label: 'Playlist Name',\n                        name: 'playlistName',\n                        type: 'input',\n                        required: true             \n                    }]}\n                    addClass='add-left'\n                />\n            );\n        }\n    };\n\n    const renderPlaylists = () => {\n\n        return playlistList.map(playlist => {\n            if (playlist) {\n                return (\n                    <Playlist playlist={playlist} key={playlist.id} />               \n                );\n            }\n        });\n    };\n\n    const playbarActive = currentSong ? 'playbar-active' : ''\n\n    return (\n        <div className={`main ${playbarActive}`}>\n            <div className=\"section-header\">\n                <h2 className=\"section-title\">Tiers</h2>\n                <div className=\"section-add\">\n                    {renderTierAddButton()}\n                </div>\n            </div>\n            <hr />\n            {tiers && renderTiers()}\n            <div className=\"playlists\">\n                <div className=\"section-header\">\n                    <h2 className=\"section-title\">Playlists</h2>\n                    <div className=\"section-add\">\n                        {renderPlaylistAddButton()}\n                    </div>\n                </div>\n                <hr />\n                {playlists && renderPlaylists()}\n            </div>\n        </div>\n\n\n    );\n\n\n};\n\nconst mapStateToProps = state => {\n    return {\n        tiers: state.tiers,\n        playlists: state.playlists,\n        currentSong: state.audio.currentSong,\n        user: state.auth.user,\n        band: state.bands.currentBand\n    };\n};\n\nexport default connect(mapStateToProps, { fetchTiers, fetchPlaylists, createTier, createPlaylist })(requireAuth(BodyContainer));","import React from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nimport { playAudio, pauseAudio, nextSong, prevSong, throwError, initializeAudio } from '../actions';\n\n\nclass AudioDisplay extends React.Component {\n\n    constructor(props) {\n        super(props);\n        if (process.env.NODE_ENV === 'production') {\n            this.url = 'https://exploring-the-space.com'\n        } else {\n            this.url = 'http://localhost:3001';\n        }\n        this.audio = React.createRef();\n    }\n\n\n    state = { volume: 50, sliderPosition: 0 };\n\n    formatTime(time) {\n\n        let minutes = time < 600 ? `0${Math.floor(time/60)}` : Math.floor(time/60);\n        let seconds = time % 60 < 10 ? `0${Math.floor(time % 60)}` : Math.floor(time % 60);\n        return `${minutes}:${seconds}`;\n    }\n\n    displayDate = date => {\n        return moment.utc(date).format('MM/DD/yy');\n    }\n\n    wrapUrl(id) {\n        return `${this.url}/api/audio/${id}.mp3`\n    }\n\n    updateSlider = () => {\n        const position = (this.audio.current.currentTime / this.audio.current.duration) * 1000;\n        this.time = this.formatTime(this.audio.current.currentTime);\n        if (!isNaN(position)) {\n            this.setState({\n                sliderPosition: position\n            });\n        }\n    }\n\n    setSpaceBarToPlay = (e) => {\n        if (e.code === 'Space') {\n            e.preventDefault();\n            if (this.props.pause) {\n                this.play();\n            } else {\n                this.pause();\n            }\n        }\n    }\n\n    audioError = () => {\n        const message = \"The audio player had an error, probably can't connect to server.\"\n        this.props.throwError(message);\n    }\n\n    componentDidMount() {\n\n        // if there's no audio element created, create one with the current song\n        // add event listener to link the slider position to the time of the song\n\n        \n        this.audio.current = new Audio();\n\n        this.audio.current.addEventListener('timeupdate', this.updateSlider);\n\n        this.audio.current.addEventListener('error', this.audioError);\n\n        // load next song at song end\n\n        this.audio.current.addEventListener('ended', this.nextSong);\n\n        // space bar stop/start\n\n        document.addEventListener('keydown', this.setSpaceBarToPlay);\n\n\n        this.audio.current.addEventListener('loadedmetadata', this.playOnLoad);\n        \n    }\n\n    componentDidUpdate(prevProps) {\n\n        // scroll down to compensate for the playbar pushing content down\n\n        if (!this.scrolled) {\n            window.scroll(window.scrollX, window.scrollY + 96);\n            this.scrolled = true;\n        }\n        \n        if (this.props.song) {\n            // if the current song is changed to something other than what is already loaded, change the src url and play the audio\n            // if redux gets a signal to play, play if not already\n            // reverse for pause\n            if (this.props.song !== prevProps.song) {\n                this.audio.current.src=this.wrapUrl(this.props.song.audio);\n                this.audio.current.volume = this.props.volume / 100;\n                // this.audio.current.play();\n            } else if (this.props.play && prevProps.pause) {\n\n                this.audio.current.play();\n            } else if (this.props.pause && prevProps.play) {\n                this.audio.current.pause();\n            }\n            if (this.props.volume !== prevProps.volume) {\n                this.audio.current.volume = this.props.volume / 100;\n            }\n        } else {\n            this.audio.current.pause();\n        }\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.setSpaceBarToPlay);\n\n        this.audio.current.src='';\n        this.audio.current.removeEventListener('timeupdate', this.updateSlider);\n        this.audio.current.removeEventListener('error', this.audioError);\n        this.audio.current.removeEventListener('ended', this.nextSong);\n        this.audio.current.removeEventListener('loadedmetadata', this.playOnLoad);\n\n        this.props.initializeAudio();\n    }\n\n    playOnLoad = () => {\n        if (this.props.play) {\n            this.audio.current.play();\n        }\n    }\n\n    prevSong = () => {\n        if (this.audio.current.currentTime < 1) {\n            this.props.prevSong();\n        } else {\n            this.audio.current.currentTime = 0;\n        }\n    }\n\n    nextSong = () => {\n        this.props.nextSong();\n    }\n\n    play = () => {\n        this.props.playAudio();\n    }\n\n    pause = () => {\n        this.props.pauseAudio();\n    }\n\n    onSliderChange = (e) => {\n        const position = (e.target.value / 1000) * this.audio.current.duration;\n        this.audio.current.currentTime = position;\n    }\n\n    onPauseButton = () => {\n\n        if (this.props.play) {\n            this.pause();\n        } else {\n            this.play();\n        }\n\n    }\n\n    render() {\n\n        if (this.props.song) {\n\n            return (\n                <div className=\"playbar\">\n                    <div className=\"playbar-header\">\n                            <div className=\"playbar-title\">\n                                <p>{this.props.song.title.title}</p>\n                            </div>\n                            <div className=\"big-play-container\">\n                                <img\n                                    src=\"/images/prev.svg\"\n                                    className=\"audio-controls\"\n                                    onClick={this.prevSong}\n                                />\n                                <img\n                                    className=\"big-play-btn\"\n                                    src={this.props.play ? \"/images/pause.svg\" : \"/images/play.svg\"}\n                                    onClick={this.onPauseButton}\n                                />\n                                <img\n                                    src=\"/images/next.svg\"\n                                    className=\"audio-controls\"\n                                    onClick={this.nextSong}\n                                />\n                            </div>\n                    \n                        <div className=\"playbar-info\">\n                            <div className=\"playbar-info-detail\">\n                                <p>Version:</p>\n                                <p>{this.props.song.version}</p>\n                            </div>\n                            <div className=\"playbar-info-detail\">\n                                <p>Date:</p>\n                                <p>{this.displayDate(this.props.song.date)}</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"playslider-container\">\n                        <div className=\"playslider-time\">\n                            {this.time}\n                        </div>\n                        <input\n                            type=\"range\"\n                            min=\"0\"\n                            max=\"1000\"\n                            value={this.state.sliderPosition}\n                            className='playslider'\n                            onInput={this.onSliderChange}\n                        />\n                        <div className=\"playslider-time\">\n                            {this.formatTime(this.props.song.duration)}\n                        </div>\n                    </div>\n                </div>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        song: state.audio.currentSong,\n        play: state.audio.play,\n        pause: state.audio.pause,\n        volume: state.audio.volume\n    };\n};\n\nexport default connect(mapStateToProps, { playAudio, pauseAudio, nextSong, prevSong, throwError, initializeAudio })(AudioDisplay);","import React, { useEffect, useState, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport { fetchBand, signOut, changeVolume } from '../actions';\nimport Main from './Main';\nimport AudioDisplay from './AudioDisplay';\nimport requireAuth from './requireAuth';\n\nconst Header = ({ fetchBand, band, match, authorized, handleUpdate, user, signOut, volume, changeVolume }) => {\n\n    const [expand, setExpand] = useState(false);\n    const menu = useRef(null);\n\n    useEffect(() => {\n        fetchBand(match.params.bandName);\n        document.addEventListener('click', clickToDismiss, { capture: true });\n        return () => {\n            document.removeEventListener('click', clickToDismiss, { capture: true });\n        };\n    }, []);\n\n    useEffect(() => {\n        handleUpdate();\n    }, [band, user]);\n\n    const clickToDismiss = (e) => {\n        if (menu.current && menu.current.contains(e.target)) {\n            return;\n        }\n        setExpand(false);\n    };\n\n    const renderAdmin = () => {\n        return (\n            <div className=\"menu\">\n                <Link className=\"menu-item\" to=\"/user\">User Home</Link>\n                <Link className=\"menu-item\" to=\"/help\">Help</Link>\n                <div className=\"menu-item\" onClick={signOut}>Sign Out</div>\n            </div>\n        );\n    };\n\n    const renderHomeLink = () => {\n        return (\n            <div className=\"menu\">\n                <Link className=\"menu-item\" to=\"/\">Home</Link>\n                <Link className=\"menu-item\" to=\"/help\">Help</Link>\n                <Link className=\"menu-item\" to=\"/signin\">Sign In</Link>\n            </div>\n        );\n    };\n\n    const showContent = () => {\n\n        if (!band) {\n            return (\n                <div className=\"no-band\">\n                    <h1>This band does not exist on Exploring the Space, but you can create it.</h1>\n                    <div className=\"home-buttons\">\n                        <Link to=\"/\">\n                            Home\n                        </Link>\n                        <Link to=\"/help\">\n                            What Is It?\n                        </Link>\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"band-header\">\n                <div className=\"band-name\">\n                    <h1>{band && band.name}</h1>\n                    <div className=\"menu-button\" ref={menu} onClick={() => setExpand(!expand)}>\n                        <img src=\"images/dots.png\" />\n                        {expand && (authorized ? renderAdmin() : renderHomeLink())}\n                    </div>\n                </div>\n                <div className=\"volume-container\">\n                    <input\n                        type=\"range\"\n                        min=\"0\" max=\"100\"\n                        className=\"volume\"\n                        value={volume}\n                        onInput={e => changeVolume(e.target.value)}\n                    />\n                    <img src=\"/images/volume.svg\" />\n                </div>\n            </div>\n        );\n    };\n\n\n\n    return <>\n        \n        <div className=\"header\">\n            <AudioDisplay />\n            {showContent()}\n        </div>\n\n        {band && <Main />}\n\n    </>;\n\n};\n\nconst mapStateToProps = state => {\n    return {\n        band: state.bands.currentBand,\n        user: state.auth.currentUser,\n        volume: state.audio.volume\n    }\n}\n\nexport default connect(mapStateToProps, { fetchBand, signOut, changeVolume })(requireAuth(Header));","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport { createBand, fetchBands, editBand, deleteBand, signOut } from '../actions';\nimport AddButton from './AddButton';\nimport DeleteButton from './DeleteButton';\n\nconst User = ({ user, bands, createBand, fetchBands, editBand, deleteBand, signOut }) => {\n\n    useEffect(() => {\n        fetchBands();\n    }, []);\n\n    const renderBands = () => {\n        const bandList = user.bands.map(id => bands[id]);\n        if (!bandList.length || !bandList[0]) {\n            return <h3>No bands belong to this user</h3>\n        }\n        return bandList.map(band => {\n            if (band) {\n                return (\n                    <div className=\"band-item\" key={band.id}>\n                        <Link to={`/${band.url}`}>\n                            <h2>{band.name}</h2>\n                        </Link>\n                        <div className=\"band-buttons\">\n                            <AddButton\n                                onSubmit={formValues => editBand(formValues, band.id)}\n                                title={`Edit ${band.name}`}\n                                image=\"images/edit.png\"\n                                fields={[{\n                                    label: 'Band Name',\n                                    name: 'name',\n                                    type: 'input'\n                                }]}\n                                initialValues={{ name: band.name }}\n                                enableReinitialize={true}\n                                form={`edit-band-${band.id}`}\n                            />\n                            <DeleteButton\n                                onSubmit={() => deleteBand(band.id)}\n                                displayName={band.name}\n                            />\n                        </div>\n                    </div>                   \n                );\n            }\n        });\n    };\n\n    if (user) {\n        return <>\n            <div className=\"user-header\">\n                <div className=\"user-header-sub\">\n                    <h1 className=\"user-title\">\n                        {user.username}'s bands\n                    </h1>\n                    <AddButton\n                        onSubmit={formValues => createBand(formValues)}\n                        title='Create a Band'\n                        image=\"images/add.png\"\n                        fields={[{\n                            label: 'Band Name',\n                            name: 'bandName',\n                            type: 'input'\n                        }]}\n                    />\n                </div>\n                <div className=\"user-header-sub\">\n                    <Link className=\"user-link\" to=\"/\">\n                        Home\n                        </Link>\n                    <div className=\"user-link\" onClick={signOut}>\n                        Sign Out\n                    </div>\n                </div>\n            </div>\n            <hr />\n            <div className=\"band-list\">\n                {renderBands()}\n            </div>\n            \n\n        </>;\n    } else {\n        return null;\n    }\n\n};\n\nconst mapStateToProps = state => {\n    return {\n        user: state.auth.user,\n        bands: state.bands\n    };\n};\n\nexport default connect(mapStateToProps, { createBand, fetchBands, editBand, deleteBand, signOut })(User);","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\n\nclass UserForm extends React.Component {\n    \n    renderInput = ({ input, label, meta, type, autoComplete, defaultValue }) => {\n\n        return (\n            <div>\n                <label>{label}</label>\n                <input\n                    type={type}\n                    autoComplete={autoComplete} \n                    {...input}\n                /> \n            </div>\n        );\n    };\n\n    submitForm = formValues => {\n        this.props.onSubmit(formValues);\n    };\n\n\n    render() {\n        return (\n            <form className='signin' onSubmit={this.props.handleSubmit(this.submitForm)}>\n                <Field\n                    name=\"username\"\n                    component={this.renderInput}\n                    label=\"Username: \"\n                    type=\"text\"\n                    autoComplete=\"username\"\n    \n                />\n                <Field\n                    name=\"password\"\n                    component={this.renderInput}\n                    label=\"Passwyrd: \"\n                    type=\"password\"\n                    autoComplete=\"current-password\"\n                />\n                <button className=\"signin-submit\">Submit</button>\n            </form>\n        );\n    }\n\n\n}\n\nexport default reduxForm({\n    form: 'userForm'\n})(UserForm);","import { connect } from 'react-redux';\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport history from '../history';\nimport { signIn } from '../actions';\nimport UserForm from './UserForm';\n\n\nconst SignIn = ({ signIn, isSignedIn }) => {\n\n    useEffect(() => {\n        if (isSignedIn) {\n            history.push('/user')\n        }\n    }, []);\n\n    return (\n\n        <div className=\"auth\">\n            <div className=\"help-header\">\n                Exploring the Space\n            </div>\n            <h1>Sign In</h1>\n            <UserForm onSubmit={formValues => signIn(formValues)}/>\n            <div className=\"home-buttons\">\n                <Link to=\"/\">\n                    Home\n                </Link>\n                <Link to=\"signup\">\n                    Sign Up\n                </Link>\n            </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = state => {\n    return { isSignedIn: state.auth.isSignedIn };\n}\n\nexport default connect(mapStateToProps, { signIn })(SignIn);","import { connect } from 'react-redux';\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport history from '../history';\nimport { signUp } from '../actions';\nimport UserForm from './UserForm';\n\n\nconst SignUp = ({ signUp, isSignedIn }) => {\n\n    useEffect(() => {\n        if (isSignedIn) {\n            history.push('/user')\n        }\n    }, []);\n\n    return (\n        <div className=\"auth\">\n            <div className=\"help-header\">\n                Exploring the Space\n            </div>\n            <h1>Sign Up</h1>\n            <UserForm onSubmit={formValues => signUp(formValues)}/>\n            <div className=\"home-buttons\">\n                <Link to=\"/\">\n                    Home\n                </Link>\n                <Link to=\"signin\">\n                    Sign In\n                </Link>\n            </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = state => {\n    return { isSignedIn: state.auth.isSignedIn };\n}\n\nexport default connect(mapStateToProps, { signUp })(SignUp);","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport _ from 'lodash';\n\nimport { fetchBands } from '../actions';\n\nclass Home extends React.Component {\n\n\n    componentDidMount() {\n        this.props.fetchBands();\n    }\n\n    renderBands() {\n\n        delete this.props.bands.currentBand;\n\n        const bands = Object.values(this.props.bands);\n\n        return bands.map(band => {\n            return (\n                <div className=\"band-item\" key={band.id}>\n                    <Link to={`/${band.url}`}>\n                        <h2>{band.name}</h2>\n                    </Link>\n                </div>\n            );\n        });\n\n    }\n\n\n    render() {\n        return (\n            <div className=\"container\">\n                <h1 className=\"home-header\">Exploring the Space</h1>\n                <div className=\"home-buttons\">\n                    <Link to=\"/signin\">\n                        Sign In\n                    </Link>\n                    <Link to=\"/signup\">\n                        Sign Up\n                    </Link>\n                    <Link to=\"/help\">\n                        What Is It?\n                    </Link>\n                </div>\n                <h1>All Bands:</h1>\n                <div className=\"band-list\">\n                    {this.props.bands && this.renderBands()}\n                </div>\n            </div>\n        );\n    }\n\n\n}\n\nconst mapStateToProps = state => {\n    return {\n        bands: state.bands\n    };\n};\n\nexport default connect(mapStateToProps, { fetchBands })(Home);","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst Help = () => {\n    return <>\n        <div className=\"home-buttons\">\n            <Link to=\"/\">Home</Link>\n            <Link to=\"signin\">Sign In</Link>\n            <Link to=\"signin\">Sign Up</Link>\n        </div>\n        <div className=\"help\">\n            <div className=\"help-header\">\n                Exploring the Space allows you to keep track of your musical recordings in an easy to navigate catalogue.\n            </div>\n            <h1>\n                Here's How This Works\n            </h1>\n            <div className=\"tldr\">\n                TL;DR: Bands contain Tiers, which contain Titles (songs), which contain different versions, each of which can have one or more recordings. Bands also have Playlists which are collections of particular recordings.\n            </div>\n            <p>\n                Each user can have 1 or more bands.  Each band has their own page.\n            </p>\n\n            <h2>\n                The Band Page\n            </h2>\n            <p>\n                The band page has a \"Tiers\" sections and a \"Playlists\" section. The tiers are used to catalogue your songs, and the playlists are used to combine different songs into a certain order.\n            </p>\n            <h3>\n                Tiers\n            </h3>\n            <p>\n                A tier is a collection of songs. Tiers can be separated by different genres, songs that you're currently rehearsing versus songs that are still being written, or any other criteria.  Within the band page, these songs are called \"Titles.\" Click on a tier to reveal its titles.\n            </p>\n            <h3>\n                Titles\n            </h3>\n            <p>\n                Titles contain all the various versions and recordings of a particular song. On the title display, you will see the recording that is most up-to-date for this title, and a button to play it or download it. Click on the title to reveal the different versions it contains.\n            </p>\n            <h3>\n                Versions\n            </h3>\n            <p>\n                A version categorizes groups of recordings, and again you can use whatever criteria you want.  Maybe one version is band practice, and the other is a recording you're working on.  Each version contains one or more recordings, or \"Bounces.\" One and only one version for each title is the \"current\" version.\n            </p>\n            <h3>\n                Bounces\n            </h3>\n            <p>\n                Bounces are the root component of a song, and they represent a particular recording.  They are represented by a date. Like versions, one bounce per version is designated \"current.\"\n            </p>\n            <h3>\n                Playlists\n            </h3>\n            <p>\n                Playlists are where you can make ordered lists of particular bounces.  Each title has a display of its currently selected version and bounce, along with a button to add that recording to a playlist (you have to create the playlist first).\n            </p>\n            <p>\n                If you change the version or bounce you're listening to, the song in the playlist will remain the same one you originally added. If you want to change which version and/or bounce a song in a playlist represents, you can change that by editing it within the playlist.\n            </p>\n            <h2>\n                Controls\n            </h2>\n            <p>\n                If you are on a band page of a band you own, you will see additional buttons where you can modify the catalogue and upload new recordings.\n            </p>\n            <p className=\"danger\">\n                If you delete an element, everything contained within that element will be deleted!\n            </p>\n            <a href=\"https://github.com/andytisdall/greenhouse\">\n                Github for this project\n            </a>\n        </div>\n    </>;\n};\n\nexport default Help;","import React, { useRef, useEffect } from 'react';\nimport WaveformData from 'waveform-data';\n\nconst Waveform = ({ audio, isRecording, audioContext }) => {\n  const canvas = useRef();\n\n  useEffect(async () => {\n    if (isRecording && canvas.current) {\n      const ctx = canvas.current.getContext('2d');\n      ctx.clearRect(0, 0, canvas.current.width, canvas.current.height);\n    } else {\n      renderWaveform();\n    }\n  }, [isRecording]);\n\n  const renderWaveform = async () => {\n    // const reader = new FileReader();\n\n    // reader.onload = (event) => {\n    //   const buffer = event.target.result;\n    //   const options = {\n    //     audio_context: audioContext,\n    //     array_buffer: buffer,\n    //     scale: 128,\n    //   };\n    const buffer = await audio.arrayBuffer();\n    const options = {\n      audio_context: audioContext,\n      array_buffer: buffer,\n      scale: 128,\n    };\n\n    WaveformData.createFromAudio(options, (err, waveform) => {\n      if (err) {\n        console.log(err);\n      } else {\n        drawWaveform(waveform);\n      }\n    });\n    // };\n\n    // reader.readAsArrayBuffer(audio);\n  };\n\n  const drawWaveform = (waveform) => {\n    const ctx = canvas.current.getContext('2d');\n\n    const lengthMultiplier = waveform.length / 300;\n\n    const scaleY = (amplitude, height) => {\n      const range = 256;\n      const offset = 128;\n\n      return height - ((amplitude + offset) * height) / range;\n    };\n\n    ctx.beginPath();\n\n    const channel = waveform.channel(0);\n\n    // Loop forwards, drawing the upper half of the waveform\n    for (let x = 0; x < waveform.length; x++) {\n      const val = channel.max_sample(x);\n\n      ctx.lineTo(x / lengthMultiplier, scaleY(val, canvas.current.height));\n    }\n\n    // Loop backwards, drawing the lower half of the waveform\n    for (let x = waveform.length - 1; x >= 0; x--) {\n      const val = channel.min_sample(x);\n\n      ctx.lineTo(x / lengthMultiplier, scaleY(val, canvas.current.height));\n    }\n\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n  };\n\n  return <canvas ref={canvas} />;\n};\n\nexport default Waveform;\n","import React, { useState, useEffect, useRef } from 'react';\n\nimport Waveform from './Waveform';\n\nconst Playhead = ({ audio, isRecording, audioContext }) => {\n  const [playheadPosition, setPlayheadPosition] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  const player = useRef();\n\n  useEffect(() => {\n    player.current = new Audio();\n    player.current.onended = () => {\n      setIsPlaying(false);\n    };\n    player.current.onplay = () => {\n      setIsPlaying(true);\n    };\n    player.current.onpause = () => {\n      setIsPlaying(false);\n    };\n    player.current.ontimeupdate = updateSlider;\n    return () => {\n      player.current.ontimeupdate = null;\n      player.current.onended = null;\n      player.current.onplay = null;\n      player.current.onpause = null;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (isRecording) {\n      setIsPlaying(false);\n      if (player.current) {\n        player.current.pause();\n      }\n    }\n  }, [isRecording]);\n\n  useEffect(() => {\n    if (audio) {\n      const url = URL.createObjectURL(audio);\n      player.current.src = url;\n    }\n  }, [audio]);\n\n  const renderPlayButton = () => {\n    if (!isRecording && audio && !isPlaying) {\n      return (\n        <img\n          src=\"/images/play.svg\"\n          className=\"play-icon\"\n          onClick={() => {\n            console.log(player.current);\n            player.current.play();\n          }}\n        />\n      );\n    } else if (!isRecording && audio) {\n      return (\n        <img\n          src=\"/images/pause.svg\"\n          className=\"play-icon\"\n          onClick={() => player.current.pause()}\n        />\n      );\n    }\n  };\n\n  const updateSlider = () => {\n    const position =\n      (player.current.currentTime / player.current.duration) * 1000;\n    if (!isNaN(position)) {\n      setPlayheadPosition(position + player.current.duration / 300);\n    }\n  };\n\n  const onSliderChange = (e) => {\n    const position = (e.target.value / 1000) * player.current.duration;\n    if (!isNaN(position)) {\n      player.current.currentTime = position;\n    }\n  };\n\n  return (\n    <>\n      {renderPlayButton()}\n      <div className=\"waveform-display\">\n        <Waveform\n          audio={audio}\n          isRecording={isRecording}\n          audioContext={audioContext}\n        />\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"1000\"\n          value={playheadPosition}\n          className=\"playhead\"\n          onInput={onSliderChange}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default Playhead;\n","import React, { useState, useEffect } from 'react';\n\nconst Timer = ({ isRecording }) => {\n  const [timer, setTimer] = useState(0);\n\n  useEffect(() => {\n    let interval;\n    if (isRecording) {\n      interval = setInterval(() => {\n        setTimer(timer + 1);\n      }, 1000);\n    } else {\n      clearInterval(interval);\n      setTimer(0);\n    }\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isRecording, timer]);\n\n  const formatTime = (time) => {\n    let minutes =\n      time < 600 ? `0${Math.floor(time / 60)}` : Math.floor(time / 60);\n    let seconds =\n      time % 60 < 10 ? `0${Math.floor(time % 60)}` : Math.floor(time % 60);\n    return `${minutes}:${seconds}`;\n  };\n\n  return (\n    <div className=\"recorder-time\">{isRecording && formatTime(timer)}</div>\n  );\n};\n\nexport default Timer;\n","import React, { useEffect, useState } from 'react';\n\nconst DeviceControl = ({ inputSource, setInputSource }) => {\n  const [devices, setDevices] = useState([]);\n\n  useEffect(() => {\n    getDevices();\n    navigator.mediaDevices.ondevicechange = getDevices;\n  }, []);\n\n  const getDevices = async () => {\n    // get user input devices\n    const devices = await navigator.mediaDevices.enumerateDevices();\n    const inputDevices = devices.map((device) => {\n      if (device.kind === 'audioinput' && device.deviceId !== 'default') {\n        return device;\n      }\n    });\n    setDevices(inputDevices);\n    if (!inputSource) {\n      setInputSource(devices[0]);\n    }\n  };\n\n  const micSelect = () => {\n    const deviceList = devices.map((device) => {\n      if (device) {\n        return <option key={device.deviceId}>{device.label}</option>;\n      }\n    });\n    return <select>{deviceList}</select>;\n  };\n\n  return (\n    <div className=\"device-control\">\n      <div>Input device:</div>\n      <div className=\"mic-select\">{micSelect()}</div>\n    </div>\n  );\n};\n\nexport default DeviceControl;\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\n\nimport {\n  fetchTiers,\n  fetchTitles,\n  fetchVersions,\n  fetchBand,\n  fetchBounces,\n  createBounce,\n} from '../actions';\n\nconst AddRecording = ({\n  currentBand,\n  tiers,\n  titles,\n  versions,\n  bandName,\n  fetchBand,\n  fetchTiers,\n  fetchTitles,\n  fetchVersions,\n  fetchBounces,\n  createBounce,\n  audio,\n  uploadStarted,\n}) => {\n  const defaultItem = { name: 'choose...', id: '0' };\n  const displayDate = () => {\n    return new Date().toISOString().substring(0, 10);\n  };\n\n  const [selectedTitle, setSelectedTitle] = useState(defaultItem);\n  const [selectedTier, setSelectedTier] = useState(defaultItem);\n  const [selectedVersion, setSelectedVersion] = useState(defaultItem);\n  const [selectedDate, setSelectedDate] = useState(displayDate());\n  const [uploadSuccess, setUploadSuccess] = useState(false);\n  const [uploadLoading, setUploadLoading] = useState(false);\n\n  const [titleList, setTitleList] = useState([]);\n  const [tierList, setTierList] = useState([]);\n  const [versionList, setVersionList] = useState([]);\n\n  useEffect(() => {\n    fetchBand(bandName);\n  }, []);\n\n  useEffect(() => {\n    if (currentBand) {\n      fetchTiers(currentBand.id);\n    }\n  }, [currentBand]);\n\n  useEffect(() => {\n    if (currentBand) {\n      const list = currentBand.tiers.map((id) => tiers[id]);\n      setTierList(list);\n    }\n  }, [tiers]);\n\n  useEffect(() => {\n    if (selectedTier !== defaultItem) {\n      fetchTitles(selectedTier.id);\n      setVersionList([]);\n      setSelectedVersion(defaultItem);\n    }\n  }, [selectedTier]);\n\n  useEffect(() => {\n    if (selectedTier !== defaultItem) {\n      const list = selectedTier.trackList.map((id) => titles[id]);\n      setTitleList(list);\n    }\n  }, [titles]);\n\n  useEffect(() => {\n    if (selectedTitle !== defaultItem) {\n      fetchVersions(selectedTitle.id);\n    }\n  }, [selectedTitle]);\n\n  useEffect(() => {\n    if (selectedTitle !== defaultItem) {\n      const list = selectedTitle.versions.map((id) => versions[id]);\n      setVersionList(list);\n    }\n  }, [versions]);\n\n  useEffect(() => {\n    if (selectedVersion.id !== '0') {\n      fetchBounces(selectedVersion.id);\n    }\n  }, [selectedVersion]);\n\n  useEffect(() => {\n    if (uploadLoading && !uploadStarted) {\n      setUploadLoading(false);\n      setUploadSuccess(true);\n      setTimeout(() => {\n        setUploadSuccess(false);\n      }, 10000);\n    }\n    if (uploadStarted && !uploadLoading) {\n      setUploadLoading(true);\n    }\n  }, [uploadStarted]);\n\n  const selector = (stateList, onSelect, selectedItem) => {\n    const onChange = (e) => {\n      const selected = stateList.find((item) => item.id === e.target.value);\n      onSelect(selected);\n    };\n    const list = [defaultItem, ...stateList];\n    const options = list.map((item) => {\n      if (item) {\n        const name = item.name || item.title;\n        return (\n          <option value={item.id} key={item.id}>\n            {name}\n          </option>\n        );\n      }\n    });\n    return (\n      <select onChange={onChange} value={selectedItem.id}>\n        {options}\n      </select>\n    );\n  };\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (submitActive()) {\n      const file = new File([audio], 'recording.mp3', { lastModified: Date() });\n      const form = {\n        date: selectedDate,\n        latest: true,\n        file: [file],\n      };\n\n      createBounce(form, selectedVersion.id);\n    }\n  };\n\n  const submitActive = () => {\n    if (audio && selectedDate && selectedVersion.id !== '0') {\n      return true;\n    }\n    return false;\n  };\n\n  const renderUploadSuccess = () => {\n    return <div className=\"upload-success\">Recording Successfully Saved!</div>;\n  };\n\n  const renderUploadLoading = () => {\n    return (\n      <div className=\"upload-image\">\n        <p>Uploading...</p>\n        <img src=\"/images/windmill.gif\" className=\"windmill\" />\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"add-recording\">\n      <div className=\"add-recording-select-row\">\n        <div className=\"add-recording-label\">Tier:</div>\n        <div>\n          {currentBand &&\n            tierList &&\n            selector(tierList, setSelectedTier, selectedTier)}\n        </div>\n      </div>\n\n      <div className=\"add-recording-select-row\">\n        <div className=\"add-recording-label\">Title:</div>\n        <div>\n          {selectedTier &&\n            titleList &&\n            selector(titleList, setSelectedTitle, selectedTitle)}\n        </div>\n      </div>\n\n      <div className=\"add-recording-select-row\">\n        <div className=\"add-recording-label\">Version:</div>\n        <div>\n          {selectedTitle &&\n            versionList &&\n            selector(versionList, setSelectedVersion, selectedVersion)}\n        </div>\n      </div>\n\n      <div className=\"add-recording-select-row\">\n        <div className=\"add-recording-label\">Date:</div>\n        <div>\n          <input\n            type=\"date\"\n            value={selectedDate}\n            onChange={(e) => setSelectedDate(e.target.value)}\n            className=\"calendar\"\n          />\n        </div>\n      </div>\n      <form onSubmit={onSubmit}>\n        <button\n          className={`${\n            submitActive() ? 'submit-button-centered' : 'submit-inactive'\n          }`}\n          type=\"submit\"\n        >\n          Save Bounce\n        </button>\n      </form>\n      {uploadSuccess && renderUploadSuccess()}\n      {uploadLoading && renderUploadLoading()}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    tiers: state.tiers,\n    titles: state.titles,\n    versions: state.versions,\n    currentBand: state.bands.currentBand,\n    uploadStarted: state.bands.uploadStarted,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchTiers,\n  fetchTitles,\n  fetchVersions,\n  fetchBand,\n  createBounce,\n  fetchBounces,\n})(AddRecording);\n","import React, { useEffect, useRef, useState } from 'react';\n// import vmsg from 'vmsg';\nimport WebAudioRecorder from '../web-audio-recorder/WebAudioRecorder';\n\nimport Playhead from './Playhead';\nimport Timer from './Timer';\nimport DeviceControl from './DeviceControl';\nimport AddRecording from './AddRecording';\nimport _ from 'lodash';\n\nconst Recorder = ({ match }) => {\n  const [isRecording, setIsRecording] = useState(false);\n  const [audio, setAudio] = useState();\n  const [inputSource, setInputSource] = useState();\n  const [error, setError] = useState('');\n\n  const mediaRecorder = useRef();\n  const audioContext = useRef(new AudioContext());\n  const chunks = useRef([]);\n\n  useEffect(async () => {\n    // if (inputSource) {\n    //   const constraints = {\n    //     audio: {\n    //       deviceId: inputSource.deviceId,\n    //     },\n    //   };\n    //   const stream = await navigator.mediaDevices.getUserMedia(constraints);\n\n    //   mediaRecorder.current = new MediaRecorder(stream);\n    //   mediaRecorder.current.ondataavailable = (e) => {\n    //     chunks.current.push(e.data);\n    //   };\n    //   mediaRecorder.current.onstop = (e) => {\n    //     const blob = new Blob(chunks.current, {\n    //       type: 'audio/ogg; codecs=opus',\n    //     });\n    //     setAudio(blob);\n    //     chunks.current = [];\n    //   };\n    // }\n\n    // navigator.serviceWorker.register(\n    //   process.env.PUBLIC_URL + '/web-audio-recorder/WebAudioRecorderMp3.js'\n    // );\n    // Initialize vmsg recorder\n    // mediaRecorder.current = new vmsg.Recorder({\n    //   wasmURL: 'https://unpkg.com/vmsg@0.3.0/vmsg.wasm',\n    // });\n\n    if (inputSource) {\n      const inputStream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          deviceId: inputSource.deviceId,\n        },\n      });\n      const node = audioContext.current.createMediaStreamSource(inputStream);\n      // node.disconnect(audioContext.current.destination);\n      mediaRecorder.current = new WebAudioRecorder(node, {\n        workerDir: process.env.PUBLIC_URL + '/web-audio-recorder/',\n        encoding: 'mp3',\n        options: {\n          timeLimit: 18000,\n        },\n        encodeAfterRecord: false,\n        onComplete: (recorder, blob) => {\n          console.log(blob);\n          setAudio(blob);\n          setIsRecording(false);\n        },\n        onTimeout: (recorder) => {\n          const time = recorder.recordingTime();\n          setError(`timeout at ${time} seconds`);\n        },\n        onError: (recorder, message) => {\n          setError(message);\n        },\n        onEncoderLoaded: () => {\n          console.log('encoder loaded');\n        },\n      });\n    }\n  }, [inputSource]);\n\n  const onRecord = async () => {\n    // setError(isLoading);\n    // if (!isLoading) {\n    // setIsLoading(true);\n    if (!isRecording) {\n      try {\n        // const stream = await navigator.mediaDevices.getUserMedia(constraints);\n\n        // var mediaRecorder = new MediaRecorder(stream);\n        // mediaRecorder.current.start();\n        // mediaRecorder.current.startRecording();\n        // await mediaRecorder.current.initAudio();\n        // await mediaRecorder.current.initWorker();\n        mediaRecorder.current.startRecording();\n        // setIsLoading(false);\n        setIsRecording(true);\n      } catch (e) {\n        console.error(e);\n        // setIsLoading(false);\n        setError(e.message);\n      }\n    } else {\n      mediaRecorder.current.finishRecording();\n      // const blob = await mediaRecorder.current.stopRecording();\n      // setAudio(blob);\n      // setIsLoading(false);\n      // mediaRecorder.current.stop();\n      setIsRecording(false);\n    }\n  };\n\n  const renderButtons = () => {\n    return (\n      <div className=\"recorder-buttons\">\n        <div onClick={onRecord} className=\"recorder-btn\">\n          {isRecording ? 'Stop' : 'Record'}\n        </div>\n      </div>\n    );\n  };\n\n  const onCapture = (e) => {\n    const file = e.target.files[0];\n    setAudio(file);\n  };\n\n  return (\n    <div className={isRecording ? 'recorder recording' : 'recorder'}>\n      <div>{error}</div>\n      <div className=\"playhead-container\">\n        {audio && !isRecording && (\n          <Playhead\n            audio={audio}\n            isRecording={isRecording}\n            audioContext={audioContext.current}\n          />\n        )}\n      </div>\n      {/* <input type=\"file\" accept=\"audio/*\" capture onChange={onCapture} /> */}\n      {renderButtons()}\n\n      <Timer isRecording={isRecording} />\n\n      <DeviceControl\n        inputSource={inputSource}\n        setInputSource={setInputSource}\n      />\n\n      <AddRecording bandName={match.params.bandName} audio={audio} />\n    </div>\n  );\n};\n\nexport default Recorder;\n","import React, { useEffect } from 'react';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport Error from './Error';\nimport Header from './Header';\nimport User from './User';\nimport SignIn from './SignIn';\nimport SignUp from './SignUp';\nimport Home from './Home';\nimport Help from './Help';\nimport Recorder from './Recorder';\nimport { fetchUser } from '../actions';\n\nimport history from '../history';\n\nconst App = ({ signedIn, fetchUser, error }) => {\n  useEffect(() => {\n    if (signedIn) {\n      fetchUser();\n    }\n  }, []);\n\n  const errClass = error ? 'error-margin' : '';\n\n  return (\n    <>\n      <Error />\n      <div className={`container ${errClass}`}>\n        <Router history={history}>\n          <Switch>\n            <Route path=\"/\" exact component={Home} />\n            <Route path=\"/signin\" exact component={SignIn} />;\n            <Route path=\"/signup\" exact component={SignUp} />;\n            <Route\n              path=\"/user\"\n              exact\n              render={(routeProps) => {\n                if (!signedIn) {\n                  history.push('/signin');\n                  return null;\n                }\n                return <User {...routeProps} />;\n              }}\n            />\n            <Route path=\"/help\" exact component={Help} />\n            <Route path=\"/:bandName/record\" exact component={Recorder} />\n            <Route path=\"/:bandName\" component={Header} />\n          </Switch>\n        </Router>\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    signedIn: state.auth.isSignedIn,\n    error: state.error.error,\n  };\n};\n\nexport default connect(mapStateToProps, { fetchUser })(App);\n","import { SIGN_IN, SIGN_OUT, CREATE_BAND } from '../actions/types';\n\nconst INITIAL_STATE = {\n    isSignedIn: false,\n    user: null\n};\n\nexport default (state = INITIAL_STATE, action) => {\n    switch (action.type) {\n        case SIGN_IN:\n            return { ...state, isSignedIn: true, user: action.payload };\n        case SIGN_OUT:\n            return { ...state, isSignedIn: false, user: null };\n        case CREATE_BAND:\n            const { user } = state;\n            user.bands.push(action.payload.id);\n            return { ...state, user };\n        default:\n            return state;  \n    } \n};\n","import { PLAY_AUDIO, PAUSE_AUDIO, QUEUE_SONGS, NEXT_SONG, DELETE_BOUNCE, CHANGE_VOLUME, INITIALIZE_AUDIO } from \"../actions/types\";\n\nconst initialState = {\n    play: false,\n    volume: 75,\n    currentSong: null\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case PLAY_AUDIO:\n            return { ...state, play: true, pause: false };\n        case PAUSE_AUDIO:\n            return { ...state, play: false, pause: true };\n        case QUEUE_SONGS:\n            const { song, parent } = action.payload;\n            return { ...state, currentSong: song, play: true, parent };\n        case NEXT_SONG:\n            return { ...state, currentSong: action.payload };\n        case DELETE_BOUNCE:\n            if (state.currentSong && action.payload.bounce.id === state.currentSong.audio) {\n                return { ...initialState };\n            } else {\n                return state;\n            }\n            // if (state.queue.length) {\n            //     state.queue = state.queue.filter(song => song.audio !== action.payload.bounce.id);\n            //     return { ...state };\n            // }\n        case CHANGE_VOLUME:\n            return { ...state, volume: action.payload };\n        case INITIALIZE_AUDIO:\n            return { ...initialState };\n        default:\n            return state;\n    }\n};","import { combineReducers } from 'redux';\nimport { reducer as formReducer } from 'redux-form';\nimport authReducer from './authReducer';\nimport tierReducer from './tierReducer';\nimport titleReducer from './titleReducer';\nimport versionReducer from './versionReducer';\nimport bounceReducer from './bounceReducer';\nimport playlistReducer from './playlistReducer';\nimport playlistSongReducer from './playlistSongReducer';\nimport bandReducer from './bandReducer';\nimport errorReducer from './errorReducer';\nimport audioReducer from './audioReducer';\n\nexport default combineReducers({\n    form: formReducer,\n    auth: authReducer,\n    tiers: tierReducer,\n    titles: titleReducer,\n    versions: versionReducer,\n    bounces: bounceReducer,\n    playlists: playlistReducer,\n    playlistSongs: playlistSongReducer,\n    bands: bandReducer,\n    error: errorReducer,\n    audio: audioReducer\n});","import { FETCH_TIERS, CREATE_TIER, EDIT_TIER, DELETE_TIER, CREATE_TITLE, EDIT_TITLE, DELETE_TITLE, ORDER_TIER } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_TIERS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_TIER:\n            return { ...state, [action.payload.id]: action.payload };\n        case EDIT_TIER:\n            const oldPosition = state[action.payload.id]['position'];\n            const newPosition = action.payload.position;\n            let changedPositions = {};\n            if (oldPosition > newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position >= newPosition && item.position < oldPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos + 1};\n                    }\n                }\n            }\n            if (oldPosition < newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position > oldPosition && item.position <= newPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos - 1};\n                    }\n                }\n            }\n            return { ...state, [action.payload.id]: action.payload, ...changedPositions };\n        case DELETE_TIER:\n            const changePosition = Object.values(_.omit(state, state.currentBand)).filter(t => t.position > action.payload.position);\n            changePosition.forEach((tier) => {\n                tier.position = tier.position - 1;\n            });\n            delete state[action.payload.id];\n            return { ...state, ..._.mapKeys(changePosition, 'id') };\n        case ORDER_TIER:\n            state[action.payload.tier].orderBy = action.payload.orderBy;\n            return { ...state };\n        case CREATE_TITLE:\n            const addToTier = state[action.payload.tier];\n            addToTier.trackList.push(action.payload.title.id);\n            return { ...state, [addToTier.id]: addToTier };\n        case EDIT_TITLE:\n            if (action.payload.tier.new) {\n                const newTier = state[action.payload.tier.new];\n                newTier.trackList.push(action.payload.title.id);\n                const oldTier = state[action.payload.tier.old];\n                oldTier.trackList = oldTier.trackList.filter(id => id !== action.payload.title.id);\n                return { ...state, [newTier.id]: newTier, [oldTier.id]: oldTier };\n            } else {\n                return state;\n            }\n        case DELETE_TITLE:\n            const deleteFromTier = state[action.payload.tier];\n            if (deleteFromTier) {\n                const newTrackList = deleteFromTier.trackList.filter(id => id !== action.payload.title.id);\n                deleteFromTier.trackList = newTrackList;\n                return { ...state, [deleteFromTier.id]: deleteFromTier };\n            }\n        default:\n            return state;\n\n    }\n\n};","import { FETCH_TITLES, CREATE_TITLE, EDIT_TITLE, DELETE_TITLE, SELECT_VERSION, SELECT_BOUNCE, CREATE_VERSION, DELETE_VERSION } from '../actions/types';\nimport _ from 'lodash';\n\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_TITLES:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_TITLE:\n            return { ...state, [action.payload.title.id]: action.payload.title };\n        case EDIT_TITLE:\n            const oldTitle = state[action.payload.title.id];\n            const newTitle = action.payload.title;\n            newTitle.selectedVersion = oldTitle.selectedVersion;\n            newTitle.selectedBounce = oldTitle.selectedBounce;\n            return { ...state, [newTitle.id]: newTitle };\n        case DELETE_TITLE:\n            delete state[action.payload.title.id];\n            return { ...state };\n        case SELECT_VERSION:\n            const versionTitle = state[action.payload.titleId];\n            versionTitle.selectedVersion = action.payload.version;\n            return { ...state, [versionTitle.id]: { ...versionTitle } };\n        case SELECT_BOUNCE:\n            const bounceTitle = state[action.payload.titleId];\n            bounceTitle.selectedBounce = action.payload.bounce;\n            return { ...state, [bounceTitle.id]: { ...bounceTitle } }\n        case CREATE_VERSION:\n            const addToTitle = state[action.payload.title];\n            addToTitle.versions.push(action.payload.version.id);\n            addToTitle.selectedVersion = action.payload.version;\n            return { ...state, [addToTitle.id]: addToTitle};\n        case DELETE_VERSION:\n            const deleteFromTitle = state[action.payload.title];\n            if (deleteFromTitle) {\n                const newVersionList = deleteFromTitle.versions.filter(id => id !== action.payload.version.id);\n                deleteFromTitle.versions = newVersionList;\n                return { ...state, [deleteFromTitle.id]: deleteFromTitle };\n            }   \n        default:\n            return state;\n\n    }\n\n};","import { FETCH_VERSIONS, CREATE_VERSION, EDIT_VERSION, DELETE_VERSION, CREATE_BOUNCE, DELETE_BOUNCE } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_VERSIONS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_VERSION:\n            return { ...state, [action.payload.version.id]: action.payload.version };\n        case EDIT_VERSION:\n            return { ...state, [action.payload.version.id]: action.payload.version };\n        case DELETE_VERSION:\n            delete state[action.payload.version.id];\n            return { ...state };\n        case CREATE_BOUNCE:\n            const addToVersion = state[action.payload.version];\n            addToVersion.bounces.push(action.payload.bounce.id);\n            return { ...state, [addToVersion.id]: addToVersion};\n        case DELETE_BOUNCE:\n            const deleteFromVersion = state[action.payload.version];\n            if (deleteFromVersion) {\n                const newBounceList = deleteFromVersion.bounces.filter(id => id !== action.payload.bounce.id);\n                deleteFromVersion.bounces = newBounceList;\n                return { ...state, [deleteFromVersion.id]: deleteFromVersion };\n            }\n        default:\n            return state;\n\n    }\n\n};","import {\n  FETCH_BOUNCES,\n  CREATE_BOUNCE,\n  EDIT_BOUNCE,\n  DELETE_BOUNCE,\n} from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case FETCH_BOUNCES:\n      return { ...state, ..._.mapKeys(action.payload, 'id') };\n    case CREATE_BOUNCE:\n      return { ...state, [action.payload.bounce.id]: action.payload.bounce };\n    case EDIT_BOUNCE:\n      return { ...state, [action.payload.id]: action.payload };\n    case DELETE_BOUNCE:\n      delete state[action.payload.bounce.id];\n      return { ...state };\n    default:\n      return state;\n  }\n};\n","import { FETCH_PLAYLISTS, FETCH_PLAYLIST, CREATE_PLAYLIST, EDIT_PLAYLIST, DELETE_PLAYLIST, CREATE_PLAYLISTSONG, DELETE_PLAYLISTSONG } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_PLAYLISTS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case FETCH_PLAYLIST:\n            return { ...state, [action.payload.id]: action.payload };\n        case CREATE_PLAYLIST:\n            return { ...state, [action.payload.id]: action.payload };\n        case EDIT_PLAYLIST:\n            const oldPosition = state[action.payload.id]['position'];\n            const newPosition = action.payload.position;\n            let changedPositions = {};\n            if (oldPosition > newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position >= newPosition && item.position < oldPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos + 1};\n                    }\n                }\n            }\n            if (oldPosition < newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position > oldPosition && item.position <= newPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos - 1};\n                    }\n                }\n            }\n            return { ...state, [action.payload.id]: action.payload, ...changedPositions };\n        case DELETE_PLAYLIST:\n            delete state.currentBand;\n            const changePosition = Object.values(state).filter(p => p.position > action.payload.position);\n            changePosition.forEach((playlist) => {\n                playlist.position = playlist.position - 1;\n            });\n            delete state[action.payload.id]\n            return { ...state, ..._.mapKeys(changePosition, 'id')};\n        case CREATE_PLAYLISTSONG:\n            const addToPlaylist = state[action.payload.playlist];\n            addToPlaylist.songs.push(action.payload.playlistsong.id);\n            return { ...state, [addToPlaylist.id]: addToPlaylist};\n        case DELETE_PLAYLISTSONG:\n            const deleteFromPlaylist = state[action.payload.playlist];\n            if (deleteFromPlaylist) {\n                const newSongList = deleteFromPlaylist.songs.filter(id => id !== action.payload.playlistsong.id);\n                deleteFromPlaylist.songs = newSongList;\n                return { ...state, [deleteFromPlaylist.id]: deleteFromPlaylist };\n            }\n        default:\n            return state;\n\n    }\n\n};","import { FETCH_PLAYLISTSONGS, CREATE_PLAYLISTSONG, EDIT_PLAYLISTSONG, DELETE_PLAYLISTSONG, DELETE_VERSION, DELETE_BOUNCE } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_PLAYLISTSONGS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_PLAYLISTSONG:\n            return { ...state, [action.payload.playlistsong.id]: action.payload.playlistsong };\n        case EDIT_PLAYLISTSONG:\n            const oldPosition = state[action.payload.playlistsong.id]['position'];\n            const newPosition = action.payload.playlistsong.position;\n            let changedPositions = {};\n            \n            if (oldPosition > newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position >= newPosition && item.position < oldPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos + 1};\n                    }\n                }\n            }\n            if (oldPosition < newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position > oldPosition && item.position <= newPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos - 1};\n                    }\n                }\n            }\n            \n            return { ...state, [action.payload.playlistsong.id]: action.payload.playlistsong, ...changedPositions };\n        case DELETE_PLAYLISTSONG:\n            const changePosition = Object.values(state).filter(p => p.position > action.payload.playlistsong.position);\n            changePosition.forEach((song) => {\n                song.position = song.position - 1;\n            });\n            delete state[action.payload.playlistsong.id];\n            return { ...state };\n        case DELETE_VERSION:\n            for (const id in state) {\n                if (state[id].version === action.payload.version.id) {\n                    state[id].version = null;\n                    state[id].bounce = null;\n                }\n            }\n            return { ...state };\n        case DELETE_BOUNCE:\n            for (const id in state) {\n                if (state[id].bounce === action.payload.bounce.id) {\n                    state[id].bounce = null;\n                }\n            }\n            return { ...state };\n        default:\n            return state;\n\n    }\n\n};","import {\n  FETCH_BAND,\n  FETCH_BANDS,\n  EDIT_BAND,\n  DELETE_BAND,\n  CREATE_BAND,\n  CREATE_TIER,\n  DELETE_TIER,\n  CREATE_PLAYLIST,\n  DELETE_PLAYLIST,\n  SIGN_OUT,\n  UPLOAD_STARTED,\n  CREATE_BOUNCE,\n} from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case FETCH_BAND:\n      return {\n        ...state,\n        [action.payload.id]: action.payload,\n        currentBand: action.payload,\n      };\n    case FETCH_BANDS:\n      return { ...state, ..._.mapKeys(action.payload, 'id') };\n    case CREATE_BAND:\n      return { ...state, [action.payload.id]: action.payload };\n    case EDIT_BAND:\n      return { ...state, [action.payload.id]: action.payload };\n    case DELETE_BAND:\n      delete state[action.payload.id];\n      return { ...state };\n    case CREATE_TIER:\n      const { currentBand } = state;\n      currentBand.tiers.push(action.payload.id);\n      return { ...state, [currentBand.id]: currentBand, currentBand };\n    case DELETE_TIER:\n      const band = state.currentBand;\n      const newTiers = band.tiers.filter((id) => id !== action.payload.id);\n      band.tiers = newTiers;\n      return { ...state, [band.id]: band, currentBand: band };\n    case CREATE_PLAYLIST:\n      const currentBandP = state.currentBand;\n      currentBandP.playlists.push(action.payload.id);\n      return {\n        ...state,\n        [currentBandP.id]: currentBandP,\n        currentBand: currentBandP,\n      };\n    case DELETE_PLAYLIST:\n      const bandP = state.currentBand;\n      const newPlaylists = bandP.playlists.filter(\n        (id) => id !== action.payload.id\n      );\n      bandP.playlists = newPlaylists;\n      return { ...state, [bandP.id]: bandP, currentBand: bandP };\n    case SIGN_OUT:\n      return _.omit(state, state.currentBand);\n    case UPLOAD_STARTED:\n      return { ...state, uploadStarted: true };\n    case CREATE_BOUNCE:\n      return { ...state, uploadStarted: false };\n    default:\n      return state;\n  }\n};\n","import { ERROR } from '../actions/types';\n\n\nexport default (state = {}, action) => {\n    switch (action.type) {\n        case ERROR:\n            return { error: action.payload }\n        default:\n            return state;\n    }\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport reduxThunk from 'redux-thunk';\n\n\nimport App from './components/App';\nimport reducers from './reducers';\n\n\n\n\nconst initialState = {};\n\nconst token = localStorage.getItem('token');\n\nif (token) {\n    initialState.auth = { isSignedIn: true };\n}\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n    reducers,\n    initialState,\n    composeEnhancers(applyMiddleware(reduxThunk))\n);\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.querySelector('#root')\n);\n\n\n"],"sourceRoot":""}