{"version":3,"sources":["recorder/lib/index.js","recorder/lib/recorder.js","actions/types.js","actions/audio.js","actions/errors.js","apis/greenhouse.js","history.js","actions/auth.js","actions/bands.js","actions/titles.js","actions/bounces.js","actions/playlistsongs.js","actions/tiers.js","actions/versions.js","components/layout/Error.js","components/reusable/AddButton.js","components/reusable/Modal.js","components/reusable/DeleteButton.js","components/reusable/requireAuth.js","components/reusable/DetailBox.js","components/bounces/Bounce.js","components/versions/AddVersion.js","components/versions/Version.js","components/titles/PlayContainer.js","components/titles/Title.js","components/titles/AddTitle.js","components/tiers/Tier.js","components/playlistsongs/PlaylistSong.js","components/playlists/Playlist.js","actions/playlists.js","components/tiers/AddTier.js","components/layout/Main.js","components/layout/AudioDisplay.js","components/layout/Header.js","components/user/User.js","components/user/UserForm.js","components/auth/SignIn.js","components/auth/SignUp.js","components/pages/Home.js","components/pages/Help.js","components/recording/AddRecordingSelector.js","components/recording/AddRecording.js","components/recording/Timer.js","components/recording/DeviceControl.js","components/recording/Recorder.js","actions/recordings.js","components/recording/Waveform.js","components/recording/Playhead.js","components/recording/Editor.js","components/App.js","actions/users.js","reducers/authReducer.js","reducers/audioReducer.js","reducers/recordingReducer.js","reducers/index.js","reducers/tierReducer.js","reducers/titleReducer.js","reducers/versionReducer.js","reducers/bounceReducer.js","reducers/playlistReducer.js","reducers/playlistSongReducer.js","reducers/bandReducer.js","reducers/errorReducer.js","index.js"],"names":["module","exports","require","Recorder","Object","defineProperty","value","undefined","obj","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_inlineWorker","_inlineWorker2","__esModule","default","source","cfg","_this","this","instance","TypeError","_classCallCheck","config","bufferLen","numChannels","mimeType","recording","callbacks","getBuffer","exportWAV","assign","context","node","createScriptProcessor","createJavaScriptNode","call","onaudioprocess","e","buffer","channel","push","inputBuffer","getChannelData","worker","postMessage","command","connect","destination","recLength","recBuffers","sampleRate","initBuffers","mergeBuffers","result","Float32Array","offset","set","writeString","view","string","setUint8","charCodeAt","onmessage","data","record","type","buffers","interleaved","inputL","inputR","index","inputIndex","interleave","dataview","samples","ArrayBuffer","DataView","setUint32","setUint16","output","input","s","Math","max","min","setInt16","floatTo16BitPCM","encodeWAV","audioBlob","Blob","cb","pop","callback","Error","blob","filename","url","window","URL","webkitURL","createObjectURL","link","document","createElement","href","download","click","createEvent","initEvent","dispatchEvent","SIGN_IN","SIGN_OUT","ERROR","FETCH_TIERS","FETCH_PLAYLISTSONGS","FETCH_PLAYLIST","FETCH_PLAYLISTS","FETCH_BAND","FETCH_BANDS","FETCH_TITLES","FETCH_VERSIONS","FETCH_BOUNCES","FETCH_RECORDING","CREATE_TIER","CREATE_PLAYLISTSONG","CREATE_TITLE","CREATE_PLAYLIST","CREATE_VERSION","CREATE_BOUNCE","CREATE_BAND","CREATE_RECORDING","COMBINE_RECORDINGS","UPLOAD_STARTED","UPLOAD_FAILURE","EDIT_TIER","EDIT_PLAYLIST","EDIT_PLAYLISTSONG","EDIT_TITLE","EDIT_VERSION","EDIT_BOUNCE","EDIT_BAND","DELETE_TIER","DELETE_PLAYLIST","DELETE_PLAYLISTSONG","DELETE_TITLE","DELETE_VERSION","DELETE_BOUNCE","DELETE_BAND","CLEAR_RECORDINGS","DELETE_RECORDING","PLAY_AUDIO","PAUSE_AUDIO","QUEUE_SONGS","NEXT_SONG","CHANGE_VOLUME","INITIALIZE_AUDIO","ORDER_TIER","SELECT_VERSION","SELECT_BOUNCE","playAudio","queueSongs","song","dispatch","songObject","title","version","name","date","bounce","duration","audio","id","payload","parent","tier","errorHandler","err","message","response","error","console","log","setTimeout","throwError","axios","create","interceptors","request","use","token","localStorage","getItem","headers","Authorization","Promise","reject","createBrowserHistory","signOut","removeItem","history","fetchBand","bandName","a","greenhouse","get","fetchBands","fetchTitles","tierId","deleteTitle","titleId","getState","currentBand","bands","post","versions","forEach","versionId","deleteVersion","playlists","values","playlistSongs","filter","pls","playlist","find","pl","songs","includes","deletePlaylistSong","selectVersion","selectBounce","fetchBounces","createBounce","formValues","parentVersion","bounces","latest","file","reader","FileReader","onload","event","AudioContext","webkitAudioContext","decodeAudioData","parseInt","formObject","formData","FormData","append","bounceList","map","oldLatest","b","editBounce","_","pick","onerror","readAsArrayBuffer","bounceId","thisBounce","patch","deleteBounce","remainingBounces","newLatest","createPlaylistSong","playlistsong","playlistId","playlistSongId","fetchTiers","bandId","createTier","deleteTier","trackList","fetchVersions","createVersion","parentTitle","titles","current","versionList","oldCurrent","v","editVersion","thisVersion","remainingVersions","newCurrent","state","useEffect","listen","location","className","onClick","AddButton","boxVisible","selectedOption","blockSpaceBarPress","stopPropagation","bodyClick","ref","contains","setState","showOptions","field","options","option","display","onDrop","files","onChange","inputClass","errors","meta","touched","autoFocus","required","showFields","fields","comp","label","Field","component","validate","submitForm","onSubmit","reset","showBox","addClass","handleSubmit","React","createRef","prevProps","prevState","addEventListener","capture","removeEventListener","src","image","Component","reduxForm","form","Modal","querySelector","classList","add","remove","ReactDOM","createPortal","onDismiss","content","actions","DeleteButton","displayName","useState","visible","setVisible","ChildComponent","ComposedComponent","authorized","handleUpdate","checkAuth","user","auth","DetailBox","selectedItem","itemList","itemType","displayItem","setSelected","renderAddButton","renderEditButton","renderDeleteButton","playButton","dropdownVisible","setDropdownVisible","dropdownRef","useRef","onBodyClick","count","currentTag","renderItemList","notes","comments","parentType","renderDetail","requireAuth","selectedBounce","setSelectedBounce","uploadActive","setUploadActive","displayDate","moment","utc","format","onEditSubmit","sort","onAddSubmit","initialValues","enableReinitialize","band","selectedVersion","setSelectedVersion","setBounceList","to","pathname","renderRecordLink","renderArrow","renderBounces","queuePlaylistSongs","position","baseUrl","loaded","setLoaded","time","minutes","floor","seconds","displayTime","onLoad","encodeURIComponent","tiers","editTitle","changeTier","move","currentTier","new","old","getTime","findLatest","expand","setExpand","setVersionList","setSong","versionToSelect","versionIds","bounceToSelect","arrow","currentSong","currentClass","open","renderAudioEditLink","renderPlayContainer","playlistOptions","tierOptions","t","unshift","onAddToPlaylist","renderButtons","createTitle","editTier","setOrder","orderBy","titlesToRender","setTitlesToRender","times","setTimes","orderedTitles","Date","track","total","reduce","prev","cur","renderTotalTime","tierList","titleList","renderTitles","editPlaylistSong","newSong","doUpdate","playSong","setPlaySong","updateToCurrent","currentVersion","currentBounce","otherSongs","otherVersions","otherBounces","editOptions","fetchPlaylistSongs","deletePlaylist","editPlaylist","playlistList","setPlaylistList","songsToRender","setSongsToRender","setDoUpdate","playlistsToShow","showUpdatePlaylistCheckbox","fetchPlaylists","createPlaylist","setTierList","playbarActive","renderTierAddButton","renderPlaylistAddButton","AudioDisplay","volume","sliderPosition","updateSlider","currentTime","formatTime","isNaN","setSpaceBarToPlay","code","preventDefault","pause","play","audioError","playOnLoad","prevSong","nextSong","pauseAudio","onSliderChange","onPauseButton","Audio","scrolled","scroll","scrollX","scrollY","wrapUrl","initializeAudio","onInput","allTitles","indexOf","allSongs","currentUser","changeVolume","match","menu","params","clickToDismiss","Main","createBand","editBand","deleteBand","username","bandList","renderBands","UserForm","renderInput","autoComplete","defaultValue","isSignedIn","signIn","setItem","signUp","Home","Help","AddRecordingSelector","stateList","onSelect","addButton","item","disabled","selected","uploadStarted","onSuccess","defaultItem","selectedTitle","setSelectedTitle","selectedTier","setSelectedTier","toISOString","substring","selectedDate","setSelectedDate","uploadSuccess","setUploadSuccess","uploadLoading","setUploadLoading","setTitleList","useLocation","list","submitActive","File","lastModified","Timer","isRecording","timer","setTimer","interval","setInterval","clearInterval","DeviceControl","inputSource","setInputSource","devices","setDevices","getDevices","navigator","mediaDevices","ondevicechange","enumerateDevices","inputDevices","device","kind","deviceId","deviceList","blank","micSelect","recordings","createRecording","recordingList","JSON","parse","stringify","fetchRecording","recordingId","clearRecordings","deleteRecording","editedList","recId","combineRecordings","responseType","setIsRecording","setError","readyToSave","setReadyToSave","mediaRecorder","useParams","getUserMedia","stream","createMediaStreamSource","recorderJs","onRecord","stopRecording","startRecording","stop","clear","onCreateBounce","combinedRecording","controls","renderDisplay","defaults","baseURL","renderList","Waveform","canvas","audioContext","cache","getContext","clearRect","width","height","size","drawWaveform","renderWaveform","arrayBuffer","audio_context","array_buffer","scale","WaveformData","createFromAudio","waveform","ctx","lengthMultiplier","scaleY","amplitude","beginPath","x","val","max_sample","lineTo","min_sample","closePath","stroke","fill","Playhead","addToSongList","playheadPosition","setPlayheadPosition","isPlaying","setIsPlaying","editedAudio","setEditedAudio","zoomIn","setZoomIn","start","setStart","end","setEnd","player","onended","onplay","onpause","ontimeupdate","paused","blobStart","blobEnd","edited","slice","onStartClick","onEndClick","renderAudioTime","renderSelectSectionButton","readOnly","Editor","setAudio","songList","setSongList","getMonth","getDate","getFullYear","renderDetails","signedIn","fetchUser","errClass","path","exact","SignIn","SignUp","render","routeProps","Header","INITIAL_STATE","initialState","appReducer","combineReducers","formReducer","action","mapKeys","oldPosition","newPosition","changedPositions","pos","changePosition","omit","addToTier","newTier","oldTier","deleteFromTier","newTrackList","oldTitle","newTitle","versionTitle","bounceTitle","addToTitle","deleteFromTitle","newVersionList","addToVersion","deleteFromVersion","newBounceList","p","addToPlaylist","deleteFromPlaylist","newSongList","newTiers","currentBandP","bandP","newPlaylists","thisList","newList","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","clearedState","applyMiddleware","reduxThunk"],"mappings":"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","file":"static/js/main.d31ae870.chunk.js","sourcesContent":["\"use strict\";\n\nmodule.exports = require(\"./recorder\").Recorder;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Recorder = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _inlineWorker = require('inline-worker');\n\nvar _inlineWorker2 = _interopRequireDefault(_inlineWorker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Recorder = exports.Recorder = function () {\n    function Recorder(source, cfg) {\n        var _this = this;\n\n        _classCallCheck(this, Recorder);\n\n        this.config = {\n            bufferLen: 4096,\n            numChannels: 2,\n            mimeType: 'audio/wav'\n        };\n        this.recording = false;\n        this.callbacks = {\n            getBuffer: [],\n            exportWAV: []\n        };\n\n        Object.assign(this.config, cfg);\n        this.context = source.context;\n        this.node = (this.context.createScriptProcessor || this.context.createJavaScriptNode).call(this.context, this.config.bufferLen, this.config.numChannels, this.config.numChannels);\n\n        this.node.onaudioprocess = function (e) {\n            if (!_this.recording) return;\n\n            var buffer = [];\n            for (var channel = 0; channel < _this.config.numChannels; channel++) {\n                buffer.push(e.inputBuffer.getChannelData(channel));\n            }\n            _this.worker.postMessage({\n                command: 'record',\n                buffer: buffer\n            });\n        };\n\n        source.connect(this.node);\n        this.node.connect(this.context.destination); //this should not be necessary\n\n        var self = {};\n        this.worker = new _inlineWorker2.default(function () {\n            var recLength = 0,\n                recBuffers = [],\n                sampleRate = void 0,\n                numChannels = void 0;\n\n            this.onmessage = function (e) {\n                switch (e.data.command) {\n                    case 'init':\n                        init(e.data.config);\n                        break;\n                    case 'record':\n                        record(e.data.buffer);\n                        break;\n                    case 'exportWAV':\n                        exportWAV(e.data.type);\n                        break;\n                    case 'getBuffer':\n                        getBuffer();\n                        break;\n                    case 'clear':\n                        clear();\n                        break;\n                }\n            };\n\n            function init(config) {\n                sampleRate = config.sampleRate;\n                numChannels = config.numChannels;\n                initBuffers();\n            }\n\n            function record(inputBuffer) {\n                for (var channel = 0; channel < numChannels; channel++) {\n                    recBuffers[channel].push(inputBuffer[channel]);\n                }\n                recLength += inputBuffer[0].length;\n            }\n\n            function exportWAV(type) {\n                var buffers = [];\n                for (var channel = 0; channel < numChannels; channel++) {\n                    buffers.push(mergeBuffers(recBuffers[channel], recLength));\n                }\n                var interleaved = void 0;\n                if (numChannels === 2) {\n                    interleaved = interleave(buffers[0], buffers[1]);\n                } else {\n                    interleaved = buffers[0];\n                }\n                var dataview = encodeWAV(interleaved);\n                var audioBlob = new Blob([dataview], { type: type });\n\n                this.postMessage({ command: 'exportWAV', data: audioBlob });\n            }\n\n            function getBuffer() {\n                var buffers = [];\n                for (var channel = 0; channel < numChannels; channel++) {\n                    buffers.push(mergeBuffers(recBuffers[channel], recLength));\n                }\n                this.postMessage({ command: 'getBuffer', data: buffers });\n            }\n\n            function clear() {\n                recLength = 0;\n                recBuffers = [];\n                initBuffers();\n            }\n\n            function initBuffers() {\n                for (var channel = 0; channel < numChannels; channel++) {\n                    recBuffers[channel] = [];\n                }\n            }\n\n            function mergeBuffers(recBuffers, recLength) {\n                var result = new Float32Array(recLength);\n                var offset = 0;\n                for (var i = 0; i < recBuffers.length; i++) {\n                    result.set(recBuffers[i], offset);\n                    offset += recBuffers[i].length;\n                }\n                return result;\n            }\n\n            function interleave(inputL, inputR) {\n                var length = inputL.length + inputR.length;\n                var result = new Float32Array(length);\n\n                var index = 0,\n                    inputIndex = 0;\n\n                while (index < length) {\n                    result[index++] = inputL[inputIndex];\n                    result[index++] = inputR[inputIndex];\n                    inputIndex++;\n                }\n                return result;\n            }\n\n            function floatTo16BitPCM(output, offset, input) {\n                for (var i = 0; i < input.length; i++, offset += 2) {\n                    var s = Math.max(-1, Math.min(1, input[i]));\n                    output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);\n                }\n            }\n\n            function writeString(view, offset, string) {\n                for (var i = 0; i < string.length; i++) {\n                    view.setUint8(offset + i, string.charCodeAt(i));\n                }\n            }\n\n            function encodeWAV(samples) {\n                var buffer = new ArrayBuffer(44 + samples.length * 2);\n                var view = new DataView(buffer);\n\n                /* RIFF identifier */\n                writeString(view, 0, 'RIFF');\n                /* RIFF chunk length */\n                view.setUint32(4, 36 + samples.length * 2, true);\n                /* RIFF type */\n                writeString(view, 8, 'WAVE');\n                /* format chunk identifier */\n                writeString(view, 12, 'fmt ');\n                /* format chunk length */\n                view.setUint32(16, 16, true);\n                /* sample format (raw) */\n                view.setUint16(20, 1, true);\n                /* channel count */\n                view.setUint16(22, numChannels, true);\n                /* sample rate */\n                view.setUint32(24, sampleRate, true);\n                /* byte rate (sample rate * block align) */\n                view.setUint32(28, sampleRate * 4, true);\n                /* block align (channel count * bytes per sample) */\n                view.setUint16(32, numChannels * 2, true);\n                /* bits per sample */\n                view.setUint16(34, 16, true);\n                /* data chunk identifier */\n                writeString(view, 36, 'data');\n                /* data chunk length */\n                view.setUint32(40, samples.length * 2, true);\n\n                floatTo16BitPCM(view, 44, samples);\n\n                return view;\n            }\n        }, self);\n\n        this.worker.postMessage({\n            command: 'init',\n            config: {\n                sampleRate: this.context.sampleRate,\n                numChannels: this.config.numChannels\n            }\n        });\n\n        this.worker.onmessage = function (e) {\n            var cb = _this.callbacks[e.data.command].pop();\n            if (typeof cb == 'function') {\n                cb(e.data.data);\n            }\n        };\n    }\n\n    _createClass(Recorder, [{\n        key: 'record',\n        value: function record() {\n            this.recording = true;\n        }\n    }, {\n        key: 'stop',\n        value: function stop() {\n            this.recording = false;\n        }\n    }, {\n        key: 'clear',\n        value: function clear() {\n            this.worker.postMessage({ command: 'clear' });\n        }\n    }, {\n        key: 'getBuffer',\n        value: function getBuffer(cb) {\n            cb = cb || this.config.callback;\n            if (!cb) throw new Error('Callback not set');\n\n            this.callbacks.getBuffer.push(cb);\n\n            this.worker.postMessage({ command: 'getBuffer' });\n        }\n    }, {\n        key: 'exportWAV',\n        value: function exportWAV(cb, mimeType) {\n            mimeType = mimeType || this.config.mimeType;\n            cb = cb || this.config.callback;\n            if (!cb) throw new Error('Callback not set');\n\n            this.callbacks.exportWAV.push(cb);\n\n            this.worker.postMessage({\n                command: 'exportWAV',\n                type: mimeType\n            });\n        }\n    }], [{\n        key: 'forceDownload',\n        value: function forceDownload(blob, filename) {\n            var url = (window.URL || window.webkitURL).createObjectURL(blob);\n            var link = window.document.createElement('a');\n            link.href = url;\n            link.download = filename || 'output.wav';\n            var click = document.createEvent(\"Event\");\n            click.initEvent(\"click\", true, true);\n            link.dispatchEvent(click);\n        }\n    }]);\n\n    return Recorder;\n}();\n\nexports.default = Recorder;","export const SIGN_IN = 'SIGN_IN';\nexport const SIGN_OUT = 'SIGN_OUT';\n\nexport const ERROR = 'ERROR';\n\nexport const FETCH_TIERS = 'FETCH_TIERS';\nexport const FETCH_PLAYLISTSONGS = 'FETCH_PLAYLISTSONGS';\nexport const FETCH_PLAYLIST = 'FETCH_PLAYLIST';\nexport const FETCH_PLAYLISTS = 'FETCH_PLAYLISTS';\nexport const FETCH_BAND = 'FETCH_BAND';\nexport const FETCH_BANDS = 'FETCH_BANDS';\nexport const FETCH_TITLES = 'FETCH_TITLES';\nexport const FETCH_VERSIONS = 'FETCH_VERSIONS';\nexport const FETCH_BOUNCES = 'FETCH_BOUNCES';\nexport const FETCH_RECORDING = 'FETCH_RECORDING';\n\nexport const FETCH_TITLE = 'FETCH_TITLE';\nexport const FETCH_VERSION = 'FETCH_VERSION';\nexport const FETCH_BOUNCE = 'FETCH_BOUNCE';\n\nexport const CREATE_TIER = 'CREATE_TIER';\nexport const CREATE_PLAYLISTSONG = 'CREATE_PLAYLISTSONG';\nexport const CREATE_TITLE = 'CREATE_TITLE';\nexport const CREATE_PLAYLIST = 'CREATE_PLAYLIST';\nexport const CREATE_VERSION = 'CREATE_VERSION';\nexport const CREATE_BOUNCE = 'CREATE_BOUNCE';\nexport const CREATE_BAND = 'CREATE_BAND';\nexport const CREATE_RECORDING = 'CREATE_RECORDING';\nexport const COMBINE_RECORDINGS = 'COMBINE_RECORDINGS';\n\nexport const UPLOAD_STARTED = 'UPLOAD_STARTED';\nexport const UPLOAD_FAILURE = 'UPLOAD_FAILURE';\n\nexport const EDIT_TIER = 'EDIT_TIER';\nexport const EDIT_PLAYLIST = 'EDIT_PLAYLIST';\nexport const EDIT_PLAYLISTSONG = 'EDIT_PLAYLISTSONG';\nexport const EDIT_TITLE = 'EDIT_TITLE';\nexport const EDIT_VERSION = 'EDIT_VERSION';\nexport const EDIT_BOUNCE = 'EDIT_BOUNCE';\nexport const EDIT_BAND = 'EDIT_BAND';\n\nexport const DELETE_TIER = 'DELETE_TIER';\nexport const DELETE_PLAYLIST = 'DELETE_PLAYLIST';\nexport const DELETE_PLAYLISTSONG = 'DELETE_PLAYLISTSONG';\nexport const DELETE_TITLE = 'DELETE_TITLE';\nexport const DELETE_VERSION = 'DELETE_VERSION';\nexport const DELETE_BOUNCE = 'DELETE_BOUNCE';\nexport const DELETE_BAND = 'DELETE_BAND';\nexport const CLEAR_RECORDINGS = 'CLEAR_RECORDINGS';\nexport const DELETE_RECORDING = 'DELETE_RECORDING';\n\nexport const PLAY_AUDIO = 'PLAY_AUDIO';\nexport const PAUSE_AUDIO = 'PAUSE_AUDIO';\nexport const QUEUE_SONGS = 'QUEUE_SONGS';\nexport const NEXT_SONG = 'NEXT_SONG';\nexport const CHANGE_VOLUME = 'CHANGE_VOLUME';\nexport const INITIALIZE_AUDIO = 'INITIALIZE_AUDIO';\nexport const ORDER_TIER = 'ORDER_TIER';\n\nexport const SELECT_VERSION = 'SELECT_VERSION';\nexport const SELECT_BOUNCE = 'SELECT_BOUNCE';\n","import {\n  PLAY_AUDIO,\n  PAUSE_AUDIO,\n  QUEUE_SONGS,\n  NEXT_SONG,\n  INITIALIZE_AUDIO,\n  CHANGE_VOLUME,\n} from './types';\n\nexport const playAudio = () => {\n  return { type: PLAY_AUDIO };\n};\n\nexport const pauseAudio = () => {\n  return { type: PAUSE_AUDIO };\n};\n\nexport const queueSongs = (song) => (dispatch) => {\n  const songObject = {\n    title: song.title,\n    version: song.version.name,\n    date: song.bounce.date,\n    duration: song.bounce.duration,\n    audio: song.bounce.id,\n  };\n\n  dispatch({\n    type: QUEUE_SONGS,\n    payload: { song: songObject, parent: song.tier },\n  });\n};\n\nexport const queuePlaylistSongs = (song) => (dispatch, getState) => {\n  // const version = getState().versions[song.version];\n  // const bounce = getState().bounces[song.bounce];\n  // const title = getState().titles[song.title];\n\n  const songObject = {\n    title: song.title,\n    version: song.version.name,\n    date: song.bounce.date,\n    duration: song.bounce.duration,\n    audio: song.bounce.id,\n    position: song.position,\n  };\n\n  dispatch({\n    type: QUEUE_SONGS,\n    payload: { song: songObject, parent: song.playlist },\n  });\n};\n\nexport const nextSong = () => (dispatch, getState) => {\n  const { parent, currentSong } = getState().audio;\n  if (parent.trackList) {\n    let allTitles;\n\n    if (parent.orderBy === 'date') {\n      allTitles = parent.trackList\n        .map((id) => getState().titles[id])\n        .sort((a, b) => {\n          if (a.selectedBounce && b.selectedBounce) {\n            if (\n              new Date(a.selectedBounce.date) > new Date(b.selectedBounce.date)\n            ) {\n              return -1;\n            } else {\n              return 1;\n            }\n          } else if (a.selectedBounce) {\n            return -1;\n          } else if (b.selectedBounce) {\n            return 1;\n          }\n        });\n    }\n\n    if (parent.orderBy === 'name') {\n      allTitles = parent.trackList\n        .map((id) => getState().titles[id])\n        .sort((a, b) => {\n          return a.title < b.title ? -1 : 1;\n        });\n    }\n\n    const song = allTitles[allTitles.indexOf(currentSong.title) + 1];\n\n    if (song && song.selectedVersion && song.selectedBounce) {\n      const version = getState().versions[song.selectedVersion.id];\n      const bounce = getState().bounces[song.selectedBounce.id];\n\n      const songObject = {\n        title: song,\n        version: version.name,\n        date: bounce.date,\n        duration: bounce.duration,\n        audio: bounce.id,\n      };\n\n      dispatch({ type: NEXT_SONG, payload: songObject });\n    } else {\n      dispatch({ type: INITIALIZE_AUDIO });\n    }\n  }\n  if (parent.songs) {\n    const allSongs = parent.songs\n      .map((id) => getState().playlistSongs[id])\n      .sort((a, b) => (a.position < b.position ? -1 : 1));\n\n    let song;\n    let index = currentSong.position;\n\n    while (index < allSongs.length) {\n      if (allSongs[index].bounce !== null) {\n        song = allSongs[index];\n        break;\n      }\n      index++;\n    }\n\n    if (!song) {\n      return dispatch({ type: INITIALIZE_AUDIO });\n    }\n\n    const version = getState().versions[song.version];\n    const bounce = getState().bounces[song.bounce];\n    const title = getState().titles[song.title];\n\n    const songObject = {\n      title: title,\n      version: version.name,\n      date: bounce.date,\n      duration: bounce.duration,\n      audio: bounce.id,\n      position: song.position,\n    };\n    dispatch({ type: NEXT_SONG, payload: songObject });\n  }\n};\n\nexport const prevSong = () => (dispatch, getState) => {\n  const { parent, currentSong } = getState().audio;\n  if (parent.trackList) {\n    let allTitles;\n    if (parent.orderBy === 'date') {\n      allTitles = parent.trackList\n        .map((id) => getState().titles[id])\n        .sort((a, b) => {\n          if (a.selectedBounce && b.selectedBounce) {\n            if (\n              new Date(a.selectedBounce.date) > new Date(b.selectedBounce.date)\n            ) {\n              return -1;\n            } else {\n              return 1;\n            }\n          } else if (a.selectedBounce) {\n            return -1;\n          } else if (b.selectedBounce) {\n            return 1;\n          }\n        });\n    }\n\n    if (parent.orderBy === 'name') {\n      allTitles = parent.trackList\n        .map((id) => getState().titles[id])\n        .sort((a, b) => {\n          return a.title < b.title ? -1 : 1;\n        });\n    }\n\n    const song = allTitles[allTitles.indexOf(currentSong.title) - 1];\n\n    if (song && song.selectedVersion && song.selectedBounce) {\n      const version = getState().versions[song.selectedVersion.id];\n      const bounce = getState().bounces[song.selectedBounce.id];\n\n      const songObject = {\n        title: song,\n        version: version.name,\n        date: bounce.date,\n        duration: bounce.duration,\n        audio: bounce.id,\n      };\n\n      dispatch({ type: NEXT_SONG, payload: songObject });\n    }\n  }\n\n  if (parent.songs) {\n    const allSongs = parent.songs\n      .map((id) => getState().playlistSongs[id])\n      .sort((a, b) => (a.position < b.position ? -1 : 1));\n\n    let song;\n    let index = currentSong.position - 2;\n\n    while (index < allSongs.length) {\n      if (allSongs[index].bounce !== null) {\n        song = allSongs[index];\n        break;\n      }\n      index = index - 1;\n    }\n\n    if (!song) {\n      return dispatch({ type: INITIALIZE_AUDIO });\n    }\n\n    const version = getState().versions[song.version];\n    const bounce = getState().bounces[song.bounce];\n    const title = getState().titles[song.title];\n\n    const songObject = {\n      title: title,\n      version: version.name,\n      date: bounce.date,\n      duration: bounce.duration,\n      audio: bounce.id,\n      position: song.position,\n    };\n    dispatch({ type: NEXT_SONG, payload: songObject });\n  }\n};\n\nexport const changeVolume = (value) => {\n  return { type: CHANGE_VOLUME, payload: value };\n};\n\nexport const initializeAudio = () => {\n  return { type: INITIALIZE_AUDIO };\n};\n","import { ERROR } from './types';\n\nexport const errorHandler = (err) => (dispatch) => {\n  let message;\n  if (err.response) {\n    message = err.response.data.error;\n  } else {\n    message = err.message;\n  }\n  console.log(err);\n  setTimeout(() => {\n    dispatch(throwError(null));\n  }, 10000);\n  dispatch({ type: ERROR, payload: message });\n};\n\nexport const throwError = (message) => {\n  return { type: ERROR, payload: message };\n};\n","import axios from 'axios';\n\nconst url = {};\n\nif (process.env.NODE_ENV === 'production') {\n    url.baseURL = 'https://exploring-the-space.com/api';\n} else {\n    url.baseURL = 'http://localhost:3001/api'\n}\n\nconst instance = axios.create(url);\n\ninstance.interceptors.request.use(\n    (config) => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            config.headers.Authorization = token;\n        }\n        return config;\n    },\n    (err) => {\n        return Promise.reject(err);\n    }\n);\n\n\n\nexport default instance;","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();","import { SIGN_IN, SIGN_OUT } from './types';\nimport { errorHandler } from './errors';\nimport greenhouse from '../apis/greenhouse';\nimport history from '../history';\n\nexport const signIn = (formValues) => async (dispatch) => {\n  try {\n    const response = await greenhouse.post('/signin', formValues);\n    localStorage.setItem('token', response.data.token);\n    dispatch({ type: SIGN_IN, payload: response.data.user });\n    history.push('/user');\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const signOut = () => {\n  localStorage.removeItem('token');\n  history.push('/');\n  return { type: SIGN_OUT };\n};\n\nexport const signUp = (formValues) => async (dispatch) => {\n  try {\n    const response = await greenhouse.post('/signup', formValues);\n    localStorage.setItem('token', response.data.token);\n    dispatch({ type: SIGN_IN, payload: response.data.user });\n    history.push('/user');\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n","import {\n  FETCH_BAND,\n  FETCH_BANDS,\n  CREATE_BAND,\n  EDIT_BAND,\n  DELETE_BAND,\n} from './types';\nimport { errorHandler } from './errors';\nimport greenhouse from '../apis/greenhouse';\nimport { deleteTier } from '.';\n\nexport const fetchBand = (bandName) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/bands/${bandName}`);\n    dispatch({ type: FETCH_BAND, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const fetchBands = () => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/bands`);\n    dispatch({ type: FETCH_BANDS, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createBand = (formValues) => async (dispatch) => {\n  try {\n    const response = await greenhouse.post('/bands', formValues);\n    dispatch({ type: CREATE_BAND, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const editBand = (formValues, bandId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.patch('/bands', {\n      ...formValues,\n      currentBand: bandId,\n    });\n    dispatch({ type: EDIT_BAND, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const deleteBand = (bandId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.post('/bands/delete', {\n      currentBand: bandId,\n    });\n    response.data.tiers.forEach((tierId) => {\n      dispatch(deleteTier(tierId, response.data.id));\n    });\n    dispatch({ type: DELETE_BAND, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n","import {\n  FETCH_TITLES,\n  EDIT_TITLE,\n  CREATE_TITLE,\n  DELETE_TITLE,\n  SELECT_BOUNCE,\n  SELECT_VERSION,\n} from './types';\nimport { errorHandler } from './errors';\nimport greenhouse from '../apis/greenhouse';\nimport { deleteVersion } from '.';\nimport { deletePlaylistSong } from '.';\n\nexport const fetchTitles = (tierId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/titles/${tierId}`);\n    dispatch({ type: FETCH_TITLES, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createTitle =\n  (formValues, tierId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n      const response = await greenhouse.post('/titles', {\n        ...formValues,\n        currentBand: currentBand.id,\n        tier: tierId,\n      });\n      dispatch({\n        type: CREATE_TITLE,\n        payload: { title: response.data, tier: tierId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const editTitle =\n  (formValues, titleId, tierId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      let changeTier = formValues.move;\n      const response = await greenhouse.patch(`/titles/${titleId}`, {\n        ...formValues,\n        currentTier: tierId,\n        currentBand: currentBand.id,\n      });\n      dispatch({\n        type: EDIT_TITLE,\n        payload: {\n          title: response.data,\n          tier: { new: changeTier, old: tierId },\n        },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const deleteTitle = (titleId, tierId) => async (dispatch, getState) => {\n  const { currentBand } = getState().bands;\n  try {\n    const response = await greenhouse.post('/titles/delete', {\n      titleId,\n      tierId,\n      currentBand: currentBand.id,\n    });\n    response.data.versions.forEach((versionId) => {\n      dispatch(deleteVersion(versionId, response.data.id));\n    });\n    const playlists = Object.values(getState().playlists);\n    const playlistSongs = Object.values(getState().playlistSongs).filter(\n      (pls) => pls.title === titleId\n    );\n    playlistSongs.forEach((pls) => {\n      const playlist = playlists.find((pl) => pl.songs.includes(pls.id));\n      dispatch(deletePlaylistSong(pls.id, playlist.id));\n    });\n    dispatch({\n      type: DELETE_TITLE,\n      payload: { title: response.data, tier: tierId },\n    });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const selectVersion = (version, titleId) => {\n  return { type: SELECT_VERSION, payload: { version, titleId } };\n};\n\nexport const selectBounce = (bounce, titleId) => {\n  return { type: SELECT_BOUNCE, payload: { bounce, titleId } };\n};\n","import _ from 'lodash';\n\nimport {\n  FETCH_BOUNCES,\n  CREATE_BOUNCE,\n  EDIT_BOUNCE,\n  DELETE_BOUNCE,\n  UPLOAD_FAILURE,\n  UPLOAD_STARTED,\n} from './types';\nimport { errorHandler } from './errors';\nimport { selectBounce } from './titles';\nimport greenhouse from '../apis/greenhouse';\n\nexport const fetchBounces = (versionId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/bounces/${versionId}`);\n    dispatch({ type: FETCH_BOUNCES, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createBounce =\n  (formValues, versionId) => async (dispatch, getState) => {\n    dispatch({ type: UPLOAD_STARTED });\n    try {\n      const { currentBand } = getState().bands;\n      const parentVersion = getState().versions[versionId];\n\n      if (!parentVersion.bounces.length) {\n        formValues.latest = true;\n      }\n\n      // if (formValues.file instanceof FileList) {\n      //   formValues.file = formValues.file[0];\n      // }\n\n      formValues.file = formValues.file[0];\n\n      // Create instance of FileReader\n      const reader = new FileReader();\n\n      // When the file has been succesfully read\n      reader.onload = (event) => {\n        // Create an instance of AudioContext\n        const audioContext = new (window.AudioContext ||\n          window.webkitAudioContext)();\n\n        // Asynchronously decode audio file data contained in an ArrayBuffer.\n        audioContext.decodeAudioData(event.target.result, async (buffer) => {\n          // Obtain the duration in seconds of the audio file (with milliseconds as well, a float value)\n          const duration = parseInt(buffer.duration);\n\n          const formObject = {\n            ...formValues,\n            currentBand: currentBand.id,\n            version: versionId,\n            duration,\n          };\n\n          const formData = new FormData();\n\n          for (let key in formObject) {\n            formData.append(key, formObject[key]);\n          }\n\n          const response = await greenhouse.post('/bounces', formData, {\n            headers: { 'Content-Type': 'multipart/form-data' },\n          });\n\n          if (response.data.latest) {\n            if (parentVersion.bounces.length) {\n              const bounceList = parentVersion.bounces.map(\n                (id) => getState().bounces[id]\n              );\n              const oldLatest = bounceList.find((b) => b.latest);\n              oldLatest.latest = false;\n              dispatch(\n                editBounce(\n                  _.pick(oldLatest, 'date', 'comments', 'latest'),\n                  oldLatest.id,\n                  versionId\n                )\n              );\n            }\n          }\n\n          // dispatch({ type: SELECT_BOUNCE, payload: { titleId, bounce: response.data } });\n          dispatch({\n            type: CREATE_BOUNCE,\n            payload: { bounce: response.data, version: versionId },\n          });\n        });\n      };\n\n      // In case the file couldn't be read\n      reader.onerror = (event) => {\n        console.error('An error ocurred reading the file: ', event);\n      };\n\n      // Read file as an ArrayBuffer, important !\n      reader.readAsArrayBuffer(formValues.file);\n    } catch (err) {\n      dispatch({ type: UPLOAD_FAILURE });\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const editBounce =\n  (formValues, bounceId, versionId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const thisBounce = getState().bounces[bounceId];\n      if (thisBounce.latest) {\n        formValues.latest = true;\n      }\n      if (formValues.file && formValues.file.length) {\n        formValues.file = formValues.file[0];\n\n        // Create instance of FileReader\n        const reader = new FileReader();\n\n        // When the file has been succesfully read\n        reader.onload = (event) => {\n          // Create an instance of AudioContext\n          const audioContext = new (window.AudioContext ||\n            window.webkitAudioContext)();\n\n          // Asynchronously decode audio file data contained in an ArrayBuffer.\n          audioContext.decodeAudioData(event.target.result, async (buffer) => {\n            // Obtain the duration in seconds of the audio file (with milliseconds as well, a float value)\n            const duration = parseInt(buffer.duration);\n\n            const formObject = {\n              ...formValues,\n              currentBand: currentBand.id,\n              duration,\n            };\n\n            const formData = new FormData();\n\n            for (let key in formObject) {\n              formData.append(key, formObject[key]);\n            }\n\n            const response = await greenhouse.patch(\n              `/bounces/${bounceId}`,\n              formData,\n              {\n                headers: { 'Content-Type': 'multipart/form-data' },\n              }\n            );\n\n            if (response.data.latest && !thisBounce.latest) {\n              const parentVersion = getState().versions[versionId];\n              const bounceList = parentVersion.bounces.map(\n                (id) => getState().bounces[id]\n              );\n              const oldLatest = bounceList.find((b) => b.latest);\n              oldLatest.latest = false;\n              dispatch(\n                editBounce(\n                  _.pick(oldLatest, 'date', 'comments', 'latest'),\n                  oldLatest.id,\n                  versionId\n                )\n              );\n            }\n\n            dispatch({ type: EDIT_BOUNCE, payload: response.data });\n          });\n        };\n\n        // In case the file couldn't be read\n        reader.onerror = (event) => {\n          console.error('An error ocurred reading the file: ', event);\n        };\n\n        // Read file as an ArrayBuffer, important !\n        reader.readAsArrayBuffer(formValues.file);\n      } else {\n        const response = await greenhouse.patch(`/bounces/${bounceId}`, {\n          ...formValues,\n          currentBand: currentBand.id,\n        });\n        if (response.data.latest && !thisBounce.latest) {\n          const parentVersion = getState().versions[versionId];\n          const bounceList = parentVersion.bounces.map(\n            (id) => getState().bounces[id]\n          );\n          const oldLatest = bounceList.find((b) => b.latest);\n          oldLatest.latest = false;\n          dispatch(\n            editBounce(\n              _.pick(oldLatest, 'date', 'comments', 'latest'),\n              oldLatest.id,\n              versionId\n            )\n          );\n        }\n\n        dispatch({ type: EDIT_BOUNCE, payload: response.data });\n      }\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const deleteBounce =\n  (bounceId, versionId, titleId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n      const response = await greenhouse.post('/bounces/delete', {\n        bounceId,\n        versionId,\n        currentBand: currentBand.id,\n      });\n      if (response.data.latest) {\n        const parentVersion = getState().versions[versionId];\n        if (parentVersion) {\n          const remainingBounces = parentVersion.bounces.filter(\n            (id) => id !== bounceId\n          );\n          if (remainingBounces.length) {\n            const newLatest =\n              getState().bounces[remainingBounces[remainingBounces.length - 1]];\n            newLatest.latest = true;\n            dispatch(selectBounce(newLatest.id, titleId));\n            dispatch(\n              editBounce(\n                _.pick(newLatest, 'date', 'comments', 'latest'),\n                newLatest.id,\n                versionId\n              )\n            );\n          } else {\n            dispatch(selectBounce(null, titleId));\n          }\n        }\n      }\n      dispatch({\n        type: DELETE_BOUNCE,\n        payload: { bounce: response.data, version: versionId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n","import {\n  FETCH_PLAYLISTSONGS,\n  EDIT_PLAYLISTSONG,\n  CREATE_PLAYLISTSONG,\n  DELETE_PLAYLISTSONG,\n} from './types';\nimport greenhouse from '../apis/greenhouse';\nimport { errorHandler } from '.';\n\nexport const fetchPlaylistSongs = (playlistId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/playlistsongs/${playlistId}`);\n    dispatch({ type: FETCH_PLAYLISTSONGS, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createPlaylistSong =\n  (formValues) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const response = await greenhouse.post('/playlistsongs', {\n        ...formValues,\n        currentBand: currentBand.id,\n      });\n      dispatch({\n        type: CREATE_PLAYLISTSONG,\n        payload: {\n          playlistsong: response.data,\n          playlist: formValues.playlistId,\n        },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const editPlaylistSong =\n  (formValues, playlistSongId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const song = getState().playlistSongs[playlistSongId];\n      if (formValues.move) {\n        const newSong = {\n          playlistId: formValues.move,\n          title: song.title,\n          version: song.version,\n          bounce: song.bounce,\n        };\n        dispatch(createPlaylistSong(newSong));\n      }\n      const response = await greenhouse.patch(\n        `/playlistsongs/${playlistSongId}`,\n        { ...formValues, currentBand: currentBand.id }\n      );\n      dispatch({\n        type: EDIT_PLAYLISTSONG,\n        payload: {\n          playlistsong: response.data,\n          playlist: formValues.playlistId,\n        },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const deletePlaylistSong =\n  (playlistSongId, playlistId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n      const response = await greenhouse.post('/playlistsongs/delete', {\n        playlistSongId,\n        playlistId,\n        currentBand: currentBand.id,\n      });\n      dispatch({\n        type: DELETE_PLAYLISTSONG,\n        payload: { playlistsong: response.data, playlist: playlistId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n","import {\n  FETCH_TIERS,\n  CREATE_TIER,\n  EDIT_TIER,\n  DELETE_TIER,\n  ORDER_TIER,\n} from './types';\nimport { errorHandler } from './errors';\nimport greenhouse from '../apis/greenhouse';\nimport { deleteTitle } from '.';\n\nexport const fetchTiers = (bandId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/tiers/${bandId}`);\n    dispatch({ type: FETCH_TIERS, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createTier = (formValues) => async (dispatch, getState) => {\n  try {\n    const { currentBand } = getState().bands;\n    const response = await greenhouse.post('/tiers', {\n      ...formValues,\n      currentBand: currentBand.id,\n    });\n    dispatch({ type: CREATE_TIER, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const editTier = (formValues, tierId) => async (dispatch, getState) => {\n  try {\n    const { currentBand } = getState().bands;\n    const response = await greenhouse.patch(`/tiers/${tierId}`, {\n      ...formValues,\n      currentBand: currentBand.id,\n    });\n    dispatch({ type: EDIT_TIER, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const deleteTier = (tierId) => async (dispatch, getState) => {\n  const { currentBand } = getState().bands;\n  try {\n    const response = await greenhouse.post('/tiers/delete', {\n      tierId,\n      currentBand: currentBand.id,\n    });\n    response.data.trackList.forEach((titleId) => {\n      dispatch(deleteTitle(titleId, response.data.id));\n    });\n    dispatch({ type: DELETE_TIER, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const setOrder = (tier, orderBy) => {\n  return { type: ORDER_TIER, payload: { tier, orderBy } };\n};\n","import _ from 'lodash';\n\nimport {\n  FETCH_VERSIONS,\n  EDIT_VERSION,\n  DELETE_VERSION,\n  CREATE_VERSION,\n} from './types';\nimport { errorHandler } from './errors';\nimport greenhouse from '../apis/greenhouse';\nimport { selectVersion } from './titles';\nimport { deleteBounce } from '.';\n\nexport const fetchVersions = (titleId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/versions/${titleId}`);\n    dispatch({ type: FETCH_VERSIONS, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createVersion =\n  (formValues, titleId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const parentTitle = getState().titles[titleId];\n\n      if (!parentTitle.versions.length) {\n        formValues.current = true;\n      }\n\n      const response = await greenhouse.post('/versions', {\n        ...formValues,\n        currentBand: currentBand.id,\n        title: titleId,\n      });\n\n      if (response.data.current) {\n        if (parentTitle.versions.length) {\n          const versionList = parentTitle.versions.map(\n            (id) => getState().versions[id]\n          );\n          const oldCurrent = versionList.find((v) => v.current);\n          oldCurrent.current = false;\n          dispatch(\n            editVersion(\n              _.pick(oldCurrent, 'name', 'notes', 'current'),\n              oldCurrent.id,\n              titleId\n            )\n          );\n        }\n      }\n\n      // dispatch({ type: SELECT_VERSION, payload: { titleId, version: response.data } });\n      dispatch({\n        type: CREATE_VERSION,\n        payload: { version: response.data, title: titleId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const editVersion =\n  (formValues, versionId, titleId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const thisVersion = getState().versions[versionId];\n      if (thisVersion.current) {\n        formValues.current = true;\n      }\n      const response = await greenhouse.patch(`/versions/${versionId}`, {\n        ...formValues,\n        currentBand: currentBand.id,\n      });\n      if (response.data.current && !thisVersion.current) {\n        const parentTitle = getState().titles[titleId];\n        const versionList = parentTitle.versions.map(\n          (id) => getState().versions[id]\n        );\n        const oldCurrent = versionList.find((v) => v.current);\n        oldCurrent.current = false;\n        dispatch(\n          editVersion(\n            _.pick(oldCurrent, 'name', 'notes', 'current'),\n            oldCurrent.id,\n            titleId\n          )\n        );\n      }\n\n      // dispatch({ type: SELECT_VERSION, payload: { titleId, version: response.data } });\n      dispatch({\n        type: EDIT_VERSION,\n        payload: { version: response.data, title: titleId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const deleteVersion =\n  (versionId, titleId) => async (dispatch, getState) => {\n    const { currentBand } = getState().bands;\n    try {\n      const response = await greenhouse.post('/versions/delete', {\n        versionId,\n        titleId,\n        currentBand: currentBand.id,\n      });\n      if (response.data.current) {\n        const parentTitle = getState().titles[titleId];\n        if (parentTitle) {\n          const remainingVersions = parentTitle.versions.filter(\n            (id) => id !== versionId\n          );\n          if (remainingVersions.length) {\n            const newCurrent =\n              getState().versions[\n                remainingVersions[remainingVersions.length - 1]\n              ];\n            newCurrent.current = true;\n            dispatch(selectVersion(newCurrent, titleId));\n            dispatch(\n              editVersion(\n                _.pick(newCurrent, 'name', 'notes', 'current'),\n                newCurrent.id,\n                titleId\n              )\n            );\n          } else {\n            dispatch(selectVersion(null, titleId));\n          }\n        }\n      }\n      response.data.bounces.forEach((bounceId) => {\n        dispatch(deleteBounce(bounceId, response.data.id, titleId));\n      });\n      dispatch({\n        type: DELETE_VERSION,\n        payload: { version: response.data, title: titleId },\n      });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { throwError } from '../../actions';\nimport history from '../../history';\n\nconst Error = ({ error, throwError }) => {\n  useEffect(() => {\n    history.listen((location) => {\n      throwError(null);\n    });\n  }, [history]);\n\n  if (!error) {\n    return null;\n  }\n\n  return (\n    <div className=\"error\" onClick={() => throwError(null)}>\n      <div className=\"error-x\">X</div>\n      {error}\n      <div className=\"error-x\">X</div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    error: state.error.error,\n  };\n};\n\nexport default connect(mapStateToProps, { throwError })(Error);\n","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\n\n\n\nclass AddButton extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.ref = React.createRef();\n    }\n\n    state = { boxVisible: false, selectedOption: null };\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.boxVisible === false && this.state.boxVisible === true) {\n            document.addEventListener('click', this.bodyClick, {capture: true});\n            document.addEventListener('keydown', this.blockSpaceBarPress, {capture: true});\n        } else if (prevState.boxVisible === true && this.state.boxVisible === false) {\n            document.removeEventListener('click', this.bodyClick, {capture: true});\n            document.removeEventListener('keydown', this.blockSpaceBarPress, {capture: true});\n        }\n        \n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.bodyClick, {capture: true});\n        document.removeEventListener('keydown', this.blockSpaceBarPress, {capture: true});\n    }\n\n    blockSpaceBarPress = (e) => {\n        e.stopPropagation();\n    }\n\n    bodyClick = (e) => {\n        if (this.ref.current && this.ref.current.contains(e.target)) {\n            return;\n        }\n        if (this.state.boxVisible) {\n            this.setState({ boxVisible: false });\n        }\n    }\n\n    showOptions = (field) => {\n        return field.options.map(option => {\n            return (\n                <option\n                    key={option.value}\n                    value={option.value}\n                >\n                    {option.display}\n                </option>\n            );\n        });\n    };\n\n    onDrop = (e, input) => {\n        const file = e.target.files[0];\n        const { onChange } = input;\n        onChange(file);\n    }\n\n    input = (field) => {\n        let inputClass = '';\n        if (field.type === 'date') {\n            inputClass = 'calendar';\n        }\n        if (field.type === 'checkbox') {\n            inputClass = 'checkbox';\n        }\n        if (field.type === 'input') {\n            inputClass = 'text-input';\n        }\n\n        const errors = \n            <div className=\"form-errors\">\n            {field.meta.touched && (field.meta.error && <p>{field.meta.error}<span>&darr;</span></p>)}\n            </div>;\n\n        if (field.type === 'file') {\n            delete field.input.value;\n            return <>\n                {errors}\n                <input\n                    {...field.input}\n                    type='file'\n                    className='inputfile'\n                    onDrop={(e) => this.onDrop(e, field.input)}\n                        \n                />\n            </>;\n        } else if (field.type === 'select') {\n            return <>\n                {errors}\n                <select\n                    {...field.input}\n                    autoFocus={field.autoFocus}\n                >\n                    {field.options ? this.showOptions(field) : null}\n                </select>\n            </>;\n        } else {\n            return <>\n                {errors}\n                <input\n                    {...field.input}\n                    autoFocus={field.autoFocus}\n                    type={field.type}\n                    className={inputClass}\n                />\n            </>;\n        }\n    }\n\n    required = value => {\n        return value ? undefined : 'Required';\n    }\n\n    showFields = () => {\n\n        return this.props.fields.map((field, i) => {\n            const autoFocus = i === 0 ? true : false;\n            let comp = this.input;\n            if (field.type === 'textarea') {\n                comp = 'textarea'\n            }\n            return <div key={field.label}>\n                <label>{field.label}: </label>\n                <Field\n                    name={field.name}\n                    component={comp}\n                    autoFocus={autoFocus}\n                    type={field.type}\n                    validate={field.required ? this.required : null}\n                    options={field.options}\n                >\n                    {field.options ? this.showOptions(field) : null}\n                </Field>\n            </div>\n        });\n \n    };\n\n    submitForm = (formValues) => {\n        this.props.onSubmit(formValues);\n        this.setState({ boxVisible: false });\n        this.props.reset();\n    }\n\n    showBox = () => {\n        if (this.state.boxVisible) {\n            const addClass = this.props.addClass ? this.props.addClass : '';\n            return <>    \n                <div className={`add-box ${addClass}`} onClick={e => e.stopPropagation()}>\n                    <h3 className=\"add-box-title\">{this.props.title}</h3>\n                    <form onSubmit = {this.props.handleSubmit(this.submitForm)}>\n                        {this.showFields()}\n                        <div className=\"submit-button-centered\">\n                            <button className=\"submit-button\" type='submit'>OK</button>\n                        </div>\n                    </form>\n                </div>\n            </>\n        }\n    }\n\n    click = (e) => {\n        e.stopPropagation();\n        if (this.ref.current && this.ref.current === e.target) {\n            return;\n        }\n        if (this.state.boxVisible) {\n            this.setState({ boxVisible: false });\n        } else {\n            this.setState({ boxVisible: true });\n        }\n\n    }\n    \n    render() {\n\n        return <>\n            <div className=\"add\" onClick={this.click} ref={this.ref}>\n                <img src={this.props.image} />\n                {this.showBox()}\n            </div>\n        </>;\n    }\n\n}\n\nexport default reduxForm({ form: 'form' })(AddButton);","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n\nclass Modal extends React.Component {\n\n    componentDidMount() {\n        document.querySelector('.container').classList.add('modal-active');\n    }\n    componentWillUnmount() {\n        document.querySelector('.container').classList.remove('modal-active');\n    }\n\n    render() {\n        return ReactDOM.createPortal(\n            <div onClick={this.props.onDismiss} className=\"modal-background\">\n                <div \n                    onClick={e => e.stopPropagation()}\n                    className=\"modal-box\"\n                >\n                    <div className=\"modal-title\">\n                        {this.props.content}\n                    </div>\n                    <div>\n                        {this.props.actions}\n                    </div>\n                </div>\n            </div>,\n            document.querySelector('#modal')\n        );\n    }\n};\n\nexport default Modal;","import React, { useState } from 'react';\nimport Modal from './Modal';\n\nconst DeleteButton = ({ onSubmit, displayName }) => {\n  const [visible, setVisible] = useState(false);\n\n  const renderContent = () => {\n    return `Seriously delete \"${displayName}\"?`;\n  };\n\n  const renderActions = () => {\n    return (\n      <>\n        <button\n          className=\"modal-button\"\n          onClick={() => {\n            onSubmit();\n            setVisible(false);\n          }}\n        >\n          Delete\n        </button>\n        <button className=\"modal-button\" onClick={() => setVisible(false)}>\n          No Wait\n        </button>\n      </>\n    );\n  };\n\n  const showModal = () => {\n    return (\n      <Modal\n        content={renderContent()}\n        actions={renderActions()}\n        onDismiss={(e) => {\n          e.stopPropagation();\n          setVisible(false);\n        }}\n      />\n    );\n  };\n\n  const onClick = (e) => {\n    e.stopPropagation();\n    setVisible(true);\n  };\n\n  return (\n    <div>\n      <img src=\"/images/delete.png\" className=\"delete\" onClick={onClick} />\n      {visible && showModal()}\n    </div>\n  );\n};\n\nexport default DeleteButton;\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nexport default ChildComponent => {\n\n    class ComposedComponent extends React.Component {\n\n        constructor(props) {\n            super(props);\n        }\n\n        state = { authorized: false };\n\n        componentDidMount() {\n            this.checkAuth();\n        }\n\n\n        // componentDidUpdate() {\n        //     this.checkAuth();\n        // }\n\n        handleUpdate = () => {\n            this.checkAuth();\n        }\n\n        checkAuth() {\n            if (this.props.user && this.props.currentBand && this.props.user.bands.includes(this.props.currentBand.id)) {\n                this.setState({ authorized: true });\n            }\n        }\n\n        render() {\n            return <ChildComponent {...this.props} authorized={this.state.authorized} handleUpdate={this.handleUpdate} />;\n\n        }\n\n    }\n\n    const mapStateToProps = state => {\n        return {\n            user: state.auth.user,\n            currentBand: state.bands.currentBand\n        }\n    };\n\n    return connect(mapStateToProps)(ComposedComponent);\n\n};\n\n","import React, { useEffect, useState, useRef } from 'react';\n\nconst DetailBox = ({ selectedItem, itemList, itemType, displayItem, setSelected, renderAddButton, renderEditButton, renderDeleteButton, playButton }) => {\n\n    const [dropdownVisible, setDropdownVisible] = useState(false);\n\n    const dropdownRef = useRef(null);\n\n    useEffect(() => {\n        if (dropdownVisible) {\n            document.addEventListener('click', onBodyClick, {capture: true});\n        } else {\n            document.removeEventListener('click', onBodyClick, {capture: true});\n        }\n    }, [dropdownVisible]);\n\n    const count = () => {\n        let count;\n        if (itemList().length === 0) {\n            count = `1 ${itemType}:`;\n        } else {\n            count = `${itemList().length + 1} ${itemType}s:`\n        }\n\n        return (\n            <h5>{count}</h5>\n        );\n    };\n\n    const currentTag = () => {\n        if (selectedItem.current || selectedItem.latest) {\n            return (\n                <div className=\"current\">\n                    Current\n                </div>\n            );\n        }\n    };\n\n    const onBodyClick = e => {\n\n        if (dropdownRef.current && dropdownRef.current.contains(e.target)) {\n            return;\n        }\n\n        if (dropdownVisible) {\n            setDropdownVisible(false);\n        }\n    };\n\n    const renderItemList = () => {\n        if (dropdownVisible) {\n            \n            return itemList().map(i => {\n                const current = i.current || i.latest ? <span className=\"list-current\"> * current</span> : null;\n                return <div\n                    className=\"dropdown-link\"\n                    onClick={() => {\n                        setSelected(i);\n                        setDropdownVisible(false);\n                    }}\n                    key={i.id}\n                >\n                        {displayItem(i)}\n                        {current}\n                </div>\n            });\n        }\n    };\n\n\n    const renderDetail = () => {\n        if (selectedItem) {\n            return (\n                <div className=\"detail-content\">\n                    <div className=\"detail-header\">\n                        {count()}\n                        {currentTag()}\n                    </div>\n                    <div className='dropdown-container'>\n                        <div className=\"dropdown\" ref={dropdownRef}>\n                            <button\n                                className=\"dropbtn\"\n                                onClick={() => setDropdownVisible(!dropdownVisible)}\n                            >\n                                {displayItem(selectedItem)}\n                            </button>\n                            <div className=\"dropdown-content\">\n                                {renderItemList()}\n                            </div>\n                        </div>\n                        {playButton && playButton()}\n                    </div>\n                    \n                    \n                    <div className=\"detail-notes\">\n                        <div className=\"detail-notes-title\">Notes:</div>\n                        <p>\n                            {selectedItem.notes || selectedItem.comments}\n                        </p>\n                    </div>\n                </div>\n            );\n        } else {\n            let parentType = '';\n            if (itemType === 'Version') {\n                parentType = 'Song';\n            }\n            if (itemType === 'Bounce') {\n                parentType = 'Version';\n            }\n            return (\n                <div className=\"detail-content\">\n                    <div className=\"detail-header\">\n                        <h5>{`No ${itemType}s for this ${parentType} Yet`}</h5>\n                    </div>\n                </div>\n            );\n        }\n    };\n\n    return (\n        <div\n            className={`detail-box ${itemType === 'Bounce' ? 'bounce' : ''}`}\n        >\n            {renderDetail()}      \n            <div className=\"detail-buttons\">\n                {renderAddButton()}\n                {selectedItem && renderEditButton()}\n                {selectedItem && renderDeleteButton()}\n            </div>\n        </div>\n    );\n};\n\nexport default DetailBox;","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nimport AddButton from '../reusable/AddButton';\nimport DeleteButton from '../reusable/DeleteButton';\nimport requireAuth from '../reusable/requireAuth';\nimport DetailBox from '../reusable/DetailBox';\nimport {\n  selectBounce,\n  createBounce,\n  editBounce,\n  deleteBounce,\n  queueSongs,\n} from '../../actions';\n\nconst Bounce = ({\n  bounces,\n  selectBounce,\n  title,\n  authorized,\n  version,\n  createBounce,\n  editBounce,\n  deleteBounce,\n  song,\n  queueSongs,\n}) => {\n  const [selectedBounce, setSelectedBounce] = useState(title.selectedBounce);\n\n  const [uploadActive, setUploadActive] = useState(false);\n\n  // const [playButtonVisible, setPlayButtonVisible] = useState(false);\n\n  useEffect(() => {\n    if (selectedBounce && selectedBounce !== title.selectedBounce) {\n      selectBounce(selectedBounce, title.id);\n      // setPlayButtonVisible(true);\n    }\n  }, [selectedBounce]);\n\n  useEffect(() => {\n    if (selectedBounce && selectedBounce !== title.selectedBounce) {\n      selectBounce(title.selectedBounce, title.id);\n    }\n  }, [title.selectedBounce]);\n\n  useEffect(() => {\n    setSelectedBounce(title.selectedBounce);\n    setUploadActive(false);\n  }, [title.selectedBounce]);\n\n  const displayDate = (date) => {\n    return moment.utc(date).format('MM/DD/yy');\n  };\n\n  const displayBounce = (b) => {\n    return `${displayDate(b.date)}`;\n  };\n\n  const itemList = () => {\n    if (selectedBounce) {\n      return bounces\n        .filter((b) => b && b.id !== selectedBounce.id)\n        .sort((a, b) => (a.date < b.date ? 1 : -1));\n    }\n  };\n\n  const onAddSubmit = (formValues) => {\n    createBounce(formValues, version.id);\n    setUploadActive(true);\n  };\n\n  const onEditSubmit = (formValues) => {\n    editBounce(formValues, selectedBounce.id, version.id);\n    setUploadActive(true);\n  };\n\n  const uploadContent = () => {\n    return (\n      <div className=\"upload-image\">\n        <p>Uploading...</p>\n        <img className=\"windmill\" src=\"/images/windmill.gif\" />\n      </div>\n    );\n  };\n\n  const renderAddButton = () => {\n    if (authorized) {\n      return (\n        <AddButton\n          title={`Add a Bounce of ${version.name}`}\n          image=\"images/add.png\"\n          fields={[\n            {\n              label: 'File',\n              name: 'file',\n              type: 'file',\n              required: true,\n            },\n            {\n              label: 'Date',\n              name: 'date',\n              type: 'date',\n              required: true,\n            },\n            {\n              label: 'Comments',\n              name: 'comments',\n              type: 'textarea',\n            },\n            {\n              label: 'Latest Bounce?',\n              name: 'latest',\n              type: 'checkbox',\n            },\n          ]}\n          onSubmit={(formValues) => onAddSubmit(formValues)}\n          form={`add-bounce-${title.id}`}\n          initialValues={{ latest: true }}\n          addClass=\"add-bounce\"\n        />\n      );\n    }\n  };\n\n  const renderEditButton = () => {\n    if (authorized) {\n      return (\n        <AddButton\n          title={'Edit this Bounce'}\n          image=\"images/edit.png\"\n          fields={[\n            {\n              label: 'File',\n              name: 'file',\n              type: 'file',\n            },\n            {\n              label: 'Date',\n              name: 'date',\n              type: 'date',\n            },\n            {\n              label: 'Comments',\n              name: 'comments',\n              type: 'textarea',\n            },\n            {\n              label: 'Current Bounce?',\n              name: 'latest',\n              type: 'checkbox',\n            },\n          ]}\n          onSubmit={onEditSubmit}\n          initialValues={{\n            ..._.pick(selectedBounce, 'comments', 'latest'),\n            date: moment.utc(selectedBounce.date).format('YYYY-MM-DD'),\n          }}\n          form={`edit-bounce-${title.id}`}\n          enableReinitialize={true}\n          addClass=\"add-bounce\"\n        />\n      );\n    }\n  };\n\n  const renderDeleteButton = () => {\n    if (authorized) {\n      return (\n        <DeleteButton\n          onSubmit={() => deleteBounce(selectedBounce.id, version.id, title.id)}\n          displayName={displayDate(selectedBounce.date)}\n        />\n      );\n    }\n  };\n\n  const showPlayButton = () => {\n    // if (playButtonVisible) {\n\n    return (\n      <img\n        src=\"/images/play.svg\"\n        className=\"play-icon\"\n        onClick={() => queueSongs(song)}\n      />\n    );\n    // }\n  };\n\n  if (uploadActive) {\n    return <div className=\"detail-box bounce\">{uploadContent()}</div>;\n  } else {\n    if (version) {\n      return (\n        <DetailBox\n          selectedItem={selectedBounce}\n          itemType=\"Bounce\"\n          itemList={itemList}\n          displayItem={displayBounce}\n          setSelected={setSelectedBounce}\n          renderAddButton={renderAddButton}\n          renderEditButton={renderEditButton}\n          renderDeleteButton={renderDeleteButton}\n          playButton={showPlayButton}\n        />\n      );\n    } else {\n      return null;\n    }\n  }\n};\n\nexport default connect(null, {\n  selectBounce,\n  createBounce,\n  editBounce,\n  deleteBounce,\n  queueSongs,\n})(requireAuth(Bounce));\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport AddButton from '../reusable/AddButton';\nimport { createVersion } from '../../actions';\n\nconst AddVersion = ({ title, onSubmit, createVersion }) => {\n  return (\n    <AddButton\n      title={`Add a Version of ${title.title}`}\n      image=\"/images/add.png\"\n      fields={[\n        {\n          label: 'Name',\n          name: 'name',\n          type: 'input',\n          required: true,\n        },\n        {\n          label: 'Notes',\n          name: 'notes',\n          type: 'textarea',\n        },\n        {\n          label: 'Current Version?',\n          name: 'current',\n          type: 'checkbox',\n        },\n      ]}\n      onSubmit={(formValues) => {\n        createVersion(formValues, title.id);\n        if (onSubmit) {\n          onSubmit();\n        }\n      }}\n      form={`add-version-${title.id}`}\n      initialValues={{ current: true }}\n      enableReinitialize={true}\n      addClass=\"add-version\"\n    />\n  );\n};\n\nexport default connect(null, { createVersion })(AddVersion);\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport { Link } from 'react-router-dom';\n\nimport {\n  fetchBounces,\n  selectVersion,\n  createVersion,\n  editVersion,\n  deleteVersion,\n} from '../../actions';\nimport Bounce from '../bounces/Bounce';\nimport AddVersion from './AddVersion';\nimport AddButton from '../reusable/AddButton';\nimport DeleteButton from '../reusable/DeleteButton';\nimport requireAuth from '../reusable/requireAuth';\nimport DetailBox from '../reusable/DetailBox';\n\nconst Version = ({\n  versions,\n  bounces,\n  fetchBounces,\n  selectVersion,\n  title,\n  createVersion,\n  authorized,\n  editVersion,\n  deleteVersion,\n  song,\n  tier,\n  band,\n}) => {\n  const [selectedVersion, setSelectedVersion] = useState(title.selectedVersion);\n  const [bounceList, setBounceList] = useState(null);\n\n  useEffect(() => {\n    // console.log(selectedVersion);\n    if (selectedVersion !== title.selectedVersion) {\n      selectVersion(selectedVersion, title.id);\n      setBounceList(selectedVersion.bounces.map((id) => bounces[id]));\n      fetchBounces(selectedVersion.id);\n    }\n  }, [selectedVersion]);\n\n  useEffect(() => {\n    if (selectedVersion) {\n      // console.log(title.selectedVersion)\n      setBounceList(selectedVersion.bounces.map((id) => bounces[id]));\n    }\n  }, [bounces, selectedVersion]);\n\n  useEffect(() => {\n    if (selectedVersion !== title.selectedVersion) {\n      setSelectedVersion(title.selectedVersion);\n    }\n  }, [title.selectedVersion]);\n\n  const renderBounces = () => {\n    if (bounceList && selectedVersion) {\n      return (\n        <Bounce\n          bounces={bounceList}\n          title={title}\n          version={selectedVersion}\n          song={song}\n        />\n      );\n    }\n  };\n\n  const renderArrow = () => {\n    if (bounceList && selectedVersion) {\n      return <div className=\"version-arrow\">&rarr;</div>;\n    }\n  };\n\n  const renderRecordLink = () => {\n    if (authorized && selectedVersion) {\n      return (\n        <Link\n          to={{\n            pathname: `/${band.url}/record`,\n            state: {\n              version: selectedVersion,\n              title,\n              tier,\n            },\n          }}\n          className=\"record-link\"\n        >\n          record a bounce\n        </Link>\n      );\n    }\n  };\n\n  const renderAddButton = () => {\n    if (authorized) {\n      return <AddVersion title={title} />;\n    }\n  };\n\n  const renderEditButton = () => {\n    if (authorized) {\n      return (\n        <AddButton\n          title={`Edit ${selectedVersion.name}`}\n          image=\"images/edit.png\"\n          fields={[\n            {\n              label: 'Name',\n              name: 'name',\n              type: 'input',\n            },\n            {\n              label: 'Notes',\n              name: 'notes',\n              type: 'textarea',\n            },\n            {\n              label: 'Current Version?',\n              name: 'current',\n              type: 'checkbox',\n            },\n          ]}\n          onSubmit={(formValues) =>\n            editVersion(formValues, selectedVersion.id, title.id)\n          }\n          initialValues={_.pick(selectedVersion, 'name', 'notes', 'current')}\n          form={`edit-version-${title.id}`}\n          enableReinitialize={true}\n          addClass=\"add-version\"\n        />\n      );\n    }\n  };\n\n  const renderDeleteButton = () => {\n    if (authorized) {\n      return (\n        <DeleteButton\n          onSubmit={() => deleteVersion(selectedVersion.id, title.id)}\n          displayName={selectedVersion.name}\n        />\n      );\n    }\n  };\n\n  const itemList = () => {\n    return versions.filter((v) => v.id !== selectedVersion.id);\n  };\n\n  const displayVersion = (v) => {\n    return `${v.name}`;\n  };\n\n  return (\n    <>\n      <DetailBox\n        selectedItem={selectedVersion}\n        itemType=\"Version\"\n        itemList={itemList}\n        displayItem={displayVersion}\n        setSelected={setSelectedVersion}\n        renderAddButton={renderAddButton}\n        renderEditButton={renderEditButton}\n        renderDeleteButton={renderDeleteButton}\n      />\n      <div className=\"detail-box-between\">\n        {renderRecordLink()}\n        {renderArrow()}\n      </div>\n      {renderBounces()}\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    bounces: state.bounces,\n    band: state.bands.currentBand,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchBounces,\n  selectVersion,\n  createVersion,\n  editVersion,\n  deleteVersion,\n})(requireAuth(Version));\n","import React, { useState } from 'react';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\n\nimport { queueSongs, queuePlaylistSongs, playAudio } from '../../actions';\n\nconst PlayContainer = ({\n  song,\n  queueSongs,\n  parentType,\n  queuePlaylistSongs,\n}) => {\n  const [loaded, setLoaded] = useState(false);\n\n  const displayDate = (date) => {\n    return moment.utc(date).format('MM/DD/YY');\n  };\n\n  const displayTime = (time) => {\n    const minutes = Math.floor(time / 60);\n    const seconds =\n      Math.floor(time % 60) < 10\n        ? '0' + Math.floor(time % 60)\n        : Math.floor(time % 60);\n    return `${minutes}:${seconds}`;\n  };\n\n  const onPlay = (e) => {\n    e.stopPropagation();\n    if (parentType === 'tier') {\n      queueSongs(song);\n    } else if (parentType === 'playlist') {\n      queuePlaylistSongs(song);\n    }\n  };\n\n  const renderSpinner = () => {\n    return (\n      <div className=\"sk-circle-fade\">\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n        <div className=\"sk-circle-fade-dot\"></div>\n      </div>\n    );\n  };\n\n  let baseUrl;\n  if (process.env.NODE_ENV === 'production') {\n    baseUrl = 'https://exploring-the-space.com';\n  } else {\n    baseUrl = 'http://localhost:3001';\n  }\n\n  return (\n    <div className=\"play-container\">\n      <div className=\"play-container-time\">\n        {displayTime(song.bounce.duration)}\n      </div>\n      <div className=\"play-icon-container\">\n        {!loaded && renderSpinner()}\n        <img\n          src=\"/images/play.svg\"\n          className=\"play-icon\"\n          onClick={onPlay}\n          onLoad={() => setLoaded(true)}\n        />\n      </div>\n      <div className=\"play-container-display\">\n        <p>{song.version.name}</p>\n        <p>{displayDate(song.bounce.date)}</p>\n      </div>\n      <a\n        className=\"download\"\n        onClick={(e) => e.stopPropagation()}\n        href={`${baseUrl}/api/audio/download/${\n          song.bounce.id\n        }/${encodeURIComponent(song.title.title)}`}\n      >\n        <img src=\"/images/download.svg\" />\n      </a>\n    </div>\n  );\n};\n\nexport default connect(null, { queueSongs, queuePlaylistSongs, playAudio })(\n  PlayContainer\n);\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport { Link } from 'react-router-dom';\n\nimport Version from '../versions/Version';\nimport AddButton from '../reusable/AddButton';\nimport {\n  fetchVersions,\n  fetchBounces,\n  selectBounce,\n  selectVersion,\n  createPlaylistSong,\n  editTitle,\n  deleteTitle,\n} from '../../actions';\nimport PlayContainer from './PlayContainer';\nimport requireAuth from '../reusable/requireAuth';\nimport DeleteButton from '../reusable/DeleteButton';\n\nconst Title = ({\n  tier,\n  title,\n  titles,\n  fetchVersions,\n  versions,\n  bounces,\n  fetchBounces,\n  authorized,\n  band,\n  playlists,\n  selectVersion,\n  selectBounce,\n  createPlaylistSong,\n  editTitle,\n  deleteTitle,\n  getTime,\n  audio,\n  findLatest,\n  tiers,\n}) => {\n  const [expand, setExpand] = useState(false);\n  const [versionList, setVersionList] = useState(null);\n  const [bounceList, setBounceList] = useState(null);\n  const [song, setSong] = useState(null);\n\n  useEffect(() => {\n    fetchVersions(title.id);\n  }, []);\n\n  useEffect(() => {\n    setVersionList(title.versions.map((id) => versions[id]));\n    // console.log('set version list')\n  }, [versions]);\n\n  useEffect(() => {\n    // console.log(versionList);\n    if (versionList && versionList[0]) {\n      let versionToSelect;\n\n      const parentTitle = titles[title.id];\n\n      const versionIds = versionList.map((v) => v.id);\n\n      if (\n        !parentTitle.selectedVersion ||\n        !versionIds.includes(parentTitle.selectedVersion.id)\n      ) {\n        versionToSelect = versionList.find((v) => v.current);\n      } else if (parentTitle.selectedVersion) {\n        if (!versions[parentTitle.selectedVersion.id]) {\n          versionToSelect = null;\n        } else {\n          versionToSelect = versions[parentTitle.selectedVersion.id];\n        }\n      }\n\n      selectVersion(versionToSelect, title.id);\n    }\n  }, [versionList]);\n\n  useEffect(() => {\n    // console.log(title)\n    if (title.selectedVersion && title.selectedVersion.id) {\n      fetchBounces(title.selectedVersion.id);\n      // console.log('fetch bounces')\n    }\n  }, [title.selectedVersion]);\n\n  useEffect(() => {\n    if (title.selectedVersion) {\n      if (title.selectedVersion.bounces[0]) {\n        setBounceList(title.selectedVersion.bounces.map((id) => bounces[id]));\n        // console.log('set bounce list')\n      } else if (title.selectedBounce !== null) {\n        // console.log('set bounce list null')\n        setBounceList(null);\n        selectBounce(null, title.id);\n      }\n    }\n  }, [bounces]);\n\n  useEffect(() => {\n    if (bounceList && bounceList[0]) {\n      let bounceToSelect;\n\n      if (title.selectedBounce && bounceList.includes(title.selectedBounce)) {\n        bounceToSelect = title.selectedBounce;\n      } else {\n        bounceToSelect = bounceList.find((b) => b.latest);\n        findLatest(title, bounceToSelect);\n      }\n\n      if (bounceToSelect !== title.selectedBounce) {\n        selectBounce(bounceToSelect, title.id);\n        // console.log('select bounce');\n      }\n    } else if (song) {\n      setSong(null);\n    }\n  }, [bounceList]);\n\n  useEffect(() => {\n    if (title.selectedBounce && title.selectedVersion) {\n      setSong({\n        tier,\n        title: titles[title.id],\n        version: title.selectedVersion,\n        bounce: title.selectedBounce,\n      });\n      // console.log('song update')\n      getTime({ id: title.id, duration: title.selectedBounce.duration });\n    } else if (song && !title.selectedBounce) {\n      setSong(null);\n      getTime({ id: title.id, duration: 0 });\n    }\n  }, [titles[title.id]]);\n\n  const renderPlayContainer = () => {\n    if (song) {\n      return <PlayContainer song={song} parentType=\"tier\" />;\n    }\n  };\n\n  const renderAudioEditLink = () => {\n    if (authorized && song) {\n      const { tier, title, version, bounce } = song;\n      return (\n        <Link\n          to={{\n            pathname: `/${band.url}/edit`,\n            state: {\n              tier,\n              title,\n              version,\n              bounce,\n            },\n          }}\n          className=\"edit-link\"\n        >\n          edit audio\n        </Link>\n      );\n    }\n  };\n  const renderVersion = () => {\n    return (\n      <Version versions={versionList} title={title} song={song} tier={tier} />\n    );\n  };\n\n  const onAddToPlaylist = (formValues) => {\n    createPlaylistSong({\n      ...formValues,\n      bounce: title.selectedBounce.id,\n      version: title.selectedVersion.id,\n      title: title.id,\n    });\n  };\n\n  const renderButtons = () => {\n    if (authorized) {\n      const bandPlaylists = band.playlists.map((id) => playlists[id]);\n      const playlistOptions = bandPlaylists.map((pl) => {\n        if (pl) {\n          return { value: pl.id, display: pl.name };\n        }\n      });\n      const bandTiers = band.tiers\n        .filter((t) => t !== tier.id)\n        .map((id) => tiers[id]);\n      const tierOptions = bandTiers.map((t) => {\n        if (t) {\n          return { value: t.id, display: t.name };\n        }\n      });\n      tierOptions.unshift({ value: null, display: '' });\n      return (\n        <div className=\"tier-display\">\n          {song && (\n            <AddButton\n              title=\"Add to a Playlist\"\n              onSubmit={(formValues) => onAddToPlaylist(formValues)}\n              image=\"images/playlist.png\"\n              fields={[\n                {\n                  type: 'select',\n                  options: playlistOptions,\n                  name: 'playlistId',\n                  label: 'Playlist',\n                },\n              ]}\n              form={`add-to-playlist-${title.id}`}\n              enableReinitialize={true}\n            />\n          )}\n          <AddButton\n            title={`Edit ${title.title}`}\n            image=\"images/edit.png\"\n            fields={[\n              {\n                label: 'Title',\n                name: 'title',\n                type: 'input',\n                required: true,\n              },\n              {\n                label: 'Move to Tier',\n                name: 'move',\n                type: 'select',\n                options: tierOptions,\n              },\n            ]}\n            onSubmit={(formValues) => editTitle(formValues, title.id, tier.id)}\n            initialValues={{ title: title.title, move: null }}\n            form={`edit-title-${title.id}`}\n            enableReinitialize={true}\n          />\n          <DeleteButton\n            onSubmit={() => deleteTitle(title.id, tier.id)}\n            displayName={title.title}\n          />\n        </div>\n      );\n    }\n  };\n\n  const arrow = expand ? 'down-arrow' : '';\n\n  const current = audio.currentSong ? audio.currentSong.audio : null;\n  const parent = audio.parent ? audio.parent.id : null;\n\n  let currentClass = '';\n\n  if (current && title.selectedBounce) {\n    currentClass =\n      parent === tier.id && current === title.selectedBounce.id\n        ? 'current-song'\n        : '';\n  }\n\n  let open = expand ? 'open' : 'closed';\n\n  return (\n    <div className=\"title-margin\">\n      <div className={`row title ${currentClass} ${expand ? 'row-open' : ''}`}>\n        <div className=\"marqee\" onClick={() => setExpand(!expand)}>\n          <div className=\"title-name\">\n            <img className={`arrow ${arrow}`} src={`/images/right-arrow.svg`} />\n            <h3>{title.title}</h3>\n          </div>\n          {renderAudioEditLink()}\n          {renderPlayContainer()}\n          {renderButtons()}\n        </div>\n      </div>\n      <div className={`version-container ${open}`}>\n        {expand && renderVersion()}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    versions: state.versions,\n    bounces: state.bounces,\n    band: state.bands.currentBand,\n    playlists: state.playlists,\n    titles: state.titles,\n    audio: state.audio,\n    tiers: state.tiers,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchVersions,\n  fetchBounces,\n  selectVersion,\n  selectBounce,\n  createPlaylistSong,\n  editTitle,\n  deleteTitle,\n})(requireAuth(Title));\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport AddButton from '../reusable/AddButton';\nimport { createTitle } from '../../actions';\n\nconst AddTitle = ({ tier, onSubmit, createTitle }) => {\n  return (\n    <AddButton\n      title={`Add a Title to ${tier.name}`}\n      image=\"/images/add.png\"\n      fields={[\n        {\n          label: 'Title',\n          name: 'title',\n          type: 'input',\n          required: true,\n        },\n      ]}\n      onSubmit={(formValues) => {\n        createTitle(formValues, tier.id);\n        if (onSubmit) {\n          onSubmit();\n        }\n      }}\n      form={`add-title-${tier.id}`}\n      addClass=\"add-left\"\n    />\n  );\n};\n\nexport default connect(null, { createTitle })(AddTitle);\n","import React, { useEffect, useState, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport {\n  createTier,\n  editTier,\n  fetchTitles,\n  deleteTier,\n  setOrder,\n} from '../../actions';\nimport Title from '../titles/Title';\nimport AddButton from '../reusable/AddButton';\nimport DeleteButton from '../reusable/DeleteButton';\nimport requireAuth from '../reusable/requireAuth';\nimport AddTitle from '../titles/AddTitle';\n\nconst Tier = ({\n  tier,\n  titles,\n  fetchTitles,\n  authorized,\n  band,\n  tiers,\n  editTier,\n  deleteTier,\n  setOrder,\n}) => {\n  const [expand, setExpand] = useState(false);\n  const [titlesToRender, setTitlesToRender] = useState(null);\n  const [times, setTimes] = useState({});\n\n  const orderedTitles = useRef({});\n\n  useEffect(() => {\n    setOrder(tier.id, 'date');\n    fetchTitles(tier.id);\n  }, []);\n\n  useEffect(() => {\n    setTitlesToRender(tier.trackList.map((id) => titles[id]));\n  }, [titles, tier]);\n\n  const findLatest = (title, bounce) => {\n    if (!orderedTitles.current[title.id]) {\n      orderedTitles.current[title.id] = new Date(bounce.date);\n    }\n  };\n\n  const renderTitles = () => {\n    const titleList = [...titlesToRender];\n\n    if (!tier.orderBy || tier.orderBy === 'date') {\n      titleList.sort((a, b) => {\n        if (orderedTitles.current[a.id] && orderedTitles.current[b.id]) {\n          if (orderedTitles.current[a.id] > orderedTitles.current[b.id]) {\n            return -1;\n          } else {\n            return 1;\n          }\n        } else if (orderedTitles.current[a.id]) {\n          return -1;\n        } else if (orderedTitles.current[b.id]) {\n          return 1;\n        }\n      });\n    }\n\n    if (tier.orderBy === 'name') {\n      titleList.sort((a, b) => {\n        return a.title < b.title ? -1 : 1;\n      });\n    }\n\n    return titleList.map((title) => {\n      if (title) {\n        return (\n          <Title\n            title={title}\n            tier={tier}\n            key={title.id}\n            getTime={getTime}\n            findLatest={findLatest}\n          />\n        );\n      }\n    });\n  };\n\n  const renderAddButton = () => {\n    if (authorized) {\n      return (\n        <div className=\"order-by\">\n          <div>Add a Title to this Tier</div>\n          <AddTitle tier={tier} onSubmit={() => setExpand(true)} />\n        </div>\n      );\n    }\n  };\n\n  const renderEditButton = () => {\n    if (authorized) {\n      const tierList = band.tiers\n        .map((id) => tiers[id])\n        .sort((a, b) => (a.position < b.position ? -1 : 1))\n        .map((t) => {\n          if (t) {\n            return { value: t.position, display: t.position };\n          }\n        });\n\n      return (\n        <AddButton\n          title={`Edit ${tier.name}`}\n          image=\"images/edit.png\"\n          fields={[\n            {\n              label: 'Tier Name',\n              name: 'name',\n              type: 'input',\n              required: true,\n            },\n            {\n              label: 'Tier Position',\n              name: 'position',\n              type: 'select',\n              options: tierList,\n            },\n          ]}\n          onSubmit={(formValues) => editTier(formValues, tier.id)}\n          initialValues={{ name: tier.name, position: tier.position }}\n          form={`edit-tier-${tier.id}`}\n          enableReinitialize={true}\n        />\n      );\n    }\n  };\n\n  const renderDeleteButton = () => {\n    if (authorized) {\n      return (\n        <DeleteButton\n          onSubmit={() => deleteTier(tier.id)}\n          displayName={tier.name}\n        />\n      );\n    }\n  };\n\n  const renderTotalTime = () => {\n    const total = Object.values(times).reduce((prev, cur) => {\n      return prev + cur;\n    }, 0);\n\n    if (!total) {\n      return null;\n    }\n\n    const minutes = Math.floor(total / 60);\n    const seconds =\n      Math.floor(total % 60) < 10\n        ? '0' + Math.floor(total % 60)\n        : Math.floor(total % 60);\n    return <div>{`${minutes}:${seconds}`}</div>;\n  };\n\n  const getTime = (track) => {\n    if (times[track.id] !== track.duration) {\n      setTimes({ ...times, [track.id]: track.duration });\n    }\n  };\n\n  const renderOrderButton = () => {\n    if (!tier.orderBy || tier.orderBy === 'date') {\n      return (\n        <div className=\"order-by\">\n          <div>Order titles by: </div>\n          <div\n            className=\"order-button order-active\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            Date\n          </div>\n          <div\n            className=\"order-button\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setOrder(tier.id, 'name');\n            }}\n          >\n            ABC\n          </div>\n        </div>\n      );\n    }\n\n    if (tier.orderBy === 'name') {\n      return (\n        <div className=\"order-by\">\n          <div>Order titles by:</div>\n          <div\n            className=\"order-button\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setOrder(tier.id, 'date');\n            }}\n          >\n            Date\n          </div>\n          <div\n            className=\"order-button order-active\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            ABC\n          </div>\n        </div>\n      );\n    }\n  };\n\n  const renderOptions = () => {\n    return (\n      <>\n        {renderAddButton()}\n        {renderOrderButton()}\n      </>\n    );\n  };\n\n  const arrow = expand ? 'down-arrow' : '';\n  const open = expand ? 'open' : 'closed';\n\n  return (\n    <>\n      <div\n        className={`row tier ${expand ? 'row-open' : ''}`}\n        onClick={() => setExpand(!expand)}\n      >\n        <div className=\"marqee\">\n          <div className=\"tier-name\">\n            <img className={`arrow ${arrow}`} src={`images/right-arrow.svg`} />\n            <h2>{tier.name}</h2>\n          </div>\n          <div className=\"tier-count\">\n            <div className=\"song-count\">{tier.trackList.length} songs</div>\n            <div className=\"song-count\">{renderTotalTime()}</div>\n          </div>\n          <div className=\"tier-display\">\n            {renderEditButton()}\n            {renderDeleteButton()}\n          </div>\n        </div>\n      </div>\n      <div className={`tier-options ${expand ? 'options-visible' : ''}`}>\n        {expand && renderOptions()}\n      </div>\n      <hr />\n      <div className={`title-container ${open}`}>\n        {expand && titlesToRender && renderTitles()}\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    titles: state.titles,\n    band: state.bands.currentBand,\n    tiers: state.tiers,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  createTier,\n  fetchTitles,\n  editTier,\n  deleteTier,\n  setOrder,\n})(requireAuth(Tier));\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nimport AddButton from '../reusable/AddButton';\nimport DeleteButton from '../reusable/DeleteButton';\nimport {\n  editPlaylistSong,\n  fetchVersions,\n  fetchBounces,\n  deletePlaylistSong,\n} from '../../actions';\nimport PlayContainer from '../titles/PlayContainer';\nimport requireAuth from '../reusable/requireAuth';\n\nconst PlaylistSong = ({\n  playlist,\n  playlists,\n  song,\n  playlistSongs,\n  authorized,\n  versions,\n  bounces,\n  titles,\n  fetchBounces,\n  fetchVersions,\n  editPlaylistSong,\n  deletePlaylistSong,\n  audio,\n  getTime,\n  band,\n  doUpdate,\n}) => {\n  const [playSong, setPlaySong] = useState(null);\n\n  useEffect(() => {\n    fetchVersions(song.title);\n    titles[song.title].versions.forEach((id) => {\n      fetchBounces(id);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (titles[song.title]) {\n      setPlaySong({\n        playlist,\n        title: titles[song.title],\n        version: versions[song.version],\n        bounce: bounces[song.bounce],\n        position: song.position,\n      });\n    }\n    if (bounces[song.bounce]) {\n      getTime({ id: song.id, duration: bounces[song.bounce].duration });\n    }\n  }, [\n    playlistSongs[song.id],\n    bounces[song.bounce],\n    titles[song.title],\n    versions[song.version],\n  ]);\n\n  useEffect(() => {\n    // console.log(doUpdate);\n    if (doUpdate) {\n      updateToCurrent();\n    }\n  }, [doUpdate]);\n\n  const renderPlayContainer = () => {\n    if (playSong && playSong.bounce && playSong.version) {\n      return <PlayContainer song={playSong} parentType=\"playlist\" />;\n    } else {\n      return (\n        <div className=\"playlistsong-no-bounce\">\n          <p>\n            {versions[song.version]\n              ? `${versions[song.version].name}`\n              : 'No Version Selected'}\n          </p>\n          <p>No Bounce Selected</p>\n        </div>\n      );\n    }\n  };\n\n  const onEditSubmit = (formValues) => {\n    const thisVersion = Object.values(versions).find((v) =>\n      v.bounces.includes(formValues.bounce)\n    );\n    editPlaylistSong(\n      {\n        ...formValues,\n        version: thisVersion.id,\n        playlistId: playlist.id,\n      },\n      song.id\n    );\n  };\n\n  const updateToCurrent = () => {\n    const thisTitle = titles[song.title];\n    const titleVersions = thisTitle.versions.map((id) => versions[id]);\n    const currentVersion = titleVersions.find((v) => v && v.current);\n    if (currentVersion) {\n      const versionBounces = currentVersion.bounces.map((id) => bounces[id]);\n      const currentBounce = versionBounces.find((b) => b && b.latest);\n      if (currentBounce) {\n        editPlaylistSong(\n          {\n            bounce: currentBounce.id,\n            version: currentVersion.id,\n            position: song.position,\n            playlistId: playlist.id,\n          },\n          song.id\n        );\n      }\n    }\n  };\n\n  const renderEditButton = () => {\n    if (authorized && titles[song.title]) {\n      const otherSongs = Object.values(playlistSongs)\n        .filter((s) => playlist.songs.includes(s.id))\n        .sort((a, b) => (a.position < b.position ? -1 : 1))\n        .map((s) => {\n          return { value: s.position, display: s.position };\n        });\n\n      const thisTitle = titles[song.title];\n\n      const otherVersions = thisTitle.versions.map((id) => versions[id]);\n\n      const otherBounces = otherVersions.map((v) => {\n        if (v) {\n          return v.bounces.map((id) => bounces[id]);\n        }\n      });\n\n      const editOptions = [];\n\n      otherVersions.forEach((v, i) => {\n        if (otherBounces[i]) {\n          otherBounces[i].forEach((b) => {\n            if (b) {\n              let current = '';\n              if (v.current && b.latest) {\n                current = ' * current';\n              }\n              editOptions.push({\n                value: b.id,\n                display: `${v.name} -- ${moment\n                  .utc(b.date)\n                  .format('MM/DD/YY')}${current}`,\n              });\n            }\n          });\n        }\n      });\n\n      const bandPlaylists = band.playlists\n        .filter((id) => id !== playlist.id)\n        .map((id) => playlists[id]);\n\n      const playlistOptions = bandPlaylists.map((pl) => {\n        if (pl) {\n          return { value: pl.id, display: pl.name };\n        }\n      });\n\n      playlistOptions.unshift({ value: null, display: '' });\n\n      return (\n        <AddButton\n          image=\"/images/edit.png\"\n          title={`Edit ${titles[song.title].title}`}\n          onSubmit={(formValues) => onEditSubmit(formValues)}\n          fields={[\n            {\n              name: 'position',\n              label: 'Position',\n              type: 'select',\n              options: otherSongs,\n            },\n            {\n              name: 'bounce',\n              label: 'Bounce',\n              type: 'select',\n              options: editOptions,\n              required: true,\n            },\n            {\n              label: 'Add to Playlist',\n              name: 'move',\n              type: 'select',\n              options: playlistOptions,\n            },\n          ]}\n          initialValues={\n            song.bounce\n              ? { ..._.pick(song, 'position', 'bounce'), move: null }\n              : { position: song.position, move: null }\n          }\n          form={`edit-playlistsong-${song.id}`}\n          enableReinitialize={true}\n          addClass=\"add-right\"\n        />\n      );\n    }\n  };\n\n  const renderDeleteButton = () => {\n    if (authorized) {\n      return (\n        <DeleteButton\n          onSubmit={() => deletePlaylistSong(song.id, playlist.id)}\n          displayName={titles[song.title].title}\n        />\n      );\n    }\n  };\n\n  const current = audio.currentSong ? audio.currentSong.audio : null;\n  const parent = audio.parent ? audio.parent.id : null;\n\n  let currentClass = '';\n\n  if (current && song.bounce) {\n    currentClass =\n      parent === playlist.id && current === song.bounce ? 'current-song' : '';\n  }\n\n  return (\n    <div className=\"title-margin\">\n      <div className={`row title playlistsong ${currentClass}`}>\n        <div className=\"marqee\">\n          <div className=\"title-name\">\n            <div className=\"song-position\">\n              <p>{song.position}</p>\n            </div>\n            <h3>{song && titles[song.title] && titles[song.title].title}</h3>\n          </div>\n\n          {renderPlayContainer()}\n          <div className=\"tier-display\">\n            {renderEditButton()}\n            {renderDeleteButton()}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    playlistSongs: state.playlistSongs,\n    band: state.bands.currentBand,\n    playlists: state.playlists,\n    versions: state.versions,\n    bounces: state.bounces,\n    titles: state.titles,\n    audio: state.audio,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchBounces,\n  fetchVersions,\n  editPlaylistSong,\n  deletePlaylistSong,\n})(requireAuth(PlaylistSong));\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport {\n  fetchPlaylistSongs,\n  deletePlaylist,\n  editPlaylist,\n} from '../../actions';\nimport PlaylistSong from '../playlistsongs/PlaylistSong';\nimport AddButton from '../reusable/AddButton';\nimport DeleteButton from '../reusable/DeleteButton';\nimport requireAuth from '../reusable/requireAuth';\n\nconst Playlist = ({\n  playlist,\n  playlists,\n  fetchPlaylistSongs,\n  playlistSongs,\n  authorized,\n  editPlaylist,\n  deletePlaylist,\n  band,\n}) => {\n  const [expand, setExpand] = useState(false);\n  const [playlistList, setPlaylistList] = useState([]);\n  const [times, setTimes] = useState({});\n  const [songsToRender, setSongsToRender] = useState(null);\n  const [doUpdate, setDoUpdate] = useState(false);\n\n  useEffect(() => {\n    fetchPlaylistSongs(playlist.id);\n  }, []);\n\n  useEffect(() => {\n    setSongsToRender(playlist.songs.map((id) => playlistSongs[id]));\n  }, [playlistSongs, playlist.songs]);\n\n  const renderPlaylistSongs = () => {\n    songsToRender.sort((a, b) => (a.position < b.position ? -1 : 1));\n\n    return songsToRender.map((song) => {\n      if (song) {\n        return (\n          <PlaylistSong\n            song={song}\n            playlist={playlist}\n            key={song.id}\n            getTime={getTime}\n            doUpdate={doUpdate}\n          />\n        );\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (band.playlists.length) {\n      const playlistsToShow = band.playlists\n        .map((id) => playlists[id])\n        .sort((a, b) => {\n          if (a.position < b.position) {\n            return -1;\n          }\n          if (b.position < a.position) {\n            return 1;\n          }\n        });\n      setPlaylistList(\n        playlistsToShow.map((t) => {\n          if (t) {\n            return { value: t.position, display: t.position };\n          }\n        })\n      );\n    }\n  }, [playlists]);\n\n  useEffect(() => {\n    if (doUpdate) {\n      setDoUpdate(false);\n    }\n  }, [doUpdate]);\n\n  const renderEditButton = () => {\n    if (authorized) {\n      return (\n        <AddButton\n          title={`Edit ${playlist.name}`}\n          image=\"images/edit.png\"\n          fields={[\n            {\n              label: 'Playlist Name',\n              name: 'name',\n              type: 'input',\n            },\n            {\n              label: 'Playlist Position',\n              name: 'position',\n              type: 'select',\n              options: playlistList,\n            },\n          ]}\n          onSubmit={(formValues) => editPlaylist(formValues, playlist.id)}\n          initialValues={_.pick(playlist, 'name', 'position')}\n          form={`edit-${playlist.id}`}\n          enableReinitialize={true}\n          addClass=\"add-tier\"\n        />\n      );\n    }\n  };\n\n  const renderDeleteButton = () => {\n    if (authorized) {\n      return (\n        <DeleteButton\n          onSubmit={() => deletePlaylist(playlist.id)}\n          displayName={playlist.name}\n        />\n      );\n    }\n  };\n\n  const renderTotalTime = () => {\n    const total = Object.values(times).reduce((prev, cur) => {\n      return prev + cur;\n    }, 0);\n\n    if (!total) {\n      return null;\n    }\n\n    const minutes = Math.floor(total / 60);\n    const seconds =\n      Math.floor(total % 60) < 10\n        ? '0' + Math.floor(total % 60)\n        : Math.floor(total % 60);\n    return <div>{`${minutes}:${seconds}`}</div>;\n  };\n\n  const getTime = (track) => {\n    if (times[track.id] !== track.duration) {\n      setTimes({ ...times, [track.id]: track.duration });\n    }\n  };\n\n  const showUpdatePlaylistCheckbox = () => {\n    if (authorized && expand) {\n      return (\n        <div className=\"playlist-update\">\n          <div>Set all to current</div>\n          <div\n            className=\"playlist-update-btn\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setDoUpdate(true);\n            }}\n          />\n        </div>\n      );\n    }\n  };\n\n  const arrow = expand ? 'down-arrow' : '';\n  const open = expand ? 'open' : 'closed';\n\n  return (\n    <>\n      <div\n        className={`row tier ${expand ? 'row-open' : ''}`}\n        onClick={() => setExpand(!expand)}\n      >\n        <div className=\"marqee tier-info\">\n          <div className=\"tier-name\">\n            <img className={`arrow ${arrow}`} src={`/images/right-arrow.svg`} />\n            <h2>{playlist.name}</h2>\n\n            {showUpdatePlaylistCheckbox()}\n          </div>\n\n          <div className=\"tier-count\">\n            <div className=\"song-count\">{playlist.songs.length} songs</div>\n            <div className=\"song-count\">{renderTotalTime()}</div>\n          </div>\n          <div className=\"tier-display\">\n            {renderEditButton()}\n            {renderDeleteButton()}\n          </div>\n        </div>\n      </div>\n      <hr />\n      <div className={`title-container ${open}`}>\n        {expand && renderPlaylistSongs()}\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    playlists: state.playlists,\n    playlistSongs: state.playlistSongs,\n    band: state.bands.currentBand,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchPlaylistSongs,\n  deletePlaylist,\n  editPlaylist,\n})(requireAuth(Playlist));\n","import {\n  FETCH_PLAYLISTS,\n  CREATE_PLAYLIST,\n  EDIT_PLAYLIST,\n  DELETE_PLAYLIST,\n} from './types';\nimport { errorHandler } from './errors';\nimport greenhouse from '../apis/greenhouse';\nimport { deletePlaylistSong } from '.';\n\nexport const fetchPlaylists = (bandId) => async (dispatch) => {\n  try {\n    const response = await greenhouse.get(`/playlists/${bandId}`);\n    dispatch({ type: FETCH_PLAYLISTS, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const createPlaylist = (formValues) => async (dispatch, getState) => {\n  try {\n    const { currentBand } = getState().bands;\n    const response = await greenhouse.post('/playlists', {\n      ...formValues,\n      currentBand: currentBand.id,\n    });\n    dispatch({ type: CREATE_PLAYLIST, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const editPlaylist =\n  (formValues, playlistId) => async (dispatch, getState) => {\n    try {\n      const { currentBand } = getState().bands;\n      const response = await greenhouse.patch(`/playlists/${playlistId}`, {\n        ...formValues,\n        currentBand: currentBand.id,\n      });\n      dispatch({ type: EDIT_PLAYLIST, payload: response.data });\n    } catch (err) {\n      dispatch(errorHandler(err));\n    }\n  };\n\nexport const deletePlaylist = (playlistId) => async (dispatch, getState) => {\n  const { currentBand } = getState().bands;\n  try {\n    const response = await greenhouse.post('/playlists/delete', {\n      playlistId,\n      currentBand: currentBand.id,\n    });\n    response.data.songs.forEach((playlistSongId) => {\n      dispatch(deletePlaylistSong(playlistSongId, response.data.id));\n    });\n    dispatch({ type: DELETE_PLAYLIST, payload: response.data });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport AddButton from '../reusable/AddButton';\nimport { createTier } from '../../actions';\n\nconst AddTier = ({ createTier }) => {\n  return (\n    <AddButton\n      onSubmit={(formValues) => createTier(formValues)}\n      title=\"Add a Tier\"\n      image=\"/images/add.png\"\n      fields={[\n        {\n          label: 'Tier Name',\n          name: 'tierName',\n          type: 'input',\n          required: true,\n        },\n      ]}\n      addClass=\"add-left\"\n    />\n  );\n};\n\nexport default connect(null, { createTier })(AddTier);\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport {\n  fetchTiers,\n  fetchPlaylists,\n  createTier,\n  createPlaylist,\n} from '../../actions';\nimport Tier from '../tiers/Tier';\nimport Playlist from '../playlists/Playlist';\nimport AddButton from '../reusable/AddButton';\nimport requireAuth from '../reusable/requireAuth';\nimport AddTier from '../tiers/AddTier';\n\nconst BodyContainer = ({\n  fetchPlaylists,\n  createTier,\n  fetchTiers,\n  tiers,\n  playlists,\n  band,\n  authorized,\n  createPlaylist,\n  currentSong,\n  handleUpdate,\n  user,\n}) => {\n  const [tierList, setTierList] = useState([]);\n  const [playlistList, setPlaylistList] = useState([]);\n\n  useEffect(() => {\n    fetchTiers(band.id);\n    fetchPlaylists(band.id);\n  }, [band]);\n\n  useEffect(() => {\n    handleUpdate();\n  }, [user]);\n\n  useEffect(() => {\n    setTierList(\n      band.tiers\n        .map((id) => tiers[id])\n        .sort((a, b) => {\n          if (a.position < b.position) {\n            return -1;\n          }\n          if (b.position < a.position) {\n            return 1;\n          }\n        })\n    );\n  }, [tiers]);\n\n  useEffect(() => {\n    setPlaylistList(\n      band.playlists\n        .map((id) => playlists[id])\n        .sort((a, b) => {\n          if (a.position < b.position) {\n            return -1;\n          }\n          if (b.position < a.position) {\n            return 1;\n          }\n        })\n    );\n  }, [playlists]);\n\n  const renderTiers = () => {\n    return tierList.map((tier) => {\n      if (tier) {\n        return <Tier tier={tier} key={tier.id} />;\n      }\n    });\n  };\n\n  const renderTierAddButton = () => {\n    if (authorized) {\n      return <AddTier />;\n    }\n  };\n\n  const renderPlaylistAddButton = () => {\n    if (authorized) {\n      return (\n        <AddButton\n          onSubmit={(formValues) => createPlaylist(formValues)}\n          title=\"Add a Playlist\"\n          image=\"/images/add.png\"\n          fields={[\n            {\n              label: 'Playlist Name',\n              name: 'playlistName',\n              type: 'input',\n              required: true,\n            },\n          ]}\n          addClass=\"add-left\"\n        />\n      );\n    }\n  };\n\n  const renderPlaylists = () => {\n    return playlistList.map((playlist) => {\n      if (playlist) {\n        return <Playlist playlist={playlist} key={playlist.id} />;\n      }\n    });\n  };\n\n  const playbarActive = currentSong ? 'playbar-active' : '';\n\n  return (\n    <div className={`main ${playbarActive}`}>\n      <div className=\"section-header\">\n        <h2 className=\"section-title\">Tiers</h2>\n        <div className=\"section-add\">{renderTierAddButton()}</div>\n      </div>\n      <hr />\n      {tiers && renderTiers()}\n      <div className=\"playlists\">\n        <div className=\"section-header\">\n          <h2 className=\"section-title\">Playlists</h2>\n          <div className=\"section-add\">{renderPlaylistAddButton()}</div>\n        </div>\n        <hr />\n        {playlists && renderPlaylists()}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    tiers: state.tiers,\n    playlists: state.playlists,\n    currentSong: state.audio.currentSong,\n    user: state.auth.user,\n    band: state.bands.currentBand,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchTiers,\n  fetchPlaylists,\n  createTier,\n  createPlaylist,\n})(requireAuth(BodyContainer));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nimport {\n  playAudio,\n  pauseAudio,\n  nextSong,\n  prevSong,\n  throwError,\n  initializeAudio,\n} from '../../actions';\n\nclass AudioDisplay extends React.Component {\n  constructor(props) {\n    super(props);\n    if (process.env.NODE_ENV === 'production') {\n      this.url = 'https://exploring-the-space.com';\n    } else {\n      this.url = 'http://localhost:3001';\n    }\n    this.audio = React.createRef();\n  }\n\n  state = { volume: 50, sliderPosition: 0 };\n\n  formatTime(time) {\n    let minutes =\n      time < 600 ? `0${Math.floor(time / 60)}` : Math.floor(time / 60);\n    let seconds =\n      time % 60 < 10 ? `0${Math.floor(time % 60)}` : Math.floor(time % 60);\n    return `${minutes}:${seconds}`;\n  }\n\n  displayDate = (date) => {\n    return moment.utc(date).format('MM/DD/yy');\n  };\n\n  wrapUrl(id) {\n    return `${this.url}/api/audio/${id}.mp3`;\n  }\n\n  updateSlider = () => {\n    const position =\n      (this.audio.current.currentTime / this.audio.current.duration) * 1000;\n    this.time = this.formatTime(this.audio.current.currentTime);\n    if (!isNaN(position)) {\n      this.setState({\n        sliderPosition: position,\n      });\n    }\n  };\n\n  setSpaceBarToPlay = (e) => {\n    if (e.code === 'Space') {\n      e.preventDefault();\n      if (this.props.pause) {\n        this.play();\n      } else {\n        this.pause();\n      }\n    }\n  };\n\n  audioError = () => {\n    const message =\n      \"The audio player had an error, probably can't connect to server.\";\n    this.props.throwError(message);\n  };\n\n  componentDidMount() {\n    // if there's no audio element created, create one with the current song\n    // add event listener to link the slider position to the time of the song\n\n    this.audio.current = new Audio();\n\n    this.audio.current.addEventListener('timeupdate', this.updateSlider);\n\n    this.audio.current.addEventListener('error', this.audioError);\n\n    // load next song at song end\n\n    this.audio.current.addEventListener('ended', this.nextSong);\n\n    // space bar stop/start\n\n    document.addEventListener('keydown', this.setSpaceBarToPlay);\n\n    this.audio.current.addEventListener('loadedmetadata', this.playOnLoad);\n  }\n\n  componentDidUpdate(prevProps) {\n    // scroll down to compensate for the playbar pushing content down\n\n    if (!this.scrolled) {\n      window.scroll(window.scrollX, window.scrollY + 96);\n      this.scrolled = true;\n    }\n\n    if (this.props.song) {\n      // if the current song is changed to something other than what is already loaded, change the src url and play the audio\n      // if redux gets a signal to play, play if not already\n      // reverse for pause\n      if (this.props.song !== prevProps.song) {\n        this.audio.current.src = this.wrapUrl(this.props.song.audio);\n        this.audio.current.volume = this.props.volume / 100;\n        // this.audio.current.play();\n      } else if (this.props.play && prevProps.pause) {\n        this.audio.current.play();\n      } else if (this.props.pause && prevProps.play) {\n        this.audio.current.pause();\n      }\n      if (this.props.volume !== prevProps.volume) {\n        this.audio.current.volume = this.props.volume / 100;\n      }\n    } else {\n      this.audio.current.pause();\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.setSpaceBarToPlay);\n\n    this.audio.current.src = '';\n    this.audio.current.removeEventListener('timeupdate', this.updateSlider);\n    this.audio.current.removeEventListener('error', this.audioError);\n    this.audio.current.removeEventListener('ended', this.nextSong);\n    this.audio.current.removeEventListener('loadedmetadata', this.playOnLoad);\n\n    this.props.initializeAudio();\n  }\n\n  playOnLoad = () => {\n    if (this.props.play) {\n      this.audio.current.play();\n    }\n  };\n\n  prevSong = () => {\n    if (this.audio.current.currentTime < 1) {\n      this.props.prevSong();\n    } else {\n      this.audio.current.currentTime = 0;\n    }\n  };\n\n  nextSong = () => {\n    this.props.nextSong();\n  };\n\n  play = () => {\n    this.props.playAudio();\n  };\n\n  pause = () => {\n    this.props.pauseAudio();\n  };\n\n  onSliderChange = (e) => {\n    const position = (e.target.value / 1000) * this.audio.current.duration;\n    this.audio.current.currentTime = position;\n  };\n\n  onPauseButton = () => {\n    if (this.props.play) {\n      this.pause();\n    } else {\n      this.play();\n    }\n  };\n\n  render() {\n    if (this.props.song) {\n      return (\n        <div className=\"playbar\">\n          <div className=\"playbar-header\">\n            <div className=\"playbar-title\">\n              <p>{this.props.song.title.title}</p>\n            </div>\n            <div className=\"big-play-container\">\n              <img\n                src=\"/images/prev.svg\"\n                className=\"audio-controls\"\n                onClick={this.prevSong}\n              />\n              <img\n                className=\"big-play-btn\"\n                src={this.props.play ? '/images/pause.svg' : '/images/play.svg'}\n                onClick={this.onPauseButton}\n              />\n              <img\n                src=\"/images/next.svg\"\n                className=\"audio-controls\"\n                onClick={this.nextSong}\n              />\n            </div>\n\n            <div className=\"playbar-info\">\n              <div className=\"playbar-info-detail\">\n                <p>Version:</p>\n                <p>{this.props.song.version}</p>\n              </div>\n              <div className=\"playbar-info-detail\">\n                <p>Date:</p>\n                <p>{this.displayDate(this.props.song.date)}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"playslider-container\">\n            <div className=\"playslider-time\">{this.time}</div>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"1000\"\n              value={this.state.sliderPosition}\n              className=\"playslider\"\n              onInput={this.onSliderChange}\n            />\n            <div className=\"playslider-time\">\n              {this.formatTime(this.props.song.duration)}\n            </div>\n          </div>\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    song: state.audio.currentSong,\n    play: state.audio.play,\n    pause: state.audio.pause,\n    volume: state.audio.volume,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  playAudio,\n  pauseAudio,\n  nextSong,\n  prevSong,\n  throwError,\n  initializeAudio,\n})(AudioDisplay);\n","import React, { useEffect, useState, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport { fetchBand, signOut, changeVolume } from '../../actions';\nimport Main from './Main';\nimport AudioDisplay from '../layout/AudioDisplay';\nimport requireAuth from '../reusable/requireAuth';\n\nconst Header = ({\n  fetchBand,\n  band,\n  match,\n  authorized,\n  handleUpdate,\n  user,\n  signOut,\n  volume,\n  changeVolume,\n}) => {\n  const [expand, setExpand] = useState(false);\n  const menu = useRef(null);\n\n  useEffect(() => {\n    fetchBand(match.params.bandName);\n    document.addEventListener('click', clickToDismiss, { capture: true });\n    return () => {\n      document.removeEventListener('click', clickToDismiss, { capture: true });\n    };\n  }, []);\n\n  useEffect(() => {\n    handleUpdate();\n  }, [band, user]);\n\n  const clickToDismiss = (e) => {\n    if (menu.current && menu.current.contains(e.target)) {\n      return;\n    }\n    setExpand(false);\n  };\n\n  const renderAdmin = () => {\n    return (\n      <div className=\"menu\">\n        <Link className=\"menu-item\" to=\"/user\">\n          User Home\n        </Link>\n        <Link className=\"menu-item\" to=\"/help\">\n          Help\n        </Link>\n        <div className=\"menu-item\" onClick={signOut}>\n          Sign Out\n        </div>\n      </div>\n    );\n  };\n\n  const renderHomeLink = () => {\n    return (\n      <div className=\"menu\">\n        <Link className=\"menu-item\" to=\"/\">\n          Home\n        </Link>\n        <Link className=\"menu-item\" to=\"/help\">\n          Help\n        </Link>\n        <Link className=\"menu-item\" to=\"/signin\">\n          Sign In\n        </Link>\n      </div>\n    );\n  };\n\n  const showContent = () => {\n    if (!band) {\n      return (\n        <div className=\"no-band\">\n          <h1>\n            This band does not exist on Exploring the Space, but you can create\n            it.\n          </h1>\n          <div className=\"home-buttons\">\n            <Link to=\"/\">Home</Link>\n            <Link to=\"/help\">What Is It?</Link>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"band-header\">\n        <div className=\"band-name\">\n          <h1>{band && band.name}</h1>\n          <div\n            className=\"menu-button\"\n            ref={menu}\n            onClick={() => setExpand(!expand)}\n          >\n            <img src=\"images/dots.png\" />\n            {expand && (authorized ? renderAdmin() : renderHomeLink())}\n          </div>\n        </div>\n        <div className=\"volume-container\">\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"100\"\n            className=\"volume\"\n            value={volume}\n            onInput={(e) => changeVolume(e.target.value)}\n          />\n          <img src=\"/images/volume.svg\" />\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <>\n      <div className=\"header\">\n        <AudioDisplay />\n        {showContent()}\n      </div>\n\n      {band && <Main />}\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    band: state.bands.currentBand,\n    user: state.auth.currentUser,\n    volume: state.audio.volume,\n  };\n};\n\nexport default connect(mapStateToProps, { fetchBand, signOut, changeVolume })(\n  requireAuth(Header)\n);\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport {\n  createBand,\n  fetchBands,\n  editBand,\n  deleteBand,\n  signOut,\n} from '../../actions';\nimport AddButton from '../reusable/AddButton';\nimport DeleteButton from '../reusable/DeleteButton';\n\nconst User = ({\n  user,\n  bands,\n  createBand,\n  fetchBands,\n  editBand,\n  deleteBand,\n  signOut,\n}) => {\n  useEffect(() => {\n    fetchBands();\n  }, []);\n\n  const renderBands = () => {\n    const bandList = user.bands.map((id) => bands[id]);\n    if (!bandList.length || !bandList[0]) {\n      return <h3>No bands belong to this user</h3>;\n    }\n    return bandList.map((band) => {\n      if (band) {\n        return (\n          <div className=\"band-item\" key={band.id}>\n            <Link to={`/${band.url}`}>\n              <h2>{band.name}</h2>\n            </Link>\n            <div className=\"band-buttons\">\n              <AddButton\n                onSubmit={(formValues) => editBand(formValues, band.id)}\n                title={`Edit ${band.name}`}\n                image=\"images/edit.png\"\n                fields={[\n                  {\n                    label: 'Band Name',\n                    name: 'name',\n                    type: 'input',\n                  },\n                ]}\n                initialValues={{ name: band.name }}\n                enableReinitialize={true}\n                form={`edit-band-${band.id}`}\n              />\n              <DeleteButton\n                onSubmit={() => deleteBand(band.id)}\n                displayName={band.name}\n              />\n            </div>\n          </div>\n        );\n      }\n    });\n  };\n\n  if (user) {\n    return (\n      <>\n        <div className=\"user-header\">\n          <div className=\"user-header-sub\">\n            <h1 className=\"user-title\">{user.username}'s bands</h1>\n            <AddButton\n              onSubmit={(formValues) => createBand(formValues)}\n              title=\"Create a Band\"\n              image=\"images/add.png\"\n              fields={[\n                {\n                  label: 'Band Name',\n                  name: 'bandName',\n                  type: 'input',\n                },\n              ]}\n            />\n          </div>\n          <div className=\"user-header-sub\">\n            <Link className=\"user-link\" to=\"/\">\n              Home\n            </Link>\n            <div className=\"user-link\" onClick={signOut}>\n              Sign Out\n            </div>\n          </div>\n        </div>\n        <hr />\n        <div className=\"band-list\">{renderBands()}</div>\n      </>\n    );\n  } else {\n    return null;\n  }\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.auth.user,\n    bands: state.bands,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  createBand,\n  fetchBands,\n  editBand,\n  deleteBand,\n  signOut,\n})(User);\n","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\n\nclass UserForm extends React.Component {\n    \n    renderInput = ({ input, label, meta, type, autoComplete, defaultValue }) => {\n\n        return (\n            <div>\n                <label>{label}</label>\n                <input\n                    type={type}\n                    autoComplete={autoComplete} \n                    {...input}\n                /> \n            </div>\n        );\n    };\n\n    submitForm = formValues => {\n        this.props.onSubmit(formValues);\n    };\n\n\n    render() {\n        return (\n            <form className='signin' onSubmit={this.props.handleSubmit(this.submitForm)}>\n                <Field\n                    name=\"username\"\n                    component={this.renderInput}\n                    label=\"Username: \"\n                    type=\"text\"\n                    autoComplete=\"username\"\n    \n                />\n                <Field\n                    name=\"password\"\n                    component={this.renderInput}\n                    label=\"Passwyrd: \"\n                    type=\"password\"\n                    autoComplete=\"current-password\"\n                />\n                <button className=\"signin-submit\">Submit</button>\n            </form>\n        );\n    }\n\n\n}\n\nexport default reduxForm({\n    form: 'userForm'\n})(UserForm);","import { connect } from 'react-redux';\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport history from '../../history';\nimport { signIn } from '../../actions';\nimport UserForm from '../user/UserForm';\n\nconst SignIn = ({ signIn, isSignedIn }) => {\n  useEffect(() => {\n    if (isSignedIn) {\n      history.push('/user');\n    }\n  }, []);\n\n  return (\n    <div className=\"auth\">\n      <div className=\"help-header\">Exploring the Space</div>\n      <h1>Sign In</h1>\n      <UserForm onSubmit={(formValues) => signIn(formValues)} />\n      <div className=\"home-buttons\">\n        <Link to=\"/\">Home</Link>\n        <Link to=\"signup\">Sign Up</Link>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return { isSignedIn: state.auth.isSignedIn };\n};\n\nexport default connect(mapStateToProps, { signIn })(SignIn);\n","import { connect } from 'react-redux';\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport history from '../../history';\nimport { signUp } from '../../actions';\nimport UserForm from '../user/UserForm';\n\nconst SignUp = ({ signUp, isSignedIn }) => {\n  useEffect(() => {\n    if (isSignedIn) {\n      history.push('/user');\n    }\n  }, []);\n\n  return (\n    <div className=\"auth\">\n      <div className=\"help-header\">Exploring the Space</div>\n      <h1>Sign Up</h1>\n      <UserForm onSubmit={(formValues) => signUp(formValues)} />\n      <div className=\"home-buttons\">\n        <Link to=\"/\">Home</Link>\n        <Link to=\"signin\">Sign In</Link>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return { isSignedIn: state.auth.isSignedIn };\n};\n\nexport default connect(mapStateToProps, { signUp })(SignUp);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport _ from 'lodash';\n\nimport { fetchBands } from '../../actions';\n\nclass Home extends React.Component {\n  componentDidMount() {\n    this.props.fetchBands();\n  }\n\n  renderBands() {\n    delete this.props.bands.currentBand;\n\n    const bands = Object.values(this.props.bands);\n\n    return bands.map((band) => {\n      return (\n        <div className=\"band-item\" key={band.id}>\n          <Link to={`/${band.url}`}>\n            <h2>{band.name}</h2>\n          </Link>\n        </div>\n      );\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <h1 className=\"home-header\">Exploring the Space</h1>\n        <div className=\"home-buttons\">\n          <Link to=\"/signin\">Sign In</Link>\n          <Link to=\"/signup\">Sign Up</Link>\n          <Link to=\"/help\">What Is It?</Link>\n        </div>\n        <h1>All Bands:</h1>\n        <div className=\"band-list\">\n          {this.props.bands && this.renderBands()}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    bands: state.bands,\n  };\n};\n\nexport default connect(mapStateToProps, { fetchBands })(Home);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst Help = () => {\n    return <>\n        <div className=\"home-buttons\">\n            <Link to=\"/\">Home</Link>\n            <Link to=\"signin\">Sign In</Link>\n            <Link to=\"signin\">Sign Up</Link>\n        </div>\n        <div className=\"help\">\n            <div className=\"help-header\">\n                Exploring the Space allows you to keep track of your musical recordings in an easy to navigate catalogue.\n            </div>\n            <h1>\n                Here's How This Works\n            </h1>\n            <div className=\"tldr\">\n                TL;DR: Bands contain Tiers, which contain Titles (songs), which contain different versions, each of which can have one or more recordings. Bands also have Playlists which are collections of particular recordings.\n            </div>\n            <p>\n                Each user can have 1 or more bands.  Each band has their own page.\n            </p>\n\n            <h2>\n                The Band Page\n            </h2>\n            <p>\n                The band page has a \"Tiers\" sections and a \"Playlists\" section. The tiers are used to catalogue your songs, and the playlists are used to combine different songs into a certain order.\n            </p>\n            <h3>\n                Tiers\n            </h3>\n            <p>\n                A tier is a collection of songs. Tiers can be separated by different genres, songs that you're currently rehearsing versus songs that are still being written, or any other criteria.  Within the band page, these songs are called \"Titles.\" Click on a tier to reveal its titles.\n            </p>\n            <h3>\n                Titles\n            </h3>\n            <p>\n                Titles contain all the various versions and recordings of a particular song. On the title display, you will see the recording that is most up-to-date for this title, and a button to play it or download it. Click on the title to reveal the different versions it contains.\n            </p>\n            <h3>\n                Versions\n            </h3>\n            <p>\n                A version categorizes groups of recordings, and again you can use whatever criteria you want.  Maybe one version is band practice, and the other is a recording you're working on.  Each version contains one or more recordings, or \"Bounces.\" One and only one version for each title is the \"current\" version.\n            </p>\n            <h3>\n                Bounces\n            </h3>\n            <p>\n                Bounces are the root component of a song, and they represent a particular recording.  They are represented by a date. Like versions, one bounce per version is designated \"current.\"\n            </p>\n            <h3>\n                Playlists\n            </h3>\n            <p>\n                Playlists are where you can make ordered lists of particular bounces.  Each title has a display of its currently selected version and bounce, along with a button to add that recording to a playlist (you have to create the playlist first).\n            </p>\n            <p>\n                If you change the version or bounce you're listening to, the song in the playlist will remain the same one you originally added. If you want to change which version and/or bounce a song in a playlist represents, you can change that by editing it within the playlist.\n            </p>\n            <h2>\n                Controls\n            </h2>\n            <p>\n                If you are on a band page of a band you own, you will see additional buttons where you can modify the catalogue and upload new recordings.\n            </p>\n            <p className=\"danger\">\n                If you delete an element, everything contained within that element will be deleted!\n            </p>\n            <a href=\"https://github.com/andytisdall/greenhouse\">\n                Github for this project\n            </a>\n        </div>\n    </>;\n};\n\nexport default Help;","import React from 'react';\n\nconst AddRecordingSelector = ({\n  stateList,\n  onSelect,\n  selectedItem,\n  label,\n  date,\n  addButton,\n}) => {\n  const renderInput = () => {\n    if (!date) {\n      const onChange = (e) => {\n        const selected = stateList.find((item) => item.id === e.target.value);\n        onSelect(selected);\n      };\n      const defaultItem = { name: 'choose...', id: '0' };\n      const list = [defaultItem, ...stateList];\n      const options = list.map((item) => {\n        if (item) {\n          const name = item.name || item.title;\n          return (\n            <option value={item.id} key={item.id} disabled={item.id === '0'}>\n              {name}\n            </option>\n          );\n        }\n      });\n\n      return (\n        <select onChange={onChange} value={selectedItem.id}>\n          {options}\n        </select>\n      );\n    } else {\n      return (\n        <input\n          type=\"date\"\n          value={selectedItem}\n          onChange={(e) => onSelect(e.target.value)}\n          className=\"calendar\"\n        />\n      );\n    }\n  };\n\n  return (\n    <div className=\"add-recording-select-row\">\n      <div className=\"add-recording-label\">{label}:</div>\n      <div className=\"add-recording-input\">\n        <div>{renderInput()}</div>\n        {addButton}\n      </div>\n    </div>\n  );\n};\n\nexport default AddRecordingSelector;\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useLocation, useParams } from 'react-router-dom';\n\nimport AddRecordingSelector from './AddRecordingSelector';\nimport AddTier from '../tiers/AddTier';\nimport AddTitle from '../titles/AddTitle';\nimport AddVersion from '../versions/AddVersion';\nimport {\n  fetchTiers,\n  fetchTitles,\n  fetchVersions,\n  fetchBounces,\n  createBounce,\n} from '../../actions';\n\nconst AddRecording = ({\n  currentBand,\n  tiers,\n  titles,\n  versions,\n  fetchTiers,\n  fetchTitles,\n  fetchVersions,\n  fetchBounces,\n  createBounce,\n  uploadStarted,\n  error,\n  user,\n  recording,\n  onSuccess,\n}) => {\n  const defaultItem = { name: 'choose...', id: '0' };\n  const displayDate = () => {\n    return new Date().toISOString().substring(0, 10);\n  };\n\n  const [selectedTitle, setSelectedTitle] = useState(defaultItem);\n  const [selectedTier, setSelectedTier] = useState(defaultItem);\n  const [selectedVersion, setSelectedVersion] = useState(defaultItem);\n  const [selectedDate, setSelectedDate] = useState(displayDate());\n  const [uploadSuccess, setUploadSuccess] = useState(false);\n  const [uploadLoading, setUploadLoading] = useState(false);\n\n  const [titleList, setTitleList] = useState([]);\n  const [tierList, setTierList] = useState([]);\n  const [versionList, setVersionList] = useState([]);\n\n  const location = useLocation();\n\n  useEffect(() => {\n    if (location.state) {\n      setSelectedTier(location.state.tier);\n      setSelectedTitle(location.state.title);\n      setSelectedVersion(location.state.version);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (currentBand) {\n      fetchTiers(currentBand.id);\n    }\n  }, [currentBand]);\n\n  useEffect(() => {\n    if (currentBand) {\n      const list = currentBand.tiers.map((id) => tiers[id]);\n      setTierList(list);\n    }\n  }, [tiers]);\n\n  useEffect(() => {\n    if (selectedTier.id !== '0') {\n      fetchTitles(selectedTier.id);\n      setVersionList([]);\n      // setSelectedVersion(defaultItem);\n      // setSelectedTitle(defaultItem);\n    }\n  }, [selectedTier]);\n\n  useEffect(() => {\n    if (selectedTier.id !== '0') {\n      const list = selectedTier.trackList.map((id) => titles[id]);\n      setTitleList(list);\n    }\n  }, [titles]);\n\n  useEffect(() => {\n    if (selectedTitle.id !== '0') {\n      fetchVersions(selectedTitle.id);\n      // setSelectedVersion(defaultItem);\n    }\n  }, [selectedTitle]);\n\n  useEffect(() => {\n    if (selectedTitle.id !== '0') {\n      const list = selectedTitle.versions.map((id) => versions[id]);\n      setVersionList(list);\n    }\n  }, [versions]);\n\n  useEffect(() => {\n    if (selectedVersion.id !== '0') {\n      fetchBounces(selectedVersion.id);\n    }\n  }, [selectedVersion]);\n\n  useEffect(() => {\n    if (uploadLoading && !uploadStarted) {\n      setUploadLoading(false);\n      setUploadSuccess(true);\n      setTimeout(() => {\n        setUploadSuccess(false);\n      }, 10000);\n      onSuccess();\n    }\n    if (uploadStarted && !uploadLoading) {\n      setUploadLoading(true);\n    }\n  }, [uploadStarted]);\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (submitActive()) {\n      const file = new File([recording], 'recording.mp3', {\n        lastModified: Date(),\n      });\n      const form = {\n        date: selectedDate,\n        latest: true,\n        file: [file],\n      };\n      createBounce(form, selectedVersion.id);\n    }\n  };\n\n  const submitActive = () => {\n    if (recording && selectedDate && selectedVersion.id !== '0') {\n      return true;\n    }\n    return false;\n  };\n\n  const renderUploadSuccess = () => {\n    return <div className=\"upload-success\">Recording Successfully Saved!</div>;\n  };\n\n  const renderUploadLoading = () => {\n    return (\n      <div className=\"upload-image\">\n        <p>Uploading...</p>\n        <img src=\"/images/windmill.gif\" className=\"windmill\" />\n      </div>\n    );\n  };\n\n  if (!user || !currentBand || !user.bands.includes(currentBand.id)) {\n    return (\n      <div className=\"add-recording\">\n        Warning: you will not be able to save this recording because you are not\n        signed in or this is not your band.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"add-recording\">\n      <h2>Save recording for {currentBand.name}</h2>\n\n      <AddRecordingSelector\n        stateList={tierList}\n        onSelect={setSelectedTier}\n        selectedItem={selectedTier}\n        label=\"Tier\"\n        addButton={<AddTier />}\n      />\n\n      {selectedTier.id !== '0' && (\n        <AddRecordingSelector\n          stateList={titleList}\n          onSelect={setSelectedTitle}\n          selectedItem={selectedTitle}\n          label=\"Title\"\n          addButton={<AddTitle tier={selectedTier} />}\n        />\n      )}\n\n      {selectedTitle.id !== '0' && (\n        <AddRecordingSelector\n          stateList={versionList}\n          onSelect={setSelectedVersion}\n          selectedItem={selectedVersion}\n          label=\"Version\"\n          addButton={<AddVersion title={selectedTitle} />}\n        />\n      )}\n\n      {selectedVersion.id !== '0' && (\n        <AddRecordingSelector\n          stateList={null}\n          onSelect={setSelectedDate}\n          selectedItem={selectedDate}\n          label=\"Date\"\n          date={true}\n        />\n      )}\n\n      <form onSubmit={onSubmit}>\n        <button\n          className={`${\n            submitActive()\n              ? 'submit-button submit-button-centered'\n              : 'submit-inactive'\n          }`}\n          type=\"submit\"\n        >\n          Save Bounce\n        </button>\n      </form>\n      {uploadSuccess && renderUploadSuccess()}\n      {uploadLoading && renderUploadLoading()}\n      {error}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    tiers: state.tiers,\n    titles: state.titles,\n    versions: state.versions,\n    currentBand: state.bands.currentBand,\n    uploadStarted: state.bands.uploadStarted,\n    error: state.error.error,\n    user: state.auth.user,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchTiers,\n  fetchTitles,\n  fetchVersions,\n  createBounce,\n  fetchBounces,\n})(AddRecording);\n","import React, { useState, useEffect } from 'react';\n\nconst Timer = ({ isRecording }) => {\n  const [timer, setTimer] = useState(0);\n\n  useEffect(() => {\n    let interval;\n    if (isRecording) {\n      interval = setInterval(() => {\n        setTimer(timer + 1);\n      }, 1000);\n    } else {\n      clearInterval(interval);\n      setTimer(0);\n    }\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isRecording, timer]);\n\n  const formatTime = (time) => {\n    let minutes =\n      time < 600 ? `0${Math.floor(time / 60)}` : Math.floor(time / 60);\n    let seconds =\n      time % 60 < 10 ? `0${Math.floor(time % 60)}` : Math.floor(time % 60);\n    return `${minutes}:${seconds}`;\n  };\n\n  return <div className=\"recorder-time\">{formatTime(timer)}</div>;\n};\n\nexport default Timer;\n","import React, { useEffect, useState } from 'react';\n\nconst DeviceControl = ({ inputSource, setInputSource, isRecording }) => {\n  const [devices, setDevices] = useState([]);\n\n  useEffect(() => {\n    getDevices();\n    navigator.mediaDevices.ondevicechange = getDevices;\n  }, []);\n\n  const getDevices = async () => {\n    // get user input devices\n    const devices = await navigator.mediaDevices.enumerateDevices();\n    const inputDevices = devices.map((device) => {\n      if (device.kind === 'audioinput' && device.deviceId !== 'default') {\n        return device;\n      }\n    });\n    setDevices(inputDevices);\n    // if (!inputSource) {\n    //   setInputSource(devices[0]);\n    // }\n  };\n\n  const micSelect = () => {\n    const deviceList = devices.map((device) => {\n      if (device) {\n        return (\n          <option key={device.deviceId} value={device.deviceId}>\n            {device.label}\n          </option>\n        );\n      }\n    });\n    const blank = <option key={'blank_device'} value={null}></option>;\n    deviceList.unshift(blank);\n    return (\n      <select\n        onChange={(e) => setInputSource(e.target.value)}\n        disabled={isRecording}\n      >\n        {deviceList}\n      </select>\n    );\n  };\n\n  return (\n    <div className=\"device-control\">\n      <div>Input device:</div>\n      <div className=\"mic-select\">{micSelect()}</div>\n    </div>\n  );\n};\n\nexport default DeviceControl;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport recorderJs from '../../recorder/lib';\n\nimport {\n  clearRecordings,\n  createRecording,\n  fetchRecording,\n  deleteRecording,\n  combineRecordings,\n  fetchBand,\n} from '../../actions';\nimport AddRecording from './AddRecording';\nimport Timer from './Timer';\nimport DeviceControl from './DeviceControl';\nimport DeleteButton from '../reusable/DeleteButton';\nimport greenhouse from '../../apis/greenhouse';\n\nconst Recorder = ({\n  recordings,\n  createRecording,\n  fetchRecording,\n  clearRecordings,\n  deleteRecording,\n  combineRecordings,\n  fetchBand,\n  currentBand,\n}) => {\n  const [isRecording, setIsRecording] = useState(false);\n  const [inputSource, setInputSource] = useState();\n  const [error, setError] = useState('');\n  const [readyToSave, setReadyToSave] = useState(false);\n\n  const mediaRecorder = useRef();\n  const params = useParams();\n\n  useEffect(async () => {\n    fetchBand(params.bandName);\n    await navigator.mediaDevices.getUserMedia({\n      audio: {\n        sampleRate: 41000,\n      },\n    });\n  }, []);\n\n  useEffect(async () => {\n    if (inputSource) {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          deviceId: inputSource.deviceId,\n          sampleRate: 41000,\n        },\n      });\n      const input = new AudioContext().createMediaStreamSource(stream);\n      mediaRecorder.current = new recorderJs(input, {\n        numChannels: 1,\n      });\n    }\n  }, [inputSource]);\n\n  useEffect(() => {\n    if (currentBand) {\n      const recordingList = JSON.parse(localStorage.getItem('recording-list'));\n      if (recordingList) {\n        recordingList.forEach((id, index) => {\n          fetchRecording(id, index);\n        });\n      }\n    }\n  }, [currentBand]);\n\n  const onRecord = () => {\n    if (!isRecording) {\n      startRecording();\n    } else {\n      stopRecording();\n    }\n  };\n\n  const startRecording = async () => {\n    try {\n      mediaRecorder.current.record();\n      setIsRecording(true);\n      setReadyToSave(false);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const stopRecording = async () => {\n    try {\n      mediaRecorder.current.stop();\n      mediaRecorder.current.exportWAV(createRecording);\n      mediaRecorder.current.clear();\n      setIsRecording(false);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const renderButtons = () => {\n    if (inputSource) {\n      return (\n        <div className=\"recorder-buttons\">\n          <div onClick={onRecord} className=\"recorder-btn\">\n            {isRecording ? 'Stop' : 'Record'}\n          </div>\n        </div>\n      );\n    }\n  };\n\n  const renderDisplay = () => {\n    let display = '';\n    if (readyToSave && recordings.combinedRecording) {\n      const url = URL.createObjectURL(recordings.combinedRecording);\n      display = <audio controls src={url} />;\n    } else if (isRecording) {\n      display = <Timer isRecording={isRecording} />;\n    }\n    return <div className=\"playhead-container\">{display}</div>;\n  };\n\n  const renderList = () => {\n    if (recordings.recordingList && !readyToSave) {\n      return recordings.recordingList.map((item, index) => {\n        if (!item) {\n          return <div key={index}>{`${index + 1}: ${item}`}</div>;\n        }\n        const url = greenhouse.defaults.baseURL + `/recordings/${item}`;\n        return (\n          <div key={item} className={`recording-list-item`}>\n            {`${index + 1}: `}\n            <audio\n              src={url}\n              controls\n              onClick={(e) => e.preventDefault()}\n              className=\"small-audio-player\"\n            />\n            <DeleteButton\n              onSubmit={() => {\n                deleteRecording(item);\n                setReadyToSave(false);\n              }}\n              displayName={`recording ${index + 1}`}\n            />\n          </div>\n        );\n      });\n    }\n  };\n\n  const onCreateBounce = () => {\n    clearRecordings();\n    // setReadyToSave(false);\n  };\n\n  const renderAddRecording = () => {\n    if (!readyToSave) {\n      if (recordings.recordingList.length) {\n        return (\n          <button\n            onClick={() => {\n              combineRecordings();\n              setReadyToSave(true);\n            }}\n            className=\"submit-button submit-button-centered\"\n          >\n            Save Combined Recording\n          </button>\n        );\n      }\n    } else {\n      return (\n        <AddRecording\n          recording={recordings.combinedRecording}\n          onSuccess={onCreateBounce}\n        />\n      );\n    }\n  };\n\n  return (\n    <div className={isRecording ? 'recorder recording' : 'recorder'}>\n      {error}\n      {renderDisplay()}\n      {renderButtons()}\n      <DeviceControl\n        inputSource={inputSource}\n        setInputSource={setInputSource}\n        isRecording={isRecording}\n      />\n      <div className=\"recording-list\">\n        {renderList()}\n        {renderAddRecording()}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    recordings: state.recordings,\n    currentBand: state.bands.currentBand,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  createRecording,\n  fetchRecording,\n  clearRecordings,\n  deleteRecording,\n  combineRecordings,\n  fetchBand,\n})(Recorder);\n","import {\n  CREATE_RECORDING,\n  CLEAR_RECORDINGS,\n  FETCH_RECORDING,\n  DELETE_RECORDING,\n  COMBINE_RECORDINGS,\n} from './types';\nimport { errorHandler } from './errors';\nimport greenhouse from '../apis/greenhouse';\n\nexport const fetchRecording = (recordingId, index) => {\n  return {\n    type: FETCH_RECORDING,\n    payload: { index, id: recordingId },\n  };\n};\n\nexport const combineRecordings = () => async (dispatch, getState) => {\n  const { recordingList } = getState().recordings;\n\n  const response = await greenhouse.post(\n    `/recordings/combine`,\n    { recordingList },\n    { responseType: 'blob' }\n  );\n\n  dispatch({ type: COMBINE_RECORDINGS, payload: response.data });\n};\n\nexport const createRecording = (blob) => async (dispatch, getState) => {\n  try {\n    const currentBand = getState().bands.currentBand;\n    const formData = new FormData();\n    formData.append('currentBand', currentBand);\n    formData.append('file', blob);\n    const response = await greenhouse.post('/recordings', formData, {\n      headers: { 'Content-Type': 'multipart/form-data' },\n    });\n    // get the existing list of current recordings from local storage and add new stream id\n    const recordingList =\n      JSON.parse(localStorage.getItem('recording-list')) || [];\n    localStorage.setItem(\n      'recording-list',\n      JSON.stringify([...recordingList, response.data])\n    );\n\n    dispatch({\n      type: CREATE_RECORDING,\n      payload: response.data,\n    });\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n\nexport const clearRecordings = () => {\n  const recordingList = JSON.parse(localStorage.getItem('recording-list'));\n  if (recordingList) {\n    recordingList.forEach((id) => {\n      greenhouse.post('/recordings/delete', { id });\n    });\n    localStorage.removeItem('recording-list');\n  }\n  return { type: CLEAR_RECORDINGS };\n};\n\nexport const deleteRecording = (id) => (dispatch) => {\n  greenhouse.post('recordings/delete', { id });\n  const recordingList = JSON.parse(localStorage.getItem('recording-list'));\n  const editedList = recordingList.filter((recId) => recId !== id);\n  localStorage.setItem('recording-list', JSON.stringify(editedList));\n  dispatch({ type: DELETE_RECORDING, payload: id });\n};\n","import React, { useRef, useEffect } from 'react';\nimport WaveformData from 'waveform-data';\n\nconst Waveform = ({ audio, isRecording }) => {\n  const canvas = useRef();\n  const audioContext = useRef();\n\n  const cache = useRef({});\n\n  useEffect(async () => {\n    if (isRecording && canvas.current) {\n      const ctx = canvas.current.getContext('2d');\n      ctx.clearRect(0, 0, canvas.current.width, canvas.current.height);\n    }\n  }, [isRecording]);\n\n  useEffect(async () => {\n    if (audio) {\n      if (canvas.current) {\n        const ctx = canvas.current.getContext('2d');\n        ctx.clearRect(0, 0, canvas.current.width, canvas.current.height);\n      }\n      if (!cache.current[audio.size]) {\n        renderWaveform();\n      } else {\n        drawWaveform(cache.current[audio.size]);\n      }\n    }\n  }, [audio]);\n\n  const renderWaveform = async () => {\n    if (!audioContext.current) {\n      audioContext.current = new AudioContext();\n    }\n    const buffer = await audio.arrayBuffer();\n    const options = {\n      audio_context: audioContext.current,\n      array_buffer: buffer,\n      scale: 64,\n    };\n    WaveformData.createFromAudio(options, (err, waveform) => {\n      if (err) {\n        console.log(err);\n      } else {\n        drawWaveform(waveform);\n        cache.current[audio.size] = waveform;\n      }\n    });\n  };\n\n  const drawWaveform = (waveform) => {\n    const ctx = canvas.current.getContext('2d');\n\n    const lengthMultiplier = waveform.length / 300;\n\n    const scaleY = (amplitude, height) => {\n      const range = 256;\n      const offset = 128;\n\n      return height - ((amplitude + offset) * height) / range;\n    };\n\n    ctx.beginPath();\n\n    const channel = waveform.channel(0);\n\n    // Loop forwards, drawing the upper half of the waveform\n    for (let x = 0; x < waveform.length; x++) {\n      const val = channel.max_sample(x);\n\n      ctx.lineTo(x / lengthMultiplier, scaleY(val, canvas.current.height));\n    }\n\n    // Loop backwards, drawing the lower half of the waveform\n    for (let x = waveform.length - 1; x >= 0; x--) {\n      const val = channel.min_sample(x);\n\n      ctx.lineTo(x / lengthMultiplier, scaleY(val, canvas.current.height));\n    }\n\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n  };\n\n  return <canvas ref={canvas} />;\n};\n\nexport default Waveform;\n","import React, { useState, useEffect, useRef } from 'react';\n\nimport Waveform from './Waveform';\n\nconst Playhead = ({ audio, isRecording, addToSongList }) => {\n  const [playheadPosition, setPlayheadPosition] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [editedAudio, setEditedAudio] = useState(audio);\n  const [zoomIn, setZoomIn] = useState(false);\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(1000);\n\n  const player = useRef();\n\n  useEffect(() => {\n    player.current = new Audio();\n    player.current.onended = () => {\n      setIsPlaying(false);\n    };\n    player.current.onplay = () => {\n      setIsPlaying(true);\n    };\n    player.current.onpause = () => {\n      setIsPlaying(false);\n    };\n    player.current.ontimeupdate = updateSlider;\n  }, []);\n\n  useEffect(() => {\n    if (isRecording) {\n      setIsPlaying(false);\n      if (player.current && !player.current.paused) {\n        player.current.pause();\n      }\n    }\n  }, [isRecording]);\n\n  useEffect(() => {\n    if (editedAudio) {\n      const url = URL.createObjectURL(editedAudio);\n      player.current.src = url;\n    }\n  }, [editedAudio]);\n\n  useEffect(() => {\n    setIsPlaying(false);\n    player.current.pause();\n    setPlayheadPosition(0);\n    const blobStart = audio.size * (start * 0.001);\n    const blobEnd = audio.size * (end * 0.001);\n    if (zoomIn) {\n      const edited = audio.slice(blobStart, blobEnd, audio.type);\n      setEditedAudio(edited);\n    } else {\n      setEditedAudio(audio);\n    }\n  }, [zoomIn]);\n\n  const renderPlayButton = () => {\n    if (!isRecording && audio && !isPlaying) {\n      return (\n        <img\n          src=\"/images/play.svg\"\n          className=\"play-icon\"\n          onClick={() => player.current.play()}\n        />\n      );\n    } else if (!isRecording && audio) {\n      return (\n        <img\n          src=\"/images/pause.svg\"\n          className=\"play-icon\"\n          onClick={() => player.current.pause()}\n        />\n      );\n    }\n  };\n\n  const updateSlider = () => {\n    const position =\n      (player.current.currentTime / player.current.duration) * 1000;\n    if (!isNaN(position)) {\n      setPlayheadPosition(position);\n    }\n  };\n\n  const onSliderChange = (e) => {\n    const position = (e.target.value / 1000) * player.current.duration;\n    if (!isNaN(position)) {\n      player.current.currentTime = position;\n    }\n  };\n\n  const formatTime = (time) => {\n    let minutes =\n      time < 600 ? `0${Math.floor(time / 60)}` : Math.floor(time / 60);\n    let seconds =\n      time % 60 < 10 ? `0${Math.floor(time % 60)}` : Math.floor(time % 60);\n    return `${minutes}:${seconds}`;\n  };\n\n  const renderAudioTime = () => {\n    if (player.current) {\n      return formatTime(player.current.currentTime);\n    }\n  };\n\n  const onStartClick = () => {\n    const start = playheadPosition;\n    if (start < end) {\n      setStart(start);\n    } else {\n      setStart(start);\n      setEnd(start + 1);\n    }\n  };\n\n  const onEndClick = () => {\n    const end = playheadPosition;\n    if (end > start) {\n      setEnd(end);\n    } else {\n      setEnd(end);\n      setStart(end - 1);\n    }\n  };\n\n  const renderEditor = () => {\n    return (\n      <div className=\"editor-controls\">\n        <div onClick={onStartClick} className=\"editor-btn\">\n          Set start\n        </div>\n        <div onClick={onEndClick} className=\"editor-btn\">\n          Set end\n        </div>\n        <div>\n          <input\n            type=\"checkbox\"\n            onChange={() => setZoomIn(!zoomIn)}\n            value={zoomIn}\n          />\n          <label>Zoom</label>\n        </div>\n      </div>\n    );\n  };\n\n  const renderSelectSectionButton = () => {\n    if (zoomIn) {\n      return (\n        <div\n          onClick={() => addToSongList(editedAudio)}\n          className=\"select-section-btn\"\n        >\n          save zoomed section\n        </div>\n      );\n    }\n  };\n\n  return (\n    <>\n      <div className=\"playhead-controls\">\n        <div className=\"audio-controls\">\n          {renderPlayButton()}\n          {renderAudioTime()}\n        </div>\n        {renderSelectSectionButton()}\n        {renderEditor()}\n      </div>\n\n      <div className=\"waveform-display\">\n        <Waveform audio={editedAudio} isRecording={isRecording} />\n\n        {!zoomIn && (\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"1000\"\n            value={start}\n            className=\"playhead start-line\"\n            readOnly\n          />\n        )}\n\n        {!zoomIn && (\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"1000\"\n            value={end}\n            className=\"playhead end-line\"\n            readOnly\n          />\n        )}\n\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"1000\"\n          value={playheadPosition}\n          className=\"playhead\"\n          onInput={onSliderChange}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default Playhead;\n","import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport Playhead from './Playhead';\nimport greenhouse from '../../apis/greenhouse';\nimport AddRecording from './AddRecording';\n\nconst Editor = () => {\n  const location = useLocation();\n\n  const [audio, setAudio] = useState();\n  const [songList, setSongList] = useState([]);\n\n  useEffect(async () => {\n    const { bounce } = location.state;\n    const response = await greenhouse.get(`/audio/edit/${bounce.id}`, {\n      responseType: 'blob',\n    });\n    // const decoded = decode(response.data);\n    // const arrayBuffer = new Uint8Array(decoded);\n    const blob = new Blob([response.data], { type: 'audio/mpeg' });\n    setAudio(blob);\n  }, []);\n\n  const renderDetails = () => {\n    const { title, version, bounce } = location.state;\n    const date = new Date(bounce.date);\n    return (\n      <div className=\"editor-title\">\n        {title.title} {version.name} {date.getMonth()}/{date.getDate()}/\n        {date.getFullYear()}\n      </div>\n    );\n  };\n\n  const addToSongList = (song) => {\n    setSongList([...songList, song]);\n  };\n\n  const renderSongList = () => {\n    return songList.map((song, index) => {\n      const url = URL.createObjectURL(song);\n      return (\n        <div className=\"recording-section-item\" key={song.size}>\n          <h2>{index + 1}: </h2>\n          <audio controls src={url} />\n          <AddRecording recording={song} />\n        </div>\n      );\n    });\n  };\n\n  return (\n    <div className=\"editor\">\n      {renderDetails()}\n      {audio && (\n        <Playhead\n          audio={audio}\n          isRecording={false}\n          addToSongList={addToSongList}\n        />\n      )}\n      {renderSongList()}\n    </div>\n  );\n};\n\nexport default Editor;\n","import React, { useEffect } from 'react';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport Error from './layout/Error';\nimport Header from './layout/Header';\nimport User from './user/User';\nimport SignIn from './auth/SignIn';\nimport SignUp from './auth/SignUp';\nimport Home from './pages/Home';\nimport Help from './pages/Help';\nimport Recorder from './recording/Recorder';\nimport Editor from './recording/Editor';\nimport { fetchUser } from '../actions';\n\nimport history from '../history';\n\nconst App = ({ signedIn, fetchUser, error }) => {\n  useEffect(() => {\n    if (signedIn) {\n      fetchUser();\n    }\n  }, []);\n\n  const errClass = error ? 'error-margin' : '';\n\n  return (\n    <>\n      <Error />\n      <div className={`container ${errClass}`}>\n        <Router history={history}>\n          <Switch>\n            <Route path=\"/\" exact component={Home} />\n            <Route path=\"/signin\" exact component={SignIn} />;\n            <Route path=\"/signup\" exact component={SignUp} />;\n            <Route\n              path=\"/user\"\n              exact\n              render={(routeProps) => {\n                if (!signedIn) {\n                  history.push('/signin');\n                  return null;\n                }\n                return <User {...routeProps} />;\n              }}\n            />\n            <Route path=\"/help\" exact component={Help} />\n            <Route path=\"/:bandName/record\" exact component={Recorder} />\n            <Route path=\"/:bandName/edit\" component={Editor} />\n            <Route path=\"/:bandName\" component={Header} />\n          </Switch>\n        </Router>\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    signedIn: state.auth.isSignedIn,\n    error: state.error.error,\n  };\n};\n\nexport default connect(mapStateToProps, { fetchUser })(App);\n","import greenhouse from '../apis/greenhouse';\nimport { SIGN_IN } from './types';\nimport { errorHandler } from './errors';\nimport { signOut } from '.';\n\nexport const fetchUser = () => async (dispatch) => {\n  try {\n    const response = await greenhouse.get('/user');\n    if (response.data) {\n      dispatch({ type: SIGN_IN, payload: response.data });\n    } else {\n      dispatch(signOut());\n    }\n  } catch (err) {\n    dispatch(errorHandler(err));\n  }\n};\n","import { SIGN_IN, SIGN_OUT, CREATE_BAND } from '../actions/types';\n\nconst INITIAL_STATE = {\n    isSignedIn: false,\n    user: null\n};\n\nexport default (state = INITIAL_STATE, action) => {\n    switch (action.type) {\n        case SIGN_IN:\n            return { ...state, isSignedIn: true, user: action.payload };\n        case SIGN_OUT:\n            return { ...state, isSignedIn: false, user: null };\n        case CREATE_BAND:\n            const { user } = state;\n            user.bands.push(action.payload.id);\n            return { ...state, user };\n        default:\n            return state;  \n    } \n};\n","import { PLAY_AUDIO, PAUSE_AUDIO, QUEUE_SONGS, NEXT_SONG, DELETE_BOUNCE, CHANGE_VOLUME, INITIALIZE_AUDIO } from \"../actions/types\";\n\nconst initialState = {\n    play: false,\n    volume: 75,\n    currentSong: null\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case PLAY_AUDIO:\n            return { ...state, play: true, pause: false };\n        case PAUSE_AUDIO:\n            return { ...state, play: false, pause: true };\n        case QUEUE_SONGS:\n            const { song, parent } = action.payload;\n            return { ...state, currentSong: song, play: true, parent };\n        case NEXT_SONG:\n            return { ...state, currentSong: action.payload };\n        case DELETE_BOUNCE:\n            if (state.currentSong && action.payload.bounce.id === state.currentSong.audio) {\n                return { ...initialState };\n            } else {\n                return state;\n            }\n            // if (state.queue.length) {\n            //     state.queue = state.queue.filter(song => song.audio !== action.payload.bounce.id);\n            //     return { ...state };\n            // }\n        case CHANGE_VOLUME:\n            return { ...state, volume: action.payload };\n        case INITIALIZE_AUDIO:\n            return { ...initialState };\n        default:\n            return state;\n    }\n};","import {\n  FETCH_RECORDING,\n  CREATE_RECORDING,\n  CLEAR_RECORDINGS,\n  DELETE_RECORDING,\n  COMBINE_RECORDINGS,\n} from '../actions/types';\n\nconst initialState = { recordingList: [] };\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case FETCH_RECORDING:\n      const thisList = [...state.recordingList];\n      thisList[action.payload.index] = action.payload.id;\n      return { ...state, recordingList: thisList };\n    case CREATE_RECORDING:\n      const newList = [...state.recordingList, action.payload];\n      return { ...state, recordingList: newList };\n    case CLEAR_RECORDINGS:\n      return { ...initialState };\n    case DELETE_RECORDING:\n      const editedList = state.recordingList.filter(\n        (id) => id !== action.payload\n      );\n      return { ...state, recordingList: editedList };\n    case COMBINE_RECORDINGS:\n      return { ...state, combinedRecording: action.payload };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from 'redux';\nimport { reducer as formReducer } from 'redux-form';\nimport authReducer from './authReducer';\nimport tierReducer from './tierReducer';\nimport titleReducer from './titleReducer';\nimport versionReducer from './versionReducer';\nimport bounceReducer from './bounceReducer';\nimport playlistReducer from './playlistReducer';\nimport playlistSongReducer from './playlistSongReducer';\nimport bandReducer from './bandReducer';\nimport errorReducer from './errorReducer';\nimport audioReducer from './audioReducer';\nimport recordingReducer from './recordingReducer';\nimport { FETCH_BAND } from '../actions/types';\n\nconst appReducer = combineReducers({\n  form: formReducer,\n  auth: authReducer,\n  tiers: tierReducer,\n  titles: titleReducer,\n  versions: versionReducer,\n  bounces: bounceReducer,\n  playlists: playlistReducer,\n  playlistSongs: playlistSongReducer,\n  bands: bandReducer,\n  error: errorReducer,\n  audio: audioReducer,\n  recordings: recordingReducer,\n});\n\n// clear the store if we are loading a new band's data\n\nexport default (state, action) => {\n  if (\n    action.type === FETCH_BAND &&\n    action.payload !== state.bands.currentBand\n  ) {\n    const clearedState = { auth: state.auth };\n    return appReducer(clearedState, action);\n  }\n  return appReducer(state, action);\n};\n","import { FETCH_TIERS, CREATE_TIER, EDIT_TIER, DELETE_TIER, CREATE_TITLE, EDIT_TITLE, DELETE_TITLE, ORDER_TIER } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_TIERS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_TIER:\n            return { ...state, [action.payload.id]: action.payload };\n        case EDIT_TIER:\n            const oldPosition = state[action.payload.id]['position'];\n            const newPosition = action.payload.position;\n            let changedPositions = {};\n            if (oldPosition > newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position >= newPosition && item.position < oldPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos + 1};\n                    }\n                }\n            }\n            if (oldPosition < newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position > oldPosition && item.position <= newPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos - 1};\n                    }\n                }\n            }\n            return { ...state, [action.payload.id]: action.payload, ...changedPositions };\n        case DELETE_TIER:\n            const changePosition = Object.values(_.omit(state, state.currentBand)).filter(t => t.position > action.payload.position);\n            changePosition.forEach((tier) => {\n                tier.position = tier.position - 1;\n            });\n            delete state[action.payload.id];\n            return { ...state, ..._.mapKeys(changePosition, 'id') };\n        case ORDER_TIER:\n            state[action.payload.tier].orderBy = action.payload.orderBy;\n            return { ...state };\n        case CREATE_TITLE:\n            const addToTier = state[action.payload.tier];\n            addToTier.trackList.push(action.payload.title.id);\n            return { ...state, [addToTier.id]: addToTier };\n        case EDIT_TITLE:\n            if (action.payload.tier.new) {\n                const newTier = state[action.payload.tier.new];\n                newTier.trackList.push(action.payload.title.id);\n                const oldTier = state[action.payload.tier.old];\n                oldTier.trackList = oldTier.trackList.filter(id => id !== action.payload.title.id);\n                return { ...state, [newTier.id]: newTier, [oldTier.id]: oldTier };\n            } else {\n                return state;\n            }\n        case DELETE_TITLE:\n            const deleteFromTier = state[action.payload.tier];\n            if (deleteFromTier) {\n                const newTrackList = deleteFromTier.trackList.filter(id => id !== action.payload.title.id);\n                deleteFromTier.trackList = newTrackList;\n                return { ...state, [deleteFromTier.id]: deleteFromTier };\n            }\n        default:\n            return state;\n\n    }\n\n};","import { FETCH_TITLES, CREATE_TITLE, EDIT_TITLE, DELETE_TITLE, SELECT_VERSION, SELECT_BOUNCE, CREATE_VERSION, DELETE_VERSION } from '../actions/types';\nimport _ from 'lodash';\n\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_TITLES:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_TITLE:\n            return { ...state, [action.payload.title.id]: action.payload.title };\n        case EDIT_TITLE:\n            const oldTitle = state[action.payload.title.id];\n            const newTitle = action.payload.title;\n            newTitle.selectedVersion = oldTitle.selectedVersion;\n            newTitle.selectedBounce = oldTitle.selectedBounce;\n            return { ...state, [newTitle.id]: newTitle };\n        case DELETE_TITLE:\n            delete state[action.payload.title.id];\n            return { ...state };\n        case SELECT_VERSION:\n            const versionTitle = state[action.payload.titleId];\n            versionTitle.selectedVersion = action.payload.version;\n            return { ...state, [versionTitle.id]: { ...versionTitle } };\n        case SELECT_BOUNCE:\n            const bounceTitle = state[action.payload.titleId];\n            bounceTitle.selectedBounce = action.payload.bounce;\n            return { ...state, [bounceTitle.id]: { ...bounceTitle } }\n        case CREATE_VERSION:\n            const addToTitle = state[action.payload.title];\n            addToTitle.versions.push(action.payload.version.id);\n            addToTitle.selectedVersion = action.payload.version;\n            return { ...state, [addToTitle.id]: addToTitle};\n        case DELETE_VERSION:\n            const deleteFromTitle = state[action.payload.title];\n            if (deleteFromTitle) {\n                const newVersionList = deleteFromTitle.versions.filter(id => id !== action.payload.version.id);\n                deleteFromTitle.versions = newVersionList;\n                return { ...state, [deleteFromTitle.id]: deleteFromTitle };\n            }   \n        default:\n            return state;\n\n    }\n\n};","import { FETCH_VERSIONS, CREATE_VERSION, EDIT_VERSION, DELETE_VERSION, CREATE_BOUNCE, DELETE_BOUNCE } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_VERSIONS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_VERSION:\n            return { ...state, [action.payload.version.id]: action.payload.version };\n        case EDIT_VERSION:\n            return { ...state, [action.payload.version.id]: action.payload.version };\n        case DELETE_VERSION:\n            delete state[action.payload.version.id];\n            return { ...state };\n        case CREATE_BOUNCE:\n            const addToVersion = state[action.payload.version];\n            addToVersion.bounces.push(action.payload.bounce.id);\n            return { ...state, [addToVersion.id]: addToVersion};\n        case DELETE_BOUNCE:\n            const deleteFromVersion = state[action.payload.version];\n            if (deleteFromVersion) {\n                const newBounceList = deleteFromVersion.bounces.filter(id => id !== action.payload.bounce.id);\n                deleteFromVersion.bounces = newBounceList;\n                return { ...state, [deleteFromVersion.id]: deleteFromVersion };\n            }\n        default:\n            return state;\n\n    }\n\n};","import {\n  FETCH_BOUNCES,\n  CREATE_BOUNCE,\n  EDIT_BOUNCE,\n  DELETE_BOUNCE,\n} from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case FETCH_BOUNCES:\n      return { ...state, ..._.mapKeys(action.payload, 'id') };\n    case CREATE_BOUNCE:\n      return { ...state, [action.payload.bounce.id]: action.payload.bounce };\n    case EDIT_BOUNCE:\n      return { ...state, [action.payload.id]: action.payload };\n    case DELETE_BOUNCE:\n      delete state[action.payload.bounce.id];\n      return { ...state };\n    default:\n      return state;\n  }\n};\n","import { FETCH_PLAYLISTS, FETCH_PLAYLIST, CREATE_PLAYLIST, EDIT_PLAYLIST, DELETE_PLAYLIST, CREATE_PLAYLISTSONG, DELETE_PLAYLISTSONG } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_PLAYLISTS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case FETCH_PLAYLIST:\n            return { ...state, [action.payload.id]: action.payload };\n        case CREATE_PLAYLIST:\n            return { ...state, [action.payload.id]: action.payload };\n        case EDIT_PLAYLIST:\n            const oldPosition = state[action.payload.id]['position'];\n            const newPosition = action.payload.position;\n            let changedPositions = {};\n            if (oldPosition > newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position >= newPosition && item.position < oldPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos + 1};\n                    }\n                }\n            }\n            if (oldPosition < newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position > oldPosition && item.position <= newPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos - 1};\n                    }\n                }\n            }\n            return { ...state, [action.payload.id]: action.payload, ...changedPositions };\n        case DELETE_PLAYLIST:\n            delete state.currentBand;\n            const changePosition = Object.values(state).filter(p => p.position > action.payload.position);\n            changePosition.forEach((playlist) => {\n                playlist.position = playlist.position - 1;\n            });\n            delete state[action.payload.id]\n            return { ...state, ..._.mapKeys(changePosition, 'id')};\n        case CREATE_PLAYLISTSONG:\n            const addToPlaylist = state[action.payload.playlist];\n            addToPlaylist.songs.push(action.payload.playlistsong.id);\n            return { ...state, [addToPlaylist.id]: addToPlaylist};\n        case DELETE_PLAYLISTSONG:\n            const deleteFromPlaylist = state[action.payload.playlist];\n            if (deleteFromPlaylist) {\n                const newSongList = deleteFromPlaylist.songs.filter(id => id !== action.payload.playlistsong.id);\n                deleteFromPlaylist.songs = newSongList;\n                return { ...state, [deleteFromPlaylist.id]: deleteFromPlaylist };\n            }\n        default:\n            return state;\n\n    }\n\n};","import { FETCH_PLAYLISTSONGS, CREATE_PLAYLISTSONG, EDIT_PLAYLISTSONG, DELETE_PLAYLISTSONG, DELETE_VERSION, DELETE_BOUNCE } from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n\n    switch (action.type) {\n\n        case FETCH_PLAYLISTSONGS:\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\n        case CREATE_PLAYLISTSONG:\n            return { ...state, [action.payload.playlistsong.id]: action.payload.playlistsong };\n        case EDIT_PLAYLISTSONG:\n            const oldPosition = state[action.payload.playlistsong.id]['position'];\n            const newPosition = action.payload.playlistsong.position;\n            let changedPositions = {};\n            \n            if (oldPosition > newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position >= newPosition && item.position < oldPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos + 1};\n                    }\n                }\n            }\n            if (oldPosition < newPosition) {\n                for (let item of Object.values(state)) {\n                    if (item.position > oldPosition && item.position <= newPosition) {\n                        const pos = item.position;\n                        changedPositions[item.id] = { ...item, position: pos - 1};\n                    }\n                }\n            }\n            \n            return { ...state, [action.payload.playlistsong.id]: action.payload.playlistsong, ...changedPositions };\n        case DELETE_PLAYLISTSONG:\n            const changePosition = Object.values(state).filter(p => p.position > action.payload.playlistsong.position);\n            changePosition.forEach((song) => {\n                song.position = song.position - 1;\n            });\n            delete state[action.payload.playlistsong.id];\n            return { ...state };\n        case DELETE_VERSION:\n            for (const id in state) {\n                if (state[id].version === action.payload.version.id) {\n                    state[id].version = null;\n                    state[id].bounce = null;\n                }\n            }\n            return { ...state };\n        case DELETE_BOUNCE:\n            for (const id in state) {\n                if (state[id].bounce === action.payload.bounce.id) {\n                    state[id].bounce = null;\n                }\n            }\n            return { ...state };\n        default:\n            return state;\n\n    }\n\n};","import {\n  FETCH_BAND,\n  FETCH_BANDS,\n  EDIT_BAND,\n  DELETE_BAND,\n  CREATE_BAND,\n  CREATE_TIER,\n  DELETE_TIER,\n  CREATE_PLAYLIST,\n  DELETE_PLAYLIST,\n  SIGN_OUT,\n  UPLOAD_STARTED,\n  CREATE_BOUNCE,\n  UPLOAD_FAILURE,\n} from '../actions/types';\nimport _ from 'lodash';\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case FETCH_BAND:\n      return {\n        ...state,\n        [action.payload.id]: action.payload,\n        currentBand: action.payload,\n      };\n    case FETCH_BANDS:\n      return { ...state, ..._.mapKeys(action.payload, 'id') };\n    case CREATE_BAND:\n      return { ...state, [action.payload.id]: action.payload };\n    case EDIT_BAND:\n      return { ...state, [action.payload.id]: action.payload };\n    case DELETE_BAND:\n      delete state[action.payload.id];\n      return { ...state };\n    case CREATE_TIER:\n      const { currentBand } = state;\n      currentBand.tiers.push(action.payload.id);\n      return { ...state, [currentBand.id]: currentBand, currentBand };\n    case DELETE_TIER:\n      const band = state.currentBand;\n      const newTiers = band.tiers.filter((id) => id !== action.payload.id);\n      band.tiers = newTiers;\n      return { ...state, [band.id]: band, currentBand: band };\n    case CREATE_PLAYLIST:\n      const currentBandP = state.currentBand;\n      currentBandP.playlists.push(action.payload.id);\n      return {\n        ...state,\n        [currentBandP.id]: currentBandP,\n        currentBand: currentBandP,\n      };\n    case DELETE_PLAYLIST:\n      const bandP = state.currentBand;\n      const newPlaylists = bandP.playlists.filter(\n        (id) => id !== action.payload.id\n      );\n      bandP.playlists = newPlaylists;\n      return { ...state, [bandP.id]: bandP, currentBand: bandP };\n    case SIGN_OUT:\n      return _.omit(state, state.currentBand);\n    case UPLOAD_STARTED:\n      return { ...state, uploadStarted: true };\n    case UPLOAD_FAILURE:\n      return { ...state, uploadStarted: false };\n    case CREATE_BOUNCE:\n      return { ...state, uploadStarted: false };\n    default:\n      return state;\n  }\n};\n","import { ERROR } from '../actions/types';\n\n\nexport default (state = {}, action) => {\n    switch (action.type) {\n        case ERROR:\n            return { error: action.payload }\n        default:\n            return state;\n    }\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport reduxThunk from 'redux-thunk';\n\nimport App from './components/App';\nimport reducers from './reducers';\n\nconst initialState = {};\n\nconst token = localStorage.getItem('token');\n\nif (token) {\n  initialState.auth = { isSignedIn: true };\n}\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  initialState,\n  composeEnhancers(applyMiddleware(reduxThunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.querySelector('#root')\n);\n"],"sourceRoot":""}